var mF=Object.defineProperty;var gF=(t,e,n)=>e in t?mF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var tn=(t,e,n)=>gF(t,typeof e!="symbol"?e+"":e,n);function UO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yF(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var BO={exports:{}},M0={},qO={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm=Symbol.for("react.element"),vF=Symbol.for("react.portal"),xF=Symbol.for("react.fragment"),bF=Symbol.for("react.strict_mode"),wF=Symbol.for("react.profiler"),_F=Symbol.for("react.provider"),SF=Symbol.for("react.context"),AF=Symbol.for("react.forward_ref"),EF=Symbol.for("react.suspense"),NF=Symbol.for("react.memo"),TF=Symbol.for("react.lazy"),FE=Symbol.iterator;function PF(t){return t===null||typeof t!="object"?null:(t=FE&&t[FE]||t["@@iterator"],typeof t=="function"?t:null)}var VO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zO=Object.assign,HO={};function xf(t,e,n){this.props=t,this.context=e,this.refs=HO,this.updater=n||VO}xf.prototype.isReactComponent={};xf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GO(){}GO.prototype=xf.prototype;function A5(t,e,n){this.props=t,this.context=e,this.refs=HO,this.updater=n||VO}var E5=A5.prototype=new GO;E5.constructor=A5;zO(E5,xf.prototype);E5.isPureReactComponent=!0;var UE=Array.isArray,WO=Object.prototype.hasOwnProperty,N5={current:null},KO={key:!0,ref:!0,__self:!0,__source:!0};function JO(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)WO.call(e,r)&&!KO.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Nm,type:t,key:a,ref:o,props:i,_owner:N5.current}}function CF(t,e){return{$$typeof:Nm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function T5(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nm}function kF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var BE=/\/+/g;function Mx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kF(""+t.key):e.toString(36)}function Sy(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nm:case vF:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Mx(o,0):r,UE(i)?(n="",t!=null&&(n=t.replace(BE,"$&/")+"/"),Sy(i,e,n,"",function(u){return u})):i!=null&&(T5(i)&&(i=CF(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(BE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",UE(t))for(var s=0;s<t.length;s++){a=t[s];var l=r+Mx(a,s);o+=Sy(a,e,n,l,i)}else if(l=PF(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=r+Mx(a,s++),o+=Sy(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pg(t,e,n){if(t==null)return t;var r=[],i=0;return Sy(t,r,"","",function(a){return e.call(n,a,i++)}),r}function IF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mi={current:null},Ay={transition:null},OF={ReactCurrentDispatcher:mi,ReactCurrentBatchConfig:Ay,ReactCurrentOwner:N5};function YO(){throw Error("act(...) is not supported in production builds of React.")}Ut.Children={map:Pg,forEach:function(t,e,n){Pg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pg(t,function(){e++}),e},toArray:function(t){return Pg(t,function(e){return e})||[]},only:function(t){if(!T5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ut.Component=xf;Ut.Fragment=xF;Ut.Profiler=wF;Ut.PureComponent=A5;Ut.StrictMode=bF;Ut.Suspense=EF;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OF;Ut.act=YO;Ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=zO({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=N5.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)WO.call(e,l)&&!KO.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Nm,type:t.type,key:i,ref:a,props:r,_owner:o}};Ut.createContext=function(t){return t={$$typeof:SF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_F,_context:t},t.Consumer=t};Ut.createElement=JO;Ut.createFactory=function(t){var e=JO.bind(null,t);return e.type=t,e};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(t){return{$$typeof:AF,render:t}};Ut.isValidElement=T5;Ut.lazy=function(t){return{$$typeof:TF,_payload:{_status:-1,_result:t},_init:IF}};Ut.memo=function(t,e){return{$$typeof:NF,type:t,compare:e===void 0?null:e}};Ut.startTransition=function(t){var e=Ay.transition;Ay.transition={};try{t()}finally{Ay.transition=e}};Ut.unstable_act=YO;Ut.useCallback=function(t,e){return mi.current.useCallback(t,e)};Ut.useContext=function(t){return mi.current.useContext(t)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(t){return mi.current.useDeferredValue(t)};Ut.useEffect=function(t,e){return mi.current.useEffect(t,e)};Ut.useId=function(){return mi.current.useId()};Ut.useImperativeHandle=function(t,e,n){return mi.current.useImperativeHandle(t,e,n)};Ut.useInsertionEffect=function(t,e){return mi.current.useInsertionEffect(t,e)};Ut.useLayoutEffect=function(t,e){return mi.current.useLayoutEffect(t,e)};Ut.useMemo=function(t,e){return mi.current.useMemo(t,e)};Ut.useReducer=function(t,e,n){return mi.current.useReducer(t,e,n)};Ut.useRef=function(t){return mi.current.useRef(t)};Ut.useState=function(t){return mi.current.useState(t)};Ut.useSyncExternalStore=function(t,e,n){return mi.current.useSyncExternalStore(t,e,n)};Ut.useTransition=function(){return mi.current.useTransition()};Ut.version="18.3.1";qO.exports=Ut;var X=qO.exports;const ce=dn(X),jF=UO({__proto__:null,default:ce},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RF=X,LF=Symbol.for("react.element"),MF=Symbol.for("react.fragment"),DF=Object.prototype.hasOwnProperty,$F=RF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FF={key:!0,ref:!0,__self:!0,__source:!0};function XO(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)DF.call(e,r)&&!FF.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:LF,type:t,key:a,ref:o,props:i,_owner:$F.current}}M0.Fragment=MF;M0.jsx=XO;M0.jsxs=XO;BO.exports=M0;var f=BO.exports,gw={},ZO={exports:{}},ea={},QO={exports:{}},e6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Q){var le=U.length;U.push(Q);e:for(;0<le;){var oe=le-1>>>1,j=U[oe];if(0<i(j,Q))U[oe]=Q,U[le]=j,le=oe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],le=U.pop();if(le!==Q){U[0]=le;e:for(var oe=0,j=U.length,z=j>>>1;oe<z;){var K=2*(oe+1)-1,re=U[K],ae=K+1,fe=U[ae];if(0>i(re,le))ae<j&&0>i(fe,re)?(U[oe]=fe,U[ae]=le,oe=ae):(U[oe]=re,U[K]=le,oe=K);else if(ae<j&&0>i(fe,le))U[oe]=fe,U[ae]=le,oe=ae;else break e}}return Q}function i(U,Q){var le=U.sortIndex-Q.sortIndex;return le!==0?le:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,p=3,h=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=U)r(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function N(U){if(y=!1,A(U),!v)if(n(l)!==null)v=!0,Y(E);else{var Q=n(u);Q!==null&&W(N,Q.startTime-U)}}function E(U,Q){v=!1,y&&(y=!1,b(O),O=-1),h=!0;var le=p;try{for(A(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||U&&!C());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,p=d.priorityLevel;var j=oe(d.expirationTime<=Q);Q=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&r(l),A(Q)}else r(l);d=n(l)}if(d!==null)var z=!0;else{var K=n(u);K!==null&&W(N,K.startTime-Q),z=!1}return z}finally{d=null,p=le,h=!1}}var P=!1,I=null,O=-1,R=5,D=-1;function C(){return!(t.unstable_now()-D<R)}function L(){if(I!==null){var U=t.unstable_now();D=U;var Q=!0;try{Q=I(!0,U)}finally{Q?F():(P=!1,I=null)}}else P=!1}var F;if(typeof _=="function")F=function(){_(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,V=$.port2;$.port1.onmessage=L,F=function(){V.postMessage(null)}}else F=function(){w(L,0)};function Y(U){I=U,P||(P=!0,F())}function W(U,Q){O=w(function(){U(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,Y(E))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var le=p;p=Q;try{return U()}finally{p=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var le=p;p=U;try{return Q()}finally{p=le}},t.unstable_scheduleCallback=function(U,Q,le){var oe=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?oe+le:oe):le=oe,U){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=le+j,U={id:c++,callback:Q,priorityLevel:U,startTime:le,expirationTime:j,sortIndex:-1},le>oe?(U.sortIndex=le,e(u,U),n(l)===null&&U===n(u)&&(y?(b(O),O=-1):y=!0,W(N,le-oe))):(U.sortIndex=j,e(l,U),v||h||(v=!0,Y(E))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var Q=p;return function(){var le=p;p=Q;try{return U.apply(this,arguments)}finally{p=le}}}})(e6);QO.exports=e6;var UF=QO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BF=X,Zi=UF;function $e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t6=new Set,vp={};function oc(t,e){jd(t,e),jd(t+"Capture",e)}function jd(t,e){for(vp[t]=e,t=0;t<e.length;t++)t6.add(e[t])}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yw=Object.prototype.hasOwnProperty,qF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qE={},VE={};function VF(t){return yw.call(VE,t)?!0:yw.call(qE,t)?!1:qF.test(t)?VE[t]=!0:(qE[t]=!0,!1)}function zF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HF(t,e,n,r){if(e===null||typeof e>"u"||zF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gi(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var zr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zr[t]=new gi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zr[e]=new gi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zr[t]=new gi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zr[t]=new gi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zr[t]=new gi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zr[t]=new gi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zr[t]=new gi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zr[t]=new gi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zr[t]=new gi(t,5,!1,t.toLowerCase(),null,!1,!1)});var P5=/[\-:]([a-z])/g;function C5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(P5,C5);zr[e]=new gi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(P5,C5);zr[e]=new gi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(P5,C5);zr[e]=new gi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zr[t]=new gi(t,1,!1,t.toLowerCase(),null,!1,!1)});zr.xlinkHref=new gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zr[t]=new gi(t,1,!1,t.toLowerCase(),null,!0,!0)});function k5(t,e,n,r){var i=zr.hasOwnProperty(e)?zr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HF(e,n,i,r)&&(n=null),r||i===null?VF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Es=BF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cg=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Xc=Symbol.for("react.fragment"),I5=Symbol.for("react.strict_mode"),vw=Symbol.for("react.profiler"),n6=Symbol.for("react.provider"),r6=Symbol.for("react.context"),O5=Symbol.for("react.forward_ref"),xw=Symbol.for("react.suspense"),bw=Symbol.for("react.suspense_list"),j5=Symbol.for("react.memo"),nl=Symbol.for("react.lazy"),i6=Symbol.for("react.offscreen"),zE=Symbol.iterator;function wh(t){return t===null||typeof t!="object"?null:(t=zE&&t[zE]||t["@@iterator"],typeof t=="function"?t:null)}var Bn=Object.assign,Dx;function Vh(t){if(Dx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dx=e&&e[1]||""}return`
`+Dx+t}var $x=!1;function Fx(t,e){if(!t||$x)return"";$x=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{$x=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vh(t):""}function GF(t){switch(t.tag){case 5:return Vh(t.type);case 16:return Vh("Lazy");case 13:return Vh("Suspense");case 19:return Vh("SuspenseList");case 0:case 2:case 15:return t=Fx(t.type,!1),t;case 11:return t=Fx(t.type.render,!1),t;case 1:return t=Fx(t.type,!0),t;default:return""}}function ww(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xc:return"Fragment";case Yc:return"Portal";case vw:return"Profiler";case I5:return"StrictMode";case xw:return"Suspense";case bw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r6:return(t.displayName||"Context")+".Consumer";case n6:return(t._context.displayName||"Context")+".Provider";case O5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j5:return e=t.displayName||null,e!==null?e:ww(t.type)||"Memo";case nl:e=t._payload,t=t._init;try{return ww(t(e))}catch{}}return null}function WF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ww(e);case 8:return e===I5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function a6(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KF(t){var e=a6(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kg(t){t._valueTracker||(t._valueTracker=KF(t))}function o6(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=a6(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _w(t,e){var n=e.checked;return Bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function HE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s6(t,e){e=e.checked,e!=null&&k5(t,"checked",e,!1)}function Sw(t,e){s6(t,e);var n=Tl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Aw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Aw(t,e.type,Tl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function GE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Aw(t,e,n){(e!=="number"||zy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zh=Array.isArray;function md(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ew(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($e(91));return Bn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function WE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($e(92));if(zh(n)){if(1<n.length)throw Error($e(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tl(n)}}function l6(t,e){var n=Tl(e.value),r=Tl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function KE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u6(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ig,c6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ig=Ig||document.createElement("div"),Ig.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ig.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JF=["Webkit","ms","Moz","O"];Object.keys(Yh).forEach(function(t){JF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yh[e]=Yh[t]})});function d6(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yh.hasOwnProperty(t)&&Yh[t]?(""+e).trim():e+"px"}function f6(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=d6(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var YF=Bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tw(t,e){if(e){if(YF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($e(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($e(61))}if(e.style!=null&&typeof e.style!="object")throw Error($e(62))}}function Pw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cw=null;function R5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kw=null,gd=null,yd=null;function JE(t){if(t=Cm(t)){if(typeof kw!="function")throw Error($e(280));var e=t.stateNode;e&&(e=B0(e),kw(t.stateNode,t.type,e))}}function h6(t){gd?yd?yd.push(t):yd=[t]:gd=t}function p6(){if(gd){var t=gd,e=yd;if(yd=gd=null,JE(t),e)for(t=0;t<e.length;t++)JE(e[t])}}function m6(t,e){return t(e)}function g6(){}var Ux=!1;function y6(t,e,n){if(Ux)return t(e,n);Ux=!0;try{return m6(t,e,n)}finally{Ux=!1,(gd!==null||yd!==null)&&(g6(),p6())}}function bp(t,e){var n=t.stateNode;if(n===null)return null;var r=B0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($e(231,e,typeof n));return n}var Iw=!1;if(gs)try{var _h={};Object.defineProperty(_h,"passive",{get:function(){Iw=!0}}),window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{Iw=!1}function XF(t,e,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Xh=!1,Hy=null,Gy=!1,Ow=null,ZF={onError:function(t){Xh=!0,Hy=t}};function QF(t,e,n,r,i,a,o,s,l){Xh=!1,Hy=null,XF.apply(ZF,arguments)}function eU(t,e,n,r,i,a,o,s,l){if(QF.apply(this,arguments),Xh){if(Xh){var u=Hy;Xh=!1,Hy=null}else throw Error($e(198));Gy||(Gy=!0,Ow=u)}}function sc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function v6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function YE(t){if(sc(t)!==t)throw Error($e(188))}function tU(t){var e=t.alternate;if(!e){if(e=sc(t),e===null)throw Error($e(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return YE(i),t;if(a===r)return YE(i),e;a=a.sibling}throw Error($e(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error($e(189))}}if(n.alternate!==r)throw Error($e(190))}if(n.tag!==3)throw Error($e(188));return n.stateNode.current===n?t:e}function x6(t){return t=tU(t),t!==null?b6(t):null}function b6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b6(t);if(e!==null)return e;t=t.sibling}return null}var w6=Zi.unstable_scheduleCallback,XE=Zi.unstable_cancelCallback,nU=Zi.unstable_shouldYield,rU=Zi.unstable_requestPaint,er=Zi.unstable_now,iU=Zi.unstable_getCurrentPriorityLevel,L5=Zi.unstable_ImmediatePriority,_6=Zi.unstable_UserBlockingPriority,Wy=Zi.unstable_NormalPriority,aU=Zi.unstable_LowPriority,S6=Zi.unstable_IdlePriority,D0=null,So=null;function oU(t){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(D0,t,void 0,(t.current.flags&128)===128)}catch{}}var Xa=Math.clz32?Math.clz32:uU,sU=Math.log,lU=Math.LN2;function uU(t){return t>>>=0,t===0?32:31-(sU(t)/lU|0)|0}var Og=64,jg=4194304;function Hh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ky(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=Hh(s):(a&=o,a!==0&&(r=Hh(a)))}else o=n&~i,o!==0?r=Hh(o):a!==0&&(r=Hh(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xa(e),i=1<<n,r|=t[n],e&=~i;return r}function cU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dU(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Xa(a),s=1<<o,l=i[o];l===-1?(!(s&n)||s&r)&&(i[o]=cU(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function jw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function A6(){var t=Og;return Og<<=1,!(Og&4194240)&&(Og=64),t}function Bx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xa(e),t[e]=n}function fU(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xa(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function M5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xa(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var cn=0;function E6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var N6,D5,T6,P6,C6,Rw=!1,Rg=[],gl=null,yl=null,vl=null,wp=new Map,_p=new Map,ol=[],hU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZE(t,e){switch(t){case"focusin":case"focusout":gl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":vl=null;break;case"pointerover":case"pointerout":wp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(e.pointerId)}}function Sh(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Cm(e),e!==null&&D5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function pU(t,e,n,r,i){switch(e){case"focusin":return gl=Sh(gl,t,e,n,r,i),!0;case"dragenter":return yl=Sh(yl,t,e,n,r,i),!0;case"mouseover":return vl=Sh(vl,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return wp.set(a,Sh(wp.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,_p.set(a,Sh(_p.get(a)||null,t,e,n,r,i)),!0}return!1}function k6(t){var e=Ou(t.target);if(e!==null){var n=sc(e);if(n!==null){if(e=n.tag,e===13){if(e=v6(n),e!==null){t.blockedOn=e,C6(t.priority,function(){T6(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ey(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cw=r,n.target.dispatchEvent(r),Cw=null}else return e=Cm(n),e!==null&&D5(e),t.blockedOn=n,!1;e.shift()}return!0}function QE(t,e,n){Ey(t)&&n.delete(e)}function mU(){Rw=!1,gl!==null&&Ey(gl)&&(gl=null),yl!==null&&Ey(yl)&&(yl=null),vl!==null&&Ey(vl)&&(vl=null),wp.forEach(QE),_p.forEach(QE)}function Ah(t,e){t.blockedOn===e&&(t.blockedOn=null,Rw||(Rw=!0,Zi.unstable_scheduleCallback(Zi.unstable_NormalPriority,mU)))}function Sp(t){function e(i){return Ah(i,t)}if(0<Rg.length){Ah(Rg[0],t);for(var n=1;n<Rg.length;n++){var r=Rg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gl!==null&&Ah(gl,t),yl!==null&&Ah(yl,t),vl!==null&&Ah(vl,t),wp.forEach(e),_p.forEach(e),n=0;n<ol.length;n++)r=ol[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ol.length&&(n=ol[0],n.blockedOn===null);)k6(n),n.blockedOn===null&&ol.shift()}var vd=Es.ReactCurrentBatchConfig,Jy=!0;function gU(t,e,n,r){var i=cn,a=vd.transition;vd.transition=null;try{cn=1,$5(t,e,n,r)}finally{cn=i,vd.transition=a}}function yU(t,e,n,r){var i=cn,a=vd.transition;vd.transition=null;try{cn=4,$5(t,e,n,r)}finally{cn=i,vd.transition=a}}function $5(t,e,n,r){if(Jy){var i=Lw(t,e,n,r);if(i===null)Xx(t,e,r,Yy,n),ZE(t,r);else if(pU(i,t,e,n,r))r.stopPropagation();else if(ZE(t,r),e&4&&-1<hU.indexOf(t)){for(;i!==null;){var a=Cm(i);if(a!==null&&N6(a),a=Lw(t,e,n,r),a===null&&Xx(t,e,r,Yy,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Xx(t,e,r,null,n)}}var Yy=null;function Lw(t,e,n,r){if(Yy=null,t=R5(r),t=Ou(t),t!==null)if(e=sc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=v6(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yy=t,null}function I6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iU()){case L5:return 1;case _6:return 4;case Wy:case aU:return 16;case S6:return 536870912;default:return 16}default:return 16}}var cl=null,F5=null,Ny=null;function O6(){if(Ny)return Ny;var t,e=F5,n=e.length,r,i="value"in cl?cl.value:cl.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Ny=i.slice(t,1<r?1-r:void 0)}function Ty(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lg(){return!0}function eN(){return!1}function ta(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Lg:eN,this.isPropagationStopped=eN,this}return Bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lg)},persist:function(){},isPersistent:Lg}),e}var bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U5=ta(bf),Pm=Bn({},bf,{view:0,detail:0}),vU=ta(Pm),qx,Vx,Eh,$0=Bn({},Pm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eh&&(Eh&&t.type==="mousemove"?(qx=t.screenX-Eh.screenX,Vx=t.screenY-Eh.screenY):Vx=qx=0,Eh=t),qx)},movementY:function(t){return"movementY"in t?t.movementY:Vx}}),tN=ta($0),xU=Bn({},$0,{dataTransfer:0}),bU=ta(xU),wU=Bn({},Pm,{relatedTarget:0}),zx=ta(wU),_U=Bn({},bf,{animationName:0,elapsedTime:0,pseudoElement:0}),SU=ta(_U),AU=Bn({},bf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EU=ta(AU),NU=Bn({},bf,{data:0}),nN=ta(NU),TU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CU[t])?!!e[t]:!1}function B5(){return kU}var IU=Bn({},Pm,{key:function(t){if(t.key){var e=TU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ty(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B5,charCode:function(t){return t.type==="keypress"?Ty(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ty(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),OU=ta(IU),jU=Bn({},$0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rN=ta(jU),RU=Bn({},Pm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B5}),LU=ta(RU),MU=Bn({},bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),DU=ta(MU),$U=Bn({},$0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FU=ta($U),UU=[9,13,27,32],q5=gs&&"CompositionEvent"in window,Zh=null;gs&&"documentMode"in document&&(Zh=document.documentMode);var BU=gs&&"TextEvent"in window&&!Zh,j6=gs&&(!q5||Zh&&8<Zh&&11>=Zh),iN=" ",aN=!1;function R6(t,e){switch(t){case"keyup":return UU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zc=!1;function qU(t,e){switch(t){case"compositionend":return L6(e);case"keypress":return e.which!==32?null:(aN=!0,iN);case"textInput":return t=e.data,t===iN&&aN?null:t;default:return null}}function VU(t,e){if(Zc)return t==="compositionend"||!q5&&R6(t,e)?(t=O6(),Ny=F5=cl=null,Zc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j6&&e.locale!=="ko"?null:e.data;default:return null}}var zU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zU[t.type]:e==="textarea"}function M6(t,e,n,r){h6(r),e=Xy(e,"onChange"),0<e.length&&(n=new U5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qh=null,Ap=null;function HU(t){W6(t,0)}function F0(t){var e=td(t);if(o6(e))return t}function GU(t,e){if(t==="change")return e}var D6=!1;if(gs){var Hx;if(gs){var Gx="oninput"in document;if(!Gx){var sN=document.createElement("div");sN.setAttribute("oninput","return;"),Gx=typeof sN.oninput=="function"}Hx=Gx}else Hx=!1;D6=Hx&&(!document.documentMode||9<document.documentMode)}function lN(){Qh&&(Qh.detachEvent("onpropertychange",$6),Ap=Qh=null)}function $6(t){if(t.propertyName==="value"&&F0(Ap)){var e=[];M6(e,Ap,t,R5(t)),y6(HU,e)}}function WU(t,e,n){t==="focusin"?(lN(),Qh=e,Ap=n,Qh.attachEvent("onpropertychange",$6)):t==="focusout"&&lN()}function KU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return F0(Ap)}function JU(t,e){if(t==="click")return F0(e)}function YU(t,e){if(t==="input"||t==="change")return F0(e)}function XU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var to=typeof Object.is=="function"?Object.is:XU;function Ep(t,e){if(to(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yw.call(e,i)||!to(t[i],e[i]))return!1}return!0}function uN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cN(t,e){var n=uN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uN(n)}}function F6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U6(){for(var t=window,e=zy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zy(t.document)}return e}function V5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZU(t){var e=U6(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&F6(n.ownerDocument.documentElement,n)){if(r!==null&&V5(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=cN(n,a);var o=cN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var QU=gs&&"documentMode"in document&&11>=document.documentMode,Qc=null,Mw=null,ep=null,Dw=!1;function dN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dw||Qc==null||Qc!==zy(r)||(r=Qc,"selectionStart"in r&&V5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ep&&Ep(ep,r)||(ep=r,r=Xy(Mw,"onSelect"),0<r.length&&(e=new U5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qc)))}function Mg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ed={animationend:Mg("Animation","AnimationEnd"),animationiteration:Mg("Animation","AnimationIteration"),animationstart:Mg("Animation","AnimationStart"),transitionend:Mg("Transition","TransitionEnd")},Wx={},B6={};gs&&(B6=document.createElement("div").style,"AnimationEvent"in window||(delete ed.animationend.animation,delete ed.animationiteration.animation,delete ed.animationstart.animation),"TransitionEvent"in window||delete ed.transitionend.transition);function U0(t){if(Wx[t])return Wx[t];if(!ed[t])return t;var e=ed[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in B6)return Wx[t]=e[n];return t}var q6=U0("animationend"),V6=U0("animationiteration"),z6=U0("animationstart"),H6=U0("transitionend"),G6=new Map,fN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rl(t,e){G6.set(t,e),oc(e,[t])}for(var Kx=0;Kx<fN.length;Kx++){var Jx=fN[Kx],eB=Jx.toLowerCase(),tB=Jx[0].toUpperCase()+Jx.slice(1);Rl(eB,"on"+tB)}Rl(q6,"onAnimationEnd");Rl(V6,"onAnimationIteration");Rl(z6,"onAnimationStart");Rl("dblclick","onDoubleClick");Rl("focusin","onFocus");Rl("focusout","onBlur");Rl(H6,"onTransitionEnd");jd("onMouseEnter",["mouseout","mouseover"]);jd("onMouseLeave",["mouseout","mouseover"]);jd("onPointerEnter",["pointerout","pointerover"]);jd("onPointerLeave",["pointerout","pointerover"]);oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gh));function hN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eU(r,e,void 0,t),t.currentTarget=null}function W6(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;hN(i,s,u),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;hN(i,s,u),a=l}}}if(Gy)throw t=Ow,Gy=!1,Ow=null,t}function Tn(t,e){var n=e[qw];n===void 0&&(n=e[qw]=new Set);var r=t+"__bubble";n.has(r)||(K6(e,t,2,!1),n.add(r))}function Yx(t,e,n){var r=0;e&&(r|=4),K6(n,t,r,e)}var Dg="_reactListening"+Math.random().toString(36).slice(2);function Np(t){if(!t[Dg]){t[Dg]=!0,t6.forEach(function(n){n!=="selectionchange"&&(nB.has(n)||Yx(n,!1,t),Yx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dg]||(e[Dg]=!0,Yx("selectionchange",!1,e))}}function K6(t,e,n,r){switch(I6(e)){case 1:var i=gU;break;case 4:i=yU;break;default:i=$5}n=i.bind(null,e,n,t),i=void 0,!Iw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xx(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Ou(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}y6(function(){var u=a,c=R5(n),d=[];e:{var p=G6.get(t);if(p!==void 0){var h=U5,v=t;switch(t){case"keypress":if(Ty(n)===0)break e;case"keydown":case"keyup":h=OU;break;case"focusin":v="focus",h=zx;break;case"focusout":v="blur",h=zx;break;case"beforeblur":case"afterblur":h=zx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=tN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=bU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=LU;break;case q6:case V6:case z6:h=SU;break;case H6:h=DU;break;case"scroll":h=vU;break;case"wheel":h=FU;break;case"copy":case"cut":case"paste":h=EU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=rN}var y=(e&4)!==0,w=!y&&t==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var _=u,A;_!==null;){A=_;var N=A.stateNode;if(A.tag===5&&N!==null&&(A=N,b!==null&&(N=bp(_,b),N!=null&&y.push(Tp(_,N,A)))),w)break;_=_.return}0<y.length&&(p=new h(p,v,null,n,c),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==Cw&&(v=n.relatedTarget||n.fromElement)&&(Ou(v)||v[ys]))break e;if((h||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,h?(v=n.relatedTarget||n.toElement,h=u,v=v?Ou(v):null,v!==null&&(w=sc(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=u),h!==v)){if(y=tN,N="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=rN,N="onPointerLeave",b="onPointerEnter",_="pointer"),w=h==null?p:td(h),A=v==null?p:td(v),p=new y(N,_+"leave",h,n,c),p.target=w,p.relatedTarget=A,N=null,Ou(c)===u&&(y=new y(b,_+"enter",v,n,c),y.target=A,y.relatedTarget=w,N=y),w=N,h&&v)t:{for(y=h,b=v,_=0,A=y;A;A=Oc(A))_++;for(A=0,N=b;N;N=Oc(N))A++;for(;0<_-A;)y=Oc(y),_--;for(;0<A-_;)b=Oc(b),A--;for(;_--;){if(y===b||b!==null&&y===b.alternate)break t;y=Oc(y),b=Oc(b)}y=null}else y=null;h!==null&&pN(d,p,h,y,!1),v!==null&&w!==null&&pN(d,w,v,y,!0)}}e:{if(p=u?td(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var E=GU;else if(oN(p))if(D6)E=YU;else{E=KU;var P=WU}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=JU);if(E&&(E=E(t,u))){M6(d,E,n,c);break e}P&&P(t,p,u),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Aw(p,"number",p.value)}switch(P=u?td(u):window,t){case"focusin":(oN(P)||P.contentEditable==="true")&&(Qc=P,Mw=u,ep=null);break;case"focusout":ep=Mw=Qc=null;break;case"mousedown":Dw=!0;break;case"contextmenu":case"mouseup":case"dragend":Dw=!1,dN(d,n,c);break;case"selectionchange":if(QU)break;case"keydown":case"keyup":dN(d,n,c)}var I;if(q5)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Zc?R6(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(j6&&n.locale!=="ko"&&(Zc||O!=="onCompositionStart"?O==="onCompositionEnd"&&Zc&&(I=O6()):(cl=c,F5="value"in cl?cl.value:cl.textContent,Zc=!0)),P=Xy(u,O),0<P.length&&(O=new nN(O,t,null,n,c),d.push({event:O,listeners:P}),I?O.data=I:(I=L6(n),I!==null&&(O.data=I)))),(I=BU?qU(t,n):VU(t,n))&&(u=Xy(u,"onBeforeInput"),0<u.length&&(c=new nN("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=I))}W6(d,e)})}function Tp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xy(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=bp(t,n),a!=null&&r.unshift(Tp(t,a,i)),a=bp(t,e),a!=null&&r.push(Tp(t,a,i))),t=t.return}return r}function Oc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pN(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=bp(n,a),l!=null&&o.unshift(Tp(n,l,s))):i||(l=bp(n,a),l!=null&&o.push(Tp(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rB=/\r\n?/g,iB=/\u0000|\uFFFD/g;function mN(t){return(typeof t=="string"?t:""+t).replace(rB,`
`).replace(iB,"")}function $g(t,e,n){if(e=mN(e),mN(t)!==e&&n)throw Error($e(425))}function Zy(){}var $w=null,Fw=null;function Uw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bw=typeof setTimeout=="function"?setTimeout:void 0,aB=typeof clearTimeout=="function"?clearTimeout:void 0,gN=typeof Promise=="function"?Promise:void 0,oB=typeof queueMicrotask=="function"?queueMicrotask:typeof gN<"u"?function(t){return gN.resolve(null).then(t).catch(sB)}:Bw;function sB(t){setTimeout(function(){throw t})}function Zx(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sp(e)}function xl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wf=Math.random().toString(36).slice(2),bo="__reactFiber$"+wf,Pp="__reactProps$"+wf,ys="__reactContainer$"+wf,qw="__reactEvents$"+wf,lB="__reactListeners$"+wf,uB="__reactHandles$"+wf;function Ou(t){var e=t[bo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ys]||n[bo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yN(t);t!==null;){if(n=t[bo])return n;t=yN(t)}return e}t=n,n=t.parentNode}return null}function Cm(t){return t=t[bo]||t[ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function td(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($e(33))}function B0(t){return t[Pp]||null}var Vw=[],nd=-1;function Ll(t){return{current:t}}function On(t){0>nd||(t.current=Vw[nd],Vw[nd]=null,nd--)}function An(t,e){nd++,Vw[nd]=t.current,t.current=e}var Pl={},ii=Ll(Pl),Ai=Ll(!1),Gu=Pl;function Rd(t,e){var n=t.type.contextTypes;if(!n)return Pl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ei(t){return t=t.childContextTypes,t!=null}function Qy(){On(Ai),On(ii)}function vN(t,e,n){if(ii.current!==Pl)throw Error($e(168));An(ii,e),An(Ai,n)}function J6(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($e(108,WF(t)||"Unknown",i));return Bn({},n,r)}function ev(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pl,Gu=ii.current,An(ii,t),An(Ai,Ai.current),!0}function xN(t,e,n){var r=t.stateNode;if(!r)throw Error($e(169));n?(t=J6(t,e,Gu),r.__reactInternalMemoizedMergedChildContext=t,On(Ai),On(ii),An(ii,t)):On(Ai),An(Ai,n)}var is=null,q0=!1,Qx=!1;function Y6(t){is===null?is=[t]:is.push(t)}function cB(t){q0=!0,Y6(t)}function Ml(){if(!Qx&&is!==null){Qx=!0;var t=0,e=cn;try{var n=is;for(cn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}is=null,q0=!1}catch(i){throw is!==null&&(is=is.slice(t+1)),w6(L5,Ml),i}finally{cn=e,Qx=!1}}return null}var rd=[],id=0,tv=null,nv=0,va=[],xa=0,Wu=null,os=1,ss="";function bu(t,e){rd[id++]=nv,rd[id++]=tv,tv=t,nv=e}function X6(t,e,n){va[xa++]=os,va[xa++]=ss,va[xa++]=Wu,Wu=t;var r=os;t=ss;var i=32-Xa(r)-1;r&=~(1<<i),n+=1;var a=32-Xa(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,os=1<<32-Xa(e)+i|n<<i|r,ss=a+t}else os=1<<a|n<<i|r,ss=t}function z5(t){t.return!==null&&(bu(t,1),X6(t,1,0))}function H5(t){for(;t===tv;)tv=rd[--id],rd[id]=null,nv=rd[--id],rd[id]=null;for(;t===Wu;)Wu=va[--xa],va[xa]=null,ss=va[--xa],va[xa]=null,os=va[--xa],va[xa]=null}var Ji=null,Wi=null,Rn=!1,Ja=null;function Z6(t,e){var n=wa(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ji=t,Wi=xl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ji=t,Wi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wu!==null?{id:os,overflow:ss}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wa(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ji=t,Wi=null,!0):!1;default:return!1}}function zw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hw(t){if(Rn){var e=Wi;if(e){var n=e;if(!bN(t,e)){if(zw(t))throw Error($e(418));e=xl(n.nextSibling);var r=Ji;e&&bN(t,e)?Z6(r,n):(t.flags=t.flags&-4097|2,Rn=!1,Ji=t)}}else{if(zw(t))throw Error($e(418));t.flags=t.flags&-4097|2,Rn=!1,Ji=t}}}function wN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ji=t}function Fg(t){if(t!==Ji)return!1;if(!Rn)return wN(t),Rn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uw(t.type,t.memoizedProps)),e&&(e=Wi)){if(zw(t))throw Q6(),Error($e(418));for(;e;)Z6(t,e),e=xl(e.nextSibling)}if(wN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($e(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wi=xl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wi=null}}else Wi=Ji?xl(t.stateNode.nextSibling):null;return!0}function Q6(){for(var t=Wi;t;)t=xl(t.nextSibling)}function Ld(){Wi=Ji=null,Rn=!1}function G5(t){Ja===null?Ja=[t]:Ja.push(t)}var dB=Es.ReactCurrentBatchConfig;function Nh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($e(309));var r=n.stateNode}if(!r)throw Error($e(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error($e(284));if(!n._owner)throw Error($e(290,t))}return t}function Ug(t,e){throw t=Object.prototype.toString.call(e),Error($e(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _N(t){var e=t._init;return e(t._payload)}function ej(t){function e(b,_){if(t){var A=b.deletions;A===null?(b.deletions=[_],b.flags|=16):A.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function i(b,_){return b=Sl(b,_),b.index=0,b.sibling=null,b}function a(b,_,A){return b.index=A,t?(A=b.alternate,A!==null?(A=A.index,A<_?(b.flags|=2,_):A):(b.flags|=2,_)):(b.flags|=1048576,_)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,_,A,N){return _===null||_.tag!==6?(_=ob(A,b.mode,N),_.return=b,_):(_=i(_,A),_.return=b,_)}function l(b,_,A,N){var E=A.type;return E===Xc?c(b,_,A.props.children,N,A.key):_!==null&&(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===nl&&_N(E)===_.type)?(N=i(_,A.props),N.ref=Nh(b,_,A),N.return=b,N):(N=Ry(A.type,A.key,A.props,null,b.mode,N),N.ref=Nh(b,_,A),N.return=b,N)}function u(b,_,A,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=sb(A,b.mode,N),_.return=b,_):(_=i(_,A.children||[]),_.return=b,_)}function c(b,_,A,N,E){return _===null||_.tag!==7?(_=Bu(A,b.mode,N,E),_.return=b,_):(_=i(_,A),_.return=b,_)}function d(b,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ob(""+_,b.mode,A),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Cg:return A=Ry(_.type,_.key,_.props,null,b.mode,A),A.ref=Nh(b,null,_),A.return=b,A;case Yc:return _=sb(_,b.mode,A),_.return=b,_;case nl:var N=_._init;return d(b,N(_._payload),A)}if(zh(_)||wh(_))return _=Bu(_,b.mode,A,null),_.return=b,_;Ug(b,_)}return null}function p(b,_,A,N){var E=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return E!==null?null:s(b,_,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Cg:return A.key===E?l(b,_,A,N):null;case Yc:return A.key===E?u(b,_,A,N):null;case nl:return E=A._init,p(b,_,E(A._payload),N)}if(zh(A)||wh(A))return E!==null?null:c(b,_,A,N,null);Ug(b,A)}return null}function h(b,_,A,N,E){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(A)||null,s(_,b,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Cg:return b=b.get(N.key===null?A:N.key)||null,l(_,b,N,E);case Yc:return b=b.get(N.key===null?A:N.key)||null,u(_,b,N,E);case nl:var P=N._init;return h(b,_,A,P(N._payload),E)}if(zh(N)||wh(N))return b=b.get(A)||null,c(_,b,N,E,null);Ug(_,N)}return null}function v(b,_,A,N){for(var E=null,P=null,I=_,O=_=0,R=null;I!==null&&O<A.length;O++){I.index>O?(R=I,I=null):R=I.sibling;var D=p(b,I,A[O],N);if(D===null){I===null&&(I=R);break}t&&I&&D.alternate===null&&e(b,I),_=a(D,_,O),P===null?E=D:P.sibling=D,P=D,I=R}if(O===A.length)return n(b,I),Rn&&bu(b,O),E;if(I===null){for(;O<A.length;O++)I=d(b,A[O],N),I!==null&&(_=a(I,_,O),P===null?E=I:P.sibling=I,P=I);return Rn&&bu(b,O),E}for(I=r(b,I);O<A.length;O++)R=h(I,b,O,A[O],N),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?O:R.key),_=a(R,_,O),P===null?E=R:P.sibling=R,P=R);return t&&I.forEach(function(C){return e(b,C)}),Rn&&bu(b,O),E}function y(b,_,A,N){var E=wh(A);if(typeof E!="function")throw Error($e(150));if(A=E.call(A),A==null)throw Error($e(151));for(var P=E=null,I=_,O=_=0,R=null,D=A.next();I!==null&&!D.done;O++,D=A.next()){I.index>O?(R=I,I=null):R=I.sibling;var C=p(b,I,D.value,N);if(C===null){I===null&&(I=R);break}t&&I&&C.alternate===null&&e(b,I),_=a(C,_,O),P===null?E=C:P.sibling=C,P=C,I=R}if(D.done)return n(b,I),Rn&&bu(b,O),E;if(I===null){for(;!D.done;O++,D=A.next())D=d(b,D.value,N),D!==null&&(_=a(D,_,O),P===null?E=D:P.sibling=D,P=D);return Rn&&bu(b,O),E}for(I=r(b,I);!D.done;O++,D=A.next())D=h(I,b,O,D.value,N),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?O:D.key),_=a(D,_,O),P===null?E=D:P.sibling=D,P=D);return t&&I.forEach(function(L){return e(b,L)}),Rn&&bu(b,O),E}function w(b,_,A,N){if(typeof A=="object"&&A!==null&&A.type===Xc&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Cg:e:{for(var E=A.key,P=_;P!==null;){if(P.key===E){if(E=A.type,E===Xc){if(P.tag===7){n(b,P.sibling),_=i(P,A.props.children),_.return=b,b=_;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===nl&&_N(E)===P.type){n(b,P.sibling),_=i(P,A.props),_.ref=Nh(b,P,A),_.return=b,b=_;break e}n(b,P);break}else e(b,P);P=P.sibling}A.type===Xc?(_=Bu(A.props.children,b.mode,N,A.key),_.return=b,b=_):(N=Ry(A.type,A.key,A.props,null,b.mode,N),N.ref=Nh(b,_,A),N.return=b,b=N)}return o(b);case Yc:e:{for(P=A.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){n(b,_.sibling),_=i(_,A.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=sb(A,b.mode,N),_.return=b,b=_}return o(b);case nl:return P=A._init,w(b,_,P(A._payload),N)}if(zh(A))return v(b,_,A,N);if(wh(A))return y(b,_,A,N);Ug(b,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(n(b,_.sibling),_=i(_,A),_.return=b,b=_):(n(b,_),_=ob(A,b.mode,N),_.return=b,b=_),o(b)):n(b,_)}return w}var Md=ej(!0),tj=ej(!1),rv=Ll(null),iv=null,ad=null,W5=null;function K5(){W5=ad=iv=null}function J5(t){var e=rv.current;On(rv),t._currentValue=e}function Gw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xd(t,e){iv=t,W5=ad=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_i=!0),t.firstContext=null)}function Ea(t){var e=t._currentValue;if(W5!==t)if(t={context:t,memoizedValue:e,next:null},ad===null){if(iv===null)throw Error($e(308));ad=t,iv.dependencies={lanes:0,firstContext:t}}else ad=ad.next=t;return e}var ju=null;function Y5(t){ju===null?ju=[t]:ju.push(t)}function nj(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Y5(e)):(n.next=i.next,i.next=n),e.interleaved=n,vs(t,r)}function vs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rl=!1;function X5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Kt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vs(t,n)}return i=r.interleaved,i===null?(e.next=e,Y5(r)):(e.next=i.next,i.next=e),r.interleaved=e,vs(t,n)}function Py(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,M5(t,n)}}function SN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function av(t,e,n,r){var i=t.updateQueue;rl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;o=0,c=u=l=null,s=a;do{var p=s.lane,h=s.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,y=s;switch(p=e,h=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(h,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(h,d,p):v,p==null)break e;d=Bn({},d,p);break e;case 2:rl=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,o|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ju|=o,t.lanes=o,t.memoizedState=d}}function AN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($e(191,i));i.call(r)}}}var km={},Ao=Ll(km),Cp=Ll(km),kp=Ll(km);function Ru(t){if(t===km)throw Error($e(174));return t}function Z5(t,e){switch(An(kp,e),An(Cp,t),An(Ao,km),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nw(e,t)}On(Ao),An(Ao,e)}function Dd(){On(Ao),On(Cp),On(kp)}function ij(t){Ru(kp.current);var e=Ru(Ao.current),n=Nw(e,t.type);e!==n&&(An(Cp,t),An(Ao,n))}function Q5(t){Cp.current===t&&(On(Ao),On(Cp))}var Fn=Ll(0);function ov(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eb=[];function eS(){for(var t=0;t<eb.length;t++)eb[t]._workInProgressVersionPrimary=null;eb.length=0}var Cy=Es.ReactCurrentDispatcher,tb=Es.ReactCurrentBatchConfig,Ku=0,Un=null,_r=null,kr=null,sv=!1,tp=!1,Ip=0,fB=0;function Wr(){throw Error($e(321))}function tS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!to(t[n],e[n]))return!1;return!0}function nS(t,e,n,r,i,a){if(Ku=a,Un=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cy.current=t===null||t.memoizedState===null?gB:yB,t=n(r,i),tp){a=0;do{if(tp=!1,Ip=0,25<=a)throw Error($e(301));a+=1,kr=_r=null,e.updateQueue=null,Cy.current=vB,t=n(r,i)}while(tp)}if(Cy.current=lv,e=_r!==null&&_r.next!==null,Ku=0,kr=_r=Un=null,sv=!1,e)throw Error($e(300));return t}function rS(){var t=Ip!==0;return Ip=0,t}function xo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Un.memoizedState=kr=t:kr=kr.next=t,kr}function Na(){if(_r===null){var t=Un.alternate;t=t!==null?t.memoizedState:null}else t=_r.next;var e=kr===null?Un.memoizedState:kr.next;if(e!==null)kr=e,_r=t;else{if(t===null)throw Error($e(310));_r=t,t={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},kr===null?Un.memoizedState=kr=t:kr=kr.next=t}return kr}function Op(t,e){return typeof e=="function"?e(t):e}function nb(t){var e=Na(),n=e.queue;if(n===null)throw Error($e(311));n.lastRenderedReducer=t;var r=_r,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((Ku&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,Un.lanes|=c,Ju|=c}u=u.next}while(u!==null&&u!==a);l===null?o=r:l.next=s,to(r,e.memoizedState)||(_i=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Un.lanes|=a,Ju|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rb(t){var e=Na(),n=e.queue;if(n===null)throw Error($e(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);to(a,e.memoizedState)||(_i=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function aj(){}function oj(t,e){var n=Un,r=Na(),i=e(),a=!to(r.memoizedState,i);if(a&&(r.memoizedState=i,_i=!0),r=r.queue,iS(uj.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||kr!==null&&kr.memoizedState.tag&1){if(n.flags|=2048,jp(9,lj.bind(null,n,r,i,e),void 0,null),jr===null)throw Error($e(349));Ku&30||sj(n,e,i)}return i}function sj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Un.updateQueue,e===null?(e={lastEffect:null,stores:null},Un.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lj(t,e,n,r){e.value=n,e.getSnapshot=r,cj(e)&&dj(t)}function uj(t,e,n){return n(function(){cj(e)&&dj(t)})}function cj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!to(t,n)}catch{return!0}}function dj(t){var e=vs(t,1);e!==null&&Za(e,t,1,-1)}function EN(t){var e=xo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Op,lastRenderedState:t},e.queue=t,t=t.dispatch=mB.bind(null,Un,t),[e.memoizedState,t]}function jp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Un.updateQueue,e===null?(e={lastEffect:null,stores:null},Un.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fj(){return Na().memoizedState}function ky(t,e,n,r){var i=xo();Un.flags|=t,i.memoizedState=jp(1|e,n,void 0,r===void 0?null:r)}function V0(t,e,n,r){var i=Na();r=r===void 0?null:r;var a=void 0;if(_r!==null){var o=_r.memoizedState;if(a=o.destroy,r!==null&&tS(r,o.deps)){i.memoizedState=jp(e,n,a,r);return}}Un.flags|=t,i.memoizedState=jp(1|e,n,a,r)}function NN(t,e){return ky(8390656,8,t,e)}function iS(t,e){return V0(2048,8,t,e)}function hj(t,e){return V0(4,2,t,e)}function pj(t,e){return V0(4,4,t,e)}function mj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gj(t,e,n){return n=n!=null?n.concat([t]):null,V0(4,4,mj.bind(null,e,t),n)}function aS(){}function yj(t,e){var n=Na();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vj(t,e){var n=Na();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xj(t,e,n){return Ku&21?(to(n,e)||(n=A6(),Un.lanes|=n,Ju|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_i=!0),t.memoizedState=n)}function hB(t,e){var n=cn;cn=n!==0&&4>n?n:4,t(!0);var r=tb.transition;tb.transition={};try{t(!1),e()}finally{cn=n,tb.transition=r}}function bj(){return Na().memoizedState}function pB(t,e,n){var r=_l(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wj(t))_j(e,n);else if(n=nj(t,e,n,r),n!==null){var i=hi();Za(n,t,r,i),Sj(n,e,r)}}function mB(t,e,n){var r=_l(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wj(t))_j(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,to(s,o)){var l=e.interleaved;l===null?(i.next=i,Y5(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=nj(t,e,i,r),n!==null&&(i=hi(),Za(n,t,r,i),Sj(n,e,r))}}function wj(t){var e=t.alternate;return t===Un||e!==null&&e===Un}function _j(t,e){tp=sv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,M5(t,n)}}var lv={readContext:Ea,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},gB={readContext:Ea,useCallback:function(t,e){return xo().memoizedState=[t,e===void 0?null:e],t},useContext:Ea,useEffect:NN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ky(4194308,4,mj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ky(4194308,4,t,e)},useInsertionEffect:function(t,e){return ky(4,2,t,e)},useMemo:function(t,e){var n=xo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pB.bind(null,Un,t),[r.memoizedState,t]},useRef:function(t){var e=xo();return t={current:t},e.memoizedState=t},useState:EN,useDebugValue:aS,useDeferredValue:function(t){return xo().memoizedState=t},useTransition:function(){var t=EN(!1),e=t[0];return t=hB.bind(null,t[1]),xo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Un,i=xo();if(Rn){if(n===void 0)throw Error($e(407));n=n()}else{if(n=e(),jr===null)throw Error($e(349));Ku&30||sj(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,NN(uj.bind(null,r,a,t),[t]),r.flags|=2048,jp(9,lj.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=xo(),e=jr.identifierPrefix;if(Rn){var n=ss,r=os;n=(r&~(1<<32-Xa(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ip++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yB={readContext:Ea,useCallback:yj,useContext:Ea,useEffect:iS,useImperativeHandle:gj,useInsertionEffect:hj,useLayoutEffect:pj,useMemo:vj,useReducer:nb,useRef:fj,useState:function(){return nb(Op)},useDebugValue:aS,useDeferredValue:function(t){var e=Na();return xj(e,_r.memoizedState,t)},useTransition:function(){var t=nb(Op)[0],e=Na().memoizedState;return[t,e]},useMutableSource:aj,useSyncExternalStore:oj,useId:bj,unstable_isNewReconciler:!1},vB={readContext:Ea,useCallback:yj,useContext:Ea,useEffect:iS,useImperativeHandle:gj,useInsertionEffect:hj,useLayoutEffect:pj,useMemo:vj,useReducer:rb,useRef:fj,useState:function(){return rb(Op)},useDebugValue:aS,useDeferredValue:function(t){var e=Na();return _r===null?e.memoizedState=t:xj(e,_r.memoizedState,t)},useTransition:function(){var t=rb(Op)[0],e=Na().memoizedState;return[t,e]},useMutableSource:aj,useSyncExternalStore:oj,useId:bj,unstable_isNewReconciler:!1};function za(t,e){if(t&&t.defaultProps){e=Bn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ww(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Bn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var z0={isMounted:function(t){return(t=t._reactInternals)?sc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hi(),i=_l(t),a=fs(r,i);a.payload=e,n!=null&&(a.callback=n),e=bl(t,a,i),e!==null&&(Za(e,t,i,r),Py(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hi(),i=_l(t),a=fs(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=bl(t,a,i),e!==null&&(Za(e,t,i,r),Py(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hi(),r=_l(t),i=fs(n,r);i.tag=2,e!=null&&(i.callback=e),e=bl(t,i,r),e!==null&&(Za(e,t,r,n),Py(e,t,r))}};function TN(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Ep(n,r)||!Ep(i,a):!0}function Aj(t,e,n){var r=!1,i=Pl,a=e.contextType;return typeof a=="object"&&a!==null?a=Ea(a):(i=Ei(e)?Gu:ii.current,r=e.contextTypes,a=(r=r!=null)?Rd(t,i):Pl),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=z0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function PN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&z0.enqueueReplaceState(e,e.state,null)}function Kw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},X5(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ea(a):(a=Ei(e)?Gu:ii.current,i.context=Rd(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Ww(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&z0.enqueueReplaceState(i,i.state,null),av(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $d(t,e){try{var n="",r=e;do n+=GF(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function ib(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xB=typeof WeakMap=="function"?WeakMap:Map;function Ej(t,e,n){n=fs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cv||(cv=!0,a2=r),Jw(t,e)},n}function Nj(t,e,n){n=fs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Jw(t,e),typeof r!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function CN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jB.bind(null,t,e,n),e.then(t,t))}function kN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function IN(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fs(-1,1),e.tag=2,bl(n,e,1))),n.lanes|=1),t)}var bB=Es.ReactCurrentOwner,_i=!1;function li(t,e,n,r){e.child=t===null?tj(e,null,n,r):Md(e,t.child,n,r)}function ON(t,e,n,r,i){n=n.render;var a=e.ref;return xd(e,i),r=nS(t,e,n,r,a,i),n=rS(),t!==null&&!_i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xs(t,e,i)):(Rn&&n&&z5(e),e.flags|=1,li(t,e,r,i),e.child)}function jN(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!hS(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Tj(t,e,a,r,i)):(t=Ry(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ep,n(o,r)&&t.ref===e.ref)return xs(t,e,i)}return e.flags|=1,t=Sl(a,r),t.ref=e.ref,t.return=e,e.child=t}function Tj(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Ep(a,r)&&t.ref===e.ref)if(_i=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(_i=!0);else return e.lanes=t.lanes,xs(t,e,i)}return Yw(t,e,n,r,i)}function Pj(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},An(sd,Bi),Bi|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,An(sd,Bi),Bi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,An(sd,Bi),Bi|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,An(sd,Bi),Bi|=r;return li(t,e,i,n),e.child}function Cj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yw(t,e,n,r,i){var a=Ei(n)?Gu:ii.current;return a=Rd(e,a),xd(e,i),n=nS(t,e,n,r,a,i),r=rS(),t!==null&&!_i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xs(t,e,i)):(Rn&&r&&z5(e),e.flags|=1,li(t,e,n,i),e.child)}function RN(t,e,n,r,i){if(Ei(n)){var a=!0;ev(e)}else a=!1;if(xd(e,i),e.stateNode===null)Iy(t,e),Aj(e,n,r),Kw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ea(u):(u=Ei(n)?Gu:ii.current,u=Rd(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&PN(e,o,r,u),rl=!1;var p=e.memoizedState;o.state=p,av(e,r,o,i),l=e.memoizedState,s!==r||p!==l||Ai.current||rl?(typeof c=="function"&&(Ww(e,n,c,r),l=e.memoizedState),(s=rl||TN(e,n,s,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rj(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:za(e.type,s),o.props=u,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ea(l):(l=Ei(n)?Gu:ii.current,l=Rd(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||p!==l)&&PN(e,o,r,l),rl=!1,p=e.memoizedState,o.state=p,av(e,r,o,i);var v=e.memoizedState;s!==d||p!==v||Ai.current||rl?(typeof h=="function"&&(Ww(e,n,h,r),v=e.memoizedState),(u=rl||TN(e,n,u,r,p,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Xw(t,e,n,r,a,i)}function Xw(t,e,n,r,i,a){Cj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&xN(e,n,!1),xs(t,e,a);r=e.stateNode,bB.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Md(e,t.child,null,a),e.child=Md(e,null,s,a)):li(t,e,s,a),e.memoizedState=r.state,i&&xN(e,n,!0),e.child}function kj(t){var e=t.stateNode;e.pendingContext?vN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vN(t,e.context,!1),Z5(t,e.containerInfo)}function LN(t,e,n,r,i){return Ld(),G5(i),e.flags|=256,li(t,e,n,r),e.child}var Zw={dehydrated:null,treeContext:null,retryLane:0};function Qw(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ij(t,e,n){var r=e.pendingProps,i=Fn.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),An(Fn,i&1),t===null)return Hw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=W0(o,r,0,null),t=Bu(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Qw(n),e.memoizedState=Zw,t):oS(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return wB(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Sl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Sl(s,a):(a=Bu(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Qw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Zw,r}return a=t.child,t=a.sibling,r=Sl(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function oS(t,e){return e=W0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bg(t,e,n,r){return r!==null&&G5(r),Md(e,t.child,null,n),t=oS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wB(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=ib(Error($e(422))),Bg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=W0({mode:"visible",children:r.children},i,0,null),a=Bu(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Md(e,t.child,null,o),e.child.memoizedState=Qw(o),e.memoizedState=Zw,a);if(!(e.mode&1))return Bg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error($e(419)),r=ib(a,r,void 0),Bg(t,e,o,r)}if(s=(o&t.childLanes)!==0,_i||s){if(r=jr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,vs(t,i),Za(r,t,i,-1))}return fS(),r=ib(Error($e(421))),Bg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RB.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Wi=xl(i.nextSibling),Ji=e,Rn=!0,Ja=null,t!==null&&(va[xa++]=os,va[xa++]=ss,va[xa++]=Wu,os=t.id,ss=t.overflow,Wu=e),e=oS(e,r.children),e.flags|=4096,e)}function MN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gw(t.return,e,n)}function ab(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Oj(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(li(t,e,r.children,n),r=Fn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&MN(t,n,e);else if(t.tag===19)MN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(An(Fn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ov(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ab(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ov(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ab(e,!0,n,null,a);break;case"together":ab(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Iy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ju|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($e(153));if(e.child!==null){for(t=e.child,n=Sl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _B(t,e,n){switch(e.tag){case 3:kj(e),Ld();break;case 5:ij(e);break;case 1:Ei(e.type)&&ev(e);break;case 4:Z5(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;An(rv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(An(Fn,Fn.current&1),e.flags|=128,null):n&e.child.childLanes?Ij(t,e,n):(An(Fn,Fn.current&1),t=xs(t,e,n),t!==null?t.sibling:null);An(Fn,Fn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Oj(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),An(Fn,Fn.current),r)break;return null;case 22:case 23:return e.lanes=0,Pj(t,e,n)}return xs(t,e,n)}var jj,e2,Rj,Lj;jj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};e2=function(){};Rj=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ru(Ao.current);var a=null;switch(n){case"input":i=_w(t,i),r=_w(t,r),a=[];break;case"select":i=Bn({},i,{value:void 0}),r=Bn({},r,{value:void 0}),a=[];break;case"textarea":i=Ew(t,i),r=Ew(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zy)}Tw(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vp.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Tn("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Lj=function(t,e,n,r){n!==r&&(e.flags|=4)};function Th(t,e){if(!Rn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function SB(t,e,n){var r=e.pendingProps;switch(H5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(e),null;case 1:return Ei(e.type)&&Qy(),Kr(e),null;case 3:return r=e.stateNode,Dd(),On(Ai),On(ii),eS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ja!==null&&(l2(Ja),Ja=null))),e2(t,e),Kr(e),null;case 5:Q5(e);var i=Ru(kp.current);if(n=e.type,t!==null&&e.stateNode!=null)Rj(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($e(166));return Kr(e),null}if(t=Ru(Ao.current),Fg(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[bo]=e,r[Pp]=a,t=(e.mode&1)!==0,n){case"dialog":Tn("cancel",r),Tn("close",r);break;case"iframe":case"object":case"embed":Tn("load",r);break;case"video":case"audio":for(i=0;i<Gh.length;i++)Tn(Gh[i],r);break;case"source":Tn("error",r);break;case"img":case"image":case"link":Tn("error",r),Tn("load",r);break;case"details":Tn("toggle",r);break;case"input":HE(r,a),Tn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Tn("invalid",r);break;case"textarea":WE(r,a),Tn("invalid",r)}Tw(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&$g(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&$g(r.textContent,s,t),i=["children",""+s]):vp.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Tn("scroll",r)}switch(n){case"input":kg(r),GE(r,a,!0);break;case"textarea":kg(r),KE(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Zy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u6(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bo]=e,t[Pp]=r,jj(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pw(n,r),n){case"dialog":Tn("cancel",t),Tn("close",t),i=r;break;case"iframe":case"object":case"embed":Tn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gh.length;i++)Tn(Gh[i],t);i=r;break;case"source":Tn("error",t),i=r;break;case"img":case"image":case"link":Tn("error",t),Tn("load",t),i=r;break;case"details":Tn("toggle",t),i=r;break;case"input":HE(t,r),i=_w(t,r),Tn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Bn({},r,{value:void 0}),Tn("invalid",t);break;case"textarea":WE(t,r),i=Ew(t,r),Tn("invalid",t);break;default:i=r}Tw(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?f6(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&c6(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xp(t,l):typeof l=="number"&&xp(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(vp.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Tn("scroll",t):l!=null&&k5(t,a,l,o))}switch(n){case"input":kg(t),GE(t,r,!1);break;case"textarea":kg(t),KE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tl(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?md(t,!!r.multiple,a,!1):r.defaultValue!=null&&md(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kr(e),null;case 6:if(t&&e.stateNode!=null)Lj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($e(166));if(n=Ru(kp.current),Ru(Ao.current),Fg(e)){if(r=e.stateNode,n=e.memoizedProps,r[bo]=e,(a=r.nodeValue!==n)&&(t=Ji,t!==null))switch(t.tag){case 3:$g(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$g(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bo]=e,e.stateNode=r}return Kr(e),null;case 13:if(On(Fn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rn&&Wi!==null&&e.mode&1&&!(e.flags&128))Q6(),Ld(),e.flags|=98560,a=!1;else if(a=Fg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error($e(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error($e(317));a[bo]=e}else Ld(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kr(e),a=!1}else Ja!==null&&(l2(Ja),Ja=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fn.current&1?Ar===0&&(Ar=3):fS())),e.updateQueue!==null&&(e.flags|=4),Kr(e),null);case 4:return Dd(),e2(t,e),t===null&&Np(e.stateNode.containerInfo),Kr(e),null;case 10:return J5(e.type._context),Kr(e),null;case 17:return Ei(e.type)&&Qy(),Kr(e),null;case 19:if(On(Fn),a=e.memoizedState,a===null)return Kr(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Th(a,!1);else{if(Ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ov(t),o!==null){for(e.flags|=128,Th(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return An(Fn,Fn.current&1|2),e.child}t=t.sibling}a.tail!==null&&er()>Fd&&(e.flags|=128,r=!0,Th(a,!1),e.lanes=4194304)}else{if(!r)if(t=ov(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Th(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Rn)return Kr(e),null}else 2*er()-a.renderingStartTime>Fd&&n!==1073741824&&(e.flags|=128,r=!0,Th(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=er(),e.sibling=null,n=Fn.current,An(Fn,r?n&1|2:n&1),e):(Kr(e),null);case 22:case 23:return dS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bi&1073741824&&(Kr(e),e.subtreeFlags&6&&(e.flags|=8192)):Kr(e),null;case 24:return null;case 25:return null}throw Error($e(156,e.tag))}function AB(t,e){switch(H5(e),e.tag){case 1:return Ei(e.type)&&Qy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dd(),On(Ai),On(ii),eS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Q5(e),null;case 13:if(On(Fn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($e(340));Ld()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return On(Fn),null;case 4:return Dd(),null;case 10:return J5(e.type._context),null;case 22:case 23:return dS(),null;case 24:return null;default:return null}}var qg=!1,ti=!1,EB=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function od(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wn(t,e,r)}else n.current=null}function t2(t,e,n){try{n()}catch(r){Wn(t,e,r)}}var DN=!1;function NB(t,e){if($w=Jy,t=U6(),V5(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,d=t,p=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(s=o+i),d!==a||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===t)break t;if(p===n&&++u===i&&(s=o),p===a&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fw={focusedElem:t,selectionRange:n},Jy=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:za(e.type,y),w);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($e(163))}}catch(N){Wn(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return v=DN,DN=!1,v}function np(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&t2(e,n,a)}i=i.next}while(i!==r)}}function H0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function n2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Mj(t){var e=t.alternate;e!==null&&(t.alternate=null,Mj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bo],delete e[Pp],delete e[qw],delete e[lB],delete e[uB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dj(t){return t.tag===5||t.tag===3||t.tag===4}function $N(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function r2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zy));else if(r!==4&&(t=t.child,t!==null))for(r2(t,e,n),t=t.sibling;t!==null;)r2(t,e,n),t=t.sibling}function i2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(i2(t,e,n),t=t.sibling;t!==null;)i2(t,e,n),t=t.sibling}var Br=null,Ga=!1;function Xs(t,e,n){for(n=n.child;n!==null;)$j(t,e,n),n=n.sibling}function $j(t,e,n){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(D0,n)}catch{}switch(n.tag){case 5:ti||od(n,e);case 6:var r=Br,i=Ga;Br=null,Xs(t,e,n),Br=r,Ga=i,Br!==null&&(Ga?(t=Br,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Br.removeChild(n.stateNode));break;case 18:Br!==null&&(Ga?(t=Br,n=n.stateNode,t.nodeType===8?Zx(t.parentNode,n):t.nodeType===1&&Zx(t,n),Sp(t)):Zx(Br,n.stateNode));break;case 4:r=Br,i=Ga,Br=n.stateNode.containerInfo,Ga=!0,Xs(t,e,n),Br=r,Ga=i;break;case 0:case 11:case 14:case 15:if(!ti&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&t2(n,e,o),i=i.next}while(i!==r)}Xs(t,e,n);break;case 1:if(!ti&&(od(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Wn(n,e,s)}Xs(t,e,n);break;case 21:Xs(t,e,n);break;case 22:n.mode&1?(ti=(r=ti)||n.memoizedState!==null,Xs(t,e,n),ti=r):Xs(t,e,n);break;default:Xs(t,e,n)}}function FN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EB),e.forEach(function(r){var i=LB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Fa(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Br=s.stateNode,Ga=!1;break e;case 3:Br=s.stateNode.containerInfo,Ga=!0;break e;case 4:Br=s.stateNode.containerInfo,Ga=!0;break e}s=s.return}if(Br===null)throw Error($e(160));$j(a,o,i),Br=null,Ga=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Wn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fj(e,t),e=e.sibling}function Fj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fa(e,t),mo(t),r&4){try{np(3,t,t.return),H0(3,t)}catch(y){Wn(t,t.return,y)}try{np(5,t,t.return)}catch(y){Wn(t,t.return,y)}}break;case 1:Fa(e,t),mo(t),r&512&&n!==null&&od(n,n.return);break;case 5:if(Fa(e,t),mo(t),r&512&&n!==null&&od(n,n.return),t.flags&32){var i=t.stateNode;try{xp(i,"")}catch(y){Wn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&s6(i,a),Pw(s,o);var u=Pw(s,a);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?f6(i,d):c==="dangerouslySetInnerHTML"?c6(i,d):c==="children"?xp(i,d):k5(i,c,d,u)}switch(s){case"input":Sw(i,a);break;case"textarea":l6(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?md(i,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?md(i,!!a.multiple,a.defaultValue,!0):md(i,!!a.multiple,a.multiple?[]:"",!1))}i[Pp]=a}catch(y){Wn(t,t.return,y)}}break;case 6:if(Fa(e,t),mo(t),r&4){if(t.stateNode===null)throw Error($e(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(y){Wn(t,t.return,y)}}break;case 3:if(Fa(e,t),mo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sp(e.containerInfo)}catch(y){Wn(t,t.return,y)}break;case 4:Fa(e,t),mo(t);break;case 13:Fa(e,t),mo(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(uS=er())),r&4&&FN(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ti=(u=ti)||c,Fa(e,t),ti=u):Fa(e,t),mo(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Ye=t,c=t.child;c!==null;){for(d=Ye=c;Ye!==null;){switch(p=Ye,h=p.child,p.tag){case 0:case 11:case 14:case 15:np(4,p,p.return);break;case 1:od(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Wn(r,n,y)}}break;case 5:od(p,p.return);break;case 22:if(p.memoizedState!==null){BN(d);continue}}h!==null?(h.return=p,Ye=h):BN(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=d6("display",o))}catch(y){Wn(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Wn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Fa(e,t),mo(t),r&4&&FN(t);break;case 21:break;default:Fa(e,t),mo(t)}}function mo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Dj(n)){var r=n;break e}n=n.return}throw Error($e(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xp(i,""),r.flags&=-33);var a=$N(t);i2(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=$N(t);r2(t,s,o);break;default:throw Error($e(161))}}catch(l){Wn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TB(t,e,n){Ye=t,Uj(t)}function Uj(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var i=Ye,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qg;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||ti;s=qg;var u=ti;if(qg=o,(ti=l)&&!u)for(Ye=i;Ye!==null;)o=Ye,l=o.child,o.tag===22&&o.memoizedState!==null?qN(i):l!==null?(l.return=o,Ye=l):qN(i);for(;a!==null;)Ye=a,Uj(a),a=a.sibling;Ye=i,qg=s,ti=u}UN(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ye=a):UN(t)}}function UN(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ti||H0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ti)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:za(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&AN(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}AN(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Sp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($e(163))}ti||e.flags&512&&n2(e)}catch(p){Wn(e,e.return,p)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function BN(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function qN(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{H0(4,e)}catch(l){Wn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Wn(e,i,l)}}var a=e.return;try{n2(e)}catch(l){Wn(e,a,l)}break;case 5:var o=e.return;try{n2(e)}catch(l){Wn(e,o,l)}}}catch(l){Wn(e,e.return,l)}if(e===t){Ye=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Ye=s;break}Ye=e.return}}var PB=Math.ceil,uv=Es.ReactCurrentDispatcher,sS=Es.ReactCurrentOwner,Sa=Es.ReactCurrentBatchConfig,Kt=0,jr=null,fr=null,qr=0,Bi=0,sd=Ll(0),Ar=0,Rp=null,Ju=0,G0=0,lS=0,rp=null,wi=null,uS=0,Fd=1/0,ts=null,cv=!1,a2=null,wl=null,Vg=!1,dl=null,dv=0,ip=0,o2=null,Oy=-1,jy=0;function hi(){return Kt&6?er():Oy!==-1?Oy:Oy=er()}function _l(t){return t.mode&1?Kt&2&&qr!==0?qr&-qr:dB.transition!==null?(jy===0&&(jy=A6()),jy):(t=cn,t!==0||(t=window.event,t=t===void 0?16:I6(t.type)),t):1}function Za(t,e,n,r){if(50<ip)throw ip=0,o2=null,Error($e(185));Tm(t,n,r),(!(Kt&2)||t!==jr)&&(t===jr&&(!(Kt&2)&&(G0|=n),Ar===4&&sl(t,qr)),Ni(t,r),n===1&&Kt===0&&!(e.mode&1)&&(Fd=er()+500,q0&&Ml()))}function Ni(t,e){var n=t.callbackNode;dU(t,e);var r=Ky(t,t===jr?qr:0);if(r===0)n!==null&&XE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&XE(n),e===1)t.tag===0?cB(VN.bind(null,t)):Y6(VN.bind(null,t)),oB(function(){!(Kt&6)&&Ml()}),n=null;else{switch(E6(r)){case 1:n=L5;break;case 4:n=_6;break;case 16:n=Wy;break;case 536870912:n=S6;break;default:n=Wy}n=Kj(n,Bj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bj(t,e){if(Oy=-1,jy=0,Kt&6)throw Error($e(327));var n=t.callbackNode;if(bd()&&t.callbackNode!==n)return null;var r=Ky(t,t===jr?qr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fv(t,r);else{e=r;var i=Kt;Kt|=2;var a=Vj();(jr!==t||qr!==e)&&(ts=null,Fd=er()+500,Uu(t,e));do try{IB();break}catch(s){qj(t,s)}while(!0);K5(),uv.current=a,Kt=i,fr!==null?e=0:(jr=null,qr=0,e=Ar)}if(e!==0){if(e===2&&(i=jw(t),i!==0&&(r=i,e=s2(t,i))),e===1)throw n=Rp,Uu(t,0),sl(t,r),Ni(t,er()),n;if(e===6)sl(t,r);else{if(i=t.current.alternate,!(r&30)&&!CB(i)&&(e=fv(t,r),e===2&&(a=jw(t),a!==0&&(r=a,e=s2(t,a))),e===1))throw n=Rp,Uu(t,0),sl(t,r),Ni(t,er()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($e(345));case 2:wu(t,wi,ts);break;case 3:if(sl(t,r),(r&130023424)===r&&(e=uS+500-er(),10<e)){if(Ky(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){hi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bw(wu.bind(null,t,wi,ts),e);break}wu(t,wi,ts);break;case 4:if(sl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xa(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=er()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PB(r/1960))-r,10<r){t.timeoutHandle=Bw(wu.bind(null,t,wi,ts),r);break}wu(t,wi,ts);break;case 5:wu(t,wi,ts);break;default:throw Error($e(329))}}}return Ni(t,er()),t.callbackNode===n?Bj.bind(null,t):null}function s2(t,e){var n=rp;return t.current.memoizedState.isDehydrated&&(Uu(t,e).flags|=256),t=fv(t,e),t!==2&&(e=wi,wi=n,e!==null&&l2(e)),t}function l2(t){wi===null?wi=t:wi.push.apply(wi,t)}function CB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!to(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sl(t,e){for(e&=~lS,e&=~G0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xa(e),r=1<<n;t[n]=-1,e&=~r}}function VN(t){if(Kt&6)throw Error($e(327));bd();var e=Ky(t,0);if(!(e&1))return Ni(t,er()),null;var n=fv(t,e);if(t.tag!==0&&n===2){var r=jw(t);r!==0&&(e=r,n=s2(t,r))}if(n===1)throw n=Rp,Uu(t,0),sl(t,e),Ni(t,er()),n;if(n===6)throw Error($e(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,wi,ts),Ni(t,er()),null}function cS(t,e){var n=Kt;Kt|=1;try{return t(e)}finally{Kt=n,Kt===0&&(Fd=er()+500,q0&&Ml())}}function Yu(t){dl!==null&&dl.tag===0&&!(Kt&6)&&bd();var e=Kt;Kt|=1;var n=Sa.transition,r=cn;try{if(Sa.transition=null,cn=1,t)return t()}finally{cn=r,Sa.transition=n,Kt=e,!(Kt&6)&&Ml()}}function dS(){Bi=sd.current,On(sd)}function Uu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aB(n)),fr!==null)for(n=fr.return;n!==null;){var r=n;switch(H5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qy();break;case 3:Dd(),On(Ai),On(ii),eS();break;case 5:Q5(r);break;case 4:Dd();break;case 13:On(Fn);break;case 19:On(Fn);break;case 10:J5(r.type._context);break;case 22:case 23:dS()}n=n.return}if(jr=t,fr=t=Sl(t.current,null),qr=Bi=e,Ar=0,Rp=null,lS=G0=Ju=0,wi=rp=null,ju!==null){for(e=0;e<ju.length;e++)if(n=ju[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}ju=null}return t}function qj(t,e){do{var n=fr;try{if(K5(),Cy.current=lv,sv){for(var r=Un.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sv=!1}if(Ku=0,kr=_r=Un=null,tp=!1,Ip=0,sS.current=null,n===null||n.return===null){Ar=1,Rp=e,fr=null;break}e:{var a=t,o=n.return,s=n,l=e;if(e=qr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=kN(o);if(h!==null){h.flags&=-257,IN(h,o,s,a,e),h.mode&1&&CN(a,u,e),e=h,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){CN(a,u,e),fS();break e}l=Error($e(426))}}else if(Rn&&s.mode&1){var w=kN(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),IN(w,o,s,a,e),G5($d(l,s));break e}}a=l=$d(l,s),Ar!==4&&(Ar=2),rp===null?rp=[a]:rp.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=Ej(a,l,e);SN(a,b);break e;case 1:s=l;var _=a.type,A=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(wl===null||!wl.has(A)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=Nj(a,s,e);SN(a,N);break e}}a=a.return}while(a!==null)}Hj(n)}catch(E){e=E,fr===n&&n!==null&&(fr=n=n.return);continue}break}while(!0)}function Vj(){var t=uv.current;return uv.current=lv,t===null?lv:t}function fS(){(Ar===0||Ar===3||Ar===2)&&(Ar=4),jr===null||!(Ju&268435455)&&!(G0&268435455)||sl(jr,qr)}function fv(t,e){var n=Kt;Kt|=2;var r=Vj();(jr!==t||qr!==e)&&(ts=null,Uu(t,e));do try{kB();break}catch(i){qj(t,i)}while(!0);if(K5(),Kt=n,uv.current=r,fr!==null)throw Error($e(261));return jr=null,qr=0,Ar}function kB(){for(;fr!==null;)zj(fr)}function IB(){for(;fr!==null&&!nU();)zj(fr)}function zj(t){var e=Wj(t.alternate,t,Bi);t.memoizedProps=t.pendingProps,e===null?Hj(t):fr=e,sS.current=null}function Hj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AB(n,e),n!==null){n.flags&=32767,fr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ar=6,fr=null;return}}else if(n=SB(n,e,Bi),n!==null){fr=n;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);Ar===0&&(Ar=5)}function wu(t,e,n){var r=cn,i=Sa.transition;try{Sa.transition=null,cn=1,OB(t,e,n,r)}finally{Sa.transition=i,cn=r}return null}function OB(t,e,n,r){do bd();while(dl!==null);if(Kt&6)throw Error($e(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($e(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(fU(t,a),t===jr&&(fr=jr=null,qr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vg||(Vg=!0,Kj(Wy,function(){return bd(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Sa.transition,Sa.transition=null;var o=cn;cn=1;var s=Kt;Kt|=4,sS.current=null,NB(t,n),Fj(n,t),ZU(Fw),Jy=!!$w,Fw=$w=null,t.current=n,TB(n),rU(),Kt=s,cn=o,Sa.transition=a}else t.current=n;if(Vg&&(Vg=!1,dl=t,dv=i),a=t.pendingLanes,a===0&&(wl=null),oU(n.stateNode),Ni(t,er()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cv)throw cv=!1,t=a2,a2=null,t;return dv&1&&t.tag!==0&&bd(),a=t.pendingLanes,a&1?t===o2?ip++:(ip=0,o2=t):ip=0,Ml(),null}function bd(){if(dl!==null){var t=E6(dv),e=Sa.transition,n=cn;try{if(Sa.transition=null,cn=16>t?16:t,dl===null)var r=!1;else{if(t=dl,dl=null,dv=0,Kt&6)throw Error($e(331));var i=Kt;for(Kt|=4,Ye=t.current;Ye!==null;){var a=Ye,o=a.child;if(Ye.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Ye=u;Ye!==null;){var c=Ye;switch(c.tag){case 0:case 11:case 15:np(8,c,a)}var d=c.child;if(d!==null)d.return=c,Ye=d;else for(;Ye!==null;){c=Ye;var p=c.sibling,h=c.return;if(Mj(c),c===u){Ye=null;break}if(p!==null){p.return=h,Ye=p;break}Ye=h}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Ye=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ye=o;else e:for(;Ye!==null;){if(a=Ye,a.flags&2048)switch(a.tag){case 0:case 11:case 15:np(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,Ye=b;break e}Ye=a.return}}var _=t.current;for(Ye=_;Ye!==null;){o=Ye;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Ye=A;else e:for(o=_;Ye!==null;){if(s=Ye,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:H0(9,s)}}catch(E){Wn(s,s.return,E)}if(s===o){Ye=null;break e}var N=s.sibling;if(N!==null){N.return=s.return,Ye=N;break e}Ye=s.return}}if(Kt=i,Ml(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(D0,t)}catch{}r=!0}return r}finally{cn=n,Sa.transition=e}}return!1}function zN(t,e,n){e=$d(n,e),e=Ej(t,e,1),t=bl(t,e,1),e=hi(),t!==null&&(Tm(t,1,e),Ni(t,e))}function Wn(t,e,n){if(t.tag===3)zN(t,t,n);else for(;e!==null;){if(e.tag===3){zN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wl===null||!wl.has(r))){t=$d(n,t),t=Nj(e,t,1),e=bl(e,t,1),t=hi(),e!==null&&(Tm(e,1,t),Ni(e,t));break}}e=e.return}}function jB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hi(),t.pingedLanes|=t.suspendedLanes&n,jr===t&&(qr&n)===n&&(Ar===4||Ar===3&&(qr&130023424)===qr&&500>er()-uS?Uu(t,0):lS|=n),Ni(t,e)}function Gj(t,e){e===0&&(t.mode&1?(e=jg,jg<<=1,!(jg&130023424)&&(jg=4194304)):e=1);var n=hi();t=vs(t,e),t!==null&&(Tm(t,e,n),Ni(t,n))}function RB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Gj(t,n)}function LB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($e(314))}r!==null&&r.delete(e),Gj(t,n)}var Wj;Wj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ai.current)_i=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _i=!1,_B(t,e,n);_i=!!(t.flags&131072)}else _i=!1,Rn&&e.flags&1048576&&X6(e,nv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Iy(t,e),t=e.pendingProps;var i=Rd(e,ii.current);xd(e,n),i=nS(null,e,r,t,i,n);var a=rS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ei(r)?(a=!0,ev(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,X5(e),i.updater=z0,e.stateNode=i,i._reactInternals=e,Kw(e,r,t,n),e=Xw(null,e,r,!0,a,n)):(e.tag=0,Rn&&a&&z5(e),li(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Iy(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=DB(r),t=za(r,t),i){case 0:e=Yw(null,e,r,t,n);break e;case 1:e=RN(null,e,r,t,n);break e;case 11:e=ON(null,e,r,t,n);break e;case 14:e=jN(null,e,r,za(r.type,t),n);break e}throw Error($e(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:za(r,i),Yw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:za(r,i),RN(t,e,r,i,n);case 3:e:{if(kj(e),t===null)throw Error($e(387));r=e.pendingProps,a=e.memoizedState,i=a.element,rj(t,e),av(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=$d(Error($e(423)),e),e=LN(t,e,r,n,i);break e}else if(r!==i){i=$d(Error($e(424)),e),e=LN(t,e,r,n,i);break e}else for(Wi=xl(e.stateNode.containerInfo.firstChild),Ji=e,Rn=!0,Ja=null,n=tj(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ld(),r===i){e=xs(t,e,n);break e}li(t,e,r,n)}e=e.child}return e;case 5:return ij(e),t===null&&Hw(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Uw(r,i)?o=null:a!==null&&Uw(r,a)&&(e.flags|=32),Cj(t,e),li(t,e,o,n),e.child;case 6:return t===null&&Hw(e),null;case 13:return Ij(t,e,n);case 4:return Z5(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Md(e,null,r,n):li(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:za(r,i),ON(t,e,r,i,n);case 7:return li(t,e,e.pendingProps,n),e.child;case 8:return li(t,e,e.pendingProps.children,n),e.child;case 12:return li(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,An(rv,r._currentValue),r._currentValue=o,a!==null)if(to(a.value,o)){if(a.children===i.children&&!Ai.current){e=xs(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=fs(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Gw(a.return,n,e),s.lanes|=n;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error($e(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Gw(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}li(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xd(e,n),i=Ea(i),r=r(i),e.flags|=1,li(t,e,r,n),e.child;case 14:return r=e.type,i=za(r,e.pendingProps),i=za(r.type,i),jN(t,e,r,i,n);case 15:return Tj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:za(r,i),Iy(t,e),e.tag=1,Ei(r)?(t=!0,ev(e)):t=!1,xd(e,n),Aj(e,r,i),Kw(e,r,i,n),Xw(null,e,r,!0,t,n);case 19:return Oj(t,e,n);case 22:return Pj(t,e,n)}throw Error($e(156,e.tag))};function Kj(t,e){return w6(t,e)}function MB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(t,e,n,r){return new MB(t,e,n,r)}function hS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DB(t){if(typeof t=="function")return hS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O5)return 11;if(t===j5)return 14}return 2}function Sl(t,e){var n=t.alternate;return n===null?(n=wa(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ry(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")hS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xc:return Bu(n.children,i,a,e);case I5:o=8,i|=8;break;case vw:return t=wa(12,n,e,i|2),t.elementType=vw,t.lanes=a,t;case xw:return t=wa(13,n,e,i),t.elementType=xw,t.lanes=a,t;case bw:return t=wa(19,n,e,i),t.elementType=bw,t.lanes=a,t;case i6:return W0(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n6:o=10;break e;case r6:o=9;break e;case O5:o=11;break e;case j5:o=14;break e;case nl:o=16,r=null;break e}throw Error($e(130,t==null?t:typeof t,""))}return e=wa(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Bu(t,e,n,r){return t=wa(7,t,r,e),t.lanes=n,t}function W0(t,e,n,r){return t=wa(22,t,r,e),t.elementType=i6,t.lanes=n,t.stateNode={isHidden:!1},t}function ob(t,e,n){return t=wa(6,t,null,e),t.lanes=n,t}function sb(t,e,n){return e=wa(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $B(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bx(0),this.expirationTimes=Bx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pS(t,e,n,r,i,a,o,s,l){return t=new $B(t,e,n,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=wa(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},X5(a),t}function FB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Jj(t){if(!t)return Pl;t=t._reactInternals;e:{if(sc(t)!==t||t.tag!==1)throw Error($e(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ei(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($e(171))}if(t.tag===1){var n=t.type;if(Ei(n))return J6(t,n,e)}return e}function Yj(t,e,n,r,i,a,o,s,l){return t=pS(n,r,!0,t,i,a,o,s,l),t.context=Jj(null),n=t.current,r=hi(),i=_l(n),a=fs(r,i),a.callback=e??null,bl(n,a,i),t.current.lanes=i,Tm(t,i,r),Ni(t,r),t}function K0(t,e,n,r){var i=e.current,a=hi(),o=_l(i);return n=Jj(n),e.context===null?e.context=n:e.pendingContext=n,e=fs(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=bl(i,e,o),t!==null&&(Za(t,i,o,a),Py(t,i,o)),o}function hv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function HN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mS(t,e){HN(t,e),(t=t.alternate)&&HN(t,e)}function UB(){return null}var Xj=typeof reportError=="function"?reportError:function(t){console.error(t)};function gS(t){this._internalRoot=t}J0.prototype.render=gS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($e(409));K0(t,e,null,null)};J0.prototype.unmount=gS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yu(function(){K0(null,t,null,null)}),e[ys]=null}};function J0(t){this._internalRoot=t}J0.prototype.unstable_scheduleHydration=function(t){if(t){var e=P6();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ol.length&&e!==0&&e<ol[n].priority;n++);ol.splice(n,0,t),n===0&&k6(t)}};function yS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Y0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function GN(){}function BB(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=hv(o);a.call(u)}}var o=Yj(e,r,t,0,null,!1,!1,"",GN);return t._reactRootContainer=o,t[ys]=o.current,Np(t.nodeType===8?t.parentNode:t),Yu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=hv(l);s.call(u)}}var l=pS(t,0,!1,null,null,!1,!1,"",GN);return t._reactRootContainer=l,t[ys]=l.current,Np(t.nodeType===8?t.parentNode:t),Yu(function(){K0(e,l,n,r)}),l}function X0(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=hv(o);s.call(l)}}K0(e,o,t,i)}else o=BB(n,e,t,i,r);return hv(o)}N6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hh(e.pendingLanes);n!==0&&(M5(e,n|1),Ni(e,er()),!(Kt&6)&&(Fd=er()+500,Ml()))}break;case 13:Yu(function(){var r=vs(t,1);if(r!==null){var i=hi();Za(r,t,1,i)}}),mS(t,1)}};D5=function(t){if(t.tag===13){var e=vs(t,134217728);if(e!==null){var n=hi();Za(e,t,134217728,n)}mS(t,134217728)}};T6=function(t){if(t.tag===13){var e=_l(t),n=vs(t,e);if(n!==null){var r=hi();Za(n,t,e,r)}mS(t,e)}};P6=function(){return cn};C6=function(t,e){var n=cn;try{return cn=t,e()}finally{cn=n}};kw=function(t,e,n){switch(e){case"input":if(Sw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=B0(r);if(!i)throw Error($e(90));o6(r),Sw(r,i)}}}break;case"textarea":l6(t,n);break;case"select":e=n.value,e!=null&&md(t,!!n.multiple,e,!1)}};m6=cS;g6=Yu;var qB={usingClientEntryPoint:!1,Events:[Cm,td,B0,h6,p6,cS]},Ph={findFiberByHostInstance:Ou,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VB={bundleType:Ph.bundleType,version:Ph.version,rendererPackageName:Ph.rendererPackageName,rendererConfig:Ph.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x6(t),t===null?null:t.stateNode},findFiberByHostInstance:Ph.findFiberByHostInstance||UB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zg.isDisabled&&zg.supportsFiber)try{D0=zg.inject(VB),So=zg}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qB;ea.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yS(e))throw Error($e(200));return FB(t,e,null,n)};ea.createRoot=function(t,e){if(!yS(t))throw Error($e(299));var n=!1,r="",i=Xj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=pS(t,1,!1,null,null,n,!1,r,i),t[ys]=e.current,Np(t.nodeType===8?t.parentNode:t),new gS(e)};ea.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($e(188)):(t=Object.keys(t).join(","),Error($e(268,t)));return t=x6(e),t=t===null?null:t.stateNode,t};ea.flushSync=function(t){return Yu(t)};ea.hydrate=function(t,e,n){if(!Y0(e))throw Error($e(200));return X0(null,t,e,!0,n)};ea.hydrateRoot=function(t,e,n){if(!yS(t))throw Error($e(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=Xj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Yj(e,null,t,1,n??null,i,!1,a,o),t[ys]=e.current,Np(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new J0(e)};ea.render=function(t,e,n){if(!Y0(e))throw Error($e(200));return X0(null,t,e,!1,n)};ea.unmountComponentAtNode=function(t){if(!Y0(t))throw Error($e(40));return t._reactRootContainer?(Yu(function(){X0(null,null,t,!1,function(){t._reactRootContainer=null,t[ys]=null})}),!0):!1};ea.unstable_batchedUpdates=cS;ea.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Y0(n))throw Error($e(200));if(t==null||t._reactInternals===void 0)throw Error($e(38));return X0(t,e,n,!1,r)};ea.version="18.3.1-next-f1338f8080-20240426";function Zj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zj)}catch(t){console.error(t)}}Zj(),ZO.exports=ea;var zB=ZO.exports,WN=zB;gw.createRoot=WN.createRoot,gw.hydrateRoot=WN.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lp(){return Lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lp.apply(this,arguments)}var fl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fl||(fl={}));const KN="popstate";function HB(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return u2("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:pv(i)}return WB(e,n,null,t)}function ir(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GB(){return Math.random().toString(36).substr(2,8)}function JN(t,e){return{usr:t.state,key:t.key,idx:e}}function u2(t,e,n,r){return n===void 0&&(n=null),Lp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_f(e):e,{state:n,key:e&&e.key||r||GB()})}function pv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _f(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WB(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=fl.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Lp({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){s=fl.Pop;let w=c(),b=w==null?null:w-u;u=w,l&&l({action:s,location:y.location,delta:b})}function p(w,b){s=fl.Push;let _=u2(y.location,w,b);u=c()+1;let A=JN(_,u),N=y.createHref(_);try{o.pushState(A,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(N)}a&&l&&l({action:s,location:y.location,delta:1})}function h(w,b){s=fl.Replace;let _=u2(y.location,w,b);u=c();let A=JN(_,u),N=y.createHref(_);o.replaceState(A,"",N),a&&l&&l({action:s,location:y.location,delta:0})}function v(w){let b=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof w=="string"?w:pv(w);return _=_.replace(/ $/,"%20"),ir(b,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,b)}let y={get action(){return s},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(KN,d),l=w,()=>{i.removeEventListener(KN,d),l=null}},createHref(w){return e(i,w)},createURL:v,encodeLocation(w){let b=v(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:h,go(w){return o.go(w)}};return y}var YN;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(YN||(YN={}));function KB(t,e,n){return n===void 0&&(n="/"),JB(t,e,n)}function JB(t,e,n,r){let i=typeof e=="string"?_f(e):e,a=vS(i.pathname||"/",n);if(a==null)return null;let o=eR(t);YB(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let u=l9(a);s=a9(o[l],u)}return s}function eR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(ir(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Al([r,l.relativePath]),c=n.concat(l);a.children&&a.children.length>0&&(ir(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),eR(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:r9(u,a.index),routesMeta:c})};return t.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of tR(a.path))i(a,o,l)}),e}function tR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=tR(r.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function YB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:i9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XB=/^:[\w-]+$/,ZB=3,QB=2,e9=1,t9=10,n9=-2,XN=t=>t==="*";function r9(t,e){let n=t.split("/"),r=n.length;return n.some(XN)&&(r+=n9),e&&(r+=QB),n.filter(i=>!XN(i)).reduce((i,a)=>i+(XB.test(a)?ZB:a===""?e9:t9),r)}function i9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function a9(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let s=0;s<r.length;++s){let l=r[s],u=s===r.length-1,c=a==="/"?e:e.slice(a.length)||"/",d=o9({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),p=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Al([a,d.pathname]),pathnameBase:f9(Al([a,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(a=Al([a,d.pathnameBase]))}return o}function o9(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=s9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:p,isOptional:h}=c;if(p==="*"){let y=s[d]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const v=s[d];return h&&!v?u[p]=void 0:u[p]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function s9(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function l9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function u9(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_f(t):t;return{pathname:n?n.startsWith("/")?n:c9(n,e):e,search:h9(r),hash:p9(i)}}function c9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function lb(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d9(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xS(t,e){let n=d9(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bS(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=_f(t):(i=Lp({},t),ir(!i.pathname||!i.pathname.includes("?"),lb("?","pathname","search",i)),ir(!i.pathname||!i.pathname.includes("#"),lb("#","pathname","hash",i)),ir(!i.search||!i.search.includes("#"),lb("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}s=d>=0?e[d]:"/"}let l=u9(i,s),u=o&&o!=="/"&&o.endsWith("/"),c=(a||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Al=t=>t.join("/").replace(/\/\/+/g,"/"),f9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),h9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,p9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function m9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nR=["post","put","patch","delete"];new Set(nR);const g9=["get",...nR];new Set(g9);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mp(){return Mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mp.apply(this,arguments)}const wS=X.createContext(null),y9=X.createContext(null),Dl=X.createContext(null),Z0=X.createContext(null),Ns=X.createContext({outlet:null,matches:[],isDataRoute:!1}),rR=X.createContext(null);function v9(t,e){let{relative:n}=e===void 0?{}:e;Sf()||ir(!1);let{basename:r,navigator:i}=X.useContext(Dl),{hash:a,pathname:o,search:s}=aR(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Al([r,o])),i.createHref({pathname:l,search:s,hash:a})}function Sf(){return X.useContext(Z0)!=null}function lc(){return Sf()||ir(!1),X.useContext(Z0).location}function iR(t){X.useContext(Dl).static||X.useLayoutEffect(t)}function ro(){let{isDataRoute:t}=X.useContext(Ns);return t?I9():x9()}function x9(){Sf()||ir(!1);let t=X.useContext(wS),{basename:e,future:n,navigator:r}=X.useContext(Dl),{matches:i}=X.useContext(Ns),{pathname:a}=lc(),o=JSON.stringify(xS(i,n.v7_relativeSplatPath)),s=X.useRef(!1);return iR(()=>{s.current=!0}),X.useCallback(function(u,c){if(c===void 0&&(c={}),!s.current)return;if(typeof u=="number"){r.go(u);return}let d=bS(u,JSON.parse(o),a,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Al([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,a,t])}function Q0(){let{matches:t}=X.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function aR(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=X.useContext(Dl),{matches:i}=X.useContext(Ns),{pathname:a}=lc(),o=JSON.stringify(xS(i,r.v7_relativeSplatPath));return X.useMemo(()=>bS(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function b9(t,e){return w9(t,e)}function w9(t,e,n,r){Sf()||ir(!1);let{navigator:i}=X.useContext(Dl),{matches:a}=X.useContext(Ns),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=lc(),c;if(e){var d;let w=typeof e=="string"?_f(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||ir(!1),c=w}else c=u;let p=c.pathname||"/",h=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=KB(t,{pathname:h}),y=N9(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},s,w.params),pathname:Al([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Al([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,n,r);return e&&y?X.createElement(Z0.Provider,{value:{location:Mp({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:fl.Pop}},y):y}function _9(){let t=k9(),e=m9(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),n?X.createElement("pre",{style:i},n):null,null)}const S9=X.createElement(_9,null);class A9 extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?X.createElement(Ns.Provider,{value:this.props.routeContext},X.createElement(rR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E9(t){let{routeContext:e,match:n,children:r}=t,i=X.useContext(wS);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),X.createElement(Ns.Provider,{value:e},r)}function N9(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let c=o.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);c>=0||ir(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:p,errors:h}=n,v=d.route.loader&&p[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,p)=>{let h,v=!1,y=null,w=null;n&&(h=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||S9,l&&(u<0&&p===0?(O9("route-fallback"),v=!0,w=null):u===p&&(v=!0,w=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),_=()=>{let A;return h?A=y:v?A=w:d.route.Component?A=X.createElement(d.route.Component,null):d.route.element?A=d.route.element:A=c,X.createElement(E9,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:A})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?X.createElement(A9,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}var oR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(oR||{}),sR=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sR||{});function T9(t){let e=X.useContext(wS);return e||ir(!1),e}function P9(t){let e=X.useContext(y9);return e||ir(!1),e}function C9(t){let e=X.useContext(Ns);return e||ir(!1),e}function lR(t){let e=C9(),n=e.matches[e.matches.length-1];return n.route.id||ir(!1),n.route.id}function k9(){var t;let e=X.useContext(rR),n=P9(),r=lR();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function I9(){let{router:t}=T9(oR.UseNavigateStable),e=lR(sR.UseNavigateStable),n=X.useRef(!1);return iR(()=>{n.current=!0}),X.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Mp({fromRouteId:e},a)))},[t,e])}const ZN={};function O9(t,e,n){ZN[t]||(ZN[t]=!0)}function j9(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function R9(t){let{to:e,replace:n,state:r,relative:i}=t;Sf()||ir(!1);let{future:a,static:o}=X.useContext(Dl),{matches:s}=X.useContext(Ns),{pathname:l}=lc(),u=ro(),c=bS(e,xS(s,a.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return X.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function lr(t){ir(!1)}function L9(t){let{basename:e="/",children:n=null,location:r,navigationType:i=fl.Pop,navigator:a,static:o=!1,future:s}=t;Sf()&&ir(!1);let l=e.replace(/^\/*/,"/"),u=X.useMemo(()=>({basename:l,navigator:a,static:o,future:Mp({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof r=="string"&&(r=_f(r));let{pathname:c="/",search:d="",hash:p="",state:h=null,key:v="default"}=r,y=X.useMemo(()=>{let w=vS(c,l);return w==null?null:{location:{pathname:w,search:d,hash:p,state:h,key:v},navigationType:i}},[l,c,d,p,h,v,i]);return y==null?null:X.createElement(Dl.Provider,{value:u},X.createElement(Z0.Provider,{children:n,value:y}))}function M9(t){let{children:e,location:n}=t;return b9(c2(e),n)}new Promise(()=>{});function c2(t,e){e===void 0&&(e=[]);let n=[];return X.Children.forEach(t,(r,i)=>{if(!X.isValidElement(r))return;let a=[...e,i];if(r.type===X.Fragment){n.push.apply(n,c2(r.props.children,a));return}r.type!==lr&&ir(!1),!r.props.index||!r.props.children||ir(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=c2(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d2(){return d2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d2.apply(this,arguments)}function D9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function F9(t,e){return t.button===0&&(!e||e==="_self")&&!$9(t)}const U9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],B9="6";try{window.__reactRouterVersion=B9}catch{}const q9="startTransition",QN=jF[q9];function V9(t){let{basename:e,children:n,future:r,window:i}=t,a=X.useRef();a.current==null&&(a.current=HB({window:i,v5Compat:!0}));let o=a.current,[s,l]=X.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=X.useCallback(d=>{u&&QN?QN(()=>l(d)):l(d)},[l,u]);return X.useLayoutEffect(()=>o.listen(c),[o,c]),X.useEffect(()=>j9(r),[r]),X.createElement(L9,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:o,future:r})}const z9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uR=X.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:s,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,p=D9(e,U9),{basename:h}=X.useContext(Dl),v,y=!1;if(typeof u=="string"&&H9.test(u)&&(v=u,z9))try{let A=new URL(window.location.href),N=u.startsWith("//")?new URL(A.protocol+u):new URL(u),E=vS(N.pathname,h);N.origin===A.origin&&E!=null?u=E+N.search+N.hash:y=!0}catch{}let w=v9(u,{relative:i}),b=G9(u,{replace:o,state:s,target:l,preventScrollReset:c,relative:i,viewTransition:d});function _(A){r&&r(A),A.defaultPrevented||b(A)}return X.createElement("a",d2({},p,{href:v||w,onClick:y||a?r:_,ref:n,target:l}))});var eT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eT||(eT={}));var tT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tT||(tT={}));function G9(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:s}=e===void 0?{}:e,l=ro(),u=lc(),c=aR(t,{relative:o});return X.useCallback(d=>{if(F9(d,n)){d.preventDefault();let p=r!==void 0?r:pv(u)===pv(c);l(t,{replace:p,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[u,l,c,r,i,n,t,a,o,s])}var f2=function(t,e){return f2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},f2(t,e)};function cR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mv=function(){return mv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mv.apply(this,arguments)};function Af(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dR(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function fR(t,e){return function(n,r){e(n,r,t)}}function hR(t,e,n,r,i,a){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var s=r.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&t?r.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),d,p=!1,h=n.length-1;h>=0;h--){var v={};for(var y in r)v[y]=y==="access"?{}:r[y];for(var y in r.access)v.access[y]=r.access[y];v.addInitializer=function(b){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(b||null))};var w=(0,n[h])(s==="accessor"?{get:c.get,set:c.set}:c[l],v);if(s==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=o(w.get))&&(c.get=d),(d=o(w.set))&&(c.set=d),(d=o(w.init))&&i.unshift(d)}else(d=o(w))&&(s==="field"?i.unshift(d):c[l]=d)}u&&Object.defineProperty(u,r.name,c),p=!0}function pR(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function mR(t){return typeof t=="symbol"?t:"".concat(t)}function gR(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function yR(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ut(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})}function vR(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var e1=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function xR(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&e1(e,t,n)}function gv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _S(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function bR(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_S(arguments[e]));return t}function wR(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function _R(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Ud(t){return this instanceof Ud?(this.v=t,this):new Ud(t)}function SR(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(v){return Promise.resolve(v).then(h,d)}}function s(h,v){r[h]&&(i[h]=function(y){return new Promise(function(w,b){a.push([h,y,w,b])>1||l(h,y)})},v&&(i[h]=v(i[h])))}function l(h,v){try{u(r[h](v))}catch(y){p(a[0][3],y)}}function u(h){h.value instanceof Ud?Promise.resolve(h.value.v).then(c,d):p(a[0][2],h)}function c(h){l("next",h)}function d(h){l("throw",h)}function p(h,v){h(v),a.shift(),a.length&&l(a[0][0],a[0][1])}}function AR(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=t[i]?function(o){return(n=!n)?{value:Ud(t[i](o)),done:!1}:a?a(o):o}:a}}function ER(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gv=="function"?gv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(o){return new Promise(function(s,l){o=t[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function NR(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var W9=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},h2=function(t){return h2=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},h2(t)};function TR(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=h2(t),r=0;r<n.length;r++)n[r]!=="default"&&e1(e,t,n[r]);return W9(e,t),e}function PR(t){return t&&t.__esModule?t:{default:t}}function CR(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function kR(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function IR(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function OR(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var K9=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function jR(t){function e(a){t.error=t.hasError?new K9(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function RR(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,a,o){return r?e?".jsx":".js":i&&(!a||!o)?n:i+a+"."+o.toLowerCase()+"js"}):t}const J9={__extends:cR,__assign:mv,__rest:Af,__decorate:dR,__param:fR,__esDecorate:hR,__runInitializers:pR,__propKey:mR,__setFunctionName:gR,__metadata:yR,__awaiter:ut,__generator:vR,__createBinding:e1,__exportStar:xR,__values:gv,__read:_S,__spread:bR,__spreadArrays:wR,__spreadArray:_R,__await:Ud,__asyncGenerator:SR,__asyncDelegator:AR,__asyncValues:ER,__makeTemplateObject:NR,__importStar:TR,__importDefault:PR,__classPrivateFieldGet:CR,__classPrivateFieldSet:kR,__classPrivateFieldIn:IR,__addDisposableResource:OR,__disposeResources:jR,__rewriteRelativeImportExtension:RR},Y9=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:OR,get __assign(){return mv},__asyncDelegator:AR,__asyncGenerator:SR,__asyncValues:ER,__await:Ud,__awaiter:ut,__classPrivateFieldGet:CR,__classPrivateFieldIn:IR,__classPrivateFieldSet:kR,__createBinding:e1,__decorate:dR,__disposeResources:jR,__esDecorate:hR,__exportStar:xR,__extends:cR,__generator:vR,__importDefault:PR,__importStar:TR,__makeTemplateObject:NR,__metadata:yR,__param:fR,__propKey:mR,__read:_S,__rest:Af,__rewriteRelativeImportExtension:RR,__runInitializers:pR,__setFunctionName:gR,__spread:bR,__spreadArray:_R,__spreadArrays:wR,__values:gv,default:J9},Symbol.toStringTag,{value:"Module"})),X9=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class SS extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Z9 extends SS{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nT extends SS{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class rT extends SS{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var p2;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(p2||(p2={}));class Q9{constructor(e,{headers:n={},customFetch:r,region:i=p2.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=X9(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ut(this,arguments,void 0,function*(n,r={}){var i;let a,o;try{const{headers:s,method:l,body:u,signal:c,timeout:d}=r;let p={},{region:h}=r;h||(h=this.region);const v=new URL(`${this.url}/${n}`);h&&h!=="any"&&(p["x-region"]=h,v.searchParams.set("forceFunctionRegion",h));let y;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(p["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(p["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let w=c;d&&(o=new AbortController,a=setTimeout(()=>o.abort(),d),c?(w=o.signal,c.addEventListener("abort",()=>o.abort())):w=o.signal);const b=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),s),body:y,signal:w}).catch(E=>{throw new Z9(E)}),_=b.headers.get("x-relay-error");if(_&&_==="true")throw new nT(b);if(!b.ok)throw new rT(b);let A=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),N;return A==="application/json"?N=yield b.json():A==="application/octet-stream"||A==="application/pdf"?N=yield b.blob():A==="text/event-stream"?N=b:A==="multipart/form-data"?N=yield b.formData():N=yield b.text(),{data:N,error:null,response:b}}catch(s){return{data:null,error:s,response:s instanceof rT||s instanceof nT?s.context:void 0}}finally{a&&clearTimeout(a)}})}}var ui={};const Ef=yF(Y9);var Hg={},Gg={},Wg={},Kg={},Jg={},Yg={},iT;function LR(){if(iT)return Yg;iT=1,Object.defineProperty(Yg,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Yg.default=t,Yg}var aT;function MR(){if(aT)return Jg;aT=1,Object.defineProperty(Jg,"__esModule",{value:!0});const e=Ef.__importDefault(LR());class n{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let s=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,c,d,p;let h=null,v=null,y=null,w=l.status,b=l.statusText;if(l.ok){if(this.method!=="HEAD"){const E=await l.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=E:v=JSON.parse(E))}const A=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),N=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");A&&N&&N.length>1&&(y=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(h={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,w=406,b="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const A=await l.text();try{h=JSON.parse(A),Array.isArray(h)&&l.status===404&&(v=[],h=null,w=200,b="OK")}catch{l.status===404&&A===""?(w=204,b="No Content"):h={message:A}}if(h&&this.isMaybeSingle&&(!((p=h==null?void 0:h.details)===null||p===void 0)&&p.includes("0 rows"))&&(h=null,w=200,b="OK"),h&&this.shouldThrowOnError)throw new e.default(h)}return{error:h,data:v,count:y,status:w,statusText:b}});return this.shouldThrowOnError||(s=s.catch(l=>{var u,c,d;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(c=l==null?void 0:l.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(d=l==null?void 0:l.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),s.then(i,a)}returns(){return this}overrideTypes(){return this}}return Jg.default=n,Jg}var oT;function DR(){if(oT)return Kg;oT=1,Object.defineProperty(Kg,"__esModule",{value:!0});const e=Ef.__importDefault(MR());class n extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var c;const d=[i?"analyze":null,a?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Kg.default=n,Kg}var sT;function AS(){if(sT)return Wg;sT=1,Object.defineProperty(Wg,"__esModule",{value:!0});const e=Ef.__importDefault(DR()),n=new RegExp("[,()]");class r extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const s=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${s})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:s,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(a,`${u}fts${c}.${o}`),this}match(a){return Object.entries(a).forEach(([o,s])=>{this.url.searchParams.append(o,`eq.${s}`)}),this}not(a,o,s){return this.url.searchParams.append(a,`not.${o}.${s}`),this}or(a,{foreignTable:o,referencedTable:s=o}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,o,s){return this.url.searchParams.append(a,`${o}.${s}`),this}}return Wg.default=r,Wg}var lT;function $R(){if(lT)return Gg;lT=1,Object.defineProperty(Gg,"__esModule",{value:!0});const e=Ef.__importDefault(AS());class n{constructor(i,{headers:a={},schema:o,fetch:s}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=s}select(i,a){const{head:o=!1,count:s}=a??{},l=o?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",c),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var s;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((p,h)=>p.concat(Object.keys(h)),[]);if(d.length>0){const p=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var o;const s="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Gg.default=n,Gg}var uT;function eq(){if(uT)return Hg;uT=1,Object.defineProperty(Hg,"__esModule",{value:!0});const t=Ef,e=t.__importDefault($R()),n=t.__importDefault(AS());class r{constructor(a,{headers:o={},schema:s,fetch:l}={}){this.url=a,this.headers=new Headers(o),this.schemaName=s,this.fetch=l}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:s=!1,get:l=!1,count:u}={}){var c;let d;const p=new URL(`${this.url}/rpc/${a}`);let h;s||l?(d=s?"HEAD":"GET",Object.entries(o).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{p.searchParams.append(y,w)})):(d="POST",h=o);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new n.default({method:d,url:p,headers:v,schema:this.schemaName,body:h,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Hg.default=r,Hg}Object.defineProperty(ui,"__esModule",{value:!0});var FR=ui.PostgrestError=JR=ui.PostgrestBuilder=WR=ui.PostgrestTransformBuilder=HR=ui.PostgrestFilterBuilder=VR=ui.PostgrestQueryBuilder=BR=ui.PostgrestClient=void 0;const Nf=Ef,UR=Nf.__importDefault(eq());var BR=ui.PostgrestClient=UR.default;const qR=Nf.__importDefault($R());var VR=ui.PostgrestQueryBuilder=qR.default;const zR=Nf.__importDefault(AS());var HR=ui.PostgrestFilterBuilder=zR.default;const GR=Nf.__importDefault(DR());var WR=ui.PostgrestTransformBuilder=GR.default;const KR=Nf.__importDefault(MR());var JR=ui.PostgrestBuilder=KR.default;const YR=Nf.__importDefault(LR());FR=ui.PostgrestError=YR.default;var XR=ui.default={PostgrestClient:UR.default,PostgrestQueryBuilder:qR.default,PostgrestFilterBuilder:zR.default,PostgrestTransformBuilder:GR.default,PostgrestBuilder:KR.default,PostgrestError:YR.default};const tq=UO({__proto__:null,get PostgrestBuilder(){return JR},get PostgrestClient(){return BR},get PostgrestError(){return FR},get PostgrestFilterBuilder(){return HR},get PostgrestQueryBuilder(){return VR},get PostgrestTransformBuilder(){return WR},default:XR},[ui]),{PostgrestClient:nq,PostgrestQueryBuilder:FEe,PostgrestFilterBuilder:UEe,PostgrestTransformBuilder:BEe,PostgrestBuilder:qEe,PostgrestError:VEe}=XR||tq;class rq{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const iq="2.81.0",aq=`realtime-js/${iq}`,ZR="1.0.0",oq="2.0.0",cT=ZR,m2=1e4,sq=1e3,lq=100;var Tu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Tu||(Tu={}));var wr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wr||(wr={}));var ya;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ya||(ya={}));var g2;(function(t){t.websocket="websocket"})(g2||(g2={}));var Pu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pu||(Pu={}));class uq{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,n){if(this._isArrayBuffer(e.payload))return n(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodePush(e){const{join_ref:n,ref:r,event:i,topic:a,payload:o}=e,s=this.META_LENGTH+n.length+r.length+a.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+s);let u=new DataView(l),c=0;u.setUint8(c++,this.KINDS.push),u.setUint8(c++,n.length),u.setUint8(c++,r.length),u.setUint8(c++,a.length),u.setUint8(c++,i.length),Array.from(n,p=>u.setUint8(c++,p.charCodeAt(0))),Array.from(r,p=>u.setUint8(c++,p.charCodeAt(0))),Array.from(a,p=>u.setUint8(c++,p.charCodeAt(0))),Array.from(i,p=>u.setUint8(c++,p.charCodeAt(0)));var d=new Uint8Array(l.byteLength+o.byteLength);return d.set(new Uint8Array(l),0),d.set(new Uint8Array(o),l.byteLength),d.buffer}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const{join_ref:i,ref:a,topic:o}=e,s=e.payload.event,l=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),u=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+a.length+o.length+s.length,c=new ArrayBuffer(this.HEADER_LENGTH+u);let d=new DataView(c),p=0;d.setUint8(p++,this.KINDS.userBroadcastPush),d.setUint8(p++,i.length),d.setUint8(p++,a.length),d.setUint8(p++,o.length),d.setUint8(p++,s.length),d.setUint8(p++,this.BINARY_ENCODING),Array.from(i,v=>d.setUint8(p++,v.charCodeAt(0))),Array.from(a,v=>d.setUint8(p++,v.charCodeAt(0))),Array.from(o,v=>d.setUint8(p++,v.charCodeAt(0))),Array.from(s,v=>d.setUint8(p++,v.charCodeAt(0)));var h=new Uint8Array(c.byteLength+l.byteLength);return h.set(new Uint8Array(c),0),h.set(new Uint8Array(l),c.byteLength),h.buffer}_encodeJsonUserBroadcastPush(e){var n,r;const{join_ref:i,ref:a,topic:o}=e,s=e.payload.event,l=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(l)).buffer,d=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+a.length+o.length+s.length,p=new ArrayBuffer(this.HEADER_LENGTH+d);let h=new DataView(p),v=0;h.setUint8(v++,this.KINDS.userBroadcastPush),h.setUint8(v++,i.length),h.setUint8(v++,a.length),h.setUint8(v++,o.length),h.setUint8(v++,s.length),h.setUint8(v++,this.JSON_ENCODING),Array.from(i,w=>h.setUint8(v++,w.charCodeAt(0))),Array.from(a,w=>h.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>h.setUint8(v++,w.charCodeAt(0))),Array.from(s,w=>h.setUint8(v++,w.charCodeAt(0)));var y=new Uint8Array(p.byteLength+c.byteLength);return y.set(new Uint8Array(p),0),y.set(new Uint8Array(c),p.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,a,o,s,l]=r;return n({join_ref:i,ref:a,topic:o,event:s,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,n,i);case this.KINDS.reply:return this._decodeReply(e,n,i);case this.KINDS.broadcast:return this._decodeBroadcast(e,n,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodePush(e,n,r){const i=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3);let s=this.HEADER_LENGTH+this.META_LENGTH-1;const l=r.decode(e.slice(s,s+i));s=s+i;const u=r.decode(e.slice(s,s+a));s=s+a;const c=r.decode(e.slice(s,s+o));s=s+o;const d=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{join_ref:l,ref:null,topic:u,event:c,payload:d}}_decodeReply(e,n,r){const i=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),s=n.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const u=r.decode(e.slice(l,l+i));l=l+i;const c=r.decode(e.slice(l,l+a));l=l+a;const d=r.decode(e.slice(l,l+o));l=l+o;const p=r.decode(e.slice(l,l+s));l=l+s;const h=JSON.parse(r.decode(e.slice(l,e.byteLength))),v={status:p,response:h};return{join_ref:u,ref:c,topic:d,event:ya.reply,payload:v}}_decodeBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const s=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{join_ref:null,ref:null,topic:s,event:l,payload:u}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2),o=n.getUint8(3),s=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+i));l=l+i;const c=r.decode(e.slice(l,l+a));l=l+a;const d=r.decode(e.slice(l,l+o));l=l+o;const p=e.slice(l,e.byteLength),h=s===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,v={type:this.BROADCAST,event:c,payload:h};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class QR{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var wn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(wn||(wn={}));const dT=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=cq(o,t,e,i),a),{}):{}},cq=(t,e,n,r)=>{const i=e.find(s=>s.name===t),a=i==null?void 0:i.type,o=n[t];return a&&!r.includes(a)?eL(a,o):y2(o)},eL=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return pq(e,n)}switch(t){case wn.bool:return dq(e);case wn.float4:case wn.float8:case wn.int2:case wn.int4:case wn.int8:case wn.numeric:case wn.oid:return fq(e);case wn.json:case wn.jsonb:return hq(e);case wn.timestamp:return mq(e);case wn.abstime:case wn.date:case wn.daterange:case wn.int4range:case wn.int8range:case wn.money:case wn.reltime:case wn.text:case wn.time:case wn.timestamptz:case wn.timetz:case wn.tsrange:case wn.tstzrange:return y2(e);default:return y2(e)}},y2=t=>t,dq=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fq=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},hq=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},pq=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const o=t.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>eL(e,s))}return t},mq=t=>typeof t=="string"?t.replace(" ","T"):t,tL=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ub{constructor(e,n,r={},i=m2){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fT;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(fT||(fT={}));class ap{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ap.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=ap.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ap.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),o=this.transformState(n),s={},l={};return this.map(a,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=a[u];if(d){const p=c.map(w=>w.presence_ref),h=d.map(w=>w.presence_ref),v=c.filter(w=>h.indexOf(w.presence_ref)<0),y=d.filter(w=>p.indexOf(w.presence_ref)<0);v.length>0&&(s[u]=v),y.length>0&&(l[u]=y)}else s[u]=c}),this.syncDiff(a,{joins:s,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var u;const c=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),c.length>0){const d=e[s].map(h=>h.presence_ref),p=c.filter(h=>d.indexOf(h.presence_ref)<0);e[s].unshift(...p)}r(s,c,l)}),this.map(o,(s,l)=>{let u=e[s];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hT||(hT={}));var op;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(op||(op={}));var ns;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ns||(ns={}));class ES{constructor(e,n={config:{}},r){var i,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ub(this,ya.join,this.params,this.timeout),this.rejoinTimer=new QR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ya.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new ap(this),this.broadcastEndpointURL=tL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==wr.closed){const{config:{broadcast:o,presence:s,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[op.PRESENCE]&&this.bindings[op.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},p={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(ns.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(ns.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var v;if(this.socket.setAuth(),h===void 0){e==null||e(ns.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,b=[];for(let _=0;_<w;_++){const A=y[_],{filter:{event:N,schema:E,table:P,filter:I}}=A,O=h&&h[_];if(O&&O.event===N&&O.schema===E&&O.table===P&&O.filter===I)b.push(Object.assign(Object.assign({},A),{id:O.id}));else{this.unsubscribe(),this.state=wr.errored,e==null||e(ns.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(ns.SUBSCRIBED);return}}).receive("error",h=>{this.state=wr.errored,e==null||e(ns.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ns.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===wr.joined&&e===op.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const u=await s.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ya.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new ub(this,ya.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wr.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ub(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>lq){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const o=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:c}=ya;if(r&&[s,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var v,y,w;return((v=h.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(y=h.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(h=>h.callback(p,r)):(a=this.bindings[o])===null||a===void 0||a.filter(h=>{var v,y,w,b,_,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const N=h.id,E=(v=h.filter)===null||v===void 0?void 0:v.event;return N&&((y=n.ids)===null||y===void 0?void 0:y.includes(N))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(_=(b=h==null?void 0:h.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return N==="*"||N===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:y,table:w,commit_timestamp:b,type:_,errors:A}=v;p=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:b,eventType:_,new:{},old:{},errors:A}),this._getPayloadRecords(v))}h.callback(p,r)})}_isClosed(){return this.state===wr.closed}_isJoined(){return this.state===wr.joined}_isJoining(){return this.state===wr.joining}_isLeaving(){return this.state===wr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ES.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ya.close,{},e)}_onError(e){this._on(ya.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=dT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=dT(e.columns,e.old_record)),n}}const cb=()=>{},Xg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gq=[1e3,2e3,5e3,1e4],yq=1e4,vq=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xq{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=m2,this.transport=null,this.heartbeatIntervalMs=Xg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cb,this.ref=0,this.reconnectTimer=null,this.vsn=cT,this.logger=cb,this.conn=null,this.sendBuffer=[],this.serializer=new uq,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${g2.websocket}`,this.httpEndpoint=tL(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rq.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Tu.connecting:return Pu.Connecting;case Tu.open:return Pu.Open;case Tu.closing:return Pu.Closing;default:return Pu.Closed}}isConnected(){return this.connectionState()===Pu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new ES(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,o=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(sq,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Xg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=n,s=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${i} ${s}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Tu.open||this.conn.readyState===Tu.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ya.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([vq],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:aq};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(ya.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new QR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,a,o,s,l,u,c,d,p,h;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:m2,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Xg.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:cb,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:cT,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:v=>gq[v-1]||yq,this.vsn){case ZR:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(v,y)=>y(JSON.stringify(v)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(v,y)=>y(JSON.parse(v));break;case oq:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class NS extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function $n(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class bq extends NS{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class v2 extends NS{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const TS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wq=()=>Response,x2=t=>{if(Array.isArray(t))return t.map(n=>x2(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=x2(r)}),e},_q=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},db=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Sq=(t,e,n)=>ut(void 0,void 0,void 0,function*(){const r=yield wq();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new bq(db(i),a,o))}).catch(i=>{e(new v2(db(i),i))}):e(new v2(db(t),t))}),Aq=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(_q(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Im(t,e,n,r,i,a){return ut(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(n,Aq(e,r,i,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Sq(l,s,r))})})}function Dp(t,e,n,r){return ut(this,void 0,void 0,function*(){return Im(t,"GET",e,n,r)})}function Ha(t,e,n,r,i){return ut(this,void 0,void 0,function*(){return Im(t,"POST",e,r,i,n)})}function b2(t,e,n,r,i){return ut(this,void 0,void 0,function*(){return Im(t,"PUT",e,r,i,n)})}function Eq(t,e,n,r){return ut(this,void 0,void 0,function*(){return Im(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function PS(t,e,n,r,i){return ut(this,void 0,void 0,function*(){return Im(t,"DELETE",e,r,i,n)})}class Nq{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ut(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}}var nL;class Tq{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[nL]="BlobDownloadBuilder",this.promise=null}asStream(){return new Nq(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ut(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if($n(e))return{data:null,error:e};throw e}})}}nL=Symbol.toStringTag;const Pq={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Cq{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=TS(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return ut(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},pT),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),l&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(l))):(a=r,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),d=yield(e=="PUT"?b2:Ha)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($n(a))return{data:null,error:a};throw a}})}upload(e,n,r){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return ut(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:pT.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield b2(this.fetch,s.toString(),l,{headers:c});return{data:{path:a,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if($n(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return ut(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield Ha(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new NS("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}update(e,n,r){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ut(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}copy(e,n,r){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield Ha(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return ut(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Ha(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return ut(this,void 0,void 0,function*(){try{const i=yield Ha(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"",s=this._getFinalPath(e),l=()=>Dp(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0});return new Tq(l,this.shouldThrowOnError)}info(e){return ut(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Dp(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:x2(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}exists(e){return ut(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Eq(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r)&&r instanceof v2){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const s=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${u}`)}}}remove(e){return ut(this,void 0,void 0,function*(){try{return{data:yield PS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}list(e,n,r){return ut(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Pq),n),{prefix:e||""});return{data:yield Ha(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}listV2(e,n){return ut(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ha(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const rL="2.81.0",iL={"X-Client-Info":`storage-js/${rL}`};class kq{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iL),n),this.fetch=TS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ut(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Dp(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}getBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Dp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}createBucket(e){return ut(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return ut(this,void 0,void 0,function*(){try{return{data:yield b2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield PS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class Iq{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iL),n),this.fetch=TS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}listBuckets(e){return ut(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Dp(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield PS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}}const CS={"X-Client-Info":`storage-js/${rL}`,"Content-Type":"application/json"};class aL extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function zi(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class fb extends aL{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Oq extends aL{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var mT;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(mT||(mT={}));const kS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),jq=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gT=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Rq=(t,e,n)=>ut(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(o=>{const s=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new fb(gT(o),i,s))}).catch(()=>{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new fb(s,i,o))});else{const o=i+"",s=a.statusText||`HTTP ${i} error`;e(new fb(s,i,o))}}else e(new Oq(gT(t),t))}),Lq=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(jq(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function Mq(t,e,n,r,i,a){return ut(this,void 0,void 0,function*(){return new Promise((o,s)=>{t(n,Lq(e,r,i,a)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Rq(l,s,r))})})}function Hi(t,e,n,r,i){return ut(this,void 0,void 0,function*(){return Mq(t,"POST",e,r,i,n)})}class Dq{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CS),n),this.fetch=kS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ut(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zi(r))return{data:null,error:r};throw r}})}listIndexes(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ut(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zi(r))return{data:null,error:r};throw r}})}}class $q{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CS),n),this.fetch=kS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ut(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Hi(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}getVectors(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}listVectors(e){return ut(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Hi(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}queryVectors(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ut(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Hi(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}}class Fq{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CS),n),this.fetch=kS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}getBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}listBuckets(){return ut(this,arguments,void 0,function*(e={}){try{return{data:yield Hi(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}}class Uq extends Fq{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Bq(this.url,this.headers,e,this.fetch)}}class Bq extends Dq{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ut(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ut(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ut(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ut(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new qq(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class qq extends $q{constructor(e,n,r,i,a){super(e,n,a),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ut(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ut(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ut(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ut(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ut(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Vq extends kq{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new Cq(this.url,this.headers,e,this.fetch)}get vectors(){return new Uq(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Iq(this.url+"/iceberg",this.headers,this.fetch)}}const zq="2.81.0";let Wh="";typeof Deno<"u"?Wh="deno":typeof document<"u"?Wh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wh="react-native":Wh="node";const Hq={"X-Client-Info":`supabase-js-${Wh}/${zq}`},Gq={headers:Hq},Wq={schema:"public"},Kq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jq={},Yq=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Xq=()=>Headers,Zq=(t,e,n)=>{const r=Yq(n),i=Xq();return async(a,o)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},o),{headers:u}))}};function Qq(t){return t.endsWith("/")?t:t+"/"}function eV(t,e){var n,r;const{db:i,auth:a,realtime:o,global:s}=t,{db:l,auth:u,realtime:c,global:d}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function tV(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Qq(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const oL="2.81.0",Hc=30*1e3,w2=3,hb=w2*Hc,nV="http://localhost:9999",rV="supabase.auth.token",iV={"X-Client-Info":`gotrue-js/${oL}`},_2="X-Supabase-Api-Version",sL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oV=10*60*1e3;class $p extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function pt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class sV extends $p{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function lV(t){return pt(t)&&t.name==="AuthApiError"}class Cu extends $p{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class $l extends $p{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class qa extends $l{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uV(t){return pt(t)&&t.name==="AuthSessionMissingError"}class jc extends $l{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zg extends $l{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qg extends $l{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cV(t){return pt(t)&&t.name==="AuthImplicitGrantRedirectError"}class yT extends $l{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class S2 extends $l{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function pb(t){return pt(t)&&t.name==="AuthRetryableFetchError"}class vT extends $l{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class A2 extends $l{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const yv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xT=` 	
\r=`.split(""),dV=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<xT.length;e+=1)t[xT[e].charCodeAt(0)]=-2;for(let e=0;e<yv.length;e+=1)t[yv[e].charCodeAt(0)]=e;return t})();function bT(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(yv[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(yv[r]),e.queuedBits-=6}}function lL(t,e,n){const r=dV[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function wT(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{pV(o,r,n)};for(let o=0;o<t.length;o+=1)lL(t.charCodeAt(o),i,a);return e.join("")}function fV(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function hV(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}fV(r,e)}}function pV(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function wd(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)lL(t.charCodeAt(i),n,r);return new Uint8Array(e)}function mV(t){const e=[];return hV(t,n=>e.push(n)),new Uint8Array(e)}function Lu(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>bT(i,n,r)),bT(null,n,r),e.join("")}function gV(t){return Math.round(Date.now()/1e3)+t}function yV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qr=()=>typeof window<"u"&&typeof document<"u",mu={tested:!1,writable:!1},uL=()=>{if(!Qr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mu.tested)return mu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),mu.tested=!0,mu.writable=!0}catch{mu.tested=!0,mu.writable=!1}return mu.writable};function vV(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const cL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xV=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Gc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},gu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Zs=async(t,e)=>{await t.removeItem(e)};class t1{constructor(){this.promise=new t1.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}t1.promiseConstructor=Promise;function mb(t){const e=t.split(".");if(e.length!==3)throw new A2("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!aV.test(e[r]))throw new A2("JWT not in base64url format");return{header:JSON.parse(wT(e[0])),payload:JSON.parse(wT(e[1])),signature:wd(e[2]),raw:{header:e[0],payload:e[1]}}}async function bV(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function wV(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function _V(t){return("0"+t.toString(16)).substr(-2)}function SV(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,_V).join("")}async function AV(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function EV(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await AV(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rc(t,e,n=!1){const r=SV();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Gc(t,`${e}-code-verifier`,i);const a=await EV(r);return[a,r===a?"plain":"s256"]}const NV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TV(t){const e=t.headers.get(_2);if(!e||!e.match(NV))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function PV(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function CV(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lc(t){if(!kV.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gb(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function IV(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function _T(t){return JSON.parse(JSON.stringify(t))}const _u=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),OV=[502,503,504];async function ST(t){var e;if(!xV(t))throw new S2(_u(t),0);if(OV.includes(t.status))throw new S2(_u(t),t.status);let n;try{n=await t.json()}catch(a){throw new Cu(_u(a),a)}let r;const i=TV(t);if(i&&i.getTime()>=sL["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new vT(_u(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new qa}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new vT(_u(n),t.status,n.weak_password.reasons);throw new sV(_u(n),t.status||500,r)}const jV=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function St(t,e,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[_2]||(a[_2]=sL["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await RV(t,e,n+s,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function RV(t,e,n,r,i,a){const o=jV(e,r,i,a);let s;try{s=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new S2(_u(l),0)}if(s.ok||await ST(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await ST(l)}}function Va(t){var e;let n=null;DV(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=gV(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function AT(t){const e=Va(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ll(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function LV(t){return{data:t,error:null}}function MV(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,o=Af(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function ET(t){return t}function DV(t){return t.access_token&&t.refresh_token&&t.expires_in}const yb=["global","local","others"];class $V{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=cL(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=yb[0]){if(yb.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yb.join(", ")}`);try{return await St(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await St(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ll})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Af(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await St(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:MV,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(pt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await St(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ll})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await St(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:ET});if(c.error)throw c.error;const d=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(pt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Lc(e);try{return await St(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ll})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Lc(e);try{return await St(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ll})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Lc(e);try{return await St(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ll})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Lc(e.userId);try{const{data:n,error:r}=await St(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(pt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Lc(e.userId),Lc(e.id);try{return{data:await St(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,a,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await St(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:ET});if(c.error)throw c.error;const d=await c.json(),p=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(pt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await St(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await St(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await St(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pt(n))return{data:null,error:n};throw n}}}function NT(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Mc={debug:!!(globalThis&&uL()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class FV extends dL{}async function UV(t,e,n){Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new FV(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Mc.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function BV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function fL(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function qV(t){return parseInt(t,16)}function VV(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function zV(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:s,requestId:l,resources:u,scheme:c,uri:d,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const h=fL(t.address),v=c?`${c}://${r}`:r,y=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${h}

${y}`;let b=`URI: ${d}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(b+=`
Expiration Time: ${i.toISOString()}`),s&&(b+=`
Not Before: ${s.toISOString()}`),l&&(b+=`
Request ID: ${l}`),u){let _=`
Resources:`;for(const A of u){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);_+=`
- ${A}`}b+=_}return`${w}
${b}`}class cr extends Error{constructor({message:e,code:n,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class vv extends cr{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function HV({error:t,options:e}){var n,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new cr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new cr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new cr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new cr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new cr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new cr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new cr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new cr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(hL(o)){if(a.rp.id!==o)return new cr({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new cr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new cr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new cr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new cr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function GV({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new cr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new cr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(hL(r)){if(n.rpId!==r)return new cr({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new cr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new cr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new cr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class WV{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const KV=new WV;function JV(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Af(t,["challenge","user","excludeCredentials"]),a=wd(e).buffer,o=Object.assign(Object.assign({},n),{id:wd(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];s.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:wd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function YV(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Af(t,["challenge","allowCredentials"]),i=wd(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const s=n[o];a.allowCredentials[o]=Object.assign(Object.assign({},s),{id:wd(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return a}function XV(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Lu(new Uint8Array(t.response.attestationObject)),clientDataJSON:Lu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ZV(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Lu(new Uint8Array(i.authenticatorData)),clientDataJSON:Lu(new Uint8Array(i.clientDataJSON)),signature:Lu(new Uint8Array(i.signature)),userHandle:i.userHandle?Lu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hL(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function TT(){var t,e;return!!(Qr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function QV(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vv("Browser returned unexpected credential type",e)}:{data:null,error:new vv("Empty credential response",e)}}catch(e){return{data:null,error:HV({error:e,options:t})}}}async function ez(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vv("Browser returned unexpected credential type",e)}:{data:null,error:new vv("Empty credential response",e)}}catch(e){return{data:null,error:GV({error:e,options:t})}}}const tz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},nz={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function xv(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))r[a]=o;else if(n(o))r[a]=o;else if(e(o)){const s=r[a];e(s)?r[a]=xv(s,o):r[a]=xv(o)}else r[a]=o}return r}function rz(t,e){return xv(tz,t,e||{})}function iz(t,e){return xv(nz,t,e||{})}class az{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},a){try{const{data:o,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:s};const l=i??KV.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=rz(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:c,error:d}=await QV({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=iz(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:c,error:d}=await ez(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return pt(o)?{data:null,error:o}:{data:null,error:new Cu("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new $p("rpId is required for WebAuthn authentication")};try{if(!TT())return{data:null,error:new Cu("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!o)return{data:null,error:s};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return pt(o)?{data:null,error:o}:{data:null,error:new Cu("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new $p("rpId is required for WebAuthn registration")};try{if(!TT())return{data:null,error:new Cu("Browser does not support WebAuthn",null)};const{data:o,error:s}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:s};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return pt(o)?{data:null,error:o}:{data:null,error:new Cu("Unexpected error in register",o)}}}}BV();const oz={url:nV,storageKey:rV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function PT(t,e,n){return await n()}const Dc={};class Fp{get jwks(){var e,n;return(n=(e=Dc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Dc[this.storageKey]=Object.assign(Object.assign({},Dc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Dc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Dc[this.storageKey]=Object.assign(Object.assign({},Dc[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},oz),e);if(this.storageKey=a.storageKey,this.instanceID=(n=Fp.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Fp.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Qr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new $V({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=cL(a.fetch),this.lock=a.lock||PT,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Qr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=UV:this.lock=PT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new az(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:uL()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=NT(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=NT(this.memoryStorage)),Qr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${oL}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Qr()&&(n=vV(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Qr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),cV(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return pt(n)?this._returnResult({error:n}):this._returnResult({error:new Cu("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Va}),{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(pt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:c,password:d,options:p}=e;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await Rc(this.storage,this.storageKey)),a=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:c,password:d,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:v},xform:Va})}else if("phone"in e){const{phone:c,password:d,options:p}=e;a=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Va})}else throw new Zg("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return this._returnResult({data:{user:null,session:null},error:s});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(pt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:o,options:s}=e;n=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:AT})}else if("phone"in e){const{phone:a,password:o,options:s}=e;n=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:AT})}else throw new Zg("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new jc;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(pt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,a,o,s,l,u,c,d,p;let h,v;if("message"in e)h=e.message,v=e.signature;else{const{chain:y,wallet:w,statement:b,options:_}=e;let A;if(Qr())if(typeof w=="object")A=w;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")A=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=w}const N=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),E=await A.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=fL(E[0]);let I=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const R=await A.request({method:"eth_chainId"});I=qV(R)}const O={domain:N.host,address:P,statement:b,uri:N.href,version:"1",chainId:I,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=_==null?void 0:_.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=_==null?void 0:_.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.resources};h=zV(O),v=await A.request({method:"personal_sign",params:[VV(h),P]})}try{const{data:y,error:w}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Va});if(w)throw w;if(!y||!y.session||!y.user){const b=new jc;return this._returnResult({data:{user:null,session:null},error:b})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(pt(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var n,r,i,a,o,s,l,u,c,d,p,h;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:w,wallet:b,statement:_,options:A}=e;let N;if(Qr())if(typeof b=="object")N=b;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))N=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=b}const E=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const P=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),_?{statement:_}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)v=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),y=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(i=(r=A==null?void 0:A.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=A==null?void 0:A.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((o=A==null?void 0:A.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((s=A==null?void 0:A.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((u=A==null?void 0:A.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((d=(c=A==null?void 0:A.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...A.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await N.signMessage(new TextEncoder().encode(v),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=P}}try{const{data:w,error:b}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Lu(y)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Va});if(b)throw b;if(!w||!w.session||!w.user){const _=new jc;return this._returnResult({data:{user:null,session:null},error:_})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:b})}catch(w){if(pt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const n=await gu(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:o}=await St(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Va});if(await Zs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const s=new jc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(pt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:o}=e,s=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Va}),{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new jc;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(pt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,a,o;try{if("email"in e){const{email:s,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Rc(this.storage,this.storageKey));const{error:d}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:c}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Zg("You must provide either an email or phone number.")}catch(s){if(pt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:s}=await St(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Va});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(pt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i;try{let a=null,o=null;this.flowType==="pkce"&&([a,o]=await Rc(this.storage,this.storageKey));const s=await St(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:LV});return this._returnResult(s)}catch(a){if(pt(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new qa;const{error:i}=await St(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(pt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:o}=await St(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:o,error:s}=await St(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s})}throw new Zg("You must provide either an email or phone number and a type")}catch(n){if(pt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await gu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<hb:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await gu(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=gb()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=IV(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ll}):await this._useSession(async n=>{var r,i,a;const{data:o,error:s}=n;if(s)throw s;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qa}:await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ll})})}catch(n){if(pt(n))return uV(n)&&(await this._removeSession(),await Zs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new qa;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await Rc(this.storage,this.storageKey));const{data:u,error:c}=await St(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:ll});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(pt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qa;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:o}=mb(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(pt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:s}=n;if(s)throw s;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new qa;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(pt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Qr())throw new Qg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yT("No code detected.");const{data:_,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:u}=e;if(!a||!s||!o||!u)throw new Qg("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(s);let p=c+d;l&&(p=parseInt(l));const h=p-c;h*1e3<=Hc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const v=p-d;c-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,c):c-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,c);const{data:y,error:w}=await this._getUser(a);if(w)throw w;const b={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:p,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(r){if(pt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await gu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({error:a});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:s}=await this.admin.signOut(o,e);if(s&&!(lV(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await Zs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=yV(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Rc(this.storage,this.storageKey,!0));try{return await St(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(pt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(pt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var o,s,l,u,c;const{data:d,error:p}=a;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await St(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Qr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(pt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:o,provider:s,token:l,access_token:u,nonce:c}=e,d=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Va}),{data:p,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new jc}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:h}))}catch(i){if(pt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)throw o;return await St(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(pt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await wV(async i=>(i>0&&await bV(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await St(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Va})),(i,a)=>{const o=200*Math.pow(2,i);return a&&pb(a)&&Date.now()+o-r<Hc})}catch(r){if(this._debug(n,"error",r),pt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Qr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await gu(this.storage,this.storageKey);if(i&&this.userStorage){let o=await gu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Gc(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:gb()}else if(i&&!i.user&&!i.user){const o=await gu(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Zs(this.storage,this.storageKey+"-user"),await Gc(this.storage,this.storageKey,i)):i.user=gb()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<hb;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${hb}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),pb(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:s}=await this._getUser(i.access_token);!s&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new qa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new t1;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new qa;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={data:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),pt(a)){const o={data:null,error:a};return pb(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,n)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Gc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=_T(i);await Gc(this.storage,this.storageKey,a)}else{const i=_T(n);await Gc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Zs(this.storage,this.storageKey),await Zs(this.storage,this.storageKey+"-code-verifier"),await Zs(this.storage,this.storageKey+"-user"),this.userStorage&&await Zs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Hc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Hc}ms, refresh threshold is ${w2} ticks`),i<=w2&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Rc(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await St(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(pt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await St(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(pt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?XV(e.webauthn.credential_response):ZV(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await St(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(n){if(pt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=await St(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:s}=o;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:JV(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:YV(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(pt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=mb(r.access_token);let o=null;a.aal&&(o=a.aal);let s=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(s="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:s,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await St(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new qa})})}catch(n){if(pt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new qa});const o=await St(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&Qr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(pt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new qa});const o=await St(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return o.data&&o.data.redirect_url&&Qr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(pt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(s=>s.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===e),r&&this.jwks_cached_at+oV>i)return r;const{data:a,error:o}=await St(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(s=>s.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:h,error:v}=await this.getSession();if(v||!h.session)return this._returnResult({data:null,error:v});r=h.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=mb(r);n!=null&&n.allowExpired||PV(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:a,header:i,signature:o},error:null}}const c=CV(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,mV(`${s}.${l}`)))throw new A2("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(pt(r))return this._returnResult({data:null,error:r});throw r}}}Fp.nextInstanceID={};const sz=Fp;class lz extends sz{constructor(e){super(e)}}class uz{constructor(e,n,r){var i,a,o;this.supabaseUrl=e,this.supabaseKey=n;const s=tV(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,u={db:Wq,realtime:Jq,auth:Object.assign(Object.assign({},Kq),{storageKey:l}),global:Gq},c=eV(r??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Zq(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new nq(new URL("rest/v1",s).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Vq(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Q9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:o,flowType:s,lock:l,debug:u,throwOnError:c},d,p){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lz({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:s,lock:l,debug:u,throwOnError:c,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new xq(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cz=(t,e,n)=>new uz(t,e,n);function dz(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}dz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fz="https://kivcusfsppjyalbgqtxy.supabase.co",hz="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtpdmN1c2ZzcHBqeWFsYmdxdHh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4NjI2NjYsImV4cCI6MjA3ODQzODY2Nn0.DMugE2X3gBvcRBXt-NqWceWQB2Vmi9kbavEE6MEjAmI",ke=cz(fz,hz);async function IS(){try{const{error:t}=await ke.auth.signOut();t&&console.error("Sign out error:",t)}catch(t){console.error("Sign out exception:",t)}window.location.href="/"}async function pz(){const{data:t,error:e}=await ke.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(e)throw e;return t}function mz({onAuthSuccess:t}){const[e,n]=X.useState(!1),[r,i]=X.useState(""),[a,o]=X.useState(""),[s,l]=X.useState(""),[u,c]=X.useState("student"),[d,p]=X.useState([]),[h,v]=X.useState([]),[y,w]=X.useState(!1),[b,_]=X.useState(!1),[A,N]=X.useState(!1),[E,P]=X.useState(null),[I,O]=X.useState(null);X.useEffect(()=>{e&&u==="student"&&R()},[e,u]);const R=async()=>{w(!0);try{const{data:L,error:F}=await ke.from("cohorts").select("id, name, description").order("name");if(F)throw F;v(L||[])}catch(L){console.error("Error loading cohorts:",L)}finally{w(!1)}},D=async()=>{N(!0),P(null),O(null);try{await pz()}catch(L){P(L.message||"Failed to sign in with Google. Please try again."),N(!1)}},C=async L=>{L.preventDefault(),_(!0),P(null),O(null);try{if(e){const{data:F,error:$}=await ke.auth.signUp({email:r,password:a,options:{data:{name:s,role:u},emailRedirectTo:window.location.origin}});if($)throw $;if(F.user&&!F.session){const V=u==="student"&&d.length>0?" After confirming your email, please join your selected cohorts from your profile page.":"";O(`Confirmation email sent to ${r}! Please check your inbox and click the confirmation link to activate your account.${V}`),_(!1),i(""),o(""),l(""),c("student"),p([]);return}if(F.user){let V=!1,Y=0;const W=5;for(;!V&&Y<W;){await new Promise(le=>setTimeout(le,500));const{data:U,error:Q}=await ke.from("users").select("id").eq("id",F.user.id).single();if(U&&!Q)V=!0;else if(Q&&Q.code==="PGRST116"){const{error:le}=await ke.from("users").insert({id:F.user.id,name:s,email:r,role:u});le||(V=!0)}Y++}V||console.error("User record was not created after signup")}if(F.session&&F.user){if(u==="student"&&d.length>0){await new Promise(Y=>setTimeout(Y,1e3));const{error:V}=await ke.from("users").select("id").eq("id",F.user.id).single();if(V)console.error("Cannot add cohorts: User record not found",V),P("Account created but failed to join cohorts. Please join them from your profile.");else{const Y=d.map(Q=>({cohort_id:Q,student_id:F.user.id})),{data:W,error:U}=await ke.from("cohort_members").insert(Y).select();U?(console.error("Error adding student to cohorts:",U),P(`Account created but failed to join some cohorts: ${U.message}. Please join them from your profile.`)):W&&console.log("Successfully added student to cohorts:",W)}}t()}}else{const{error:F}=await ke.auth.signInWithPassword({email:r,password:a});if(F)throw F;t()}}catch(F){P(F.message||"An error occurred"),_(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-primary-50 to-gray-100 px-4 py-8",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 md:p-10 w-full max-w-md border-2 border-gray-200",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("img",{src:"https://raw.githubusercontent.com/akashmanjunath2505/public/main/KAYA.png",alt:"Kaya Logo",className:"h-16 md:h-20 w-auto object-contain"})}),f.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Kaya CBDC V-OSCE"}),f.jsx("p",{className:"text-gray-600 mt-2 text-sm md:text-base",children:"Yashwant Ayurvedic College"})]}),f.jsx("button",{type:"button",onClick:D,disabled:A||b,className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-gray-300 text-gray-700 py-3 px-6 rounded-xl hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:opacity-50 font-medium text-base md:text-lg shadow-md transition-all transform hover:scale-[1.02] mb-4",children:A?f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f.jsx("span",{children:"Connecting..."})]}):f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[f.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),f.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),f.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),f.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),f.jsx("span",{children:"Sign in with Google"})]})}),f.jsxs("div",{className:"relative my-6",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-300"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),f.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),f.jsx("input",{type:"text",value:s,onChange:L=>l(L.target.value),required:e,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 placeholder-gray-400"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),f.jsxs("select",{value:u,onChange:L=>{c(L.target.value),p([])},required:e,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 bg-white",children:[f.jsx("option",{value:"student",children:"Student"}),f.jsx("option",{value:"faculty",children:"Faculty"}),f.jsx("option",{value:"admin",children:"Admin"})]})]}),u==="student"&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Cohorts (Optional)"}),y?f.jsx("div",{className:"text-sm text-gray-500",children:"Loading cohorts..."}):h.length===0?f.jsx("div",{className:"text-sm text-gray-500 p-3 bg-gray-50 rounded-md",children:"No cohorts available. You can join cohorts later from your profile settings."}):f.jsx("div",{className:"border border-gray-300 rounded-md max-h-40 overflow-y-auto p-2",children:h.map(L=>f.jsxs("label",{className:"flex items-start gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:d.includes(L.id),onChange:F=>{F.target.checked?p([...d,L.id]):p(d.filter($=>$!==L.id))},className:"mt-1"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.name}),L.description&&f.jsx("div",{className:"text-xs text-gray-500",children:L.description})]})]},L.id))}),d.length>0&&f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.length," cohort",d.length!==1?"s":""," selected"]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),f.jsx("input",{type:"email",value:r,onChange:L=>i(L.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 placeholder-gray-400"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),f.jsx("input",{type:"password",value:a,onChange:L=>o(L.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 placeholder-gray-400"})]}),E&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:E}),I&&f.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("svg",{className:"w-5 h-5 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:"Email Sent!"}),f.jsx("p",{className:"text-sm mt-1",children:I})]})]})}),f.jsx("button",{type:"submit",disabled:b,className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 text-white py-3 px-6 rounded-xl hover:from-primary-700 hover:to-primary-800 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 font-bold text-base md:text-lg shadow-lg transition-all transform hover:scale-[1.02]",children:b?"Loading...":e?"Sign Up":"Sign In"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx("button",{onClick:()=>{n(!e),P(null),O(null)},className:"text-primary-600 hover:text-primary-700 text-sm",children:e?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Nt=(t,e)=>{const n=X.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:s="",children:l,...u},c)=>X.createElement("svg",{ref:c,...gz,width:i,height:i,stroke:r,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${yz(t)}`,s].join(" "),...u},[...e.map(([d,p])=>X.createElement(d,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=Nt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Nt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=Nt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=Nt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Nt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Nt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Nt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Nt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Nt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=Nt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=Nt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Nt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=Nt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Nt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Nt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=Nt("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=Nt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=Nt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=Nt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=Nt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=Nt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=Nt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=Nt("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=Nt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Nt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=Nt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=Nt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=Nt("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=Nt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=Nt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Nt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=Nt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=Nt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=Nt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=Nt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=Nt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=Nt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=Nt("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=Nt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=Nt("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=Nt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Nt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=Nt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Nt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=Nt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Nt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=Nt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ti({role:t}){const e=lc(),n=async()=>{await IS()},a=t==="faculty"?[{path:"/dashboard",icon:bv,label:"Dashboard"},{path:"/create",icon:Om,label:"Create Station"},{path:"/library",icon:mL,label:"Library"},{path:"/analytics",icon:Eo,label:"Analytics"}]:[{path:"/admin/dashboard",icon:bv,label:"Dashboard"},{path:"/admin/cbdc",icon:Qi,label:"CBDC Manager"},{path:"/admin/reports",icon:Eo,label:"Reports"},{path:"/admin/users",icon:Cl,label:"Users"}];return f.jsx("div",{className:"hidden md:flex md:flex-col md:w-64 md:fixed md:inset-y-0 bg-white border-r border-gray-200",children:f.jsxs("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center flex-shrink-0 px-4 mb-8 gap-3",children:[f.jsx("img",{src:"https://raw.githubusercontent.com/akashmanjunath2505/public/main/KAYA.png",alt:"Kaya Logo",className:"h-10 w-auto object-contain"}),f.jsx("h1",{className:"text-xl font-bold text-primary-900",children:"Kaya V-OSCE"})]}),f.jsx("nav",{className:"flex-1 px-2 space-y-1",children:a.map(o=>{const s=o.icon,l=e.pathname===o.path||e.pathname.startsWith(o.path+"/");return f.jsxs(uR,{to:o.path,className:`flex items-center px-4 py-2 text-sm font-medium rounded-md ${l?"bg-primary-100 text-primary-900":"text-gray-700 hover:bg-gray-50"}`,children:[f.jsx(s,{className:"mr-3 h-5 w-5"}),o.label]},o.path)})}),f.jsx("div",{className:"px-4 pb-4",children:f.jsxs("button",{onClick:n,className:"flex items-center w-full px-4 py-2 text-sm font-medium text-gray-700 rounded-md hover:bg-gray-50",children:[f.jsx(xL,{className:"mr-3 h-5 w-5"}),"Sign Out"]})})]})})}function Vr({role:t}){const e=lc(),a=t==="admin"?[{path:"/admin/dashboard",icon:bv,label:"Dashboard"},{path:"/admin/cbdc",icon:Qi,label:"CBDC"},{path:"/admin/reports",icon:Eo,label:"Reports"},{path:"/admin/users",icon:Cl,label:"Users"}]:t==="faculty"?[{path:"/dashboard",icon:bv,label:"Dashboard"},{path:"/create",icon:Om,label:"Create"},{path:"/library",icon:mL,label:"Library"},{path:"/analytics",icon:Eo,label:"Analytics"},{path:"/profile",icon:To,label:"Profile"}]:[{path:"/home",icon:Sz,label:"Home"},{path:"/assigned",icon:r1,label:"Assignments"},{path:"/analytics",icon:Eo,label:"Analytics"},{path:"/profile",icon:To,label:"Profile"}];return f.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-300 shadow-lg z-50 md:hidden safe-area-bottom",children:f.jsx("div",{className:"flex justify-around items-center h-16 px-2",children:a.map(o=>{const s=o.icon,l=e.pathname===o.path||o.path!=="/dashboard"&&o.path!=="/admin/dashboard"&&e.pathname.startsWith(o.path);return f.jsxs(uR,{to:o.path,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${l?"text-primary-600 bg-primary-50 rounded-t-lg":"text-gray-600 hover:text-primary-500"}`,children:[f.jsx(s,{className:`w-5 h-5 ${l?"scale-110":""} transition-transform`}),f.jsx("span",{className:`text-xs mt-0.5 font-medium ${l?"text-primary-700":"text-gray-600"}`,children:o.label})]},o.path)})})})}function Rz({user:t}){const e=ro(),[n,r]=X.useState({approved:0,pending:0,total:0}),[i,a]=X.useState(!0);X.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:s,error:l}=await ke.from("stations").select("id").eq("created_by",t.id);if(l)throw l;const u=(s==null?void 0:s.map(p=>p.id))||[],{data:c,error:d}=await ke.from("case_snapshots").select("id",{count:"exact"}).in("station_id",u);if(d)throw d;r({approved:(c==null?void 0:c.length)||0,pending:u.length-((c==null?void 0:c.length)||0),total:u.length})}catch(s){console.error("Error loading stats:",s)}finally{a(!1)}};return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto pb-20 md:pb-0",children:f.jsxs("div",{className:"p-4 md:p-6",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Faculty Dashboard"}),f.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome back, ",t.name]})]}),i?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Approved Cases"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.approved})]}),f.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:f.jsx(Qi,{className:"w-6 h-6 text-green-600"})})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.pending})]}),f.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:f.jsx(uc,{className:"w-6 h-6 text-yellow-600"})})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Total Stations"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.total})]}),f.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:f.jsx(Cl,{className:"w-6 h-6 text-blue-600"})})]})})]}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("button",{onClick:()=>e("/create"),className:"w-full md:w-auto flex items-center justify-center gap-2 bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",children:[f.jsx(Om,{className:"w-5 h-5"}),"Create New Station"]})})]})]})}),f.jsx(Vr,{role:"faculty"})]})}function Lz({toast:t,onClose:e}){X.useEffect(()=>{if(t.duration!==0){const o=setTimeout(()=>{e(t.id)},t.duration||5e3);return()=>clearTimeout(o)}},[t.id,t.duration,e]);const n={success:No,error:n1,warning:xz,info:Az},r={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"},i={success:"text-green-600",error:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"},a=n[t.type];return f.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg border-2 shadow-lg min-w-[300px] max-w-md ${r[t.type]} animate-in slide-in-from-top-5 fade-in`,children:[f.jsx(a,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${i[t.type]}`}),f.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),f.jsx("button",{onClick:()=>e(t.id),className:`flex-shrink-0 ${i[t.type]} hover:opacity-70 transition-opacity`,"aria-label":"Close",children:f.jsx(Cf,{className:"w-4 h-4"})})]})}function kl({toasts:t,onClose:e}){return t.length===0?null:f.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:t.map(n=>f.jsx("div",{className:"pointer-events-auto",children:f.jsx(Lz,{toast:n,onClose:e})},n.id))})}function Ts(){const[t,e]=X.useState([]),n=(l,u="info",c)=>{const d=Math.random().toString(36).substring(2,9),p={id:d,message:l,type:u,duration:c};return e(h=>[...h,p]),d};return{toasts:t,showToast:n,removeToast:l=>{e(u=>u.filter(c=>c.id!==l))},success:(l,u)=>n(l,"success",u),error:(l,u)=>n(l,"error",u),warning:(l,u)=>n(l,"warning",u),info:(l,u)=>n(l,"info",u)}}const Ch="AIzaSyCkJEDZIXsL6sLcAnAi2EE-WbzOIX6gKWY",IT="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";function Mz({user:t}){var E,P,I,O,R,D;const e=ro(),n=Ts(),[r,i]=X.useState(1),[a,o]=X.useState(!1),[s,l]=X.useState(!1),[u,c]=X.useState([]),[d,p]=X.useState([]),[h,v]=X.useState({subject:"",competencyId:"",slo:"",millerLevel:"ShowsHow",bloomDomain:"Cognitive",duration:15,difficulty:"Intermediate",prakriti:"Sama",doshaSliders:{vata:33,pitta:33,kapha:34},includeAshtasthana:!1});X.useEffect(()=>{y(),w()},[]);const y=async()=>{const{data:C}=await ke.from("subjects").select("*");C&&c(C)},w=async()=>{const{data:C}=await ke.from("competencies").select("*");C&&p(C)},b=C=>{var L,F,$,V,Y,W;return`You are an expert Ayurvedic physician creating a virtual OSCE (Objective Structured Clinical Examination) case for medical students.

Generate a complete clinical case in JSON format matching this specification:

Subject: ${C.subject}
Miller's Level: ${C.millerLevel||"ShowsHow"}
Bloom's Domain: ${C.bloomDomain||"Cognitive"}
Difficulty: ${C.difficulty}
Duration: ${C.duration} minutes
Prakriti: ${C.prakriti||"Sama"}
Dosha Distribution: Vata ${((L=C.doshaSliders)==null?void 0:L.vata)||33}%, Pitta ${((F=C.doshaSliders)==null?void 0:F.pitta)||33}%, Kapha ${(($=C.doshaSliders)==null?void 0:$.kapha)||34}%
${C.includeAshtasthana?"Include Ashtasthana Pariksha findings":""}
${C.slo?`SLO: ${C.slo}`:""}

Return a JSON object with this exact structure:
{
  "id": "generate-uuid-here",
  "title": "Case title",
  "subject": "${C.subject}",
  "durationMinutes": ${C.duration},
  "difficulty": "${C.difficulty}",
  "patientProfile": {
    "name": "Patient name",
    "age": 35,
    "gender": "male",
    "prakriti": "${C.prakriti||"Sama"}",
    "occupation": "Relevant occupation"
  },
  "chiefComplaint": "Primary complaint in patient's own words (e.g., 'Fever and cough for 3 days')",
  "historyOfPresentIllness": "Detailed HPI in Ayurvedic context",
  ${C.includeAshtasthana?`"ashtasthanaPariksha": {
    "Nadi": "Pulse findings",
    "Mala": "Stool findings",
    "Mutra": "Urine findings",
    "Jihva": "Tongue findings",
    "Shabda": "Voice findings",
    "Sparsha": "Touch findings",
    "Druk": "Eye findings",
    "Akriti": "General appearance"
  },`:""}
  "doshaAnalysis": {
    "vata": ${((V=C.doshaSliders)==null?void 0:V.vata)||33},
    "pitta": ${((Y=C.doshaSliders)==null?void 0:Y.pitta)||33},
    "kapha": ${((W=C.doshaSliders)==null?void 0:W.kapha)||34}
  },
  "potentialDiagnoses": [
    {"dx": "Primary diagnosis", "confidence": 0.9},
    {"dx": "Differential diagnosis", "confidence": 0.6}
  ],
  "suggestedChikitsa": "Detailed treatment plan",
  "mcqs": [
    {
      "id": "mcq-1",
      "question": "Question text",
      "options": ["Option A", "Option B", "Option C", "Option D"],
      "answerIndex": 0,
      "sloId": "${C.slo||"default-slo"}",
      "explanation": "Explanation for the correct answer"
    },
    {
      "id": "mcq-2",
      "question": "Question text",
      "options": ["Option A", "Option B", "Option C", "Option D"],
      "answerIndex": 0,
      "sloId": "${C.slo||"default-slo"}",
      "explanation": "Explanation for the correct answer"
    },
    {
      "id": "mcq-3",
      "question": "Question text",
      "options": ["Option A", "Option B", "Option C", "Option D"],
      "answerIndex": 0,
      "sloId": "${C.slo||"default-slo"}",
      "explanation": "Explanation for the correct answer"
    }
  ],
  "rubrics": [
    {
      "id": "rubric-1",
      "description": "Rubric description",
      "maxPoints": 10,
      "sloId": "${C.slo||"default-slo"}"
    }
  ],
  "finalExplanation": "Comprehensive explanation",
  "sloMappings": ["${C.slo||"default-slo"}"],
  "physicalExam": {
    "vitals": {
      "bp": "Actual blood pressure relevant to the case (e.g., '90/60 mmHg' for hypotension, '150/95 mmHg' for hypertension)",
      "hr": "Actual heart rate relevant to the case (e.g., '110 bpm' for tachycardia, '55 bpm' for bradycardia)",
      "rr": "Actual respiratory rate relevant to the case (e.g., '28 breaths/min' for tachypnea, '12 breaths/min' for normal)",
      "temp": "Actual temperature relevant to the case (e.g., '102.8F (oral)' for fever, '98.6F (oral)' for normal)",
      "spo2": "Actual oxygen saturation relevant to the case (e.g., '88% on room air' for hypoxemia, '98% on room air' for normal)"
    },
    "generalExam": "Detailed general examination findings that are consistent with the diagnosis and clinical presentation. Include appearance, consciousness level, pallor, icterus, edema, etc.",
    "systemicExam": "Detailed systemic examination findings organized by system (CNS, CVS, RS, GIT, etc.) that are consistent with the diagnosis. Be specific and realistic."
  },
  "availableLabTests": [
    {"category": "BEDSIDE TESTS", "tests": ["ECG", "Blood Glucose", "Urine Dipstick"]},
    {"category": "BASIC LABS", "tests": ["CBC", "CMP", "ESR", "CRP", "TSH", "Lipid Profile", "LFT", "RFT", "ABG"]},
    {"category": "ADVANCED LABS", "tests": ["Troponin", "BNP", "D-dimer", "Coagulation Profile", "Blood Culture", "HbA1c"]},
    {"category": "IMAGING", "tests": ["Chest X-Ray", "CT Head", "CT Chest", "CT Abdomen", "Abdominal Ultrasound", "Echocardiogram"]}
  ],
  "labResults": {
    "CBC": "Complete blood count results relevant to the case (e.g., 'WBC: 15,000/L (elevated), Hb: 12 g/dL, Platelets: 250,000/L' for infection)",
    "CMP": "Comprehensive metabolic panel results relevant to the case (e.g., 'Na: 138 mEq/L, K: 4.2 mEq/L, Creatinine: 1.2 mg/dL, BUN: 45 mg/dL (elevated)' for renal issues)",
    "Chest X-Ray": "Chest X-ray findings relevant to the case (e.g., 'Consolidation in right lower lobe, consistent with pneumonia' or 'Normal chest X-ray')",
    "ECG": "ECG findings relevant to the case (e.g., 'Normal sinus rhythm' or 'ST elevation in leads II, III, aVF')",
    "CRP": "C-reactive protein result relevant to the case (e.g., '150 mg/L (markedly elevated)' for inflammation)",
    "Urine Dipstick": "Urine dipstick results relevant to the case (e.g., 'Negative for nitrites, leukocyte esterase, protein, blood' or 'Positive for protein and blood')"
  },
  "learningPearls": [
    "Key learning point 1 relevant to this case",
    "Key learning point 2 relevant to this case",
    "Key learning point 3 relevant to this case"
  ],
  "furtherReading": [
    {
      "title": "Relevant Textbook Chapter",
      "reference": "Textbook Name, Edition. Chapter X: Topic"
    },
    {
      "title": "Clinical Guidelines",
      "reference": "Guideline Name and Year"
    }
  ]
}

CRITICAL REQUIREMENTS - YOU MUST FOLLOW THESE:

1. MCQs (REQUIRED - MUST GENERATE AT LEAST 3):
   - Generate at least 3 multiple-choice questions related to the case
   - Each MCQ must have 4 options (A, B, C, D)
   - Include an explanation for each correct answer
   - The last 3 MCQs will be used as post-case questions (shown after submission)
   - Additional MCQs (if any) can be used as pre-case questions

2. Physical Exam (REQUIRED - MUST BE GENERATED):
   - Vitals: Generate ALL 5 vital signs (BP, HR, RR, Temp, SpO2) with realistic values that match the diagnosis
   - General Exam: Write 2-3 sentences describing patient appearance, consciousness, pallor, icterus, edema, etc. relevant to the condition
   - Systemic Exam: Write detailed findings by system (CNS, CVS, RS, GIT, etc.) - at least 4-5 sentences with specific findings
   - Example for pneumonia: BP 90/60 (hypotension), HR 110 (tachycardia), RR 28 (tachypnea), Temp 102.8F (fever), SpO2 88% (hypoxemia)
   - Example for hypertension: BP 150/95 (elevated), HR 85, RR 16, Temp 98.6F, SpO2 98%

2. Lab Results (REQUIRED - MUST BE GENERATED):
   - Generate results for at least 4-6 common tests (CBC, CMP, Chest X-Ray, ECG, CRP, etc.)
   - Results MUST support the diagnosis and be realistic
   - Include abnormal values with explanations (e.g., "WBC: 15,000/L (elevated)")

3. Learning Pearls (REQUIRED - MUST BE 3-5 ITEMS):
   - Each pearl should be a complete sentence
   - Focus on key teaching points specific to this case
   - Be actionable and educational

4. Further Reading (REQUIRED - MUST BE 2-3 ITEMS):
   - Include specific textbook names, editions, and chapter numbers
   - Include relevant clinical guidelines with years
   - Make them specific to the diagnosis

5. Data Consistency:
   - If patient has fever  Temp must be elevated (e.g., 102F+)
   - If patient has respiratory distress  RR elevated, SpO2 decreased
   - If patient has infection  WBC elevated, CRP elevated
   - All findings must support the primary diagnosis

Return ONLY valid JSON, no markdown formatting, no code blocks. The JSON must be parseable directly.`},_=(C,L)=>{let F=C.match(/```json\s*([\s\S]*?)\s*```/);if(F||(F=C.match(/```\s*([\s\S]*?)\s*```/)),F||(F=C.match(/\{[\s\S]*\}/)),!F)throw new Error("No JSON found in Gemini response. The AI may not have returned valid JSON.");try{const $=F[1]||F[0],V=JSON.parse($);return V.id=crypto.randomUUID(),V.subject=L.subject,V.durationMinutes=L.duration,V.difficulty=L.difficulty,V.patientProfile||(V.patientProfile={name:"Patient",age:35,gender:"male",prakriti:L.prakriti||"Sama",occupation:"Not specified"}),V.mcqs||(V.mcqs=[]),V.rubrics||(V.rubrics=[]),V.potentialDiagnoses||(V.potentialDiagnoses=[]),V.sloMappings||(V.sloMappings=[]),V.physicalExam||(V.physicalExam={vitals:{},generalExam:"",systemicExam:""}),V.physicalExam.vitals||(V.physicalExam.vitals={}),(!V.availableLabTests||V.availableLabTests.length===0)&&(V.availableLabTests=[]),V}catch($){throw new Error(`Failed to parse JSON from Gemini response: ${$.message}`)}},A=async()=>{var C,L,F,$,V;if(!h.subject||!h.competencyId){n.warning("Please select a subject and competency first");return}if(Ch.trim()===""){n.error("Gemini API key is not configured. Please set VITE_GEMINI_API_KEY in your environment variables.");return}l(!0);try{const Y=d.find(z=>z.id===h.competencyId),W=Y?`${Y.id}: ${Y.description}`:h.competencyId,U=`You are an expert in medical education creating Specific Learning Outcomes (SLOs) for Ayurvedic medicine.

Subject: ${h.subject}
CBDC Competency: ${W}
Miller's Level: ${h.millerLevel}
Bloom's Domain: ${h.bloomDomain}

Generate a specific, measurable, and actionable learning outcome statement that:
1. Is aligned with the subject and competency
2. Matches the Miller's Level (${h.millerLevel})
3. Matches the Bloom's Domain (${h.bloomDomain})
4. Is specific to Ayurvedic medicine context
5. Is clear and concise (one sentence, max 20 words)

Return ONLY the SLO statement text, nothing else. No explanations, no quotes, just the statement.`,Q=await fetch(IT,{method:"POST",headers:{"Content-Type":"application/json","X-goog-api-key":Ch},body:JSON.stringify({contents:[{parts:[{text:U}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:100}})});if(!Q.ok){const z=await Q.text();let K=`Gemini API error (${Q.status})`;try{const re=JSON.parse(z);(C=re.error)!=null&&C.message?K+=": "+re.error.message:K+=": "+z}catch{K+=": "+z}throw new Error(K)}const le=await Q.json();if(!le.candidates||le.candidates.length===0)throw new Error("No response from Gemini API. Please check your API key and try again.");const oe=((V=($=(F=(L=le.candidates[0])==null?void 0:L.content)==null?void 0:F.parts[0])==null?void 0:$.text)==null?void 0:V.trim())||"";if(!oe)throw new Error("Empty response from Gemini API");const j=oe.replace(/^["']|["']$/g,"").replace(/^```[\w]*\n?|\n?```$/g,"").trim();v({...h,slo:j}),n.success("SLO suggested successfully!")}catch(Y){n.error("Error suggesting SLO: "+Y.message)}finally{l(!1)}},N=async()=>{var C,L,F,$,V,Y;o(!0);try{if(!h.subject)throw new Error("Please select a subject");if(!h.competencyId)throw new Error("Please select a CBDC competency");if(!Ch||Ch.trim()==="")throw new Error("Gemini API key is not configured. Please set VITE_GEMINI_API_KEY in your environment variables.");const W=b(h),U=await fetch(IT,{method:"POST",headers:{"Content-Type":"application/json","X-goog-api-key":Ch},body:JSON.stringify({contents:[{parts:[{text:W}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:8192}})});if(!U.ok){const re=await U.text();let ae=`Gemini API error (${U.status})`;try{const fe=JSON.parse(re);(C=fe.error)!=null&&C.message?ae+=": "+fe.error.message:ae+=": "+re}catch{ae+=": "+re}throw new Error(ae)}const Q=await U.json();if(!Q.candidates||Q.candidates.length===0)throw new Error("No response from Gemini API. Please check your API key and try again.");const le=(($=(F=(L=Q.candidates[0])==null?void 0:L.content)==null?void 0:F.parts[0])==null?void 0:$.text)||"";if(!le)throw new Error("Empty response from Gemini API");const oe=_(le,h),j=[];if(!oe.physicalExam||!oe.physicalExam.vitals)j.push("Physical examination vitals are missing");else{const re=oe.physicalExam.vitals;(!re.bp||!re.hr||!re.rr||!re.temp||!re.spo2)&&j.push("Some vital signs are missing (BP, HR, RR, Temp, SpO2)")}if((!((V=oe.physicalExam)!=null&&V.generalExam)||oe.physicalExam.generalExam.trim()==="")&&j.push("General examination findings are missing"),(!((Y=oe.physicalExam)!=null&&Y.systemicExam)||oe.physicalExam.systemicExam.trim()==="")&&j.push("Systemic examination findings are missing"),(!oe.labResults||Object.keys(oe.labResults).length<4)&&j.push("Lab results are missing or insufficient (need at least 4 test results)"),!oe.learningPearls||oe.learningPearls.length<3?j.push("Learning pearls are missing or insufficient (need at least 3)"):oe.learningPearls.some(ae=>ae.toLowerCase().includes("key learning point")||ae.toLowerCase().includes("relevant to this case")||ae.trim().length<20)&&j.push("Learning pearls contain generic placeholder text"),!oe.furtherReading||oe.furtherReading.length<2?j.push("Further reading references are missing or insufficient (need at least 2)"):oe.furtherReading.some(ae=>ae.title.toLowerCase().includes("relevant textbook")||ae.title.toLowerCase().includes("textbook name")||ae.reference.toLowerCase().includes("chapter x")||ae.reference.toLowerCase().includes("textbook name"))&&j.push("Further reading contains generic placeholder text"),j.length>0)throw new Error(`AI generation incomplete:
${j.join(`
`)}

Please regenerate the case.`);const{data:z,error:K}=await ke.from("stations").insert({title:oe.title||"New Station",blueprint:{...h,generatedCase:oe},created_by:t.id}).select().single();if(K)throw K;e(`/review/${z.id}`),n.success("Case generated successfully!")}catch(W){n.error("Error generating case: "+W.message)}finally{o(!1)}};return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto pb-20 md:pb-0",children:f.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[f.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[f.jsx(Up,{className:"w-4 h-4"}),"Back to Dashboard"]}),f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Create New Station"}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-6",children:[r>=1&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Step 1: Subject & Competency"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),f.jsxs("select",{value:h.subject,onChange:C=>v({...h,subject:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"",children:"Select Subject"}),u.map(C=>f.jsx("option",{value:C.name,children:C.name},C.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CBDC Competency"}),f.jsxs("select",{value:h.competencyId||"",onChange:C=>v({...h,competencyId:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"",children:"Select Competency"}),d.map(C=>f.jsxs("option",{value:C.id,children:[C.id,": ",C.description]},C.id))]})]})]}),r>=2&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Step 2: Learning Outcomes"}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SLO (Specific Learning Outcome)"}),f.jsx("button",{type:"button",onClick:A,disabled:s||!h.subject||!h.competencyId,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-primary-600 bg-primary-50 border border-primary-200 rounded-md hover:bg-primary-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?f.jsxs(f.Fragment,{children:[f.jsx(Bd,{className:"w-3 h-3 animate-spin"}),"Suggesting..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Cz,{className:"w-3 h-3"}),"AI Suggest"]})})]}),f.jsx("textarea",{value:h.slo||"",onChange:C=>v({...h,slo:C.target.value}),placeholder:"e.g., Demonstrate interpretation of Nadi in Pitta Jwara",className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Miller's Level"}),f.jsxs("select",{value:h.millerLevel,onChange:C=>v({...h,millerLevel:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"Knows",children:"Knows"}),f.jsx("option",{value:"KnowsHow",children:"Knows How"}),f.jsx("option",{value:"ShowsHow",children:"Shows How"}),f.jsx("option",{value:"Does",children:"Does"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bloom's Domain"}),f.jsxs("select",{value:h.bloomDomain,onChange:C=>v({...h,bloomDomain:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"Cognitive",children:"Cognitive"}),f.jsx("option",{value:"Psychomotor",children:"Psychomotor"}),f.jsx("option",{value:"Affective",children:"Affective"})]})]})]})]}),r>=3&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Step 3: Case Parameters"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),f.jsx("input",{type:"number",min:"5",max:"60",value:h.duration,onChange:C=>v({...h,duration:parseInt(C.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),f.jsxs("select",{value:h.difficulty,onChange:C=>v({...h,difficulty:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"Beginner",children:"Beginner"}),f.jsx("option",{value:"Intermediate",children:"Intermediate"}),f.jsx("option",{value:"Advanced",children:"Advanced"})]})]})]})]}),r>=4&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Step 4: Ayurvedic Parameters"}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prakriti"}),f.jsxs("select",{value:h.prakriti,onChange:C=>v({...h,prakriti:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[f.jsx("option",{value:"Vata",children:"Vata"}),f.jsx("option",{value:"Pitta",children:"Pitta"}),f.jsx("option",{value:"Kapha",children:"Kapha"}),f.jsx("option",{value:"Sama",children:"Sama"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dosha Distribution (must sum to 100)"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"text-sm",children:["Vata: ",(E=h.doshaSliders)==null?void 0:E.vata,"%"]}),f.jsx("input",{type:"range",min:"0",max:"100",value:((P=h.doshaSliders)==null?void 0:P.vata)||0,onChange:C=>{var Y;const L=parseInt(C.target.value),F=100-L,$=Math.min(F,((Y=h.doshaSliders)==null?void 0:Y.pitta)||0),V=100-L-$;v({...h,doshaSliders:{vata:L,pitta:$,kapha:V}})},className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"text-sm",children:["Pitta: ",(I=h.doshaSliders)==null?void 0:I.pitta,"%"]}),f.jsx("input",{type:"range",min:"0",max:"100",value:((O=h.doshaSliders)==null?void 0:O.pitta)||0,onChange:C=>{var Y;const L=parseInt(C.target.value),F=100-L,$=Math.min(F,((Y=h.doshaSliders)==null?void 0:Y.vata)||0),V=100-$-L;v({...h,doshaSliders:{vata:$,pitta:L,kapha:V}})},className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"text-sm",children:["Kapha: ",(R=h.doshaSliders)==null?void 0:R.kapha,"%"]}),f.jsx("input",{type:"range",min:"0",max:"100",value:((D=h.doshaSliders)==null?void 0:D.kapha)||0,onChange:C=>{var Y;const L=parseInt(C.target.value),F=100-L,$=Math.min(F,((Y=h.doshaSliders)==null?void 0:Y.vata)||0),V=100-$-L;v({...h,doshaSliders:{vata:$,pitta:V,kapha:L}})},className:"w-full"})]})]})]}),f.jsx("div",{children:f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:h.includeAshtasthana||!1,onChange:C=>v({...h,includeAshtasthana:C.target.checked})}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Include Ashtasthana Pariksha"})]})})]}),f.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[f.jsx("button",{onClick:()=>i(Math.max(1,r-1)),disabled:r===1,className:"px-4 py-2 border border-gray-300 rounded-md disabled:opacity-50",children:"Previous"}),r<4?f.jsx("button",{onClick:()=>i(r+1),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Next"}):f.jsxs("button",{onClick:N,disabled:a||!h.subject,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 flex items-center gap-2",children:[a&&f.jsx(Bd,{className:"w-4 h-4 animate-spin"}),"Generate Case"]})]})]})]})}),f.jsx(Vr,{role:"faculty"}),f.jsx(kl,{toasts:n.toasts,onClose:n.removeToast})]})}var Jt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(s=>typeof i[i[s]]!="number"),o={};for(const s of a)o[s]=i[s];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Jt||(Jt={}));var OT;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(OT||(OT={}));const et=Jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),il=t=>{switch(typeof t){case"undefined":return et.undefined;case"string":return et.string;case"number":return Number.isNaN(t)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"symbol":return et.symbol;case"object":return Array.isArray(t)?et.array:t===null?et.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?et.promise:typeof Map<"u"&&t instanceof Map?et.map:typeof Set<"u"&&t instanceof Set?et.set:typeof Date<"u"&&t instanceof Date?et.date:et.object;default:return et.unknown}},Ue=Jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class bs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(n(o))):s[u]=s[u]||{_errors:[]},s=s[u],l++}}};return i(this),r}static assert(e){if(!(e instanceof bs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}bs.create=t=>new bs(t);const E2=(t,e)=>{let n;switch(t.code){case Ue.invalid_type:t.received===et.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Jt.jsonStringifyReplacer)}`;break;case Ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${Jt.joinValues(t.keys,", ")}`;break;case Ue.invalid_union:n="Invalid input";break;case Ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Jt.joinValues(t.options)}`;break;case Ue.invalid_enum_value:n=`Invalid enum value. Expected ${Jt.joinValues(t.options)}, received '${t.received}'`;break;case Ue.invalid_arguments:n="Invalid function arguments";break;case Ue.invalid_return_type:n="Invalid function return type";break;case Ue.invalid_date:n="Invalid date";break;case Ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Jt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ue.custom:n="Invalid input";break;case Ue.invalid_intersection_types:n="Intersection results could not be merged";break;case Ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,Jt.assertNever(t)}return{message:n}};let Dz=E2;function $z(){return Dz}const Fz=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let s="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)s=u(o,{data:e,defaultError:s}).message;return{...i,path:a,message:s}};function Ke(t,e){const n=$z(),r=Fz({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===E2?void 0:E2].filter(i=>!!i)});t.common.issues.push(r)}class pi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return It;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return pi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return It;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const It=Object.freeze({status:"aborted"}),Kh=t=>({status:"dirty",value:t}),Ca=t=>({status:"valid",value:t}),jT=t=>t.status==="aborted",RT=t=>t.status==="dirty",qd=t=>t.status==="valid",wv=t=>typeof Promise<"u"&&t instanceof Promise;var lt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(lt||(lt={}));class Oo{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const LT=(t,e)=>{if(qd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new bs(t.common.issues);return this._error=n,this._error}}};function Ft(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,s)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??s.defaultError}:typeof s.data>"u"?{message:l??r??s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:l??n??s.defaultError}},description:i}}class Vt{get description(){return this._def.description}_getType(e){return il(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:il(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pi,ctx:{common:e.parent.common,data:e.data,parsedType:il(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(wv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:il(e)},i=this._parseSync({data:e,path:r.path,parent:r});return LT(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:il(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return qd(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>qd(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:il(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(wv(i)?i:Promise.resolve(i));return LT(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),s=()=>a.addIssue({code:Ue.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Hd({schema:this,typeName:Pt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return El.create(this,this._def)}nullable(){return Gd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Po.create(this)}promise(){return Nv.create(this,this._def)}or(e){return Sv.create([this,e],this._def)}and(e){return Av.create(this,e,this._def)}transform(e){return new Hd({...Ft(this._def),schema:this,typeName:Pt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new T2({...Ft(this._def),innerType:this,defaultValue:n,typeName:Pt.ZodDefault})}brand(){return new lH({typeName:Pt.ZodBranded,type:this,...Ft(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new P2({...Ft(this._def),innerType:this,catchValue:n,typeName:Pt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return RS.create(this,e)}readonly(){return C2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Uz=/^c[^\s-]{8,}$/i,Bz=/^[0-9a-z]+$/,qz=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Vz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zz=/^[a-z0-9_-]{21}$/i,Hz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Gz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Wz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Kz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let vb;const Jz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Yz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Xz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Zz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,bL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tH=new RegExp(`^${bL}$`);function wL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function nH(t){return new RegExp(`^${wL(t)}$`)}function rH(t){let e=`${bL}T${wL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function iH(t,e){return!!((e==="v4"||!e)&&Jz.test(t)||(e==="v6"||!e)&&Xz.test(t))}function aH(t,e){if(!Hz.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function oH(t,e){return!!((e==="v4"||!e)&&Yz.test(t)||(e==="v6"||!e)&&Zz.test(t))}class ls extends Vt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==et.string){const a=this._getOrReturnCtx(e);return Ke(a,{code:Ue.invalid_type,expected:et.string,received:a.parsedType}),It}const r=new pi;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,s=e.data.length<a.value;(o||s)&&(i=this._getOrReturnCtx(e,i),o?Ke(i,{code:Ue.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&Ke(i,{code:Ue.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Wz.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"email",code:Ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")vb||(vb=new RegExp(Kz,"u")),vb.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"emoji",code:Ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Vz.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"uuid",code:Ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")zz.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"nanoid",code:Ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Uz.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"cuid",code:Ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Bz.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"cuid2",code:Ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")qz.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"ulid",code:Ue.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ke(i,{validation:"url",code:Ue.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"regex",code:Ue.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?rH(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?tH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?nH(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Gz.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"duration",code:Ue.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?iH(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"ip",code:Ue.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?aH(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"jwt",code:Ue.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?oH(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"cidr",code:Ue.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Qz.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"base64",code:Ue.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?eH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"base64url",code:Ue.invalid_string,message:a.message}),r.dirty()):Jt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Ue.invalid_string,...lt.errToObj(r)})}_addCheck(e){return new ls({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...lt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...lt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...lt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...lt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...lt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...lt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...lt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...lt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...lt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...lt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...lt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...lt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...lt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...lt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...lt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...lt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...lt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...lt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...lt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...lt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...lt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...lt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...lt.errToObj(n)})}nonempty(e){return this.min(1,lt.errToObj(e))}trim(){return new ls({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ls({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ls({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ls.create=t=>new ls({checks:[],typeName:Pt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ft(t)});function sH(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Vd extends Vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==et.number){const a=this._getOrReturnCtx(e);return Ke(a,{code:Ue.invalid_type,expected:et.number,received:a.parsedType}),It}let r;const i=new pi;for(const a of this._def.checks)a.kind==="int"?Jt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ue.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ue.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ue.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?sH(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ue.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ue.not_finite,message:a.message}),i.dirty()):Jt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,i){return new Vd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(i)}]})}_addCheck(e){return new Vd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:lt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:lt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Jt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Vd.create=t=>new Vd({checks:[],typeName:Pt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ft(t)});class Bp extends Vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==et.bigint)return this._getInvalidInput(e);let r;const i=new pi;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ue.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ue.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ue.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Jt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ke(n,{code:Ue.invalid_type,expected:et.bigint,received:n.parsedType}),It}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,i){return new Bp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(i)}]})}_addCheck(e){return new Bp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Bp.create=t=>new Bp({checks:[],typeName:Pt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ft(t)});class MT extends Vt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==et.boolean){const r=this._getOrReturnCtx(e);return Ke(r,{code:Ue.invalid_type,expected:et.boolean,received:r.parsedType}),It}return Ca(e.data)}}MT.create=t=>new MT({typeName:Pt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ft(t)});class _v extends Vt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==et.date){const a=this._getOrReturnCtx(e);return Ke(a,{code:Ue.invalid_type,expected:et.date,received:a.parsedType}),It}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ke(a,{code:Ue.invalid_date}),It}const r=new pi;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ue.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Jt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new _v({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:lt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:lt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}_v.create=t=>new _v({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Pt.ZodDate,...Ft(t)});class DT extends Vt{_parse(e){if(this._getType(e)!==et.symbol){const r=this._getOrReturnCtx(e);return Ke(r,{code:Ue.invalid_type,expected:et.symbol,received:r.parsedType}),It}return Ca(e.data)}}DT.create=t=>new DT({typeName:Pt.ZodSymbol,...Ft(t)});class $T extends Vt{_parse(e){if(this._getType(e)!==et.undefined){const r=this._getOrReturnCtx(e);return Ke(r,{code:Ue.invalid_type,expected:et.undefined,received:r.parsedType}),It}return Ca(e.data)}}$T.create=t=>new $T({typeName:Pt.ZodUndefined,...Ft(t)});class FT extends Vt{_parse(e){if(this._getType(e)!==et.null){const r=this._getOrReturnCtx(e);return Ke(r,{code:Ue.invalid_type,expected:et.null,received:r.parsedType}),It}return Ca(e.data)}}FT.create=t=>new FT({typeName:Pt.ZodNull,...Ft(t)});class UT extends Vt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ca(e.data)}}UT.create=t=>new UT({typeName:Pt.ZodAny,...Ft(t)});class BT extends Vt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ca(e.data)}}BT.create=t=>new BT({typeName:Pt.ZodUnknown,...Ft(t)});class Il extends Vt{_parse(e){const n=this._getOrReturnCtx(e);return Ke(n,{code:Ue.invalid_type,expected:et.never,received:n.parsedType}),It}}Il.create=t=>new Il({typeName:Pt.ZodNever,...Ft(t)});class qT extends Vt{_parse(e){if(this._getType(e)!==et.undefined){const r=this._getOrReturnCtx(e);return Ke(r,{code:Ue.invalid_type,expected:et.void,received:r.parsedType}),It}return Ca(e.data)}}qT.create=t=>new qT({typeName:Pt.ZodVoid,...Ft(t)});class Po extends Vt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==et.array)return Ke(n,{code:Ue.invalid_type,expected:et.array,received:n.parsedType}),It;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,s=n.data.length<i.exactLength.value;(o||s)&&(Ke(n,{code:o?Ue.too_big:Ue.too_small,minimum:s?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ke(n,{code:Ue.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ke(n,{code:Ue.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>i.type._parseAsync(new Oo(n,o,n.path,s)))).then(o=>pi.mergeArray(r,o));const a=[...n.data].map((o,s)=>i.type._parseSync(new Oo(n,o,n.path,s)));return pi.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Po({...this._def,minLength:{value:e,message:lt.toString(n)}})}max(e,n){return new Po({...this._def,maxLength:{value:e,message:lt.toString(n)}})}length(e,n){return new Po({...this._def,exactLength:{value:e,message:lt.toString(n)}})}nonempty(e){return this.min(1,e)}}Po.create=(t,e)=>new Po({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Pt.ZodArray,...Ft(e)});function Wc(t){if(t instanceof dr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=El.create(Wc(r))}return new dr({...t._def,shape:()=>e})}else return t instanceof Po?new Po({...t._def,type:Wc(t.element)}):t instanceof El?El.create(Wc(t.unwrap())):t instanceof Gd?Gd.create(Wc(t.unwrap())):t instanceof Xu?Xu.create(t.items.map(e=>Wc(e))):t}class dr extends Vt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Jt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==et.object){const u=this._getOrReturnCtx(e);return Ke(u,{code:Ue.invalid_type,expected:et.object,received:u.parsedType}),It}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Il&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||s.push(u);const l=[];for(const u of o){const c=a[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Oo(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Il){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of s)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")s.length>0&&(Ke(i,{code:Ue.unrecognized_keys,keys:s}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of s){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Oo(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,p=await c.value;u.push({key:d,value:p,alwaysSet:c.alwaysSet})}return u}).then(u=>pi.mergeObjectSync(r,u)):pi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return lt.errToObj,new dr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:lt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new dr({...this._def,unknownKeys:"strip"})}passthrough(){return new dr({...this._def,unknownKeys:"passthrough"})}extend(e){return new dr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Pt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new dr({...this._def,catchall:e})}pick(e){const n={};for(const r of Jt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new dr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Jt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new dr({...this._def,shape:()=>n})}deepPartial(){return Wc(this)}partial(e){const n={};for(const r of Jt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new dr({...this._def,shape:()=>n})}required(e){const n={};for(const r of Jt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof El;)a=a._def.innerType;n[r]=a}return new dr({...this._def,shape:()=>n})}keyof(){return _L(Jt.objectKeys(this.shape))}}dr.create=(t,e)=>new dr({shape:()=>t,unknownKeys:"strip",catchall:Il.create(),typeName:Pt.ZodObject,...Ft(e)});dr.strictCreate=(t,e)=>new dr({shape:()=>t,unknownKeys:"strict",catchall:Il.create(),typeName:Pt.ZodObject,...Ft(e)});dr.lazycreate=(t,e)=>new dr({shape:t,unknownKeys:"strip",catchall:Il.create(),typeName:Pt.ZodObject,...Ft(e)});class Sv extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const s of a)if(s.result.status==="valid")return s.result;for(const s of a)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(s=>new bs(s.ctx.common.issues));return Ke(n,{code:Ue.invalid_union,unionErrors:o}),It}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!a&&(a={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(l=>new bs(l));return Ke(n,{code:Ue.invalid_union,unionErrors:s}),It}}get options(){return this._def.options}}Sv.create=(t,e)=>new Sv({options:t,typeName:Pt.ZodUnion,...Ft(e)});function N2(t,e){const n=il(t),r=il(e);if(t===e)return{valid:!0,data:t};if(n===et.object&&r===et.object){const i=Jt.objectKeys(e),a=Jt.objectKeys(t).filter(s=>i.indexOf(s)!==-1),o={...t,...e};for(const s of a){const l=N2(t[s],e[s]);if(!l.valid)return{valid:!1};o[s]=l.data}return{valid:!0,data:o}}else if(n===et.array&&r===et.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],s=e[a],l=N2(o,s);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===et.date&&r===et.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Av extends Vt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(jT(a)||jT(o))return It;const s=N2(a.value,o.value);return s.valid?((RT(a)||RT(o))&&n.dirty(),{status:n.value,value:s.data}):(Ke(r,{code:Ue.invalid_intersection_types}),It)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Av.create=(t,e,n)=>new Av({left:t,right:e,typeName:Pt.ZodIntersection,...Ft(n)});class Xu extends Vt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.array)return Ke(r,{code:Ue.invalid_type,expected:et.array,received:r.parsedType}),It;if(r.data.length<this._def.items.length)return Ke(r,{code:Ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),It;!this._def.rest&&r.data.length>this._def.items.length&&(Ke(r,{code:Ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,s)=>{const l=this._def.items[s]||this._def.rest;return l?l._parse(new Oo(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>pi.mergeArray(n,o)):pi.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Xu({...this._def,rest:e})}}Xu.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xu({items:t,typeName:Pt.ZodTuple,rest:null,...Ft(e)})};class Ev extends Vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.object)return Ke(r,{code:Ue.invalid_type,expected:et.object,received:r.parsedType}),It;const i=[],a=this._def.keyType,o=this._def.valueType;for(const s in r.data)i.push({key:a._parse(new Oo(r,s,r.path,s)),value:o._parse(new Oo(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?pi.mergeObjectAsync(n,i):pi.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Vt?new Ev({keyType:e,valueType:n,typeName:Pt.ZodRecord,...Ft(r)}):new Ev({keyType:ls.create(),valueType:e,typeName:Pt.ZodRecord,...Ft(n)})}}class VT extends Vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.map)return Ke(r,{code:Ue.invalid_type,expected:et.map,received:r.parsedType}),It;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([s,l],u)=>({key:i._parse(new Oo(r,s,r.path,[u,"key"])),value:a._parse(new Oo(r,l,r.path,[u,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return It;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),s.set(u.value,c.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return It;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),s.set(u.value,c.value)}return{status:n.value,value:s}}}}VT.create=(t,e,n)=>new VT({valueType:e,keyType:t,typeName:Pt.ZodMap,...Ft(n)});class qp extends Vt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==et.set)return Ke(r,{code:Ue.invalid_type,expected:et.set,received:r.parsedType}),It;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ke(r,{code:Ue.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ke(r,{code:Ue.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return It;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const s=[...r.data.values()].map((l,u)=>a._parse(new Oo(r,l,r.path,u)));return r.common.async?Promise.all(s).then(l=>o(l)):o(s)}min(e,n){return new qp({...this._def,minSize:{value:e,message:lt.toString(n)}})}max(e,n){return new qp({...this._def,maxSize:{value:e,message:lt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}qp.create=(t,e)=>new qp({valueType:t,minSize:null,maxSize:null,typeName:Pt.ZodSet,...Ft(e)});class zT extends Vt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}zT.create=(t,e)=>new zT({getter:t,typeName:Pt.ZodLazy,...Ft(e)});class HT extends Vt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ke(n,{received:n.data,code:Ue.invalid_literal,expected:this._def.value}),It}return{status:"valid",value:e.data}}get value(){return this._def.value}}HT.create=(t,e)=>new HT({value:t,typeName:Pt.ZodLiteral,...Ft(e)});function _L(t,e){return new zd({values:t,typeName:Pt.ZodEnum,...Ft(e)})}class zd extends Vt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ke(n,{expected:Jt.joinValues(r),received:n.parsedType,code:Ue.invalid_type}),It}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ke(n,{received:n.data,code:Ue.invalid_enum_value,options:r}),It}return Ca(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return zd.create(e,{...this._def,...n})}exclude(e,n=this._def){return zd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}zd.create=_L;class GT extends Vt{_parse(e){const n=Jt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==et.string&&r.parsedType!==et.number){const i=Jt.objectValues(n);return Ke(r,{expected:Jt.joinValues(i),received:r.parsedType,code:Ue.invalid_type}),It}if(this._cache||(this._cache=new Set(Jt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Jt.objectValues(n);return Ke(r,{received:r.data,code:Ue.invalid_enum_value,options:i}),It}return Ca(e.data)}get enum(){return this._def.values}}GT.create=(t,e)=>new GT({values:t,typeName:Pt.ZodNativeEnum,...Ft(e)});class Nv extends Vt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==et.promise&&n.common.async===!1)return Ke(n,{code:Ue.invalid_type,expected:et.promise,received:n.parsedType}),It;const r=n.parsedType===et.promise?n.data:Promise.resolve(n.data);return Ca(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Nv.create=(t,e)=>new Nv({type:t,typeName:Pt.ZodPromise,...Ft(e)});class Hd extends Vt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Ke(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return It;const l=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return l.status==="aborted"?It:l.status==="dirty"||n.value==="dirty"?Kh(l.value):l});{if(n.value==="aborted")return It;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?It:s.status==="dirty"||n.value==="dirty"?Kh(s.value):s}}if(i.type==="refinement"){const o=s=>{const l=i.refinement(s,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?It:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?It:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!qd(o))return It;const s=i.transform(o.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>qd(o)?Promise.resolve(i.transform(o.value,a)).then(s=>({status:n.value,value:s})):It);Jt.assertNever(i)}}Hd.create=(t,e,n)=>new Hd({schema:t,typeName:Pt.ZodEffects,effect:e,...Ft(n)});Hd.createWithPreprocess=(t,e,n)=>new Hd({schema:e,effect:{type:"preprocess",transform:t},typeName:Pt.ZodEffects,...Ft(n)});class El extends Vt{_parse(e){return this._getType(e)===et.undefined?Ca(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}El.create=(t,e)=>new El({innerType:t,typeName:Pt.ZodOptional,...Ft(e)});class Gd extends Vt{_parse(e){return this._getType(e)===et.null?Ca(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gd.create=(t,e)=>new Gd({innerType:t,typeName:Pt.ZodNullable,...Ft(e)});class T2 extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===et.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}T2.create=(t,e)=>new T2({innerType:t,typeName:Pt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ft(e)});class P2 extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return wv(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new bs(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new bs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}P2.create=(t,e)=>new P2({innerType:t,typeName:Pt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ft(e)});class WT extends Vt{_parse(e){if(this._getType(e)!==et.nan){const r=this._getOrReturnCtx(e);return Ke(r,{code:Ue.invalid_type,expected:et.nan,received:r.parsedType}),It}return{status:"valid",value:e.data}}}WT.create=t=>new WT({typeName:Pt.ZodNaN,...Ft(t)});class lH extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class RS extends Vt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?It:a.status==="dirty"?(n.dirty(),Kh(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?It:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new RS({in:e,out:n,typeName:Pt.ZodPipeline})}}class C2 extends Vt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(qd(i)&&(i.value=Object.freeze(i.value)),i);return wv(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}C2.create=(t,e)=>new C2({innerType:t,typeName:Pt.ZodReadonly,...Ft(e)});var Pt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Pt||(Pt={}));const Wt=ls.create,Qs=Vd.create;Il.create;const Xo=Po.create,go=dr.create;Sv.create;Av.create;Xu.create;const KT=Ev.create,xb=zd.create;Nv.create;El.create;Gd.create;const uH=go({id:Wt().uuid(),title:Wt(),subject:Wt(),durationMinutes:Qs().min(5).max(60),difficulty:xb(["Beginner","Intermediate","Advanced"]),patientProfile:go({name:Wt(),age:Qs(),gender:xb(["male","female","other"]),prakriti:xb(["Vata","Pitta","Kapha","Sama"]),vikriti:Wt().optional(),occupation:Wt().optional()}),chiefComplaint:Wt().optional(),historyOfPresentIllness:Wt(),ashtasthanaPariksha:KT(Wt()).optional(),doshaAnalysis:go({vata:Qs().min(0).max(100),pitta:Qs().min(0).max(100),kapha:Qs().min(0).max(100)}),potentialDiagnoses:Xo(go({dx:Wt(),confidence:Qs().min(0).max(1)})),suggestedChikitsa:Wt(),mcqs:Xo(go({id:Wt(),question:Wt(),options:Xo(Wt()),answerIndex:Qs(),sloId:Wt()})),rubrics:Xo(go({id:Wt(),description:Wt(),maxPoints:Qs(),sloId:Wt()})),finalExplanation:Wt(),sloMappings:Xo(Wt()),physicalExam:go({vitals:go({bp:Wt().optional(),hr:Wt().optional(),rr:Wt().optional(),temp:Wt().optional(),spo2:Wt().optional()}).optional(),generalExam:Wt().optional(),systemicExam:Wt().optional()}).optional(),availableLabTests:Xo(go({category:Wt(),tests:Xo(Wt())})).optional(),labResults:KT(Wt()).optional(),learningPearls:Xo(Wt()).optional(),furtherReading:Xo(go({title:Wt(),reference:Wt()})).optional()});function cH({user:t}){const{stationId:e}=Q0(),n=ro(),r=Ts(),[i,a]=X.useState(null),[o,s]=X.useState(null),[l,u]=X.useState(!0),[c,d]=X.useState(!1);X.useEffect(()=>{e&&p()},[e]);const p=async()=>{var v;try{const{data:y,error:w}=await ke.from("stations").select("*").eq("id",e).single();if(w)throw w;a(y),(v=y.blueprint)!=null&&v.generatedCase&&s(y.blueprint.generatedCase)}catch(y){console.error("Error loading station:",y)}finally{u(!1)}},h=async()=>{var v,y;if(!(!i||!o)){d(!0);try{const w=[];if(!o.physicalExam||!o.physicalExam.vitals)w.push("Physical examination vitals are missing");else{const N=o.physicalExam.vitals;(!N.bp||!N.hr||!N.rr||!N.temp||!N.spo2)&&w.push("Some vital signs are missing")}if((!((v=o.physicalExam)!=null&&v.generalExam)||o.physicalExam.generalExam.trim()==="")&&w.push("General examination findings are missing"),(!((y=o.physicalExam)!=null&&y.systemicExam)||o.physicalExam.systemicExam.trim()==="")&&w.push("Systemic examination findings are missing"),(!o.labResults||Object.keys(o.labResults).length<4)&&w.push("Lab results are missing or insufficient"),(!o.learningPearls||o.learningPearls.length<3)&&w.push("Learning pearls are missing or insufficient"),(!o.furtherReading||o.furtherReading.length<2)&&w.push("Further reading references are missing or insufficient"),w.length>0)throw new Error(`Cannot approve case with missing data:
${w.join(`
`)}

Please regenerate the case.`);const b=uH.parse(o),{data:_,error:A}=await ke.from("case_snapshots").insert({station_id:i.id,clinical_case:b,approved_by:t.id}).select().single();if(A)throw A;n(`/assign/${_.id}`),r.success("Case approved successfully!")}catch(w){r.error("Error approving case: "+w.message)}finally{d(!1)}}};return l?f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 flex items-center justify-center pb-20 md:pb-0",children:f.jsx(Bd,{className:"w-8 h-8 animate-spin text-primary-600"})}),f.jsx(Vr,{role:"faculty"}),f.jsx(kl,{toasts:r.toasts,onClose:r.removeToast})]}):!i||!o?f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 p-6 pb-20 md:pb-6",children:f.jsx("p",{children:"Station not found or case not generated yet."})}),f.jsx(Vr,{role:"faculty"}),f.jsx(kl,{toasts:r.toasts,onClose:r.removeToast})]}):f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto pb-20 md:pb-0",children:f.jsxs("div",{className:"p-4 md:p-6 max-w-6xl mx-auto",children:[f.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[f.jsx(Up,{className:"w-4 h-4"}),"Back to Dashboard"]}),f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Review Generated Case"}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Overview"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Title"}),f.jsx("p",{className:"text-lg",children:o.title})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"History of Present Illness"}),f.jsx("p",{className:"text-gray-900",children:o.historyOfPresentIllness})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Patient Profile"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Name:"})," ",o.patientProfile.name]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Age:"})," ",o.patientProfile.age]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Gender:"})," ",o.patientProfile.gender]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Prakriti:"})," ",o.patientProfile.prakriti]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Suggested Chikitsa"}),f.jsx("p",{className:"text-gray-900",children:o.suggestedChikitsa})]})]})]}),o.physicalExam&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Physical Examination"}),f.jsxs("div",{className:"space-y-4",children:[o.physicalExam.vitals&&f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vitals"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-2",children:[f.jsxs("div",{children:[f.jsx("strong",{children:"BP:"})," ",o.physicalExam.vitals.bp||"Not recorded"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"HR:"})," ",o.physicalExam.vitals.hr||"Not recorded"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"RR:"})," ",o.physicalExam.vitals.rr||"Not recorded"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"Temp:"})," ",o.physicalExam.vitals.temp||"Not recorded"]}),f.jsxs("div",{children:[f.jsx("strong",{children:"SpO2:"})," ",o.physicalExam.vitals.spo2||"Not recorded"]})]})]}),o.physicalExam.generalExam&&f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"General Examination"}),f.jsx("p",{className:"text-gray-900 mt-2",children:o.physicalExam.generalExam})]}),o.physicalExam.systemicExam&&f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Systemic Examination"}),f.jsx("p",{className:"text-gray-900 mt-2 whitespace-pre-wrap",children:o.physicalExam.systemicExam})]})]})]}),o.labResults&&Object.keys(o.labResults).length>0&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Lab Results (Available)"}),f.jsxs("div",{className:"space-y-2",children:[Object.entries(o.labResults).slice(0,5).map(([v,y])=>f.jsxs("div",{className:"border rounded p-3",children:[f.jsxs("strong",{children:[v,":"]})," ",y]},v)),Object.keys(o.labResults).length>5&&f.jsxs("p",{className:"text-sm text-gray-500",children:["... and ",Object.keys(o.labResults).length-5," more tests"]})]})]}),o.learningPearls&&o.learningPearls.length>0&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Learning Pearls"}),f.jsx("ul",{className:"list-disc list-inside space-y-2",children:o.learningPearls.map((v,y)=>f.jsx("li",{className:"text-gray-900",children:v},y))})]}),o.furtherReading&&o.furtherReading.length>0&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Further Reading"}),f.jsx("div",{className:"space-y-2",children:o.furtherReading.map((v,y)=>f.jsxs("div",{className:"border rounded p-3",children:[f.jsxs("strong",{children:[v.title,":"]})," ",v.reference]},y))})]}),o.mcqs&&o.mcqs.length>0&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Multiple Choice Questions"}),f.jsx("div",{className:"space-y-4",children:o.mcqs.map((v,y)=>f.jsxs("div",{className:"border rounded p-4",children:[f.jsx("p",{className:"font-medium mb-2",children:v.question}),f.jsx("ul",{className:"list-disc list-inside space-y-1",children:v.options.map((w,b)=>f.jsx("li",{className:b===v.answerIndex?"text-green-600 font-medium":"",children:w},b))})]},y))})]}),f.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[f.jsxs("button",{onClick:h,disabled:c,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:[c?f.jsx(Bd,{className:"w-4 h-4 animate-spin"}):f.jsx(pL,{className:"w-4 h-4"}),"Approve Case"]}),f.jsxs("button",{onClick:()=>n("/create"),className:"flex items-center gap-2 px-6 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:[f.jsx(Cf,{className:"w-4 h-4"}),"Regenerate"]})]})]})]})}),f.jsx(Vr,{role:"faculty"})]})}function dH({user:t}){var $;const{snapshotId:e}=Q0(),n=ro(),r=Ts(),[i,a]=X.useState(null),[o,s]=X.useState([]),[l,u]=X.useState([]),[c,d]=X.useState([]),[p,h]=X.useState([]),[v,y]=X.useState("cohort"),[w,b]=X.useState(""),[_,A]=X.useState(""),[N,E]=X.useState(1),[P,I]=X.useState(!0),[O,R]=X.useState(!1);X.useEffect(()=>{e&&D()},[e]);const D=async()=>{try{const{data:V,error:Y}=await ke.from("case_snapshots").select("*").eq("id",e).single();if(Y)throw Y;a(V);const{data:W,error:U}=await ke.from("cohorts").select("*").order("name");if(U)throw U;const Q=await Promise.all((W||[]).map(async j=>{const{data:z}=await ke.from("cohort_members").select("student_id").eq("cohort_id",j.id),K=(z||[]).map(ae=>ae.student_id);let re=[];if(K.length>0){const{data:ae}=await ke.from("users").select("id, name, email").in("id",K);re=(ae||[]).map(fe=>({id:fe.id,name:fe.name,email:fe.email}))}return{...j,students:re}}));s(Q);const{data:le,error:oe}=await ke.from("users").select("id, name, email").eq("role","student").order("name");if(oe)throw oe;u(le||[])}catch(V){console.error("Error loading data:",V)}finally{I(!1)}},C=async()=>{if(e){if(v==="cohort"&&c.length===0){r.warning("Please select at least one cohort");return}if(v==="student"&&p.length===0){r.warning("Please select at least one student");return}if(v==="both"&&c.length===0&&p.length===0){r.warning("Please select at least one cohort or student");return}R(!0);try{const V=[];for(const Y of c)V.push({snapshot_id:e,cohort_id:Y,start_at:w||null,due_at:_||null,max_attempts:N});for(const Y of p){const W=l.find(U=>U.id===Y);if(W){let U=null;const{data:Q}=await ke.from("cohorts").select("id").eq("name",`Personal: ${W.name}`).single();if(Q)U=Q.id;else{const{data:le,error:oe}=await ke.from("cohorts").insert({name:`Personal: ${W.name}`,description:`Personal assignment cohort for ${W.name}`}).select().single();if(oe)throw oe;U=le.id,await ke.from("cohort_members").insert({cohort_id:U,student_id:Y})}U&&V.push({snapshot_id:e,cohort_id:U,start_at:w||null,due_at:_||null,max_attempts:N})}}if(V.length>0){const{error:Y}=await ke.from("assignments").insert(V);if(Y)throw Y}r.success(`Successfully created ${V.length} assignment(s)!`),n("/dashboard")}catch(V){r.error("Error creating assignment: "+V.message)}finally{R(!1)}}},L=V=>{d(Y=>Y.includes(V)?Y.filter(W=>W!==V):[...Y,V])},F=V=>{h(Y=>Y.includes(V)?Y.filter(W=>W!==V):[...Y,V])};return P?f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 flex items-center justify-center pb-20 md:pb-0",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}),f.jsx(Vr,{role:"faculty"}),f.jsx(kl,{toasts:r.toasts,onClose:r.removeToast})]}):f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto pb-20 md:pb-0",children:f.jsxs("div",{className:"p-4 md:p-6 max-w-2xl mx-auto",children:[f.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[f.jsx(Up,{className:"w-4 h-4"}),"Back to Dashboard"]}),f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Assign Case"}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Case Title"}),f.jsx("p",{className:"text-lg font-semibold",children:(($=i==null?void 0:i.clinical_case)==null?void 0:$.title)||"Untitled Case"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Assignment Mode"}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("button",{type:"button",onClick:()=>{y("cohort"),h([])},className:`px-4 py-2 rounded-md ${v==="cohort"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[f.jsx(Cl,{className:"w-4 h-4 inline mr-2"}),"Cohorts"]}),f.jsxs("button",{type:"button",onClick:()=>{y("student"),d([])},className:`px-4 py-2 rounded-md ${v==="student"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[f.jsx(To,{className:"w-4 h-4 inline mr-2"}),"Individual Students"]}),f.jsx("button",{type:"button",onClick:()=>y("both"),className:`px-4 py-2 rounded-md ${v==="both"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Both"})]})]}),(v==="cohort"||v==="both")&&f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Cohorts ",v==="cohort"&&"*"]}),f.jsx("div",{className:"border border-gray-300 rounded-md max-h-60 overflow-y-auto",children:o.length===0?f.jsx("p",{className:"p-4 text-gray-500 text-sm",children:"No cohorts available. Create cohorts first."}):o.map(V=>f.jsxs("div",{className:`p-3 border-b border-gray-200 last:border-b-0 cursor-pointer hover:bg-gray-50 ${c.includes(V.id)?"bg-primary-50 border-primary-200":""}`,onClick:()=>L(V.id),children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:V.name}),V.description&&f.jsx("div",{className:"text-sm text-gray-500",children:V.description}),f.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[V.students.length," student",V.students.length!==1?"s":""]})]}),f.jsx("input",{type:"checkbox",checked:c.includes(V.id),onChange:()=>L(V.id),className:"ml-4 w-5 h-5 text-primary-600"})]}),c.includes(V.id)&&V.students.length>0&&f.jsxs("div",{className:"mt-2 ml-4 text-xs text-gray-600",children:["Students: ",V.students.map(Y=>Y.name).join(", ")]})]},V.id))}),c.length>0&&f.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[c.length," cohort",c.length!==1?"s":""," selected"]})]}),(v==="student"||v==="both")&&f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Individual Students ",v==="student"&&"*"]}),f.jsx("div",{className:"border border-gray-300 rounded-md max-h-60 overflow-y-auto",children:l.length===0?f.jsx("p",{className:"p-4 text-gray-500 text-sm",children:"No students available."}):l.map(V=>f.jsx("div",{className:`p-3 border-b border-gray-200 last:border-b-0 cursor-pointer hover:bg-gray-50 ${p.includes(V.id)?"bg-primary-50 border-primary-200":""}`,onClick:()=>F(V.id),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-gray-900",children:V.name}),f.jsx("div",{className:"text-sm text-gray-500",children:V.email})]}),f.jsx("input",{type:"checkbox",checked:p.includes(V.id),onChange:()=>F(V.id),className:"ml-4 w-5 h-5 text-primary-600"})]})},V.id))}),p.length>0&&f.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[p.length," student",p.length!==1?"s":""," selected"]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),f.jsx("input",{type:"datetime-local",value:w,onChange:V=>b(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),f.jsx("input",{type:"datetime-local",value:_,onChange:V=>A(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attempts"}),f.jsx("input",{type:"number",min:"1",max:"10",value:N,onChange:V=>E(parseInt(V.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),f.jsxs("button",{onClick:C,disabled:O||v==="cohort"&&c.length===0||v==="student"&&p.length===0||v==="both"&&c.length===0&&p.length===0,className:"w-full flex items-center justify-center gap-2 bg-primary-600 text-white px-6 py-3 rounded-md hover:bg-primary-700 disabled:opacity-50",children:[f.jsx(pL,{className:"w-5 h-5"}),O?"Assigning...":`Assign to ${c.length+p.length} ${c.length+p.length===1?"Recipient":"Recipients"}`]})]})]})}),f.jsx(Vr,{role:"faculty"}),f.jsx(kl,{toasts:r.toasts,onClose:r.removeToast})]})}function fH({user:t}){const e=ro(),[n,r]=X.useState([]),[i,a]=X.useState(!0),[o,s]=X.useState("");X.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:c,error:d}=await ke.from("stations").select("*").eq("created_by",t.id).order("created_at",{ascending:!1});if(d)throw d;const p=await Promise.all((c||[]).map(async h=>{const{data:v}=await ke.from("case_snapshots").select("*").eq("station_id",h.id).order("approved_at",{ascending:!1}).limit(1).single();return{...h,snapshot:v}}));r(p)}catch(c){console.error("Error loading stations:",c)}finally{a(!1)}},u=n.filter(c=>{var d,p,h,v;return((d=c.title)==null?void 0:d.toLowerCase().includes(o.toLowerCase()))||((v=(h=(p=c.snapshot)==null?void 0:p.clinical_case)==null?void 0:h.title)==null?void 0:v.toLowerCase().includes(o.toLowerCase()))});return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto pb-20 md:pb-0",children:f.jsxs("div",{className:"p-4 md:p-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Station Library"}),f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"relative",children:[f.jsx(jS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:"Search stations...",value:o,onChange:c=>s(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),i?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):u.length===0?f.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:f.jsx("p",{className:"text-gray-600",children:"No stations found"})}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(c=>{var d,p,h,v;return f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:((p=(d=c.snapshot)==null?void 0:d.clinical_case)==null?void 0:p.title)||c.title||"Untitled Station"}),f.jsx("p",{className:"text-sm text-gray-600 mb-4",children:((v=(h=c.snapshot)==null?void 0:h.clinical_case)==null?void 0:v.subject)||"No subject"}),f.jsx("div",{className:"flex items-center gap-2 mb-4",children:c.snapshot?f.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded",children:"Approved"}):f.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"Pending"})}),f.jsxs("div",{className:"flex gap-2",children:[c.snapshot&&f.jsxs("button",{onClick:()=>e(`/review/${c.id}`),className:"flex items-center gap-1 px-3 py-1 text-sm bg-primary-100 text-primary-700 rounded hover:bg-primary-200",children:[f.jsx(a1,{className:"w-4 h-4"}),"View"]}),f.jsxs("button",{onClick:()=>e(`/create?edit=${c.id}`),className:"flex items-center gap-1 px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:[f.jsx(OS,{className:"w-4 h-4"}),"Edit"]})]})]},c.id)})})]})}),f.jsx(Vr,{role:"faculty"})]})}function SL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=SL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $t(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=SL(t))&&(r&&(r+=" "),r+=e);return r}var hH=Array.isArray,Pi=hH,pH=typeof Tg=="object"&&Tg&&Tg.Object===Object&&Tg,AL=pH,mH=AL,gH=typeof self=="object"&&self&&self.Object===Object&&self,yH=mH||gH||Function("return this")(),Lo=yH,vH=Lo,xH=vH.Symbol,jm=xH,JT=jm,EL=Object.prototype,bH=EL.hasOwnProperty,wH=EL.toString,kh=JT?JT.toStringTag:void 0;function _H(t){var e=bH.call(t,kh),n=t[kh];try{t[kh]=void 0;var r=!0}catch{}var i=wH.call(t);return r&&(e?t[kh]=n:delete t[kh]),i}var SH=_H,AH=Object.prototype,EH=AH.toString;function NH(t){return EH.call(t)}var TH=NH,YT=jm,PH=SH,CH=TH,kH="[object Null]",IH="[object Undefined]",XT=YT?YT.toStringTag:void 0;function OH(t){return t==null?t===void 0?IH:kH:XT&&XT in Object(t)?PH(t):CH(t)}var Ps=OH;function jH(t){return t!=null&&typeof t=="object"}var Cs=jH,RH=Ps,LH=Cs,MH="[object Symbol]";function DH(t){return typeof t=="symbol"||LH(t)&&RH(t)==MH}var kf=DH,$H=Pi,FH=kf,UH=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,BH=/^\w*$/;function qH(t,e){if($H(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||FH(t)?!0:BH.test(t)||!UH.test(t)||e!=null&&t in Object(e)}var LS=qH;function VH(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Fl=VH;const If=dn(Fl);var zH=Ps,HH=Fl,GH="[object AsyncFunction]",WH="[object Function]",KH="[object GeneratorFunction]",JH="[object Proxy]";function YH(t){if(!HH(t))return!1;var e=zH(t);return e==WH||e==KH||e==GH||e==JH}var MS=YH;const Et=dn(MS);var XH=Lo,ZH=XH["__core-js_shared__"],QH=ZH,bb=QH,ZT=function(){var t=/[^.]+$/.exec(bb&&bb.keys&&bb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function eG(t){return!!ZT&&ZT in t}var tG=eG,nG=Function.prototype,rG=nG.toString;function iG(t){if(t!=null){try{return rG.call(t)}catch{}try{return t+""}catch{}}return""}var NL=iG,aG=MS,oG=tG,sG=Fl,lG=NL,uG=/[\\^$.*+?()[\]{}|]/g,cG=/^\[object .+?Constructor\]$/,dG=Function.prototype,fG=Object.prototype,hG=dG.toString,pG=fG.hasOwnProperty,mG=RegExp("^"+hG.call(pG).replace(uG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gG(t){if(!sG(t)||oG(t))return!1;var e=aG(t)?mG:cG;return e.test(lG(t))}var yG=gG;function vG(t,e){return t==null?void 0:t[e]}var xG=vG,bG=yG,wG=xG;function _G(t,e){var n=wG(t,e);return bG(n)?n:void 0}var cc=_G,SG=cc,AG=SG(Object,"create"),o1=AG,QT=o1;function EG(){this.__data__=QT?QT(null):{},this.size=0}var NG=EG;function TG(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var PG=TG,CG=o1,kG="__lodash_hash_undefined__",IG=Object.prototype,OG=IG.hasOwnProperty;function jG(t){var e=this.__data__;if(CG){var n=e[t];return n===kG?void 0:n}return OG.call(e,t)?e[t]:void 0}var RG=jG,LG=o1,MG=Object.prototype,DG=MG.hasOwnProperty;function $G(t){var e=this.__data__;return LG?e[t]!==void 0:DG.call(e,t)}var FG=$G,UG=o1,BG="__lodash_hash_undefined__";function qG(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=UG&&e===void 0?BG:e,this}var VG=qG,zG=NG,HG=PG,GG=RG,WG=FG,KG=VG;function Of(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Of.prototype.clear=zG;Of.prototype.delete=HG;Of.prototype.get=GG;Of.prototype.has=WG;Of.prototype.set=KG;var JG=Of;function YG(){this.__data__=[],this.size=0}var XG=YG;function ZG(t,e){return t===e||t!==t&&e!==e}var DS=ZG,QG=DS;function eW(t,e){for(var n=t.length;n--;)if(QG(t[n][0],e))return n;return-1}var s1=eW,tW=s1,nW=Array.prototype,rW=nW.splice;function iW(t){var e=this.__data__,n=tW(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():rW.call(e,n,1),--this.size,!0}var aW=iW,oW=s1;function sW(t){var e=this.__data__,n=oW(e,t);return n<0?void 0:e[n][1]}var lW=sW,uW=s1;function cW(t){return uW(this.__data__,t)>-1}var dW=cW,fW=s1;function hW(t,e){var n=this.__data__,r=fW(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var pW=hW,mW=XG,gW=aW,yW=lW,vW=dW,xW=pW;function jf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}jf.prototype.clear=mW;jf.prototype.delete=gW;jf.prototype.get=yW;jf.prototype.has=vW;jf.prototype.set=xW;var l1=jf,bW=cc,wW=Lo,_W=bW(wW,"Map"),$S=_W,eP=JG,SW=l1,AW=$S;function EW(){this.size=0,this.__data__={hash:new eP,map:new(AW||SW),string:new eP}}var NW=EW;function TW(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var PW=TW,CW=PW;function kW(t,e){var n=t.__data__;return CW(e)?n[typeof e=="string"?"string":"hash"]:n.map}var u1=kW,IW=u1;function OW(t){var e=IW(this,t).delete(t);return this.size-=e?1:0,e}var jW=OW,RW=u1;function LW(t){return RW(this,t).get(t)}var MW=LW,DW=u1;function $W(t){return DW(this,t).has(t)}var FW=$W,UW=u1;function BW(t,e){var n=UW(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var qW=BW,VW=NW,zW=jW,HW=MW,GW=FW,WW=qW;function Rf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Rf.prototype.clear=VW;Rf.prototype.delete=zW;Rf.prototype.get=HW;Rf.prototype.has=GW;Rf.prototype.set=WW;var FS=Rf,TL=FS,KW="Expected a function";function US(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(KW);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(US.Cache||TL),n}US.Cache=TL;var PL=US;const JW=dn(PL);var YW=PL,XW=500;function ZW(t){var e=YW(t,function(r){return n.size===XW&&n.clear(),r}),n=e.cache;return e}var QW=ZW,eK=QW,tK=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nK=/\\(\\)?/g,rK=eK(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(tK,function(n,r,i,a){e.push(i?a.replace(nK,"$1"):r||n)}),e}),iK=rK;function aK(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var BS=aK,tP=jm,oK=BS,sK=Pi,lK=kf,nP=tP?tP.prototype:void 0,rP=nP?nP.toString:void 0;function CL(t){if(typeof t=="string")return t;if(sK(t))return oK(t,CL)+"";if(lK(t))return rP?rP.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var uK=CL,cK=uK;function dK(t){return t==null?"":cK(t)}var kL=dK,fK=Pi,hK=LS,pK=iK,mK=kL;function gK(t,e){return fK(t)?t:hK(t,e)?[t]:pK(mK(t))}var IL=gK,yK=kf;function vK(t){if(typeof t=="string"||yK(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var c1=vK,xK=IL,bK=c1;function wK(t,e){e=xK(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[bK(e[n++])];return n&&n==r?t:void 0}var qS=wK,_K=qS;function SK(t,e,n){var r=t==null?void 0:_K(t,e);return r===void 0?n:r}var OL=SK;const Yi=dn(OL);function AK(t){return t==null}var EK=AK;const Rt=dn(EK);var NK=Ps,TK=Pi,PK=Cs,CK="[object String]";function kK(t){return typeof t=="string"||!TK(t)&&PK(t)&&NK(t)==CK}var IK=kK;const Zu=dn(IK);var jL={exports:{}},fn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS=Symbol.for("react.element"),zS=Symbol.for("react.portal"),d1=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),h1=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),m1=Symbol.for("react.context"),OK=Symbol.for("react.server_context"),g1=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.suspense_list"),x1=Symbol.for("react.memo"),b1=Symbol.for("react.lazy"),jK=Symbol.for("react.offscreen"),RL;RL=Symbol.for("react.module.reference");function ka(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case VS:switch(t=t.type,t){case d1:case h1:case f1:case y1:case v1:return t;default:switch(t=t&&t.$$typeof,t){case OK:case m1:case g1:case b1:case x1:case p1:return t;default:return e}}case zS:return e}}}fn.ContextConsumer=m1;fn.ContextProvider=p1;fn.Element=VS;fn.ForwardRef=g1;fn.Fragment=d1;fn.Lazy=b1;fn.Memo=x1;fn.Portal=zS;fn.Profiler=h1;fn.StrictMode=f1;fn.Suspense=y1;fn.SuspenseList=v1;fn.isAsyncMode=function(){return!1};fn.isConcurrentMode=function(){return!1};fn.isContextConsumer=function(t){return ka(t)===m1};fn.isContextProvider=function(t){return ka(t)===p1};fn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===VS};fn.isForwardRef=function(t){return ka(t)===g1};fn.isFragment=function(t){return ka(t)===d1};fn.isLazy=function(t){return ka(t)===b1};fn.isMemo=function(t){return ka(t)===x1};fn.isPortal=function(t){return ka(t)===zS};fn.isProfiler=function(t){return ka(t)===h1};fn.isStrictMode=function(t){return ka(t)===f1};fn.isSuspense=function(t){return ka(t)===y1};fn.isSuspenseList=function(t){return ka(t)===v1};fn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===d1||t===h1||t===f1||t===y1||t===v1||t===jK||typeof t=="object"&&t!==null&&(t.$$typeof===b1||t.$$typeof===x1||t.$$typeof===p1||t.$$typeof===m1||t.$$typeof===g1||t.$$typeof===RL||t.getModuleId!==void 0)};fn.typeOf=ka;jL.exports=fn;var RK=jL.exports,LK=Ps,MK=Cs,DK="[object Number]";function $K(t){return typeof t=="number"||MK(t)&&LK(t)==DK}var LL=$K;const FK=dn(LL);var UK=LL;function BK(t){return UK(t)&&t!=+t}var qK=BK;const Rm=dn(qK);var ci=function(e){return e===0?0:e>0?1:-1},Mu=function(e){return Zu(e)&&e.indexOf("%")===e.length-1},Be=function(e){return FK(e)&&!Rm(e)},VK=function(e){return Rt(e)},Er=function(e){return Be(e)||Zu(e)},zK=0,Lf=function(e){var n=++zK;return"".concat(e||"").concat(n)},di=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Be(e)&&!Zu(e))return r;var a;if(Mu(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return Rm(a)&&(a=r),i&&a>n&&(a=n),a},ul=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},HK=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Vi=function(e,n){return Be(e)&&Be(n)?function(r){return e+r*(n-e)}:function(){return n}};function Tv(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Yi(r,e))===n})}var GK=function(e,n){return Be(e)&&Be(n)?e-n:Zu(e)&&Zu(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Sd(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function k2(t){"@babel/helpers - typeof";return k2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k2(t)}var WK=["viewBox","children"],KK=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],iP=["points","pathLength"],wb={svg:WK,polygon:iP,polyline:iP},HS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Pv=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(X.isValidElement(e)&&(r=e.props),!If(r))return null;var i={};return Object.keys(r).forEach(function(a){HS.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},JK=function(e,n,r){return function(i){return e(n,r,i),null}},Qu=function(e,n,r){if(!If(e)||k2(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];HS.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=JK(o,n,r))}),i},YK=["children"],XK=["children"];function aP(t,e){if(t==null)return{};var n=ZK(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZK(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function I2(t){"@babel/helpers - typeof";return I2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I2(t)}var oP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},hs=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},sP=null,_b=null,GS=function t(e){if(e===sP&&Array.isArray(_b))return _b;var n=[];return X.Children.forEach(e,function(r){Rt(r)||(RK.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),_b=n,sP=e,n};function Xi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return hs(i)}):r=[hs(e)],GS(t).forEach(function(i){var a=Yi(i,"type.displayName")||Yi(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function qi(t,e){var n=Xi(t,e);return n&&n[0]}var lP=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Be(r)||r<=0||!Be(i)||i<=0)},QK=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],eJ=function(e){return e&&e.type&&Zu(e.type)&&QK.indexOf(e.type)>=0},tJ=function(e){return e&&I2(e)==="object"&&"clipDot"in e},nJ=function(e,n,r,i){var a,o=(a=wb==null?void 0:wb[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Et(e)&&(i&&o.includes(n)||KK.includes(n))||r&&HS.includes(n)},yt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(X.isValidElement(e)&&(i=e.props),!If(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;nJ((s=i)===null||s===void 0?void 0:s[o],o,n,r)&&(a[o]=i[o])}),a},O2=function t(e,n){if(e===n)return!0;var r=X.Children.count(e);if(r!==X.Children.count(n))return!1;if(r===0)return!0;if(r===1)return uP(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!uP(a,o))return!1}return!0},uP=function(e,n){if(Rt(e)&&Rt(n))return!0;if(!Rt(e)&&!Rt(n)){var r=e.props||{},i=r.children,a=aP(r,YK),o=n.props||{},s=o.children,l=aP(o,XK);return i&&s?Sd(a,l)&&O2(i,s):!i&&!s?Sd(a,l):!1}return!1},cP=function(e,n){var r=[],i={};return GS(e).forEach(function(a,o){if(eJ(a))r.push(a);else if(a){var s=hs(a.type),l=n[s]||{},u=l.handler,c=l.once;if(u&&(!c||!i[s])){var d=u(a,s,o);r.push(d),i[s]=!0}}}),r},rJ=function(e){var n=e&&e.type;return n&&oP[n]?oP[n]:null},iJ=function(e,n){return GS(n).indexOf(e)},aJ=["children","width","height","viewBox","className","style","title","desc"];function j2(){return j2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j2.apply(this,arguments)}function oJ(t,e){if(t==null)return{};var n=sJ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sJ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function R2(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,o=t.style,s=t.title,l=t.desc,u=oJ(t,aJ),c=i||{width:n,height:r,x:0,y:0},d=$t("recharts-surface",a);return ce.createElement("svg",j2({},yt(u,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),ce.createElement("title",null,s),ce.createElement("desc",null,l),e)}var lJ=["children","className"];function L2(){return L2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L2.apply(this,arguments)}function uJ(t,e){if(t==null)return{};var n=cJ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cJ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Yt=ce.forwardRef(function(t,e){var n=t.children,r=t.className,i=uJ(t,lJ),a=$t("recharts-layer",r);return ce.createElement("g",L2({className:a},yt(i,!0),{ref:e}),n)}),eo=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function dJ(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var fJ=dJ,hJ=fJ;function pJ(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:hJ(t,e,n)}var mJ=pJ,gJ="\\ud800-\\udfff",yJ="\\u0300-\\u036f",vJ="\\ufe20-\\ufe2f",xJ="\\u20d0-\\u20ff",bJ=yJ+vJ+xJ,wJ="\\ufe0e\\ufe0f",_J="\\u200d",SJ=RegExp("["+_J+gJ+bJ+wJ+"]");function AJ(t){return SJ.test(t)}var ML=AJ;function EJ(t){return t.split("")}var NJ=EJ,DL="\\ud800-\\udfff",TJ="\\u0300-\\u036f",PJ="\\ufe20-\\ufe2f",CJ="\\u20d0-\\u20ff",kJ=TJ+PJ+CJ,IJ="\\ufe0e\\ufe0f",OJ="["+DL+"]",M2="["+kJ+"]",D2="\\ud83c[\\udffb-\\udfff]",jJ="(?:"+M2+"|"+D2+")",$L="[^"+DL+"]",FL="(?:\\ud83c[\\udde6-\\uddff]){2}",UL="[\\ud800-\\udbff][\\udc00-\\udfff]",RJ="\\u200d",BL=jJ+"?",qL="["+IJ+"]?",LJ="(?:"+RJ+"(?:"+[$L,FL,UL].join("|")+")"+qL+BL+")*",MJ=qL+BL+LJ,DJ="(?:"+[$L+M2+"?",M2,FL,UL,OJ].join("|")+")",$J=RegExp(D2+"(?="+D2+")|"+DJ+MJ,"g");function FJ(t){return t.match($J)||[]}var UJ=FJ,BJ=NJ,qJ=ML,VJ=UJ;function zJ(t){return qJ(t)?VJ(t):BJ(t)}var HJ=zJ,GJ=mJ,WJ=ML,KJ=HJ,JJ=kL;function YJ(t){return function(e){e=JJ(e);var n=WJ(e)?KJ(e):void 0,r=n?n[0]:e.charAt(0),i=n?GJ(n,1).join(""):e.slice(1);return r[t]()+i}}var XJ=YJ,ZJ=XJ,QJ=ZJ("toUpperCase"),eY=QJ;const w1=dn(eY);function Sn(t){return function(){return t}}const VL=Math.cos,Cv=Math.sin,io=Math.sqrt,kv=Math.PI,_1=2*kv,$2=Math.PI,F2=2*$2,Su=1e-6,tY=F2-Su;function zL(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function nY(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return zL;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class rY{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?zL:nY(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,u=i-n,c=o-e,d=s-n,p=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Su)if(!(Math.abs(d*l-u*c)>Su)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-o,v=i-s,y=l*l+u*u,w=h*h+v*v,b=Math.sqrt(y),_=Math.sqrt(p),A=a*Math.tan(($2-Math.acos((y+p-w)/(2*b*_)))/2),N=A/_,E=A/b;Math.abs(N-1)>Su&&this._append`L${e+N*c},${n+N*d}`,this._append`A${a},${a},0,0,${+(d*h>c*v)},${this._x1=e+E*l},${this._y1=n+E*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,c=n+l,d=1^o,p=o?i-a:a-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Su||Math.abs(this._y1-c)>Su)&&this._append`L${u},${c}`,r&&(p<0&&(p=p%F2+F2),p>tY?this._append`A${r},${r},0,1,${d},${e-s},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:p>Su&&this._append`A${r},${r},0,${+(p>=$2)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function WS(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new rY(e)}function KS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function HL(t){this._context=t}HL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function S1(t){return new HL(t)}function GL(t){return t[0]}function WL(t){return t[1]}function KL(t,e){var n=Sn(!0),r=null,i=S1,a=null,o=WS(s);t=typeof t=="function"?t:t===void 0?GL:Sn(t),e=typeof e=="function"?e:e===void 0?WL:Sn(e);function s(l){var u,c=(l=KS(l)).length,d,p=!1,h;for(r==null&&(a=i(h=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(d,u,l),+e(d,u,l));if(h)return a=null,h+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Sn(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Sn(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Sn(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function ey(t,e,n){var r=null,i=Sn(!0),a=null,o=S1,s=null,l=WS(u);t=typeof t=="function"?t:t===void 0?GL:Sn(+t),e=typeof e=="function"?e:Sn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?WL:Sn(+n);function u(d){var p,h,v,y=(d=KS(d)).length,w,b=!1,_,A=new Array(y),N=new Array(y);for(a==null&&(s=o(_=l())),p=0;p<=y;++p){if(!(p<y&&i(w=d[p],p,d))===b)if(b=!b)h=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),v=p-1;v>=h;--v)s.point(A[v],N[v]);s.lineEnd(),s.areaEnd()}b&&(A[p]=+t(w,p,d),N[p]=+e(w,p,d),s.point(r?+r(w,p,d):A[p],n?+n(w,p,d):N[p]))}if(_)return s=null,_+""||null}function c(){return KL().defined(i).curve(o).context(a)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:Sn(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Sn(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Sn(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:Sn(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Sn(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Sn(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Sn(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,a!=null&&(s=o(a)),u):o},u.context=function(d){return arguments.length?(d==null?a=s=null:s=o(a=d),u):a},u}class JL{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function iY(t){return new JL(t,!0)}function aY(t){return new JL(t,!1)}const JS={draw(t,e){const n=io(e/kv);t.moveTo(n,0),t.arc(0,0,n,0,_1)}},oY={draw(t,e){const n=io(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},YL=io(1/3),sY=YL*2,lY={draw(t,e){const n=io(e/sY),r=n*YL;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},uY={draw(t,e){const n=io(e),r=-n/2;t.rect(r,r,n,n)}},cY=.8908130915292852,XL=Cv(kv/10)/Cv(7*kv/10),dY=Cv(_1/10)*XL,fY=-VL(_1/10)*XL,hY={draw(t,e){const n=io(e*cY),r=dY*n,i=fY*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=_1*a/5,s=VL(o),l=Cv(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},Sb=io(3),pY={draw(t,e){const n=-io(e/(Sb*3));t.moveTo(0,n*2),t.lineTo(-Sb*n,-n),t.lineTo(Sb*n,-n),t.closePath()}},pa=-.5,ma=io(3)/2,U2=1/io(12),mY=(U2/2+1)*3,gY={draw(t,e){const n=io(e/mY),r=n/2,i=n*U2,a=r,o=n*U2+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(pa*r-ma*i,ma*r+pa*i),t.lineTo(pa*a-ma*o,ma*a+pa*o),t.lineTo(pa*s-ma*l,ma*s+pa*l),t.lineTo(pa*r+ma*i,pa*i-ma*r),t.lineTo(pa*a+ma*o,pa*o-ma*a),t.lineTo(pa*s+ma*l,pa*l-ma*s),t.closePath()}};function yY(t,e){let n=null,r=WS(i);t=typeof t=="function"?t:Sn(t||JS),e=typeof e=="function"?e:Sn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Sn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Sn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Iv(){}function Ov(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ZL(t){this._context=t}ZL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ov(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ov(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vY(t){return new ZL(t)}function QL(t){this._context=t}QL.prototype={areaStart:Iv,areaEnd:Iv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ov(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xY(t){return new QL(t)}function eM(t){this._context=t}eM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ov(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bY(t){return new eM(t)}function tM(t){this._context=t}tM.prototype={areaStart:Iv,areaEnd:Iv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function wY(t){return new tM(t)}function dP(t){return t<0?-1:1}function fP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(dP(a)+dP(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function hP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ab(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function jv(t){this._context=t}jv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ab(this,this._t0,hP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ab(this,hP(this,n=fP(this,t,e)),n);break;default:Ab(this,this._t0,n=fP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function nM(t){this._context=new rM(t)}(nM.prototype=Object.create(jv.prototype)).point=function(t,e){jv.prototype.point.call(this,e,t)};function rM(t){this._context=t}rM.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function _Y(t){return new jv(t)}function SY(t){return new nM(t)}function iM(t){this._context=t}iM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=pP(t),i=pP(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function pP(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function AY(t){return new iM(t)}function A1(t,e){this._context=t,this._t=e}A1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function EY(t){return new A1(t,.5)}function NY(t){return new A1(t,0)}function TY(t){return new A1(t,1)}function Wd(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function B2(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function PY(t,e){return t[e]}function CY(t){const e=[];return e.key=t,e}function kY(){var t=Sn([]),e=B2,n=Wd,r=PY;function i(a){var o=Array.from(t.apply(this,arguments),CY),s,l=o.length,u=-1,c;for(const d of a)for(s=0,++u;s<l;++s)(o[s][u]=[0,+r(d,o[s].key,u,a)]).data=d;for(s=0,c=KS(e(o));s<l;++s)o[c[s]].index=s;return n(o,c),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Sn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Sn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?B2:typeof a=="function"?a:Sn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Wd,i):n},i}function IY(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Wd(t,e)}}function OY(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}Wd(t,e)}}function jY(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,u=0;s<o;++s){for(var c=t[e[s]],d=c[r][1]||0,p=c[r-1][1]||0,h=(d-p)/2,v=0;v<s;++v){var y=t[e[v]],w=y[r][1]||0,b=y[r-1][1]||0;h+=w-b}l+=d,u+=h*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,Wd(t,e)}}function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}var RY=["type","size","sizeType"];function q2(){return q2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q2.apply(this,arguments)}function mP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(n),!0).forEach(function(r){LY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LY(t,e,n){return e=MY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MY(t){var e=DY(t,"string");return Vp(e)=="symbol"?e:e+""}function DY(t,e){if(Vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Y(t,e){if(t==null)return{};var n=FY(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var aM={symbolCircle:JS,symbolCross:oY,symbolDiamond:lY,symbolSquare:uY,symbolStar:hY,symbolTriangle:pY,symbolWye:gY},UY=Math.PI/180,BY=function(e){var n="symbol".concat(w1(e));return aM[n]||JS},qY=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*UY;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},VY=function(e,n){aM["symbol".concat(w1(e))]=n},YS=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=$Y(e,RY),u=gP(gP({},l),{},{type:r,size:a,sizeType:s}),c=function(){var w=BY(r),b=yY().type(w).size(qY(a,s,r));return b()},d=u.className,p=u.cx,h=u.cy,v=yt(u,!0);return p===+p&&h===+h&&a===+a?ce.createElement("path",q2({},v,{className:$t("recharts-symbols",d),transform:"translate(".concat(p,", ").concat(h,")"),d:c()})):null};YS.registerSymbol=VY;function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function V2(){return V2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V2.apply(this,arguments)}function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(r){zp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sM(r.key),r)}}function WY(t,e,n){return e&&GY(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function KY(t,e,n){return e=Rv(e),JY(t,oM()?Reflect.construct(e,n||[],Rv(t).constructor):e.apply(t,n))}function JY(t,e){if(e&&(Kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YY(t)}function YY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oM=function(){return!!t})()}function Rv(t){return Rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rv(t)}function XY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z2(t,e)}function z2(t,e){return z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z2(t,e)}function zp(t,e,n){return e=sM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sM(t){var e=ZY(t,"string");return Kd(e)=="symbol"?e:e+""}function ZY(t,e){if(Kd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ga=32,XS=function(t){function e(){return HY(this,e),KY(this,e,arguments)}return XY(e,t),WY(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=ga/2,o=ga/6,s=ga/3,l=r.inactive?i:r.color;if(r.type==="plainline")return ce.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:ga,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return ce.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(ga,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return ce.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ga/8,"h").concat(ga,"v").concat(ga*3/4,"h").concat(-ga,"z"),className:"recharts-legend-icon"});if(ce.isValidElement(r.legendIcon)){var u=zY({},r);return delete u.legendIcon,ce.cloneElement(r.legendIcon,u)}return ce.createElement(YS,{fill:l,cx:a,cy:a,size:ga,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:ga,height:ga},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(h,v){var y=h.formatter||l,w=$t(zp(zp({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",h.inactive));if(h.type==="none")return null;var b=Et(h.value)?null:h.value;eo(!Et(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=h.inactive?u:h.color;return ce.createElement("li",V2({className:w,style:d,key:"legend-item-".concat(v)},Qu(r.props,h,v)),ce.createElement(R2,{width:o,height:o,viewBox:c,style:p},r.renderIcon(h)),ce.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},y?y(b,h,v):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return ce.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(X.PureComponent);zp(XS,"displayName","Legend");zp(XS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var QY=l1;function eX(){this.__data__=new QY,this.size=0}var tX=eX;function nX(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var rX=nX;function iX(t){return this.__data__.get(t)}var aX=iX;function oX(t){return this.__data__.has(t)}var sX=oX,lX=l1,uX=$S,cX=FS,dX=200;function fX(t,e){var n=this.__data__;if(n instanceof lX){var r=n.__data__;if(!uX||r.length<dX-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new cX(r)}return n.set(t,e),this.size=n.size,this}var hX=fX,pX=l1,mX=tX,gX=rX,yX=aX,vX=sX,xX=hX;function Mf(t){var e=this.__data__=new pX(t);this.size=e.size}Mf.prototype.clear=mX;Mf.prototype.delete=gX;Mf.prototype.get=yX;Mf.prototype.has=vX;Mf.prototype.set=xX;var lM=Mf,bX="__lodash_hash_undefined__";function wX(t){return this.__data__.set(t,bX),this}var _X=wX;function SX(t){return this.__data__.has(t)}var AX=SX,EX=FS,NX=_X,TX=AX;function Lv(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new EX;++e<n;)this.add(t[e])}Lv.prototype.add=Lv.prototype.push=NX;Lv.prototype.has=TX;var uM=Lv;function PX(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var cM=PX;function CX(t,e){return t.has(e)}var dM=CX,kX=uM,IX=cM,OX=dM,jX=1,RX=2;function LX(t,e,n,r,i,a){var o=n&jX,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),c=a.get(e);if(u&&c)return u==e&&c==t;var d=-1,p=!0,h=n&RX?new kX:void 0;for(a.set(t,e),a.set(e,t);++d<s;){var v=t[d],y=e[d];if(r)var w=o?r(y,v,d,e,t,a):r(v,y,d,t,e,a);if(w!==void 0){if(w)continue;p=!1;break}if(h){if(!IX(e,function(b,_){if(!OX(h,_)&&(v===b||i(v,b,n,r,a)))return h.push(_)})){p=!1;break}}else if(!(v===y||i(v,y,n,r,a))){p=!1;break}}return a.delete(t),a.delete(e),p}var fM=LX,MX=Lo,DX=MX.Uint8Array,$X=DX;function FX(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var UX=FX;function BX(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var ZS=BX,vP=jm,xP=$X,qX=DS,VX=fM,zX=UX,HX=ZS,GX=1,WX=2,KX="[object Boolean]",JX="[object Date]",YX="[object Error]",XX="[object Map]",ZX="[object Number]",QX="[object RegExp]",eZ="[object Set]",tZ="[object String]",nZ="[object Symbol]",rZ="[object ArrayBuffer]",iZ="[object DataView]",bP=vP?vP.prototype:void 0,Eb=bP?bP.valueOf:void 0;function aZ(t,e,n,r,i,a,o){switch(n){case iZ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case rZ:return!(t.byteLength!=e.byteLength||!a(new xP(t),new xP(e)));case KX:case JX:case ZX:return qX(+t,+e);case YX:return t.name==e.name&&t.message==e.message;case QX:case tZ:return t==e+"";case XX:var s=zX;case eZ:var l=r&GX;if(s||(s=HX),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=WX,o.set(t,e);var c=VX(s(t),s(e),r,i,a,o);return o.delete(t),c;case nZ:if(Eb)return Eb.call(t)==Eb.call(e)}return!1}var oZ=aZ;function sZ(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var hM=sZ,lZ=hM,uZ=Pi;function cZ(t,e,n){var r=e(t);return uZ(t)?r:lZ(r,n(t))}var dZ=cZ;function fZ(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}var hZ=fZ;function pZ(){return[]}var mZ=pZ,gZ=hZ,yZ=mZ,vZ=Object.prototype,xZ=vZ.propertyIsEnumerable,wP=Object.getOwnPropertySymbols,bZ=wP?function(t){return t==null?[]:(t=Object(t),gZ(wP(t),function(e){return xZ.call(t,e)}))}:yZ,wZ=bZ;function _Z(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var SZ=_Z,AZ=Ps,EZ=Cs,NZ="[object Arguments]";function TZ(t){return EZ(t)&&AZ(t)==NZ}var PZ=TZ,_P=PZ,CZ=Cs,pM=Object.prototype,kZ=pM.hasOwnProperty,IZ=pM.propertyIsEnumerable,OZ=_P(function(){return arguments}())?_P:function(t){return CZ(t)&&kZ.call(t,"callee")&&!IZ.call(t,"callee")},QS=OZ,Mv={exports:{}};function jZ(){return!1}var RZ=jZ;Mv.exports;(function(t,e){var n=Lo,r=RZ,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;t.exports=u})(Mv,Mv.exports);var mM=Mv.exports,LZ=9007199254740991,MZ=/^(?:0|[1-9]\d*)$/;function DZ(t,e){var n=typeof t;return e=e??LZ,!!e&&(n=="number"||n!="symbol"&&MZ.test(t))&&t>-1&&t%1==0&&t<e}var eA=DZ,$Z=9007199254740991;function FZ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=$Z}var tA=FZ,UZ=Ps,BZ=tA,qZ=Cs,VZ="[object Arguments]",zZ="[object Array]",HZ="[object Boolean]",GZ="[object Date]",WZ="[object Error]",KZ="[object Function]",JZ="[object Map]",YZ="[object Number]",XZ="[object Object]",ZZ="[object RegExp]",QZ="[object Set]",eQ="[object String]",tQ="[object WeakMap]",nQ="[object ArrayBuffer]",rQ="[object DataView]",iQ="[object Float32Array]",aQ="[object Float64Array]",oQ="[object Int8Array]",sQ="[object Int16Array]",lQ="[object Int32Array]",uQ="[object Uint8Array]",cQ="[object Uint8ClampedArray]",dQ="[object Uint16Array]",fQ="[object Uint32Array]",Pn={};Pn[iQ]=Pn[aQ]=Pn[oQ]=Pn[sQ]=Pn[lQ]=Pn[uQ]=Pn[cQ]=Pn[dQ]=Pn[fQ]=!0;Pn[VZ]=Pn[zZ]=Pn[nQ]=Pn[HZ]=Pn[rQ]=Pn[GZ]=Pn[WZ]=Pn[KZ]=Pn[JZ]=Pn[YZ]=Pn[XZ]=Pn[ZZ]=Pn[QZ]=Pn[eQ]=Pn[tQ]=!1;function hQ(t){return qZ(t)&&BZ(t.length)&&!!Pn[UZ(t)]}var pQ=hQ;function mQ(t){return function(e){return t(e)}}var gM=mQ,Dv={exports:{}};Dv.exports;(function(t,e){var n=AL,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(Dv,Dv.exports);var gQ=Dv.exports,yQ=pQ,vQ=gM,SP=gQ,AP=SP&&SP.isTypedArray,xQ=AP?vQ(AP):yQ,yM=xQ,bQ=SZ,wQ=QS,_Q=Pi,SQ=mM,AQ=eA,EQ=yM,NQ=Object.prototype,TQ=NQ.hasOwnProperty;function PQ(t,e){var n=_Q(t),r=!n&&wQ(t),i=!n&&!r&&SQ(t),a=!n&&!r&&!i&&EQ(t),o=n||r||i||a,s=o?bQ(t.length,String):[],l=s.length;for(var u in t)(e||TQ.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||AQ(u,l)))&&s.push(u);return s}var CQ=PQ,kQ=Object.prototype;function IQ(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||kQ;return t===n}var OQ=IQ;function jQ(t,e){return function(n){return t(e(n))}}var vM=jQ,RQ=vM,LQ=RQ(Object.keys,Object),MQ=LQ,DQ=OQ,$Q=MQ,FQ=Object.prototype,UQ=FQ.hasOwnProperty;function BQ(t){if(!DQ(t))return $Q(t);var e=[];for(var n in Object(t))UQ.call(t,n)&&n!="constructor"&&e.push(n);return e}var qQ=BQ,VQ=MS,zQ=tA;function HQ(t){return t!=null&&zQ(t.length)&&!VQ(t)}var Lm=HQ,GQ=CQ,WQ=qQ,KQ=Lm;function JQ(t){return KQ(t)?GQ(t):WQ(t)}var E1=JQ,YQ=dZ,XQ=wZ,ZQ=E1;function QQ(t){return YQ(t,ZQ,XQ)}var eee=QQ,EP=eee,tee=1,nee=Object.prototype,ree=nee.hasOwnProperty;function iee(t,e,n,r,i,a){var o=n&tee,s=EP(t),l=s.length,u=EP(e),c=u.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var p=s[d];if(!(o?p in e:ree.call(e,p)))return!1}var h=a.get(t),v=a.get(e);if(h&&v)return h==e&&v==t;var y=!0;a.set(t,e),a.set(e,t);for(var w=o;++d<l;){p=s[d];var b=t[p],_=e[p];if(r)var A=o?r(_,b,p,e,t,a):r(b,_,p,t,e,a);if(!(A===void 0?b===_||i(b,_,n,r,a):A)){y=!1;break}w||(w=p=="constructor")}if(y&&!w){var N=t.constructor,E=e.constructor;N!=E&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof E=="function"&&E instanceof E)&&(y=!1)}return a.delete(t),a.delete(e),y}var aee=iee,oee=cc,see=Lo,lee=oee(see,"DataView"),uee=lee,cee=cc,dee=Lo,fee=cee(dee,"Promise"),hee=fee,pee=cc,mee=Lo,gee=pee(mee,"Set"),xM=gee,yee=cc,vee=Lo,xee=yee(vee,"WeakMap"),bee=xee,H2=uee,G2=$S,W2=hee,K2=xM,J2=bee,bM=Ps,Df=NL,NP="[object Map]",wee="[object Object]",TP="[object Promise]",PP="[object Set]",CP="[object WeakMap]",kP="[object DataView]",_ee=Df(H2),See=Df(G2),Aee=Df(W2),Eee=Df(K2),Nee=Df(J2),Au=bM;(H2&&Au(new H2(new ArrayBuffer(1)))!=kP||G2&&Au(new G2)!=NP||W2&&Au(W2.resolve())!=TP||K2&&Au(new K2)!=PP||J2&&Au(new J2)!=CP)&&(Au=function(t){var e=bM(t),n=e==wee?t.constructor:void 0,r=n?Df(n):"";if(r)switch(r){case _ee:return kP;case See:return NP;case Aee:return TP;case Eee:return PP;case Nee:return CP}return e});var Tee=Au,Nb=lM,Pee=fM,Cee=oZ,kee=aee,IP=Tee,OP=Pi,jP=mM,Iee=yM,Oee=1,RP="[object Arguments]",LP="[object Array]",ty="[object Object]",jee=Object.prototype,MP=jee.hasOwnProperty;function Ree(t,e,n,r,i,a){var o=OP(t),s=OP(e),l=o?LP:IP(t),u=s?LP:IP(e);l=l==RP?ty:l,u=u==RP?ty:u;var c=l==ty,d=u==ty,p=l==u;if(p&&jP(t)){if(!jP(e))return!1;o=!0,c=!1}if(p&&!c)return a||(a=new Nb),o||Iee(t)?Pee(t,e,n,r,i,a):Cee(t,e,l,n,r,i,a);if(!(n&Oee)){var h=c&&MP.call(t,"__wrapped__"),v=d&&MP.call(e,"__wrapped__");if(h||v){var y=h?t.value():t,w=v?e.value():e;return a||(a=new Nb),i(y,w,n,r,a)}}return p?(a||(a=new Nb),kee(t,e,n,r,i,a)):!1}var Lee=Ree,Mee=Lee,DP=Cs;function wM(t,e,n,r,i){return t===e?!0:t==null||e==null||!DP(t)&&!DP(e)?t!==t&&e!==e:Mee(t,e,n,r,wM,i)}var nA=wM,Dee=lM,$ee=nA,Fee=1,Uee=2;function Bee(t,e,n,r){var i=n.length,a=i,o=!r;if(t==null)return!a;for(t=Object(t);i--;){var s=n[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=n[i];var l=s[0],u=t[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in t))return!1}else{var d=new Dee;if(r)var p=r(u,c,l,t,e,d);if(!(p===void 0?$ee(c,u,Fee|Uee,r,d):p))return!1}}return!0}var qee=Bee,Vee=Fl;function zee(t){return t===t&&!Vee(t)}var _M=zee,Hee=_M,Gee=E1;function Wee(t){for(var e=Gee(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Hee(i)]}return e}var Kee=Wee;function Jee(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var SM=Jee,Yee=qee,Xee=Kee,Zee=SM;function Qee(t){var e=Xee(t);return e.length==1&&e[0][2]?Zee(e[0][0],e[0][1]):function(n){return n===t||Yee(n,t,e)}}var ete=Qee;function tte(t,e){return t!=null&&e in Object(t)}var nte=tte,rte=IL,ite=QS,ate=Pi,ote=eA,ste=tA,lte=c1;function ute(t,e,n){e=rte(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var o=lte(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&ste(i)&&ote(o,i)&&(ate(t)||ite(t)))}var cte=ute,dte=nte,fte=cte;function hte(t,e){return t!=null&&fte(t,e,dte)}var pte=hte,mte=nA,gte=OL,yte=pte,vte=LS,xte=_M,bte=SM,wte=c1,_te=1,Ste=2;function Ate(t,e){return vte(t)&&xte(e)?bte(wte(t),e):function(n){var r=gte(n,t);return r===void 0&&r===e?yte(n,t):mte(e,r,_te|Ste)}}var Ete=Ate;function Nte(t){return t}var $f=Nte;function Tte(t){return function(e){return e==null?void 0:e[t]}}var Pte=Tte,Cte=qS;function kte(t){return function(e){return Cte(e,t)}}var Ite=kte,Ote=Pte,jte=Ite,Rte=LS,Lte=c1;function Mte(t){return Rte(t)?Ote(Lte(t)):jte(t)}var Dte=Mte,$te=ete,Fte=Ete,Ute=$f,Bte=Pi,qte=Dte;function Vte(t){return typeof t=="function"?t:t==null?Ute:typeof t=="object"?Bte(t)?Fte(t[0],t[1]):$te(t):qte(t)}var Mo=Vte;function zte(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var AM=zte;function Hte(t){return t!==t}var Gte=Hte;function Wte(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Kte=Wte,Jte=AM,Yte=Gte,Xte=Kte;function Zte(t,e,n){return e===e?Xte(t,e,n):Jte(t,Yte,n)}var Qte=Zte,ene=Qte;function tne(t,e){var n=t==null?0:t.length;return!!n&&ene(t,e,0)>-1}var nne=tne;function rne(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var ine=rne;function ane(){}var one=ane,Tb=xM,sne=one,lne=ZS,une=1/0,cne=Tb&&1/lne(new Tb([,-0]))[1]==une?function(t){return new Tb(t)}:sne,dne=cne,fne=uM,hne=nne,pne=ine,mne=dM,gne=dne,yne=ZS,vne=200;function xne(t,e,n){var r=-1,i=hne,a=t.length,o=!0,s=[],l=s;if(n)o=!1,i=pne;else if(a>=vne){var u=e?null:gne(t);if(u)return yne(u);o=!1,i=mne,l=new fne}else l=e?[]:s;e:for(;++r<a;){var c=t[r],d=e?e(c):c;if(c=n||c!==0?c:0,o&&d===d){for(var p=l.length;p--;)if(l[p]===d)continue e;e&&l.push(d),s.push(c)}else i(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}var bne=xne,wne=Mo,_ne=bne;function Sne(t,e){return t&&t.length?_ne(t,wne(e)):[]}var Ane=Sne;const $P=dn(Ane);function EM(t,e,n){return e===!0?$P(t,n):Et(e)?$P(t,e):t}function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}var Ene=["ref"];function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){N1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TM(r.key),r)}}function Tne(t,e,n){return e&&UP(t.prototype,e),n&&UP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pne(t,e,n){return e=$v(e),Cne(t,NM()?Reflect.construct(e,n||[],$v(t).constructor):e.apply(t,n))}function Cne(t,e){if(e&&(Jd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kne(t)}function kne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NM=function(){return!!t})()}function $v(t){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$v(t)}function Ine(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y2(t,e)}function Y2(t,e){return Y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Y2(t,e)}function N1(t,e,n){return e=TM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TM(t){var e=One(t,"string");return Jd(e)=="symbol"?e:e+""}function One(t,e){if(Jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jne(t,e){if(t==null)return{};var n=Rne(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Lne(t){return t.value}function Mne(t,e){if(ce.isValidElement(t))return ce.cloneElement(t,e);if(typeof t=="function")return ce.createElement(t,e);e.ref;var n=jne(e,Ene);return ce.createElement(XS,n)}var BP=1,Co=function(t){function e(){var n;Nne(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Pne(this,e,[].concat(i)),N1(n,"lastBoundingBox",{width:-1,height:-1}),n}return Ine(e,t),Tne(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>BP||Math.abs(i.height-this.lastBoundingBox.height)>BP)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Zo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,d,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var h=this.getBBoxSnapshot();d={left:((u||0)-h.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var v=this.getBBoxSnapshot();p={top:((c||0)-v.height)/2}}else p=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Zo(Zo({},d),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,d=Zo(Zo({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return ce.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){r.wrapperNode=h}},Mne(a,Zo(Zo({},this.props),{},{payload:EM(c,u,Lne)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Zo(Zo({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&Be(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(X.PureComponent);N1(Co,"displayName","Legend");N1(Co,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var qP=jm,Dne=QS,$ne=Pi,VP=qP?qP.isConcatSpreadable:void 0;function Fne(t){return $ne(t)||Dne(t)||!!(VP&&t&&t[VP])}var Une=Fne,Bne=hM,qne=Une;function PM(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=qne),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?PM(s,e-1,n,r,i):Bne(i,s):r||(i[i.length]=s)}return i}var CM=PM;function Vne(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var l=o[t?s:++i];if(n(a[l],l,a)===!1)break}return e}}var zne=Vne,Hne=zne,Gne=Hne(),Wne=Gne,Kne=Wne,Jne=E1;function Yne(t,e){return t&&Kne(t,e,Jne)}var kM=Yne,Xne=Lm;function Zne(t,e){return function(n,r){if(n==null)return n;if(!Xne(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Object(n);(e?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}var Qne=Zne,ere=kM,tre=Qne,nre=tre(ere),rA=nre,rre=rA,ire=Lm;function are(t,e){var n=-1,r=ire(t)?Array(t.length):[];return rre(t,function(i,a,o){r[++n]=e(i,a,o)}),r}var IM=are;function ore(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var sre=ore,zP=kf;function lre(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=zP(t),o=e!==void 0,s=e===null,l=e===e,u=zP(e);if(!s&&!u&&!a&&t>e||a&&o&&l&&!s&&!u||r&&o&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!l)return-1}return 0}var ure=lre,cre=ure;function dre(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var l=cre(i[r],a[r]);if(l){if(r>=s)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var fre=dre,Pb=BS,hre=qS,pre=Mo,mre=IM,gre=sre,yre=gM,vre=fre,xre=$f,bre=Pi;function wre(t,e,n){e.length?e=Pb(e,function(a){return bre(a)?function(o){return hre(o,a.length===1?a[0]:a)}:a}):e=[xre];var r=-1;e=Pb(e,yre(pre));var i=mre(t,function(a,o,s){var l=Pb(e,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return gre(i,function(a,o){return vre(a,o,n)})}var _re=wre;function Sre(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Are=Sre,Ere=Are,HP=Math.max;function Nre(t,e,n){return e=HP(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=HP(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(o),Ere(t,this,s)}}var Tre=Nre;function Pre(t){return function(){return t}}var Cre=Pre,kre=cc,Ire=function(){try{var t=kre(Object,"defineProperty");return t({},"",{}),t}catch{}}(),OM=Ire,Ore=Cre,GP=OM,jre=$f,Rre=GP?function(t,e){return GP(t,"toString",{configurable:!0,enumerable:!1,value:Ore(e),writable:!0})}:jre,Lre=Rre,Mre=800,Dre=16,$re=Date.now;function Fre(t){var e=0,n=0;return function(){var r=$re(),i=Dre-(r-n);if(n=r,i>0){if(++e>=Mre)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Ure=Fre,Bre=Lre,qre=Ure,Vre=qre(Bre),zre=Vre,Hre=$f,Gre=Tre,Wre=zre;function Kre(t,e){return Wre(Gre(t,e,Hre),t+"")}var Jre=Kre,Yre=DS,Xre=Lm,Zre=eA,Qre=Fl;function eie(t,e,n){if(!Qre(n))return!1;var r=typeof e;return(r=="number"?Xre(n)&&Zre(e,n.length):r=="string"&&e in n)?Yre(n[e],t):!1}var T1=eie,tie=CM,nie=_re,rie=Jre,WP=T1,iie=rie(function(t,e){if(t==null)return[];var n=e.length;return n>1&&WP(t,e[0],e[1])?e=[]:n>2&&WP(e[0],e[1],e[2])&&(e=[e[0]]),nie(t,tie(e,1),[])}),aie=iie;const iA=dn(aie);function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(t)}function X2(){return X2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X2.apply(this,arguments)}function oie(t,e){return cie(t)||uie(t,e)||lie(t,e)||sie()}function sie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lie(t,e){if(t){if(typeof t=="string")return KP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KP(t,e)}}function KP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function cie(t){if(Array.isArray(t))return t}function JP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(n),!0).forEach(function(r){die(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function die(t,e,n){return e=fie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fie(t){var e=hie(t,"string");return Hp(e)=="symbol"?e:e+""}function hie(t,e){if(Hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pie(t){return Array.isArray(t)&&Er(t[0])&&Er(t[1])?t.join(" ~ "):t}var mie=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,p=e.itemSorter,h=e.wrapperClassName,v=e.labelClassName,y=e.label,w=e.labelFormatter,b=e.accessibilityLayer,_=b===void 0?!1:b,A=function(){if(c&&c.length){var L={padding:0,margin:0},F=(p?iA(c,p):c).map(function($,V){if($.type==="none")return null;var Y=Cb({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},s),W=$.formatter||d||pie,U=$.value,Q=$.name,le=U,oe=Q;if(W&&le!=null&&oe!=null){var j=W(U,Q,$,V,c);if(Array.isArray(j)){var z=oie(j,2);le=z[0],oe=z[1]}else le=j}return ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:Y},Er(oe)?ce.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,Er(oe)?ce.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ce.createElement("span",{className:"recharts-tooltip-item-value"},le),ce.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return ce.createElement("ul",{className:"recharts-tooltip-item-list",style:L},F)}return null},N=Cb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),E=Cb({margin:0},u),P=!Rt(y),I=P?y:"",O=$t("recharts-default-tooltip",h),R=$t("recharts-tooltip-label",v);P&&w&&c!==void 0&&c!==null&&(I=w(y,c));var D=_?{role:"status","aria-live":"assertive"}:{};return ce.createElement("div",X2({className:O,style:N},D),ce.createElement("p",{className:R,style:E},ce.isValidElement(I)?I:"".concat(I)),A())};function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(t)}function ny(t,e,n){return e=gie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gie(t){var e=yie(t,"string");return Gp(e)=="symbol"?e:e+""}function yie(t,e){if(Gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ih="recharts-tooltip-wrapper",vie={visibility:"hidden"};function xie(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return $t(Ih,ny(ny(ny(ny({},"".concat(Ih,"-right"),Be(n)&&e&&Be(e.x)&&n>=e.x),"".concat(Ih,"-left"),Be(n)&&e&&Be(e.x)&&n<e.x),"".concat(Ih,"-bottom"),Be(r)&&e&&Be(e.y)&&r>=e.y),"".concat(Ih,"-top"),Be(r)&&e&&Be(e.y)&&r<e.y))}function YP(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&Be(a[r]))return a[r];var c=n[r]-s-i,d=n[r]+i;if(e[r])return o[r]?c:d;if(o[r]){var p=c,h=l[r];return p<h?Math.max(d,l[r]):Math.max(c,l[r])}var v=d+s,y=l[r]+u;return v>y?Math.max(c,l[r]):Math.max(d,l[r])}function bie(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function wie(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,u,c,d;return o.height>0&&o.width>0&&n?(c=YP({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=YP({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=bie({translateX:c,translateY:d,useTranslate3d:s})):u=vie,{cssProperties:u,cssClasses:xie({translateX:c,translateY:d,coordinate:n})}}function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function XP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XP(Object(n),!0).forEach(function(r){Q2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RM(r.key),r)}}function Aie(t,e,n){return e&&Sie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Eie(t,e,n){return e=Fv(e),Nie(t,jM()?Reflect.construct(e,n||[],Fv(t).constructor):e.apply(t,n))}function Nie(t,e){if(e&&(Yd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tie(t)}function Tie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jM=function(){return!!t})()}function Fv(t){return Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fv(t)}function Pie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z2(t,e)}function Z2(t,e){return Z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z2(t,e)}function Q2(t,e,n){return e=RM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RM(t){var e=Cie(t,"string");return Yd(e)=="symbol"?e:e+""}function Cie(t,e){if(Yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var QP=1,kie=function(t){function e(){var n;_ie(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Eie(this,e,[].concat(i)),Q2(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Q2(n,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return Pie(e,t),Aie(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>QP||Math.abs(r.height-this.state.lastBoundingBox.height)>QP)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,d=i.hasPayload,p=i.isAnimationActive,h=i.offset,v=i.position,y=i.reverseDirection,w=i.useTranslate3d,b=i.viewBox,_=i.wrapperStyle,A=wie({allowEscapeViewBox:o,coordinate:c,offsetTopLeft:h,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:b}),N=A.cssClasses,E=A.cssProperties,P=ZP(ZP({transition:p&&a?"transform ".concat(s,"ms ").concat(l):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},_);return ce.createElement("div",{tabIndex:-1,className:N,style:P,ref:function(O){r.wrapperNode=O}},u)}}])}(X.PureComponent),Iie=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},dc={isSsr:Iie()};function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function eC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eC(Object(n),!0).forEach(function(r){aA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MM(r.key),r)}}function Rie(t,e,n){return e&&jie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lie(t,e,n){return e=Uv(e),Mie(t,LM()?Reflect.construct(e,n||[],Uv(t).constructor):e.apply(t,n))}function Mie(t,e){if(e&&(Xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Die(t)}function Die(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LM=function(){return!!t})()}function Uv(t){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uv(t)}function $ie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e_(t,e)}function e_(t,e){return e_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},e_(t,e)}function aA(t,e,n){return e=MM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MM(t){var e=Fie(t,"string");return Xd(e)=="symbol"?e:e+""}function Fie(t,e){if(Xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Uie(t){return t.dataKey}function Bie(t,e){return ce.isValidElement(t)?ce.cloneElement(t,e):typeof t=="function"?ce.createElement(t,e):ce.createElement(mie,e)}var bi=function(t){function e(){return Oie(this,e),Lie(this,e,arguments)}return $ie(e,t),Rie(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,d=i.filterNull,p=i.isAnimationActive,h=i.offset,v=i.payload,y=i.payloadUniqBy,w=i.position,b=i.reverseDirection,_=i.useTranslate3d,A=i.viewBox,N=i.wrapperStyle,E=v??[];d&&E.length&&(E=EM(v.filter(function(I){return I.value!=null&&(I.hide!==!0||r.props.includeHidden)}),y,Uie));var P=E.length>0;return ce.createElement(kie,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:p,active:a,coordinate:c,hasPayload:P,offset:h,position:w,reverseDirection:b,useTranslate3d:_,viewBox:A,wrapperStyle:N},Bie(u,tC(tC({},this.props),{},{payload:E})))}}])}(X.PureComponent);aA(bi,"displayName","Tooltip");aA(bi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!dc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qie=Lo,Vie=function(){return qie.Date.now()},zie=Vie,Hie=/\s/;function Gie(t){for(var e=t.length;e--&&Hie.test(t.charAt(e)););return e}var Wie=Gie,Kie=Wie,Jie=/^\s+/;function Yie(t){return t&&t.slice(0,Kie(t)+1).replace(Jie,"")}var Xie=Yie,Zie=Xie,nC=Fl,Qie=kf,rC=NaN,eae=/^[-+]0x[0-9a-f]+$/i,tae=/^0b[01]+$/i,nae=/^0o[0-7]+$/i,rae=parseInt;function iae(t){if(typeof t=="number")return t;if(Qie(t))return rC;if(nC(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=nC(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Zie(t);var n=tae.test(t);return n||nae.test(t)?rae(t.slice(2),n?2:8):eae.test(t)?rC:+t}var DM=iae,aae=Fl,kb=zie,iC=DM,oae="Expected a function",sae=Math.max,lae=Math.min;function uae(t,e,n){var r,i,a,o,s,l,u=0,c=!1,d=!1,p=!0;if(typeof t!="function")throw new TypeError(oae);e=iC(e)||0,aae(n)&&(c=!!n.leading,d="maxWait"in n,a=d?sae(iC(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p);function h(P){var I=r,O=i;return r=i=void 0,u=P,o=t.apply(O,I),o}function v(P){return u=P,s=setTimeout(b,e),c?h(P):o}function y(P){var I=P-l,O=P-u,R=e-I;return d?lae(R,a-O):R}function w(P){var I=P-l,O=P-u;return l===void 0||I>=e||I<0||d&&O>=a}function b(){var P=kb();if(w(P))return _(P);s=setTimeout(b,y(P))}function _(P){return s=void 0,p&&r?h(P):(r=i=void 0,o)}function A(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function N(){return s===void 0?o:_(kb())}function E(){var P=kb(),I=w(P);if(r=arguments,i=this,l=P,I){if(s===void 0)return v(l);if(d)return clearTimeout(s),s=setTimeout(b,e),h(l)}return s===void 0&&(s=setTimeout(b,e)),o}return E.cancel=A,E.flush=N,E}var cae=uae,dae=cae,fae=Fl,hae="Expected a function";function pae(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(hae);return fae(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),dae(t,e,{leading:r,maxWait:e,trailing:i})}var mae=pae;const $M=dn(mae);function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}function aC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ry(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aC(Object(n),!0).forEach(function(r){gae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gae(t,e,n){return e=yae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yae(t){var e=vae(t,"string");return Wp(e)=="symbol"?e:e+""}function vae(t,e){if(Wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xae(t,e){return Sae(t)||_ae(t,e)||wae(t,e)||bae()}function bae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wae(t,e){if(t){if(typeof t=="string")return oC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oC(t,e)}}function oC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _ae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Sae(t){if(Array.isArray(t))return t}var Mm=X.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,s=t.height,l=s===void 0?"100%":s,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,p=t.maxHeight,h=t.children,v=t.debounce,y=v===void 0?0:v,w=t.id,b=t.className,_=t.onResize,A=t.style,N=A===void 0?{}:A,E=X.useRef(null),P=X.useRef();P.current=_,X.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var I=X.useState({containerWidth:i.width,containerHeight:i.height}),O=xae(I,2),R=O[0],D=O[1],C=X.useCallback(function(F,$){D(function(V){var Y=Math.round(F),W=Math.round($);return V.containerWidth===Y&&V.containerHeight===W?V:{containerWidth:Y,containerHeight:W}})},[]);X.useEffect(function(){var F=function(Q){var le,oe=Q[0].contentRect,j=oe.width,z=oe.height;C(j,z),(le=P.current)===null||le===void 0||le.call(P,j,z)};y>0&&(F=$M(F,y,{trailing:!0,leading:!1}));var $=new ResizeObserver(F),V=E.current.getBoundingClientRect(),Y=V.width,W=V.height;return C(Y,W),$.observe(E.current),function(){$.disconnect()}},[C,y]);var L=X.useMemo(function(){var F=R.containerWidth,$=R.containerHeight;if(F<0||$<0)return null;eo(Mu(o)||Mu(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),eo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var V=Mu(o)?F:o,Y=Mu(l)?$:l;n&&n>0&&(V?Y=V/n:Y&&(V=Y*n),p&&Y>p&&(Y=p)),eo(V>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,Y,o,l,c,d,n);var W=!Array.isArray(h)&&hs(h.type).endsWith("Chart");return ce.Children.map(h,function(U){return ce.isValidElement(U)?X.cloneElement(U,ry({width:V,height:Y},W?{style:ry({height:"100%",width:"100%",maxHeight:Y,maxWidth:V},U.props.style)}:{})):U})},[n,h,l,p,d,c,R,o]);return ce.createElement("div",{id:w?"".concat(w):void 0,className:$t("recharts-responsive-container",b),style:ry(ry({},N),{},{width:o,height:l,minWidth:c,minHeight:d,maxHeight:p}),ref:E},L)}),Dm=function(e){return null};Dm.displayName="Cell";function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}function sC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sC(Object(n),!0).forEach(function(r){Aae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aae(t,e,n){return e=Eae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eae(t){var e=Nae(t,"string");return Kp(e)=="symbol"?e:e+""}function Nae(t,e){if(Kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $c={widthCache:{},cacheCount:0},Tae=2e3,Pae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lC="recharts_measurement_span";function Cae(t){var e=t_({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var lp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||dc.isSsr)return{width:0,height:0};var r=Cae(n),i=JSON.stringify({text:e,copyStyle:r});if($c.widthCache[i])return $c.widthCache[i];try{var a=document.getElementById(lC);a||(a=document.createElement("span"),a.setAttribute("id",lC),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=t_(t_({},Pae),r);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return $c.widthCache[i]=l,++$c.cacheCount>Tae&&($c.cacheCount=0,$c.widthCache={}),l}catch{return{width:0,height:0}}},kae=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}function Bv(t,e){return Rae(t)||jae(t,e)||Oae(t,e)||Iae()}function Iae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oae(t,e){if(t){if(typeof t=="string")return uC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uC(t,e)}}function uC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Rae(t){if(Array.isArray(t))return t}function Lae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dae(r.key),r)}}function Mae(t,e,n){return e&&cC(t.prototype,e),n&&cC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dae(t){var e=$ae(t,"string");return Jp(e)=="symbol"?e:e+""}function $ae(t,e){if(Jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Fae=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Uae=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,FM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Bae=Object.keys(FM),ld="NaN";function qae(t,e){return t*FM[e]}var iy=function(){function t(e,n){Lae(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Fae.test(n)&&(this.num=NaN,this.unit=""),Bae.includes(n)&&(this.num=qae(e,n),this.unit="px")}return Mae(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Uae.exec(n))!==null&&r!==void 0?r:[],a=Bv(i,3),o=a[1],s=a[2];return new t(parseFloat(o),s??"")}}])}();function UM(t){if(t.includes(ld))return ld;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=dC.exec(e))!==null&&n!==void 0?n:[],i=Bv(r,4),a=i[1],o=i[2],s=i[3],l=iy.parse(a??""),u=iy.parse(s??""),c=o==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return ld;e=e.replace(dC,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,p=(d=fC.exec(e))!==null&&d!==void 0?d:[],h=Bv(p,4),v=h[1],y=h[2],w=h[3],b=iy.parse(v??""),_=iy.parse(w??""),A=y==="+"?b.add(_):b.subtract(_);if(A.isNaN())return ld;e=e.replace(fC,A.toString())}return e}var hC=/\(([^()]*)\)/;function Vae(t){for(var e=t;e.includes("(");){var n=hC.exec(e),r=Bv(n,2),i=r[1];e=e.replace(hC,UM(i))}return e}function zae(t){var e=t.replace(/\s+/g,"");return e=Vae(e),e=UM(e),e}function Hae(t){try{return zae(t)}catch{return ld}}function Ib(t){var e=Hae(t.slice(5,-1));return e===ld?"":e}var Gae=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Wae=["dx","dy","angle","className","breakAll"];function n_(){return n_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n_.apply(this,arguments)}function pC(t,e){if(t==null)return{};var n=Kae(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mC(t,e){return Zae(t)||Xae(t,e)||Yae(t,e)||Jae()}function Jae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yae(t,e){if(t){if(typeof t=="string")return gC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gC(t,e)}}function gC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Zae(t){if(Array.isArray(t))return t}var BM=/[ \f\n\r\t\v\u2028\u2029]+/,qM=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Rt(n)||(r?a=n.toString().split(""):a=n.toString().split(BM));var o=a.map(function(l){return{word:l,width:lp(l,i).width}}),s=r?0:lp("",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Qae=function(e,n,r,i,a){var o=e.maxLines,s=e.children,l=e.style,u=e.breakAll,c=Be(o),d=s,p=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(Y,W){var U=W.word,Q=W.width,le=Y[Y.length-1];if(le&&(i==null||a||le.width+Q+r<Number(i)))le.words.push(U),le.width+=Q+r;else{var oe={words:[U],width:Q};Y.push(oe)}return Y},[])},h=p(n),v=function(V){return V.reduce(function(Y,W){return Y.width>W.width?Y:W})};if(!c)return h;for(var y="",w=function(V){var Y=d.slice(0,V),W=qM({breakAll:u,style:l,children:Y+y}).wordsWithComputedWidth,U=p(W),Q=U.length>o||v(U).width>Number(i);return[Q,U]},b=0,_=d.length-1,A=0,N;b<=_&&A<=d.length-1;){var E=Math.floor((b+_)/2),P=E-1,I=w(P),O=mC(I,2),R=O[0],D=O[1],C=w(E),L=mC(C,1),F=L[0];if(!R&&!F&&(b=E+1),R&&F&&(_=E-1),!R&&F){N=D;break}A++}return N||h},yC=function(e){var n=Rt(e)?[]:e.toString().split(BM);return[{words:n}]},eoe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((n||r)&&!dc.isSsr){var l,u,c=qM({breakAll:o,children:i,style:a});if(c){var d=c.wordsWithComputedWidth,p=c.spaceWidth;l=d,u=p}else return yC(i);return Qae({breakAll:o,children:i,maxLines:s,style:a},l,u,n,r)}return yC(i)},vC="#808080",ec=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,p=e.textAnchor,h=p===void 0?"start":p,v=e.verticalAnchor,y=v===void 0?"end":v,w=e.fill,b=w===void 0?vC:w,_=pC(e,Gae),A=X.useMemo(function(){return eoe({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:d,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,d,_.style,_.width]),N=_.dx,E=_.dy,P=_.angle,I=_.className,O=_.breakAll,R=pC(_,Wae);if(!Er(r)||!Er(a))return null;var D=r+(Be(N)?N:0),C=a+(Be(E)?E:0),L;switch(y){case"start":L=Ib("calc(".concat(u,")"));break;case"middle":L=Ib("calc(".concat((A.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:L=Ib("calc(".concat(A.length-1," * -").concat(s,")"));break}var F=[];if(d){var $=A[0].width,V=_.width;F.push("scale(".concat((Be(V)?V/$:1)/$,")"))}return P&&F.push("rotate(".concat(P,", ").concat(D,", ").concat(C,")")),F.length&&(R.transform=F.join(" ")),ce.createElement("text",n_({},yt(R,!0),{x:D,y:C,className:$t("recharts-text",I),textAnchor:h,fill:b.includes("url")?vC:b}),A.map(function(Y,W){var U=Y.words.join(O?"":" ");return ce.createElement("tspan",{x:D,dy:W===0?L:s,key:"".concat(U,"-").concat(W)},U)}))};function Nl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function toe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oA(t){let e,n,r;t.length!==2?(e=Nl,n=(s,l)=>Nl(t(s),l),r=(s,l)=>t(s)-l):(e=t===Nl||t===toe?t:noe,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){const d=i(s,l,u,c-1);return d>u&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function noe(){return 0}function VM(t){return t===null?NaN:+t}function*roe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ioe=oA(Nl),$m=ioe.right;oA(VM).center;class xC extends Map{constructor(e,n=soe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(bC(this,e))}has(e){return super.has(bC(this,e))}set(e,n){return super.set(aoe(this,e),n)}delete(e){return super.delete(ooe(this,e))}}function bC({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function aoe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ooe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function soe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function loe(t=Nl){if(t===Nl)return zM;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function zM(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const uoe=Math.sqrt(50),coe=Math.sqrt(10),doe=Math.sqrt(2);function qv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=uoe?10:a>=coe?5:a>=doe?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?qv(t,e,n*2):[s,l,u]}function r_(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?qv(e,t,n):qv(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function i_(t,e,n){return e=+e,t=+t,n=+n,qv(t,e,n)[2]}function a_(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?i_(e,t,n):i_(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function wC(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function _C(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function HM(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?zM:loe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*d/l+p)),v=Math.min(r,Math.floor(e+(l-u)*d/l+p));HM(t,e,h,v,i)}const a=t[e];let o=n,s=r;for(Oh(t,n,e),i(t[r],a)>0&&Oh(t,n,r);o<s;){for(Oh(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?Oh(t,n,s):(++s,Oh(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Oh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function foe(t,e,n){if(t=Float64Array.from(roe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return _C(t);if(e>=1)return wC(t);var r,i=(r-1)*e,a=Math.floor(i),o=wC(HM(t,a).subarray(0,a+1)),s=_C(t.subarray(a+1));return o+(s-o)*(i-a)}}function hoe(t,e,n=VM){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function poe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Ia(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ks(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const o_=Symbol("implicit");function sA(){var t=new xC,e=[],n=[],r=o_;function i(a){let o=t.get(a);if(o===void 0){if(r!==o_)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new xC;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return sA(e,n).unknown(r)},Ia.apply(i,arguments),i}function Yp(){var t=sA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var p=e().length,h=i<r,v=h?i:r,y=h?r:i;a=(y-v)/Math.max(1,p-l+u*2),s&&(a=Math.floor(a)),v+=(y-v-a*(p-l))*c,o=a*(1-l),s&&(v=Math.round(v),o=Math.round(o));var w=poe(p).map(function(b){return v+a*b});return n(h?w.reverse():w)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(p){return arguments.length?(s=!!p,d()):s},t.padding=function(p){return arguments.length?(l=Math.min(1,u=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(u=+p,d()):u},t.align=function(p){return arguments.length?(c=Math.max(0,Math.min(1,p)),d()):c},t.copy=function(){return Yp(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},Ia.apply(d(),arguments)}function GM(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return GM(e())},t}function up(){return GM(Yp.apply(null,arguments).paddingInner(1))}function lA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function WM(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Fm(){}var Xp=.7,Vv=1/Xp,Ad="\\s*([+-]?\\d+)\\s*",Zp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",moe=/^#([0-9a-f]{3,8})$/,goe=new RegExp(`^rgb\\(${Ad},${Ad},${Ad}\\)$`),yoe=new RegExp(`^rgb\\(${ko},${ko},${ko}\\)$`),voe=new RegExp(`^rgba\\(${Ad},${Ad},${Ad},${Zp}\\)$`),xoe=new RegExp(`^rgba\\(${ko},${ko},${ko},${Zp}\\)$`),boe=new RegExp(`^hsl\\(${Zp},${ko},${ko}\\)$`),woe=new RegExp(`^hsla\\(${Zp},${ko},${ko},${Zp}\\)$`),SC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lA(Fm,Qp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:AC,formatHex:AC,formatHex8:_oe,formatHsl:Soe,formatRgb:EC,toString:EC});function AC(){return this.rgb().formatHex()}function _oe(){return this.rgb().formatHex8()}function Soe(){return KM(this).formatHsl()}function EC(){return this.rgb().formatRgb()}function Qp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=moe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?NC(e):n===3?new Si(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ay(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ay(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=goe.exec(t))?new Si(e[1],e[2],e[3],1):(e=yoe.exec(t))?new Si(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=voe.exec(t))?ay(e[1],e[2],e[3],e[4]):(e=xoe.exec(t))?ay(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=boe.exec(t))?CC(e[1],e[2]/100,e[3]/100,1):(e=woe.exec(t))?CC(e[1],e[2]/100,e[3]/100,e[4]):SC.hasOwnProperty(t)?NC(SC[t]):t==="transparent"?new Si(NaN,NaN,NaN,0):null}function NC(t){return new Si(t>>16&255,t>>8&255,t&255,1)}function ay(t,e,n,r){return r<=0&&(t=e=n=NaN),new Si(t,e,n,r)}function Aoe(t){return t instanceof Fm||(t=Qp(t)),t?(t=t.rgb(),new Si(t.r,t.g,t.b,t.opacity)):new Si}function s_(t,e,n,r){return arguments.length===1?Aoe(t):new Si(t,e,n,r??1)}function Si(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}lA(Si,s_,WM(Fm,{brighter(t){return t=t==null?Vv:Math.pow(Vv,t),new Si(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xp:Math.pow(Xp,t),new Si(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Si(Vu(this.r),Vu(this.g),Vu(this.b),zv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TC,formatHex:TC,formatHex8:Eoe,formatRgb:PC,toString:PC}));function TC(){return`#${Du(this.r)}${Du(this.g)}${Du(this.b)}`}function Eoe(){return`#${Du(this.r)}${Du(this.g)}${Du(this.b)}${Du((isNaN(this.opacity)?1:this.opacity)*255)}`}function PC(){const t=zv(this.opacity);return`${t===1?"rgb(":"rgba("}${Vu(this.r)}, ${Vu(this.g)}, ${Vu(this.b)}${t===1?")":`, ${t})`}`}function zv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Du(t){return t=Vu(t),(t<16?"0":"")+t.toString(16)}function CC(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ya(t,e,n,r)}function KM(t){if(t instanceof Ya)return new Ya(t.h,t.s,t.l,t.opacity);if(t instanceof Fm||(t=Qp(t)),!t)return new Ya;if(t instanceof Ya)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Ya(o,s,l,t.opacity)}function Noe(t,e,n,r){return arguments.length===1?KM(t):new Ya(t,e,n,r??1)}function Ya(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}lA(Ya,Noe,WM(Fm,{brighter(t){return t=t==null?Vv:Math.pow(Vv,t),new Ya(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xp:Math.pow(Xp,t),new Ya(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Si(Ob(t>=240?t-240:t+120,i,r),Ob(t,i,r),Ob(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ya(kC(this.h),oy(this.s),oy(this.l),zv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zv(this.opacity);return`${t===1?"hsl(":"hsla("}${kC(this.h)}, ${oy(this.s)*100}%, ${oy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function kC(t){return t=(t||0)%360,t<0?t+360:t}function oy(t){return Math.max(0,Math.min(1,t||0))}function Ob(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const uA=t=>()=>t;function Toe(t,e){return function(n){return t+n*e}}function Poe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Coe(t){return(t=+t)==1?JM:function(e,n){return n-e?Poe(e,n,t):uA(isNaN(e)?n:e)}}function JM(t,e){var n=e-t;return n?Toe(t,n):uA(isNaN(t)?e:t)}const IC=function t(e){var n=Coe(e);function r(i,a){var o=n((i=s_(i)).r,(a=s_(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=JM(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function koe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Ioe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ooe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Ff(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function joe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Hv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Roe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ff(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var l_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jb=new RegExp(l_.source,"g");function Loe(t){return function(){return t}}function Moe(t){return function(e){return t(e)+""}}function Doe(t,e){var n=l_.lastIndex=jb.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=l_.exec(t))&&(i=jb.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Hv(r,i)})),n=jb.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Moe(l[0].x):Loe(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function Ff(t,e){var n=typeof e,r;return e==null||n==="boolean"?uA(e):(n==="number"?Hv:n==="string"?(r=Qp(e))?(e=r,IC):Doe:e instanceof Qp?IC:e instanceof Date?joe:Ioe(e)?koe:Array.isArray(e)?Ooe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Roe:Hv)(t,e)}function cA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function $oe(t,e){e===void 0&&(e=t,t=Ff);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function Foe(t){return function(){return t}}function Gv(t){return+t}var OC=[0,1];function fi(t){return t}function u_(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Foe(isNaN(e)?NaN:.5)}function Uoe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Boe(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=u_(i,r),a=n(o,a)):(r=u_(r,i),a=n(a,o)),function(s){return a(r(s))}}function qoe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=u_(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=$m(t,s,1,r)-1;return a[l](i[l](s))}}function Um(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function P1(){var t=OC,e=OC,n=Ff,r,i,a,o=fi,s,l,u;function c(){var p=Math.min(t.length,e.length);return o!==fi&&(o=Uoe(t[0],t[p-1])),s=p>2?qoe:Boe,l=u=null,d}function d(p){return p==null||isNaN(p=+p)?a:(l||(l=s(t.map(r),e,n)))(r(o(p)))}return d.invert=function(p){return o(i((u||(u=s(e,t.map(r),Hv)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,Gv),c()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),c()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),n=cA,c()},d.clamp=function(p){return arguments.length?(o=p?!0:fi,c()):o!==fi},d.interpolate=function(p){return arguments.length?(n=p,c()):n},d.unknown=function(p){return arguments.length?(a=p,d):a},function(p,h){return r=p,i=h,c()}}function dA(){return P1()(fi,fi)}function Voe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Wv(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Zd(t){return t=Wv(Math.abs(t)),t?t[1]:NaN}function zoe(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Hoe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Goe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function em(t){if(!(e=Goe.exec(t)))throw new Error("invalid format: "+t);var e;return new fA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}em.prototype=fA.prototype;function fA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}fA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Woe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var YM;function Koe(t,e){var n=Wv(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(YM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Wv(t,Math.max(0,e+a-1))[0]}function jC(t,e){var n=Wv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const RC={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Voe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>jC(t*100,e),r:jC,s:Koe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function LC(t){return t}var MC=Array.prototype.map,DC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Joe(t){var e=t.grouping===void 0||t.thousands===void 0?LC:zoe(MC.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?LC:Hoe(MC.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=em(d);var p=d.fill,h=d.align,v=d.sign,y=d.symbol,w=d.zero,b=d.width,_=d.comma,A=d.precision,N=d.trim,E=d.type;E==="n"?(_=!0,E="g"):RC[E]||(A===void 0&&(A=12),N=!0,E="g"),(w||p==="0"&&h==="=")&&(w=!0,p="0",h="=");var P=y==="$"?n:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",I=y==="$"?r:/[%p]/.test(E)?o:"",O=RC[E],R=/[defgprs%]/.test(E);A=A===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function D(C){var L=P,F=I,$,V,Y;if(E==="c")F=O(C)+F,C="";else{C=+C;var W=C<0||1/C<0;if(C=isNaN(C)?l:O(Math.abs(C),A),N&&(C=Woe(C)),W&&+C==0&&v!=="+"&&(W=!1),L=(W?v==="("?v:s:v==="-"||v==="("?"":v)+L,F=(E==="s"?DC[8+YM/3]:"")+F+(W&&v==="("?")":""),R){for($=-1,V=C.length;++$<V;)if(Y=C.charCodeAt($),48>Y||Y>57){F=(Y===46?i+C.slice($+1):C.slice($))+F,C=C.slice(0,$);break}}}_&&!w&&(C=e(C,1/0));var U=L.length+C.length+F.length,Q=U<b?new Array(b-U+1).join(p):"";switch(_&&w&&(C=e(Q+C,Q.length?b-F.length:1/0),Q=""),h){case"<":C=L+C+F+Q;break;case"=":C=L+Q+C+F;break;case"^":C=Q.slice(0,U=Q.length>>1)+L+C+F+Q.slice(U);break;default:C=Q+L+C+F;break}return a(C)}return D.toString=function(){return d+""},D}function c(d,p){var h=u((d=em(d),d.type="f",d)),v=Math.max(-8,Math.min(8,Math.floor(Zd(p)/3)))*3,y=Math.pow(10,-v),w=DC[8+v/3];return function(b){return h(y*b)+w}}return{format:u,formatPrefix:c}}var sy,hA,XM;Yoe({thousands:",",grouping:[3],currency:["$",""]});function Yoe(t){return sy=Joe(t),hA=sy.format,XM=sy.formatPrefix,sy}function Xoe(t){return Math.max(0,-Zd(Math.abs(t)))}function Zoe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zd(e)/3)))*3-Zd(Math.abs(t)))}function Qoe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Zd(e)-Zd(t))+1}function ZM(t,e,n,r){var i=a_(t,e,n),a;switch(r=em(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Zoe(i,o))&&(r.precision=a),XM(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Qoe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Xoe(i))&&(r.precision=a-(r.type==="%")*2);break}}return hA(r)}function Ul(t){var e=t.domain;return t.ticks=function(n){var r=e();return r_(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return ZM(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=i_(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Kv(){var t=dA();return t.copy=function(){return Um(t,Kv())},Ia.apply(t,arguments),Ul(t)}function QM(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Gv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return QM(t).unknown(e)},t=arguments.length?Array.from(t,Gv):[0,1],Ul(n)}function eD(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function $C(t){return Math.log(t)}function FC(t){return Math.exp(t)}function ese(t){return-Math.log(-t)}function tse(t){return-Math.exp(-t)}function nse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rse(t){return t===10?nse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ise(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function UC(t){return(e,n)=>-t(-e,n)}function pA(t){const e=t($C,FC),n=e.domain;let r=10,i,a;function o(){return i=ise(r),a=rse(r),n()[0]<0?(i=UC(i),a=UC(a),t(ese,tse)):t($C,FC),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let p=i(u),h=i(c),v,y;const w=s==null?10:+s;let b=[];if(!(r%1)&&h-p<w){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(v=1;v<r;++v)if(y=p<0?v/a(-p):v*a(p),!(y<u)){if(y>c)break;b.push(y)}}else for(;p<=h;++p)for(v=r-1;v>=1;--v)if(y=p>0?v/a(-p):v*a(p),!(y<u)){if(y>c)break;b.push(y)}b.length*2<w&&(b=r_(u,c,w))}else b=r_(p,h,Math.min(h-p,w)).map(a);return d?b.reverse():b},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=em(l)).precision==null&&(l.trim=!0),l=hA(l)),s===1/0)return l;const u=Math.max(1,r*s/e.ticks().length);return c=>{let d=c/a(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(eD(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function tD(){const t=pA(P1()).domain([1,10]);return t.copy=()=>Um(t,tD()).base(t.base()),Ia.apply(t,arguments),t}function BC(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function qC(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function mA(t){var e=1,n=t(BC(e),qC(e));return n.constant=function(r){return arguments.length?t(BC(e=+r),qC(e)):e},Ul(n)}function nD(){var t=mA(P1());return t.copy=function(){return Um(t,nD()).constant(t.constant())},Ia.apply(t,arguments)}function VC(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ase(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ose(t){return t<0?-t*t:t*t}function gA(t){var e=t(fi,fi),n=1;function r(){return n===1?t(fi,fi):n===.5?t(ase,ose):t(VC(n),VC(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ul(e)}function yA(){var t=gA(P1());return t.copy=function(){return Um(t,yA()).exponent(t.exponent())},Ia.apply(t,arguments),t}function sse(){return yA.apply(null,arguments).exponent(.5)}function zC(t){return Math.sign(t)*t*t}function lse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function rD(){var t=dA(),e=[0,1],n=!1,r;function i(a){var o=lse(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(zC(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Gv)).map(zC)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return rD(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ia.apply(i,arguments),Ul(i)}function iD(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=hoe(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[$m(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Nl),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return iD().domain(t).range(e).unknown(r)},Ia.apply(a,arguments)}function aD(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[$m(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return aD().domain([t,e]).range(i).unknown(a)},Ia.apply(Ul(o),arguments)}function oD(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[$m(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return oD().domain(t).range(e).unknown(n)},Ia.apply(i,arguments)}const Rb=new Date,Lb=new Date;function Nr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let u;do l.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return l},i.filter=a=>Nr(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(Rb.setTime(+a),Lb.setTime(+o),t(Rb),t(Lb),Math.floor(n(Rb,Lb))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Jv=Nr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Jv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Jv);Jv.range;const us=1e3,_a=us*60,cs=_a*60,ws=cs*24,vA=ws*7,HC=ws*30,Mb=ws*365,$u=Nr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*us)},(t,e)=>(e-t)/us,t=>t.getUTCSeconds());$u.range;const xA=Nr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*us)},(t,e)=>{t.setTime(+t+e*_a)},(t,e)=>(e-t)/_a,t=>t.getMinutes());xA.range;const bA=Nr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*_a)},(t,e)=>(e-t)/_a,t=>t.getUTCMinutes());bA.range;const wA=Nr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*us-t.getMinutes()*_a)},(t,e)=>{t.setTime(+t+e*cs)},(t,e)=>(e-t)/cs,t=>t.getHours());wA.range;const _A=Nr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*cs)},(t,e)=>(e-t)/cs,t=>t.getUTCHours());_A.range;const Bm=Nr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*_a)/ws,t=>t.getDate()-1);Bm.range;const C1=Nr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ws,t=>t.getUTCDate()-1);C1.range;const sD=Nr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ws,t=>Math.floor(t/ws));sD.range;function fc(t){return Nr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*_a)/vA)}const k1=fc(0),Yv=fc(1),use=fc(2),cse=fc(3),Qd=fc(4),dse=fc(5),fse=fc(6);k1.range;Yv.range;use.range;cse.range;Qd.range;dse.range;fse.range;function hc(t){return Nr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/vA)}const I1=hc(0),Xv=hc(1),hse=hc(2),pse=hc(3),ef=hc(4),mse=hc(5),gse=hc(6);I1.range;Xv.range;hse.range;pse.range;ef.range;mse.range;gse.range;const SA=Nr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());SA.range;const AA=Nr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());AA.range;const _s=Nr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());_s.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});_s.range;const Ss=Nr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ss.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ss.range;function lD(t,e,n,r,i,a){const o=[[$u,1,us],[$u,5,5*us],[$u,15,15*us],[$u,30,30*us],[a,1,_a],[a,5,5*_a],[a,15,15*_a],[a,30,30*_a],[i,1,cs],[i,3,3*cs],[i,6,6*cs],[i,12,12*cs],[r,1,ws],[r,2,2*ws],[n,1,vA],[e,1,HC],[e,3,3*HC],[t,1,Mb]];function s(u,c,d){const p=c<u;p&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),v=h?h.range(u,+c+1):[];return p?v.reverse():v}function l(u,c,d){const p=Math.abs(c-u)/d,h=oA(([,,w])=>w).right(o,p);if(h===o.length)return t.every(a_(u/Mb,c/Mb,d));if(h===0)return Jv.every(Math.max(a_(u,c,d),1));const[v,y]=o[p/o[h-1][2]<o[h][2]/p?h-1:h];return v.every(y)}return[s,l]}const[yse,vse]=lD(Ss,AA,I1,sD,_A,bA),[xse,bse]=lD(_s,SA,k1,Bm,wA,xA);function Db(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $b(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function wse(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=Rh(i),c=Lh(i),d=Rh(a),p=Lh(a),h=Rh(o),v=Lh(o),y=Rh(s),w=Lh(s),b=Rh(l),_=Lh(l),A={a:W,A:U,b:Q,B:le,c:null,d:XC,e:XC,f:zse,g:ele,G:nle,H:Bse,I:qse,j:Vse,L:uD,m:Hse,M:Gse,p:oe,q:j,Q:ek,s:tk,S:Wse,u:Kse,U:Jse,V:Yse,w:Xse,W:Zse,x:null,X:null,y:Qse,Y:tle,Z:rle,"%":QC},N={a:z,A:K,b:re,B:ae,c:null,d:ZC,e:ZC,f:sle,g:yle,G:xle,H:ile,I:ale,j:ole,L:dD,m:lle,M:ule,p:fe,q:xe,Q:ek,s:tk,S:cle,u:dle,U:fle,V:hle,w:ple,W:mle,x:null,X:null,y:gle,Y:vle,Z:ble,"%":QC},E={a:D,A:C,b:L,B:F,c:$,d:JC,e:JC,f:Dse,g:KC,G:WC,H:YC,I:YC,j:jse,L:Mse,m:Ose,M:Rse,p:R,q:Ise,Q:Fse,s:Use,S:Lse,u:Nse,U:Tse,V:Pse,w:Ese,W:Cse,x:V,X:Y,y:KC,Y:WC,Z:kse,"%":$se};A.x=P(n,A),A.X=P(r,A),A.c=P(e,A),N.x=P(n,N),N.X=P(r,N),N.c=P(e,N);function P(ue,ye){return function(Se){var me=[],je=-1,se=0,ee=ue.length,Ve,qe,Ge;for(Se instanceof Date||(Se=new Date(+Se));++je<ee;)ue.charCodeAt(je)===37&&(me.push(ue.slice(se,je)),(qe=GC[Ve=ue.charAt(++je)])!=null?Ve=ue.charAt(++je):qe=Ve==="e"?" ":"0",(Ge=ye[Ve])&&(Ve=Ge(Se,qe)),me.push(Ve),se=je+1);return me.push(ue.slice(se,je)),me.join("")}}function I(ue,ye){return function(Se){var me=jh(1900,void 0,1),je=O(me,ue,Se+="",0),se,ee;if(je!=Se.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(ye&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(se=$b(jh(me.y,0,1)),ee=se.getUTCDay(),se=ee>4||ee===0?Xv.ceil(se):Xv(se),se=C1.offset(se,(me.V-1)*7),me.y=se.getUTCFullYear(),me.m=se.getUTCMonth(),me.d=se.getUTCDate()+(me.w+6)%7):(se=Db(jh(me.y,0,1)),ee=se.getDay(),se=ee>4||ee===0?Yv.ceil(se):Yv(se),se=Bm.offset(se,(me.V-1)*7),me.y=se.getFullYear(),me.m=se.getMonth(),me.d=se.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),ee="Z"in me?$b(jh(me.y,0,1)).getUTCDay():Db(jh(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(ee+5)%7:me.w+me.U*7-(ee+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,$b(me)):Db(me)}}function O(ue,ye,Se,me){for(var je=0,se=ye.length,ee=Se.length,Ve,qe;je<se;){if(me>=ee)return-1;if(Ve=ye.charCodeAt(je++),Ve===37){if(Ve=ye.charAt(je++),qe=E[Ve in GC?ye.charAt(je++):Ve],!qe||(me=qe(ue,Se,me))<0)return-1}else if(Ve!=Se.charCodeAt(me++))return-1}return me}function R(ue,ye,Se){var me=u.exec(ye.slice(Se));return me?(ue.p=c.get(me[0].toLowerCase()),Se+me[0].length):-1}function D(ue,ye,Se){var me=h.exec(ye.slice(Se));return me?(ue.w=v.get(me[0].toLowerCase()),Se+me[0].length):-1}function C(ue,ye,Se){var me=d.exec(ye.slice(Se));return me?(ue.w=p.get(me[0].toLowerCase()),Se+me[0].length):-1}function L(ue,ye,Se){var me=b.exec(ye.slice(Se));return me?(ue.m=_.get(me[0].toLowerCase()),Se+me[0].length):-1}function F(ue,ye,Se){var me=y.exec(ye.slice(Se));return me?(ue.m=w.get(me[0].toLowerCase()),Se+me[0].length):-1}function $(ue,ye,Se){return O(ue,e,ye,Se)}function V(ue,ye,Se){return O(ue,n,ye,Se)}function Y(ue,ye,Se){return O(ue,r,ye,Se)}function W(ue){return o[ue.getDay()]}function U(ue){return a[ue.getDay()]}function Q(ue){return l[ue.getMonth()]}function le(ue){return s[ue.getMonth()]}function oe(ue){return i[+(ue.getHours()>=12)]}function j(ue){return 1+~~(ue.getMonth()/3)}function z(ue){return o[ue.getUTCDay()]}function K(ue){return a[ue.getUTCDay()]}function re(ue){return l[ue.getUTCMonth()]}function ae(ue){return s[ue.getUTCMonth()]}function fe(ue){return i[+(ue.getUTCHours()>=12)]}function xe(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var ye=P(ue+="",A);return ye.toString=function(){return ue},ye},parse:function(ue){var ye=I(ue+="",!1);return ye.toString=function(){return ue},ye},utcFormat:function(ue){var ye=P(ue+="",N);return ye.toString=function(){return ue},ye},utcParse:function(ue){var ye=I(ue+="",!0);return ye.toString=function(){return ue},ye}}}var GC={"-":"",_:" ",0:"0"},Rr=/^\s*\d+/,_se=/^%/,Sse=/[\\^$*+?|[\]().{}]/g;function Xt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ase(t){return t.replace(Sse,"\\$&")}function Rh(t){return new RegExp("^(?:"+t.map(Ase).join("|")+")","i")}function Lh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Ese(t,e,n){var r=Rr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Nse(t,e,n){var r=Rr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Tse(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Pse(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Cse(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function WC(t,e,n){var r=Rr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function KC(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function kse(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ise(t,e,n){var r=Rr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ose(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function JC(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function jse(t,e,n){var r=Rr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function YC(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Rse(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Lse(t,e,n){var r=Rr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Mse(t,e,n){var r=Rr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Dse(t,e,n){var r=Rr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function $se(t,e,n){var r=_se.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Fse(t,e,n){var r=Rr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Use(t,e,n){var r=Rr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function XC(t,e){return Xt(t.getDate(),e,2)}function Bse(t,e){return Xt(t.getHours(),e,2)}function qse(t,e){return Xt(t.getHours()%12||12,e,2)}function Vse(t,e){return Xt(1+Bm.count(_s(t),t),e,3)}function uD(t,e){return Xt(t.getMilliseconds(),e,3)}function zse(t,e){return uD(t,e)+"000"}function Hse(t,e){return Xt(t.getMonth()+1,e,2)}function Gse(t,e){return Xt(t.getMinutes(),e,2)}function Wse(t,e){return Xt(t.getSeconds(),e,2)}function Kse(t){var e=t.getDay();return e===0?7:e}function Jse(t,e){return Xt(k1.count(_s(t)-1,t),e,2)}function cD(t){var e=t.getDay();return e>=4||e===0?Qd(t):Qd.ceil(t)}function Yse(t,e){return t=cD(t),Xt(Qd.count(_s(t),t)+(_s(t).getDay()===4),e,2)}function Xse(t){return t.getDay()}function Zse(t,e){return Xt(Yv.count(_s(t)-1,t),e,2)}function Qse(t,e){return Xt(t.getFullYear()%100,e,2)}function ele(t,e){return t=cD(t),Xt(t.getFullYear()%100,e,2)}function tle(t,e){return Xt(t.getFullYear()%1e4,e,4)}function nle(t,e){var n=t.getDay();return t=n>=4||n===0?Qd(t):Qd.ceil(t),Xt(t.getFullYear()%1e4,e,4)}function rle(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xt(e/60|0,"0",2)+Xt(e%60,"0",2)}function ZC(t,e){return Xt(t.getUTCDate(),e,2)}function ile(t,e){return Xt(t.getUTCHours(),e,2)}function ale(t,e){return Xt(t.getUTCHours()%12||12,e,2)}function ole(t,e){return Xt(1+C1.count(Ss(t),t),e,3)}function dD(t,e){return Xt(t.getUTCMilliseconds(),e,3)}function sle(t,e){return dD(t,e)+"000"}function lle(t,e){return Xt(t.getUTCMonth()+1,e,2)}function ule(t,e){return Xt(t.getUTCMinutes(),e,2)}function cle(t,e){return Xt(t.getUTCSeconds(),e,2)}function dle(t){var e=t.getUTCDay();return e===0?7:e}function fle(t,e){return Xt(I1.count(Ss(t)-1,t),e,2)}function fD(t){var e=t.getUTCDay();return e>=4||e===0?ef(t):ef.ceil(t)}function hle(t,e){return t=fD(t),Xt(ef.count(Ss(t),t)+(Ss(t).getUTCDay()===4),e,2)}function ple(t){return t.getUTCDay()}function mle(t,e){return Xt(Xv.count(Ss(t)-1,t),e,2)}function gle(t,e){return Xt(t.getUTCFullYear()%100,e,2)}function yle(t,e){return t=fD(t),Xt(t.getUTCFullYear()%100,e,2)}function vle(t,e){return Xt(t.getUTCFullYear()%1e4,e,4)}function xle(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ef(t):ef.ceil(t),Xt(t.getUTCFullYear()%1e4,e,4)}function ble(){return"+0000"}function QC(){return"%"}function ek(t){return+t}function tk(t){return Math.floor(+t/1e3)}var Fc,hD,pD;wle({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wle(t){return Fc=wse(t),hD=Fc.format,Fc.parse,pD=Fc.utcFormat,Fc.utcParse,Fc}function _le(t){return new Date(t)}function Sle(t){return t instanceof Date?+t:+new Date(+t)}function EA(t,e,n,r,i,a,o,s,l,u){var c=dA(),d=c.invert,p=c.domain,h=u(".%L"),v=u(":%S"),y=u("%I:%M"),w=u("%I %p"),b=u("%a %d"),_=u("%b %d"),A=u("%B"),N=u("%Y");function E(P){return(l(P)<P?h:s(P)<P?v:o(P)<P?y:a(P)<P?w:r(P)<P?i(P)<P?b:_:n(P)<P?A:N)(P)}return c.invert=function(P){return new Date(d(P))},c.domain=function(P){return arguments.length?p(Array.from(P,Sle)):p().map(_le)},c.ticks=function(P){var I=p();return t(I[0],I[I.length-1],P??10)},c.tickFormat=function(P,I){return I==null?E:u(I)},c.nice=function(P){var I=p();return(!P||typeof P.range!="function")&&(P=e(I[0],I[I.length-1],P??10)),P?p(eD(I,P)):c},c.copy=function(){return Um(c,EA(t,e,n,r,i,a,o,s,l,u))},c}function Ale(){return Ia.apply(EA(xse,bse,_s,SA,k1,Bm,wA,xA,$u,hD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ele(){return Ia.apply(EA(yse,vse,Ss,AA,I1,C1,_A,bA,$u,pD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function O1(){var t=0,e=1,n,r,i,a,o=fi,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(p){var h,v;return arguments.length?([h,v]=p,o=d(h,v),u):[o(0),o(1)]}}return u.range=c(Ff),u.rangeRound=c(cA),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return a=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),u}}function Bl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function mD(){var t=Ul(O1()(fi));return t.copy=function(){return Bl(t,mD())},ks.apply(t,arguments)}function gD(){var t=pA(O1()).domain([1,10]);return t.copy=function(){return Bl(t,gD()).base(t.base())},ks.apply(t,arguments)}function yD(){var t=mA(O1());return t.copy=function(){return Bl(t,yD()).constant(t.constant())},ks.apply(t,arguments)}function NA(){var t=gA(O1());return t.copy=function(){return Bl(t,NA()).exponent(t.exponent())},ks.apply(t,arguments)}function Nle(){return NA.apply(null,arguments).exponent(.5)}function vD(){var t=[],e=fi;function n(r){if(r!=null&&!isNaN(r=+r))return e(($m(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Nl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>foe(t,a/r))},n.copy=function(){return vD(e).domain(t)},ks.apply(n,arguments)}function j1(){var t=0,e=.5,n=1,r=1,i,a,o,s,l,u=fi,c,d=!1,p;function h(y){return isNaN(y=+y)?p:(y=.5+((y=+c(y))-a)*(r*y<r*a?s:l),u(d?Math.max(0,Math.min(1,y)):y))}h.domain=function(y){return arguments.length?([t,e,n]=y,i=c(t=+t),a=c(e=+e),o=c(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,h):[t,e,n]},h.clamp=function(y){return arguments.length?(d=!!y,h):d},h.interpolator=function(y){return arguments.length?(u=y,h):u};function v(y){return function(w){var b,_,A;return arguments.length?([b,_,A]=w,u=$oe(y,[b,_,A]),h):[u(0),u(.5),u(1)]}}return h.range=v(Ff),h.rangeRound=v(cA),h.unknown=function(y){return arguments.length?(p=y,h):p},function(y){return c=y,i=y(t),a=y(e),o=y(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,h}}function xD(){var t=Ul(j1()(fi));return t.copy=function(){return Bl(t,xD())},ks.apply(t,arguments)}function bD(){var t=pA(j1()).domain([.1,1,10]);return t.copy=function(){return Bl(t,bD()).base(t.base())},ks.apply(t,arguments)}function wD(){var t=mA(j1());return t.copy=function(){return Bl(t,wD()).constant(t.constant())},ks.apply(t,arguments)}function TA(){var t=gA(j1());return t.copy=function(){return Bl(t,TA()).exponent(t.exponent())},ks.apply(t,arguments)}function Tle(){return TA.apply(null,arguments).exponent(.5)}const nk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yp,scaleDiverging:xD,scaleDivergingLog:bD,scaleDivergingPow:TA,scaleDivergingSqrt:Tle,scaleDivergingSymlog:wD,scaleIdentity:QM,scaleImplicit:o_,scaleLinear:Kv,scaleLog:tD,scaleOrdinal:sA,scalePoint:up,scalePow:yA,scaleQuantile:iD,scaleQuantize:aD,scaleRadial:rD,scaleSequential:mD,scaleSequentialLog:gD,scaleSequentialPow:NA,scaleSequentialQuantile:vD,scaleSequentialSqrt:Nle,scaleSequentialSymlog:yD,scaleSqrt:sse,scaleSymlog:nD,scaleThreshold:oD,scaleTime:Ale,scaleUtc:Ele,tickFormat:ZM},Symbol.toStringTag,{value:"Module"}));var Ple=kf;function Cle(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],o=e(a);if(o!=null&&(s===void 0?o===o&&!Ple(o):n(o,s)))var s=o,l=a}return l}var R1=Cle;function kle(t,e){return t>e}var _D=kle,Ile=R1,Ole=_D,jle=$f;function Rle(t){return t&&t.length?Ile(t,jle,Ole):void 0}var Lle=Rle;const L1=dn(Lle);function Mle(t,e){return t<e}var SD=Mle,Dle=R1,$le=SD,Fle=$f;function Ule(t){return t&&t.length?Dle(t,Fle,$le):void 0}var Ble=Ule;const M1=dn(Ble);var qle=BS,Vle=Mo,zle=IM,Hle=Pi;function Gle(t,e){var n=Hle(t)?qle:zle;return n(t,Vle(e))}var Wle=Gle,Kle=CM,Jle=Wle;function Yle(t,e){return Kle(Jle(t,e),1)}var Xle=Yle;const Zle=dn(Xle);var Qle=nA;function eue(t,e){return Qle(t,e)}var tue=eue;const qm=dn(tue);var Uf=1e9,nue={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CA,Ln=!0,Ta="[DecimalError] ",zu=Ta+"Invalid argument: ",PA=Ta+"Exponent out of range: ",Bf=Math.floor,Eu=Math.pow,rue=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gi,Cr=1e7,kn=7,AD=9007199254740991,Zv=Bf(AD/kn),Xe={};Xe.absoluteValue=Xe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Xe.comparedTo=Xe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Xe.decimalPlaces=Xe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*kn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Xe.dividedBy=Xe.div=function(t){return ps(this,new this.constructor(t))};Xe.dividedToIntegerBy=Xe.idiv=function(t){var e=this,n=e.constructor;return yn(ps(e,new n(t),0,1),n.precision)};Xe.equals=Xe.eq=function(t){return!this.cmp(t)};Xe.exponent=function(){return hr(this)};Xe.greaterThan=Xe.gt=function(t){return this.cmp(t)>0};Xe.greaterThanOrEqualTo=Xe.gte=function(t){return this.cmp(t)>=0};Xe.isInteger=Xe.isint=function(){return this.e>this.d.length-2};Xe.isNegative=Xe.isneg=function(){return this.s<0};Xe.isPositive=Xe.ispos=function(){return this.s>0};Xe.isZero=function(){return this.s===0};Xe.lessThan=Xe.lt=function(t){return this.cmp(t)<0};Xe.lessThanOrEqualTo=Xe.lte=function(t){return this.cmp(t)<1};Xe.logarithm=Xe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Gi))throw Error(Ta+"NaN");if(n.s<1)throw Error(Ta+(n.s?"NaN":"-Infinity"));return n.eq(Gi)?new r(0):(Ln=!1,e=ps(tm(n,a),tm(t,a),a),Ln=!0,yn(e,i))};Xe.minus=Xe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?TD(e,t):ED(e,(t.s=-t.s,t))};Xe.modulo=Xe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ta+"NaN");return n.s?(Ln=!1,e=ps(n,t,0,1).times(t),Ln=!0,n.minus(e)):yn(new r(n),i)};Xe.naturalExponential=Xe.exp=function(){return ND(this)};Xe.naturalLogarithm=Xe.ln=function(){return tm(this)};Xe.negated=Xe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Xe.plus=Xe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ED(e,t):TD(e,(t.s=-t.s,t))};Xe.precision=Xe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(zu+t);if(e=hr(i)+1,r=i.d.length-1,n=r*kn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Xe.squareRoot=Xe.sqrt=function(){var t,e,n,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Ta+"NaN")}for(t=hr(s),Ln=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=wo(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Bf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(a=r,r=a.plus(ps(s,a,o+2)).times(.5),wo(a.d).slice(0,o)===(e=wo(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(yn(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(e!="9999")break;o+=4}return Ln=!0,yn(r,n)};Xe.times=Xe.mul=function(t){var e,n,r,i,a,o,s,l,u,c=this,d=c.constructor,p=c.d,h=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=p.length,u=h.length,l<u&&(a=p,p=h,h=a,o=l,l=u,u=o),a=[],o=l+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+h[r]*p[i-r-1]+e,a[i--]=s%Cr|0,e=s/Cr|0;a[i]=(a[i]+e)%Cr|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Ln?yn(t,d.precision):t};Xe.toDecimalPlaces=Xe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(jo(t,0,Uf),e===void 0?e=r.rounding:jo(e,0,8),yn(n,t+hr(n)+1,e))};Xe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=tc(r,!0):(jo(t,0,Uf),e===void 0?e=i.rounding:jo(e,0,8),r=yn(new i(r),t+1,e),n=tc(r,!0,t+1)),n};Xe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?tc(i):(jo(t,0,Uf),e===void 0?e=a.rounding:jo(e,0,8),r=yn(new a(i),t+hr(i)+1,e),n=tc(r.abs(),!1,t+hr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Xe.toInteger=Xe.toint=function(){var t=this,e=t.constructor;return yn(new e(t),hr(t)+1,e.rounding)};Xe.toNumber=function(){return+this};Xe.toPower=Xe.pow=function(t){var e,n,r,i,a,o,s=this,l=s.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(Gi);if(s=new l(s),!s.s){if(t.s<1)throw Error(Ta+"Infinity");return s}if(s.eq(Gi))return s;if(r=l.precision,t.eq(Gi))return yn(s,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=s.s,o){if((n=c<0?-c:c)<=AD){for(i=new l(Gi),e=Math.ceil(r/kn+4),Ln=!1;n%2&&(i=i.times(s),ik(i.d,e)),n=Bf(n/2),n!==0;)s=s.times(s),ik(s.d,e);return Ln=!0,t.s<0?new l(Gi).div(i):yn(i,r)}}else if(a<0)throw Error(Ta+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,Ln=!1,i=t.times(tm(s,r+u)),Ln=!0,i=ND(i),i.s=a,i};Xe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=hr(i),r=tc(i,n<=a.toExpNeg||n>=a.toExpPos)):(jo(t,1,Uf),e===void 0?e=a.rounding:jo(e,0,8),i=yn(new a(i),t,e),n=hr(i),r=tc(i,t<=n||n<=a.toExpNeg,t)),r};Xe.toSignificantDigits=Xe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(jo(t,1,Uf),e===void 0?e=r.rounding:jo(e,0,8)),yn(new r(n),t,e)};Xe.toString=Xe.valueOf=Xe.val=Xe.toJSON=Xe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=hr(t),n=t.constructor;return tc(t,e<=n.toExpNeg||e>=n.toExpPos)};function ED(t,e){var n,r,i,a,o,s,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),Ln?yn(e,d):e;if(l=t.d,u=e.d,o=t.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=u.length):(r=u,i=o,s=l.length),o=Math.ceil(d/kn),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=u.length,s-a<0&&(a=s,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/Cr|0,l[a]%=Cr;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,Ln?yn(e,d):e}function jo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(zu+t)}function wo(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=kn-r.length,n&&(a+=al(n)),a+=r;o=t[e],r=o+"",n=kn-r.length,n&&(a+=al(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ps=function(){function t(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%Cr|0,o=a/Cr|0;return o&&r.unshift(o),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Cr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,u,c,d,p,h,v,y,w,b,_,A,N,E,P,I,O,R=r.constructor,D=r.s==i.s?1:-1,C=r.d,L=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Ta+"Division by zero");for(l=r.e-i.e,I=L.length,E=C.length,h=new R(D),v=h.d=[],u=0;L[u]==(C[u]||0);)++u;if(L[u]>(C[u]||0)&&--l,a==null?_=a=R.precision:o?_=a+(hr(r)-hr(i))+1:_=a,_<0)return new R(0);if(_=_/kn+2|0,u=0,I==1)for(c=0,L=L[0],_++;(u<E||c)&&_--;u++)A=c*Cr+(C[u]||0),v[u]=A/L|0,c=A%L|0;else{for(c=Cr/(L[0]+1)|0,c>1&&(L=t(L,c),C=t(C,c),I=L.length,E=C.length),N=I,y=C.slice(0,I),w=y.length;w<I;)y[w++]=0;O=L.slice(),O.unshift(0),P=L[0],L[1]>=Cr/2&&++P;do c=0,s=e(L,y,I,w),s<0?(b=y[0],I!=w&&(b=b*Cr+(y[1]||0)),c=b/P|0,c>1?(c>=Cr&&(c=Cr-1),d=t(L,c),p=d.length,w=y.length,s=e(d,y,p,w),s==1&&(c--,n(d,I<p?O:L,p))):(c==0&&(s=c=1),d=L.slice()),p=d.length,p<w&&d.unshift(0),n(y,d,w),s==-1&&(w=y.length,s=e(L,y,I,w),s<1&&(c++,n(y,I<w?O:L,w))),w=y.length):s===0&&(c++,y=[0]),v[u++]=c,s&&y[0]?y[w++]=C[N]||0:(y=[C[N]],w=1);while((N++<E||y[0]!==void 0)&&_--)}return v[0]||v.shift(),h.e=l,yn(h,o?a+hr(h)+1:a)}}();function ND(t,e){var n,r,i,a,o,s,l=0,u=0,c=t.constructor,d=c.precision;if(hr(t)>16)throw Error(PA+hr(t));if(!t.s)return new c(Gi);for(Ln=!1,s=d,o=new c(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Eu(2,u))/Math.LN10*2+5|0,s+=r,n=i=a=new c(Gi),c.precision=s;;){if(i=yn(i.times(t),s),n=n.times(++l),o=a.plus(ps(i,n,s)),wo(o.d).slice(0,s)===wo(a.d).slice(0,s)){for(;u--;)a=yn(a.times(a),s);return c.precision=d,e==null?(Ln=!0,yn(a,d)):a}a=o}}function hr(t){for(var e=t.e*kn,n=t.d[0];n>=10;n/=10)e++;return e}function Fb(t,e,n){if(e>t.LN10.sd())throw Ln=!0,n&&(t.precision=n),Error(Ta+"LN10 precision limit exceeded");return yn(new t(t.LN10),e)}function al(t){for(var e="";t--;)e+="0";return e}function tm(t,e){var n,r,i,a,o,s,l,u,c,d=1,p=10,h=t,v=h.d,y=h.constructor,w=y.precision;if(h.s<1)throw Error(Ta+(h.s?"NaN":"-Infinity"));if(h.eq(Gi))return new y(0);if(e==null?(Ln=!1,u=w):u=e,h.eq(10))return e==null&&(Ln=!0),Fb(y,u);if(u+=p,y.precision=u,n=wo(v),r=n.charAt(0),a=hr(h),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=wo(h.d),r=n.charAt(0),d++;a=hr(h),r>1?(h=new y("0."+n),a++):h=new y(r+"."+n.slice(1))}else return l=Fb(y,u+2,w).times(a+""),h=tm(new y(r+"."+n.slice(1)),u-p).plus(l),y.precision=w,e==null?(Ln=!0,yn(h,w)):h;for(s=o=h=ps(h.minus(Gi),h.plus(Gi),u),c=yn(h.times(h),u),i=3;;){if(o=yn(o.times(c),u),l=s.plus(ps(o,new y(i),u)),wo(l.d).slice(0,u)===wo(s.d).slice(0,u))return s=s.times(2),a!==0&&(s=s.plus(Fb(y,u+2,w).times(a+""))),s=ps(s,new y(d),u),y.precision=w,e==null?(Ln=!0,yn(s,w)):s;s=l,i+=2}}function rk(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Bf(n/kn),t.d=[],r=(n+1)%kn,n<0&&(r+=kn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=kn;r<i;)t.d.push(+e.slice(r,r+=kn));e=e.slice(r),r=kn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Ln&&(t.e>Zv||t.e<-Zv))throw Error(PA+n)}else t.s=0,t.e=0,t.d=[0];return t}function yn(t,e,n){var r,i,a,o,s,l,u,c,d=t.d;for(o=1,a=d[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=kn,i=e,u=d[c=0];else{if(c=Math.ceil((r+1)/kn),a=d.length,c>=a)return t;for(u=a=d[c],o=1;a>=10;a/=10)o++;r%=kn,i=r-kn+o}if(n!==void 0&&(a=Eu(10,o-i-1),s=u/a%10|0,l=e<0||d[c+1]!==void 0||u%a,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?u/Eu(10,o-i):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(a=hr(t),d.length=1,e=e-a-1,d[0]=Eu(10,(kn-e%kn)%kn),t.e=Bf(-e/kn)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,a=1,c--):(d.length=c+1,a=Eu(10,kn-r),d[c]=i>0?(u/Eu(10,o-i)%Eu(10,i)|0)*a:0),l)for(;;)if(c==0){(d[0]+=a)==Cr&&(d[0]=1,++t.e);break}else{if(d[c]+=a,d[c]!=Cr)break;d[c--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(Ln&&(t.e>Zv||t.e<-Zv))throw Error(PA+hr(t));return t}function TD(t,e){var n,r,i,a,o,s,l,u,c,d,p=t.constructor,h=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Ln?yn(e,h):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),o=u-r,o){for(c=o<0,c?(n=l,o=-o,s=d.length):(n=d,r=u,s=l.length),i=Math.max(Math.ceil(h/kn),s)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=d.length,c=i<s,c&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){c=l[i]<d[i];break}o=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(a=i;a&&l[--a]===0;)l[a]=Cr-1;--l[a],l[i]+=Cr}l[i]-=d[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Ln?yn(e,h):e):new p(0)}function tc(t,e,n){var r,i=hr(t),a=wo(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+al(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+al(-i-1)+a,n&&(r=n-o)>0&&(a+=al(r))):i>=o?(a+=al(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+al(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=al(r))),t.s<0?"-"+a:a}function ik(t,e){if(t.length>e)return t.length=e,!0}function PD(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(zu+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return rk(o,a.toString())}else if(typeof a!="string")throw Error(zu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,rue.test(a))rk(o,a);else throw Error(zu+a)}if(i.prototype=Xe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=PD,i.config=i.set=iue,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function iue(t){if(!t||typeof t!="object")throw Error(Ta+"Object expected");var e,n,r,i=["precision",1,Uf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Bf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(zu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zu+n+": "+r);return this}var CA=PD(nue);Gi=new CA(1);const hn=CA;function aue(t){return uue(t)||lue(t)||sue(t)||oue()}function oue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sue(t,e){if(t){if(typeof t=="string")return c_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c_(t,e)}}function lue(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function uue(t){if(Array.isArray(t))return c_(t)}function c_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cue=function(e){return e},CD={},kD=function(e){return e===CD},ak=function(e){return function n(){return arguments.length===0||arguments.length===1&&kD(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},due=function t(e,n){return e===1?n:ak(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==CD}).length;return o>=e?n.apply(void 0,i):t(e-o,ak(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var c=i.map(function(d){return kD(d)?l.shift():d});return n.apply(void 0,aue(c).concat(l))}))})},D1=function(e){return due(e.length,e)},d_=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},fue=D1(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),hue=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return cue;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},f_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},ID=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(s,l){return s===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function pue(t){var e;return t===0?e=1:e=Math.floor(new hn(t).abs().log(10).toNumber())+1,e}function mue(t,e,n){for(var r=new hn(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var gue=D1(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),yue=D1(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),vue=D1(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const $1={rangeStep:mue,getDigitCount:pue,interpolateNumber:gue,uninterpolateNumber:yue,uninterpolateTruncation:vue};function h_(t){return wue(t)||bue(t)||OD(t)||xue()}function xue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bue(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function wue(t){if(Array.isArray(t))return p_(t)}function nm(t,e){return Aue(t)||Sue(t,e)||OD(t,e)||_ue()}function _ue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OD(t,e){if(t){if(typeof t=="string")return p_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p_(t,e)}}function p_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sue(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function Aue(t){if(Array.isArray(t))return t}function jD(t){var e=nm(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function RD(t,e,n){if(t.lte(0))return new hn(0);var r=$1.getDigitCount(t.toNumber()),i=new hn(10).pow(r),a=t.div(i),o=r!==1?.05:.1,s=new hn(Math.ceil(a.div(o).toNumber())).add(n).mul(o),l=s.mul(i);return e?l:new hn(Math.ceil(l))}function Eue(t,e,n){var r=1,i=new hn(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new hn(10).pow($1.getDigitCount(t)-1),i=new hn(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new hn(Math.floor(t)))}else t===0?i=new hn(Math.floor((e-1)/2)):n||(i=new hn(Math.floor(t)));var o=Math.floor((e-1)/2),s=hue(fue(function(l){return i.add(new hn(l-o).mul(r)).toNumber()}),d_);return s(0,e)}function LD(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new hn(0),tickMin:new hn(0),tickMax:new hn(0)};var a=RD(new hn(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new hn(0):(o=new hn(t).add(e).div(2),o=o.sub(new hn(o).mod(a)));var s=Math.ceil(o.sub(t).div(a).toNumber()),l=Math.ceil(new hn(e).sub(o).div(a).toNumber()),u=s+l+1;return u>n?LD(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,s=e>0?s:s+(n-u)),{step:a,tickMin:o.sub(new hn(s).mul(a)),tickMax:o.add(new hn(l).mul(a))})}function Nue(t){var e=nm(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=jD([n,r]),l=nm(s,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(h_(d_(0,i-1).map(function(){return 1/0}))):[].concat(h_(d_(0,i-1).map(function(){return-1/0})),[c]);return n>r?f_(d):d}if(u===c)return Eue(u,i,a);var p=LD(u,c,o,a),h=p.step,v=p.tickMin,y=p.tickMax,w=$1.rangeStep(v,y.add(new hn(.1).mul(h)),h);return n>r?f_(w):w}function Tue(t,e){var n=nm(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=jD([r,i]),s=nm(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),d=RD(new hn(u).sub(l).div(c-1),a,0),p=[].concat(h_($1.rangeStep(new hn(l),new hn(u).sub(new hn(.99).mul(d)),d)),[u]);return r>i?f_(p):p}var Pue=ID(Nue),Cue=ID(Tue),kue="Invariant failed";function nc(t,e){throw new Error(kue)}var Iue=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function Qv(){return Qv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qv.apply(this,arguments)}function Oue(t,e){return Mue(t)||Lue(t,e)||Rue(t,e)||jue()}function jue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rue(t,e){if(t){if(typeof t=="string")return ok(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ok(t,e)}}function ok(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Mue(t){if(Array.isArray(t))return t}function Due(t,e){if(t==null)return{};var n=$ue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $ue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Fue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$D(r.key),r)}}function Bue(t,e,n){return e&&Uue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function que(t,e,n){return e=e0(e),Vue(t,MD()?Reflect.construct(e,n||[],e0(t).constructor):e.apply(t,n))}function Vue(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zue(t)}function zue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MD=function(){return!!t})()}function e0(t){return e0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e0(t)}function Hue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m_(t,e)}function m_(t,e){return m_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},m_(t,e)}function DD(t,e,n){return e=$D(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $D(t){var e=Gue(t,"string");return tf(e)=="symbol"?e:e+""}function Gue(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vm=function(t){function e(){return Fue(this,e),que(this,e,arguments)}return Hue(e,t),Bue(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,s=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,p=Due(r,Iue),h=yt(p,!1);this.props.direction==="x"&&c.type!=="number"&&nc();var v=l.map(function(y){var w=u(y,s),b=w.x,_=w.y,A=w.value,N=w.errorVal;if(!N)return null;var E=[],P,I;if(Array.isArray(N)){var O=Oue(N,2);P=O[0],I=O[1]}else P=I=N;if(a==="vertical"){var R=c.scale,D=_+i,C=D+o,L=D-o,F=R(A-P),$=R(A+I);E.push({x1:$,y1:C,x2:$,y2:L}),E.push({x1:F,y1:D,x2:$,y2:D}),E.push({x1:F,y1:C,x2:F,y2:L})}else if(a==="horizontal"){var V=d.scale,Y=b+i,W=Y-o,U=Y+o,Q=V(A-P),le=V(A+I);E.push({x1:W,y1:le,x2:U,y2:le}),E.push({x1:Y,y1:Q,x2:Y,y2:le}),E.push({x1:W,y1:Q,x2:U,y2:Q})}return ce.createElement(Yt,Qv({className:"recharts-errorBar",key:"bar-".concat(E.map(function(oe){return"".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))},h),E.map(function(oe){return ce.createElement("line",Qv({},oe,{key:"line-".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))}))});return ce.createElement(Yt,{className:"recharts-errorBars"},v)}}])}(ce.Component);DD(Vm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});DD(Vm,"displayName","ErrorBar");function rm(t){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(t)}function sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(n),!0).forEach(function(r){Wue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wue(t,e,n){return e=Kue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kue(t){var e=Jue(t,"string");return rm(e)=="symbol"?e:e+""}function Jue(t,e){if(rm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FD=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=qi(n,Co);if(!o)return null;var s=Co.defaultProps,l=s!==void 0?yu(yu({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(r||[]).reduce(function(c,d){var p=d.item,h=d.props,v=h.sectors||h.data||[];return c.concat(v.map(function(y){return{type:o.props.iconType||p.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(r||[]).map(function(c){var d=c.item,p=d.type.defaultProps,h=p!==void 0?yu(yu({},p),d.props):{},v=h.dataKey,y=h.name,w=h.legendType,b=h.hide;return{inactive:b,dataKey:v,type:l.iconType||w||"square",color:kA(d),value:y||v,payload:h}}),yu(yu(yu({},l),Co.getWithHeight(o,i)),{},{payload:u,item:o})};function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function lk(t){return Que(t)||Zue(t)||Xue(t)||Yue()}function Yue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xue(t,e){if(t){if(typeof t=="string")return g_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g_(t,e)}}function Zue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Que(t){if(Array.isArray(t))return g_(t)}function g_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uk(Object(n),!0).forEach(function(r){Ed(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ed(t,e,n){return e=ece(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ece(t){var e=tce(t,"string");return im(e)=="symbol"?e:e+""}function tce(t,e){if(im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sr(t,e,n){return Rt(t)||Rt(e)?n:Er(e)?Yi(t,e,n):Et(e)?e(t):n}function cp(t,e,n,r){var i=Zle(t,function(s){return Sr(s,e)});if(n==="number"){var a=i.filter(function(s){return Be(s)||parseFloat(s)});return a.length?[M1(a),L1(a)]:[1/0,-1/0]}var o=r?i.filter(function(s){return!Rt(s)}):i;return o.map(function(s){return Er(s)||s instanceof Date?s:""})}var nce=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<s;u++){var c=u>0?i[u-1].coordinate:i[s-1].coordinate,d=i[u].coordinate,p=u>=s-1?i[0].coordinate:i[u+1].coordinate,h=void 0;if(ci(d-c)!==ci(p-d)){var v=[];if(ci(p-d)===ci(l[1]-l[0])){h=p;var y=d+l[1]-l[0];v[0]=Math.min(y,(y+c)/2),v[1]=Math.max(y,(y+c)/2)}else{h=c;var w=p+l[1]-l[0];v[0]=Math.min(d,(w+d)/2),v[1]=Math.max(d,(w+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=v[0]&&e<=v[1]){o=i[u].index;break}}else{var _=Math.min(c,p),A=Math.max(c,p);if(e>(_+d)/2&&e<=(A+d)/2){o=i[u].index;break}}}else for(var N=0;N<s;N++)if(N===0&&e<=(r[N].coordinate+r[N+1].coordinate)/2||N>0&&N<s-1&&e>(r[N].coordinate+r[N-1].coordinate)/2&&e<=(r[N].coordinate+r[N+1].coordinate)/2||N===s-1&&e>(r[N].coordinate+r[N-1].coordinate)/2){o=r[N].index;break}return o},kA=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Kn(Kn({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},rce=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,u=s.length;l<u;l++)for(var c=a[s[l]].stackGroups,d=Object.keys(c),p=0,h=d.length;p<h;p++){var v=c[d[p]],y=v.items,w=v.cateAxisId,b=y.filter(function(I){return hs(I.type).indexOf("Bar")>=0});if(b&&b.length){var _=b[0].type.defaultProps,A=_!==void 0?Kn(Kn({},_),b[0].props):b[0].props,N=A.barSize,E=A[w];o[E]||(o[E]=[]);var P=Rt(N)?n:N;o[E].push({item:b[0],stackList:b.slice(1),barSize:Rt(P)?void 0:di(P,r,0)})}}return o},ice=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var u=di(n,i,0,!0),c,d=[];if(o[0].barSize===+o[0].barSize){var p=!1,h=i/l,v=o.reduce(function(N,E){return N+E.barSize||0},0);v+=(l-1)*u,v>=i&&(v-=(l-1)*u,u=0),v>=i&&h>0&&(p=!0,h*=.9,v=l*h);var y=(i-v)/2>>0,w={offset:y-u,size:0};c=o.reduce(function(N,E){var P={item:E.item,position:{offset:w.offset+w.size+u,size:p?h:E.barSize}},I=[].concat(lk(N),[P]);return w=I[I.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(O){I.push({item:O,position:w})}),I},d)}else{var b=di(r,i,0,!0);i-2*b-(l-1)*u<=0&&(u=0);var _=(i-2*b-(l-1)*u)/l;_>1&&(_>>=0);var A=s===+s?Math.min(_,s):_;c=o.reduce(function(N,E,P){var I=[].concat(lk(N),[{item:E.item,position:{offset:b+(_+u)*P+(_-A)/2,size:A}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(O){I.push({item:O,position:I[I.length-1].position})}),I},d)}return c},ace=function(e,n,r,i){var a=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),u=FD({children:a,legendWidth:l});if(u){var c=i||{},d=c.width,p=c.height,h=u.align,v=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&h!=="center"&&Be(e[h]))return Kn(Kn({},e),{},Ed({},h,e[h]+(d||0)));if((y==="horizontal"||y==="vertical"&&h==="center")&&v!=="middle"&&Be(e[v]))return Kn(Kn({},e),{},Ed({},v,e[v]+(p||0)))}return e},oce=function(e,n,r){return Rt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},UD=function(e,n,r,i,a){var o=n.props.children,s=Xi(o,Vm).filter(function(u){return oce(i,a,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=Sr(c,r);if(Rt(d))return u;var p=Array.isArray(d)?[M1(d),L1(d)]:[d,d],h=l.reduce(function(v,y){var w=Sr(c,y,0),b=p[0]-Math.abs(Array.isArray(w)?w[0]:w),_=p[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(b,v[0]),Math.max(_,v[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},sce=function(e,n,r,i,a){var o=n.map(function(s){return UD(e,s,r,a,i)}).filter(function(s){return!Rt(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},BD=function(e,n,r,i,a){var o=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&UD(e,l,u,i)||cp(e,u,r,a)});if(r==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)s[u[c]]||(s[u[c]]=!0,l.push(u[c]));return l},[])},qD=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},VD=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(o=!0),l.coordinate});return a||s.push(n),o||s.push(r),s},ds=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?ci(s[0]-s[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var p=a?a.indexOf(d):d;return{coordinate:i(p)+u,value:d,offset:u}});return c.filter(function(d){return!Rm(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,p){return{coordinate:i(d)+u,value:d,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,p){return{coordinate:i(d)+u,value:a?a[d]:d,index:p,offset:u}})},Ub=new WeakMap,ly=function(e,n){if(typeof n!="function")return e;Ub.has(e)||Ub.set(e,new WeakMap);var r=Ub.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},zD=function(e,n,r){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:Yp(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:Kv(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:up(),realScaleType:"point"}:a==="category"?{scale:Yp(),realScaleType:"band"}:{scale:Kv(),realScaleType:"linear"};if(Zu(i)){var l="scale".concat(w1(i));return{scale:(nk[l]||up)(),realScaleType:nk[l]?l:"point"}}return Et(i)?{scale:i}:{scale:up(),realScaleType:"point"}},ck=1e-4,HD=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-ck,o=Math.max(i[0],i[1])+ck,s=e(n[0]),l=e(n[r-1]);(s<a||s>o||l<a||l>o)&&e.domain([n[0],n[r-1]])}},lce=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},uce=function(e,n){if(!n||n.length!==2||!Be(n[0])||!Be(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!Be(e[0])||e[0]<r)&&(a[0]=r),(!Be(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},cce=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,s=0;s<n;++s){var l=Rm(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1])}},dce=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var s=Rm(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},fce={sign:cce,expand:IY,none:Wd,silhouette:OY,wiggle:jY,positive:dce},hce=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),a=fce[r],o=kY().keys(i).value(function(s,l){return+Sr(s,l,0)}).order(B2).offset(a);return o(e)},pce=function(e,n,r,i,a,o){if(!e)return null;var s=o?n.reverse():n,l={},u=s.reduce(function(d,p){var h,v=(h=p.type)!==null&&h!==void 0&&h.defaultProps?Kn(Kn({},p.type.defaultProps),p.props):p.props,y=v.stackId,w=v.hide;if(w)return d;var b=v[r],_=d[b]||{hasStack:!1,stackGroups:{}};if(Er(y)){var A=_.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};A.items.push(p),_.hasStack=!0,_.stackGroups[y]=A}else _.stackGroups[Lf("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return Kn(Kn({},d),{},Ed({},b,_))},l),c={};return Object.keys(u).reduce(function(d,p){var h=u[p];if(h.hasStack){var v={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(y,w){var b=h.stackGroups[w];return Kn(Kn({},y),{},Ed({},w,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:hce(e,b.items,a)}))},v)}return Kn(Kn({},d),{},Ed({},p,h))},c)},GD=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=Pue(u,a,s);return e.domain([M1(c),L1(c)]),{niceTicks:c}}if(a&&i==="number"){var d=e.domain(),p=Cue(d,a,s);return{niceTicks:p}}return null};function dk(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Rt(i[e.dataKey])){var s=Tv(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=Sr(i,Rt(o)?e.dataKey:o);return Rt(l)?null:e.scale(l)}var fk=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=Sr(o,n.dataKey,n.domain[s]);return Rt(l)?null:n.scale(l)-a/2+i},mce=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},gce=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Kn(Kn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Er(a)){var o=n[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},yce=function(e){return e.reduce(function(n,r){return[M1(r.concat([n[0]]).filter(Be)),L1(r.concat([n[1]]).filter(Be))]},[1/0,-1/0])},WD=function(e,n,r){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(u,c){var d=yce(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},hk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,y_=function(e,n,r){if(Et(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Be(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(hk.test(e[0])){var a=+hk.exec(e[0])[1];i[0]=n[0]-a}else Et(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Be(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(pk.test(e[1])){var o=+pk.exec(e[1])[1];i[1]=n[1]+o}else Et(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},t0=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=iA(n,function(d){return d.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var u=a[s],c=a[s-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},mk=function(e,n,r){return!e||!e.length||qm(e,Yi(r,"type.defaultProps.domain"))?n:e},KD=function(e,n){var r=e.type.defaultProps?Kn(Kn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Kn(Kn({},yt(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:kA(e),value:Sr(n,i),type:l,payload:n,chartType:u,hide:c})};function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(t)}function gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gk(Object(n),!0).forEach(function(r){JD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JD(t,e,n){return e=vce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vce(t){var e=xce(t,"string");return am(e)=="symbol"?e:e+""}function xce(t,e){if(am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bce(t,e){return Ace(t)||Sce(t,e)||_ce(t,e)||wce()}function wce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ce(t,e){if(t){if(typeof t=="string")return yk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yk(t,e)}}function yk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Ace(t){if(Array.isArray(t))return t}var n0=Math.PI/180,Ece=function(e){return e*180/Math.PI},En=function(e,n,r,i){return{x:e+Math.cos(-n0*i)*r,y:n+Math.sin(-n0*i)*r}},YD=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Nce=function(e,n,r,i,a){var o=e.width,s=e.height,l=e.startAngle,u=e.endAngle,c=di(e.cx,o,o/2),d=di(e.cy,s,s/2),p=YD(o,s,r),h=di(e.innerRadius,p,0),v=di(e.outerRadius,p,p*.8),y=Object.keys(n);return y.reduce(function(w,b){var _=n[b],A=_.domain,N=_.reversed,E;if(Rt(_.range))i==="angleAxis"?E=[l,u]:i==="radiusAxis"&&(E=[h,v]),N&&(E=[E[1],E[0]]);else{E=_.range;var P=E,I=bce(P,2);l=I[0],u=I[1]}var O=zD(_,a),R=O.realScaleType,D=O.scale;D.domain(A).range(E),HD(D);var C=GD(D,rs(rs({},_),{},{realScaleType:R})),L=rs(rs(rs({},_),C),{},{range:E,radius:v,realScaleType:R,scale:D,cx:c,cy:d,innerRadius:h,outerRadius:v,startAngle:l,endAngle:u});return rs(rs({},w),{},JD({},b,L))},{})},Tce=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},Pce=function(e,n){var r=e.x,i=e.y,a=n.cx,o=n.cy,s=Tce({x:r,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(r-a)/s,u=Math.acos(l);return i>o&&(u=2*Math.PI-u),{radius:s,angle:Ece(u),angleInRadian:u}},Cce=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},kce=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},vk=function(e,n){var r=e.x,i=e.y,a=Pce({x:r,y:i},n),o=a.radius,s=a.angle,l=n.innerRadius,u=n.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var c=Cce(n),d=c.startAngle,p=c.endAngle,h=s,v;if(d<=p){for(;h>p;)h-=360;for(;h<d;)h+=360;v=h>=d&&h<=p}else{for(;h>d;)h-=360;for(;h<p;)h+=360;v=h>=p&&h<=d}return v?rs(rs({},n),{},{radius:o,angle:kce(h,n)}):null},XD=function(e){return!X.isValidElement(e)&&!Et(e)&&typeof e!="boolean"?e.className:""};function om(t){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(t)}var Ice=["offset"];function Oce(t){return Mce(t)||Lce(t)||Rce(t)||jce()}function jce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rce(t,e){if(t){if(typeof t=="string")return v_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v_(t,e)}}function Lce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mce(t){if(Array.isArray(t))return v_(t)}function v_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dce(t,e){if(t==null)return{};var n=$ce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $ce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(n),!0).forEach(function(r){Fce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fce(t,e,n){return e=Uce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uce(t){var e=Bce(t,"string");return om(e)=="symbol"?e:e+""}function Bce(t,e){if(om(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sm(){return sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sm.apply(this,arguments)}var qce=function(e){var n=e.value,r=e.formatter,i=Rt(e.children)?n:e.children;return Et(r)?r(i):i},Vce=function(e,n){var r=ci(n-e),i=Math.min(Math.abs(n-e),360);return r*i},zce=function(e,n,r){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,u=l.cx,c=l.cy,d=l.innerRadius,p=l.outerRadius,h=l.startAngle,v=l.endAngle,y=l.clockWise,w=(d+p)/2,b=Vce(h,v),_=b>=0?1:-1,A,N;i==="insideStart"?(A=h+_*o,N=y):i==="insideEnd"?(A=v-_*o,N=!y):i==="end"&&(A=v+_*o,N=y),N=b<=0?N:!N;var E=En(u,c,w,A),P=En(u,c,w,A+(N?1:-1)*359),I="M".concat(E.x,",").concat(E.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(N?0:1,`,
    `).concat(P.x,",").concat(P.y),O=Rt(e.id)?Lf("recharts-radial-line-"):e.id;return ce.createElement("text",sm({},r,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",s)}),ce.createElement("defs",null,ce.createElement("path",{id:O,d:I})),ce.createElement("textPath",{xlinkHref:"#".concat(O)},n))},Hce=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,o=a.cx,s=a.cy,l=a.innerRadius,u=a.outerRadius,c=a.startAngle,d=a.endAngle,p=(c+d)/2;if(i==="outside"){var h=En(o,s,u+r,p),v=h.x,y=h.y;return{x:v,y,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var w=(l+u)/2,b=En(o,s,w,p),_=b.x,A=b.y;return{x:_,y:A,textAnchor:"middle",verticalAnchor:"middle"}},Gce=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=n,s=o.x,l=o.y,u=o.width,c=o.height,d=c>=0?1:-1,p=d*i,h=d>0?"end":"start",v=d>0?"start":"end",y=u>=0?1:-1,w=y*i,b=y>0?"end":"start",_=y>0?"start":"end";if(a==="top"){var A={x:s+u/2,y:l-d*i,textAnchor:"middle",verticalAnchor:h};return br(br({},A),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var N={x:s+u/2,y:l+c+p,textAnchor:"middle",verticalAnchor:v};return br(br({},N),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(a==="left"){var E={x:s-w,y:l+c/2,textAnchor:b,verticalAnchor:"middle"};return br(br({},E),r?{width:Math.max(E.x-r.x,0),height:c}:{})}if(a==="right"){var P={x:s+u+w,y:l+c/2,textAnchor:_,verticalAnchor:"middle"};return br(br({},P),r?{width:Math.max(r.x+r.width-P.x,0),height:c}:{})}var I=r?{width:u,height:c}:{};return a==="insideLeft"?br({x:s+w,y:l+c/2,textAnchor:_,verticalAnchor:"middle"},I):a==="insideRight"?br({x:s+u-w,y:l+c/2,textAnchor:b,verticalAnchor:"middle"},I):a==="insideTop"?br({x:s+u/2,y:l+p,textAnchor:"middle",verticalAnchor:v},I):a==="insideBottom"?br({x:s+u/2,y:l+c-p,textAnchor:"middle",verticalAnchor:h},I):a==="insideTopLeft"?br({x:s+w,y:l+p,textAnchor:_,verticalAnchor:v},I):a==="insideTopRight"?br({x:s+u-w,y:l+p,textAnchor:b,verticalAnchor:v},I):a==="insideBottomLeft"?br({x:s+w,y:l+c-p,textAnchor:_,verticalAnchor:h},I):a==="insideBottomRight"?br({x:s+u-w,y:l+c-p,textAnchor:b,verticalAnchor:h},I):If(a)&&(Be(a.x)||Mu(a.x))&&(Be(a.y)||Mu(a.y))?br({x:s+di(a.x,u),y:l+di(a.y,c),textAnchor:"end",verticalAnchor:"end"},I):br({x:s+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},I)},Wce=function(e){return"cx"in e&&Be(e.cx)};function Or(t){var e=t.offset,n=e===void 0?5:e,r=Dce(t,Ice),i=br({offset:n},r),a=i.viewBox,o=i.position,s=i.value,l=i.children,u=i.content,c=i.className,d=c===void 0?"":c,p=i.textBreakAll;if(!a||Rt(s)&&Rt(l)&&!X.isValidElement(u)&&!Et(u))return null;if(X.isValidElement(u))return X.cloneElement(u,i);var h;if(Et(u)){if(h=X.createElement(u,i),X.isValidElement(h))return h}else h=qce(i);var v=Wce(a),y=yt(i,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return zce(i,h,y);var w=v?Hce(i):Gce(i);return ce.createElement(ec,sm({className:$t("recharts-label",d)},y,w,{breakAll:p}),h)}Or.displayName="Label";var ZD=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,p=e.y,h=e.top,v=e.left,y=e.width,w=e.height,b=e.clockWise,_=e.labelViewBox;if(_)return _;if(Be(y)&&Be(w)){if(Be(d)&&Be(p))return{x:d,y:p,width:y,height:w};if(Be(h)&&Be(v))return{x:h,y:v,width:y,height:w}}return Be(d)&&Be(p)?{x:d,y:p,width:0,height:0}:Be(n)&&Be(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:c||l||s||0,clockWise:b}:e.viewBox?e.viewBox:{}},Kce=function(e,n){return e?e===!0?ce.createElement(Or,{key:"label-implicit",viewBox:n}):Er(e)?ce.createElement(Or,{key:"label-implicit",viewBox:n,value:e}):X.isValidElement(e)?e.type===Or?X.cloneElement(e,{key:"label-implicit",viewBox:n}):ce.createElement(Or,{key:"label-implicit",content:e,viewBox:n}):Et(e)?ce.createElement(Or,{key:"label-implicit",content:e,viewBox:n}):If(e)?ce.createElement(Or,sm({viewBox:n},e,{key:"label-implicit"})):null:null},Jce=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=ZD(e),o=Xi(i,Or).map(function(l,u){return X.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return o;var s=Kce(e.label,n||a);return[s].concat(Oce(o))};Or.parseViewBox=ZD;Or.renderCallByParent=Jce;function Yce(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Xce=Yce;const Zce=dn(Xce);function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}var Qce=["valueAccessor"],ede=["data","dataKey","clockWise","id","textBreakAll"];function tde(t){return ade(t)||ide(t)||rde(t)||nde()}function nde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rde(t,e){if(t){if(typeof t=="string")return x_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x_(t,e)}}function ide(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ade(t){if(Array.isArray(t))return x_(t)}function x_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r0(){return r0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r0.apply(this,arguments)}function bk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bk(Object(n),!0).forEach(function(r){ode(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ode(t,e,n){return e=sde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sde(t){var e=lde(t,"string");return lm(e)=="symbol"?e:e+""}function lde(t,e){if(lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _k(t,e){if(t==null)return{};var n=ude(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ude(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var cde=function(e){return Array.isArray(e.value)?Zce(e.value):e.value};function ms(t){var e=t.valueAccessor,n=e===void 0?cde:e,r=_k(t,Qce),i=r.data,a=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,u=_k(r,ede);return!i||!i.length?null:ce.createElement(Yt,{className:"recharts-label-list"},i.map(function(c,d){var p=Rt(a)?n(c,d):Sr(c&&c.payload,a),h=Rt(s)?{}:{id:"".concat(s,"-").concat(d)};return ce.createElement(Or,r0({},yt(c,!0),u,h,{parentViewBox:c.parentViewBox,value:p,textBreakAll:l,viewBox:Or.parseViewBox(Rt(o)?c:wk(wk({},c),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}ms.displayName="LabelList";function dde(t,e){return t?t===!0?ce.createElement(ms,{key:"labelList-implicit",data:e}):ce.isValidElement(t)||Et(t)?ce.createElement(ms,{key:"labelList-implicit",data:e,content:t}):If(t)?ce.createElement(ms,r0({data:e},t,{key:"labelList-implicit"})):null:null}function fde(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Xi(r,ms).map(function(o,s){return X.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var a=dde(t.label,e);return[a].concat(tde(i))}ms.renderCallByParent=fde;function um(t){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}function b_(){return b_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b_.apply(this,arguments)}function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ak(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(r){hde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hde(t,e,n){return e=pde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pde(t){var e=mde(t,"string");return um(e)=="symbol"?e:e+""}function mde(t,e){if(um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gde=function(e,n){var r=ci(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},uy=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(s?1:-1)+i,d=Math.asin(l/c)/n0,p=u?a:a+o*d,h=En(n,r,c,p),v=En(n,r,i,p),y=u?a-o*d:a,w=En(n,r,c*Math.cos(d*n0),y);return{center:h,circleTangency:v,lineTangency:w,theta:d}},QD=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=gde(o,s),u=o+l,c=En(n,r,a,o),d=En(n,r,a,u),p="M ".concat(c.x,",").concat(c.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var h=En(n,r,i,o),v=En(n,r,i,u);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},yde=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=ci(c-u),p=uy({cx:n,cy:r,radius:a,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),h=p.circleTangency,v=p.lineTangency,y=p.theta,w=uy({cx:n,cy:r,radius:a,angle:c,sign:-d,cornerRadius:o,cornerIsExternal:l}),b=w.circleTangency,_=w.lineTangency,A=w.theta,N=l?Math.abs(u-c):Math.abs(u-c)-y-A;if(N<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):QD({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:c});var E="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(N>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var P=uy({cx:n,cy:r,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),I=P.circleTangency,O=P.lineTangency,R=P.theta,D=uy({cx:n,cy:r,radius:i,angle:c,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),C=D.circleTangency,L=D.lineTangency,F=D.theta,$=l?Math.abs(u-c):Math.abs(u-c)-R-F;if($<0&&o===0)return"".concat(E,"L").concat(n,",").concat(r,"Z");E+="L".concat(L.x,",").concat(L.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,").concat(+($>180),",").concat(+(d>0),",").concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,"Z")}else E+="L".concat(n,",").concat(r,"Z");return E},vde={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},e8=function(e){var n=Ak(Ak({},vde),e),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,p=n.className;if(o<a||c===d)return null;var h=$t("recharts-sector",p),v=o-a,y=di(s,v,0,!0),w;return y>0&&Math.abs(c-d)<360?w=yde({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(y,v/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):w=QD({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:c,endAngle:d}),ce.createElement("path",b_({},yt(n,!0),{className:h,d:w,role:"img"}))};function cm(t){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(t)}function w_(){return w_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w_.apply(this,arguments)}function Ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ek(Object(n),!0).forEach(function(r){xde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xde(t,e,n){return e=bde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bde(t){var e=wde(t,"string");return cm(e)=="symbol"?e:e+""}function wde(t,e){if(cm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tk={curveBasisClosed:xY,curveBasisOpen:bY,curveBasis:vY,curveBumpX:iY,curveBumpY:aY,curveLinearClosed:wY,curveLinear:S1,curveMonotoneX:_Y,curveMonotoneY:SY,curveNatural:AY,curveStep:EY,curveStepAfter:TY,curveStepBefore:NY},cy=function(e){return e.x===+e.x&&e.y===+e.y},Mh=function(e){return e.x},Dh=function(e){return e.y},_de=function(e,n){if(Et(e))return e;var r="curve".concat(w1(e));return(r==="curveMonotone"||r==="curveBump")&&n?Tk["".concat(r).concat(n==="vertical"?"Y":"X")]:Tk[r]||S1},Sde=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=_de(r,s),d=u?a.filter(function(y){return cy(y)}):a,p;if(Array.isArray(o)){var h=u?o.filter(function(y){return cy(y)}):o,v=d.map(function(y,w){return Nk(Nk({},y),{},{base:h[w]})});return s==="vertical"?p=ey().y(Dh).x1(Mh).x0(function(y){return y.base.x}):p=ey().x(Mh).y1(Dh).y0(function(y){return y.base.y}),p.defined(cy).curve(c),p(v)}return s==="vertical"&&Be(o)?p=ey().y(Dh).x1(Mh).x0(o):Be(o)?p=ey().x(Mh).y1(Dh).y0(o):p=KL().x(Mh).y(Dh),p.defined(cy).curve(c),p(d)},i0=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?Sde(e):i;return X.createElement("path",w_({},yt(e,!1),Pv(e),{className:$t("recharts-curve",n),d:o,ref:a}))},t8={exports:{}},Ade="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ede=Ade,Nde=Ede;function n8(){}function r8(){}r8.resetWarningCache=n8;var Tde=function(){function t(r,i,a,o,s,l){if(l!==Nde){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r8,resetWarningCache:n8};return n.PropTypes=n,n};t8.exports=Tde();var Pde=t8.exports;const rn=dn(Pde);var Cde=Object.getOwnPropertyNames,kde=Object.getOwnPropertySymbols,Ide=Object.prototype.hasOwnProperty;function Pk(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function dy(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,o=a.get(n),s=a.get(r);if(o&&s)return o===r&&s===n;a.set(n,r),a.set(r,n);var l=t(n,r,i);return a.delete(n),a.delete(r),l}}function Ode(t){return t!=null?t[Symbol.toStringTag]:void 0}function Ck(t){return Cde(t).concat(kde(t))}var jde=Object.hasOwn||function(t,e){return Ide.call(t,e)};function pc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Rde="__v",Lde="__o",Mde="_owner",kk=Object.getOwnPropertyDescriptor,Ik=Object.keys;function Dde(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function $de(t,e){return pc(t.getTime(),e.getTime())}function Fde(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Ude(t,e){return t===e}function Ok(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var u=e.entries(),c=!1,d=0;(s=u.next())&&!s.done;){if(i[d]){d++;continue}var p=o.value,h=s.value;if(n.equals(p[0],h[0],l,d,t,e,n)&&n.equals(p[1],h[1],p[0],h[0],t,e,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}var Bde=pc;function qde(t,e,n){var r=Ik(t),i=r.length;if(Ik(e).length!==i)return!1;for(;i-- >0;)if(!i8(t,e,n,r[i]))return!1;return!0}function $h(t,e,n){var r=Ck(t),i=r.length;if(Ck(e).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=r[i],!i8(t,e,n,a)||(o=kk(t,a),s=kk(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function Vde(t,e){return pc(t.valueOf(),e.valueOf())}function zde(t,e){return t.source===e.source&&t.flags===e.flags}function jk(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),o,s;(o=a.next())&&!o.done;){for(var l=e.values(),u=!1,c=0;(s=l.next())&&!s.done;){if(!i[c]&&n.equals(o.value,s.value,o.value,s.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function Hde(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Gde(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function i8(t,e,n,r){return(r===Mde||r===Lde||r===Rde)&&(t.$$typeof||e.$$typeof)?!0:jde(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Wde="[object Arguments]",Kde="[object Boolean]",Jde="[object Date]",Yde="[object Error]",Xde="[object Map]",Zde="[object Number]",Qde="[object Object]",efe="[object RegExp]",tfe="[object Set]",nfe="[object String]",rfe="[object URL]",ife=Array.isArray,Rk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Lk=Object.assign,afe=Object.prototype.toString.call.bind(Object.prototype.toString);function ofe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,s=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,c=t.areSetsEqual,d=t.areTypedArraysEqual,p=t.areUrlsEqual,h=t.unknownTagComparators;return function(y,w,b){if(y===w)return!0;if(y==null||w==null)return!1;var _=typeof y;if(_!==typeof w)return!1;if(_!=="object")return _==="number"?o(y,w,b):_==="function"?i(y,w,b):!1;var A=y.constructor;if(A!==w.constructor)return!1;if(A===Object)return s(y,w,b);if(ife(y))return e(y,w,b);if(Rk!=null&&Rk(y))return d(y,w,b);if(A===Date)return n(y,w,b);if(A===RegExp)return u(y,w,b);if(A===Map)return a(y,w,b);if(A===Set)return c(y,w,b);var N=afe(y);if(N===Jde)return n(y,w,b);if(N===efe)return u(y,w,b);if(N===Xde)return a(y,w,b);if(N===tfe)return c(y,w,b);if(N===Qde)return typeof y.then!="function"&&typeof w.then!="function"&&s(y,w,b);if(N===rfe)return p(y,w,b);if(N===Yde)return r(y,w,b);if(N===Wde)return s(y,w,b);if(N===Kde||N===Zde||N===nfe)return l(y,w,b);if(h){var E=h[N];if(!E){var P=Ode(y);P&&(E=h[P])}if(E)return E(y,w,b)}return!1}}function sfe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?$h:Dde,areDatesEqual:$de,areErrorsEqual:Fde,areFunctionsEqual:Ude,areMapsEqual:r?Pk(Ok,$h):Ok,areNumbersEqual:Bde,areObjectsEqual:r?$h:qde,arePrimitiveWrappersEqual:Vde,areRegExpsEqual:zde,areSetsEqual:r?Pk(jk,$h):jk,areTypedArraysEqual:r?$h:Hde,areUrlsEqual:Gde,unknownTagComparators:void 0};if(n&&(i=Lk({},i,n(i))),e){var a=dy(i.areArraysEqual),o=dy(i.areMapsEqual),s=dy(i.areObjectsEqual),l=dy(i.areSetsEqual);i=Lk({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function lfe(t){return function(e,n,r,i,a,o,s){return t(e,n,s)}}function ufe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(l,u){var c=r(),d=c.cache,p=d===void 0?e?new WeakMap:void 0:d,h=c.meta;return n(l,u,{cache:p,equals:i,meta:h,strict:a})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return n(l,u,o)}}var cfe=ql();ql({strict:!0});ql({circular:!0});ql({circular:!0,strict:!0});ql({createInternalComparator:function(){return pc}});ql({strict:!0,createInternalComparator:function(){return pc}});ql({circular:!0,createInternalComparator:function(){return pc}});ql({circular:!0,createInternalComparator:function(){return pc},strict:!0});function ql(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,o=a===void 0?!1:a,s=sfe(t),l=ofe(s),u=r?r(l):lfe(l);return ufe({circular:n,comparator:l,createState:i,equals:u,strict:o})}function dfe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Mk(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):dfe(i)};requestAnimationFrame(r)}function __(t){"@babel/helpers - typeof";return __=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__(t)}function ffe(t){return gfe(t)||mfe(t)||pfe(t)||hfe()}function hfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pfe(t,e){if(t){if(typeof t=="string")return Dk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dk(t,e)}}function Dk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gfe(t){if(Array.isArray(t))return t}function yfe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,s=ffe(o),l=s[0],u=s.slice(1);if(typeof l=="number"){Mk(i.bind(null,u),l);return}i(l),Mk(i.bind(null,u));return}__(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function dm(t){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(t)}function $k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(n),!0).forEach(function(r){a8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a8(t,e,n){return e=vfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vfe(t){var e=xfe(t,"string");return dm(e)==="symbol"?e:String(e)}function xfe(t,e){if(dm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bfe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},wfe=function(e){return e},_fe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},dp=function(e,n){return Object.keys(n).reduce(function(r,i){return Fk(Fk({},r),{},a8({},i,e(i,n[i])))},{})},Uk=function(e,n,r){return e.map(function(i){return"".concat(_fe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Sfe(t,e){return Nfe(t)||Efe(t,e)||o8(t,e)||Afe()}function Afe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Efe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Nfe(t){if(Array.isArray(t))return t}function Tfe(t){return kfe(t)||Cfe(t)||o8(t)||Pfe()}function Pfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o8(t,e){if(t){if(typeof t=="string")return S_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S_(t,e)}}function Cfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kfe(t){if(Array.isArray(t))return S_(t)}function S_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a0=1e-4,s8=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},l8=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},Bk=function(e,n){return function(r){var i=s8(e,n);return l8(i,r)}},Ife=function(e,n){return function(r){var i=s8(e,n),a=[].concat(Tfe(i.map(function(o,s){return o*s}).slice(1)),[0]);return l8(a,r)}},qk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),c=Sfe(u,4);i=c[0],a=c[1],o=c[2],s=c[3]}}}var d=Bk(i,o),p=Bk(a,s),h=Ife(i,o),v=function(b){return b>1?1:b<0?0:b},y=function(b){for(var _=b>1?1:b,A=_,N=0;N<8;++N){var E=d(A)-_,P=h(A);if(Math.abs(E-_)<a0||P<a0)return p(A);A=v(A-E/P)}return p(A)};return y.isStepper=!1,y},Ofe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(c,d,p){var h=-(c-d)*r,v=p*a,y=p+(h-v)*s/1e3,w=p*s/1e3+c;return Math.abs(w-d)<a0&&Math.abs(y)<a0?[d,0]:[w,y]};return l.isStepper=!0,l.dt=s,l},jfe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qk(i);case"spring":return Ofe();default:if(i.split("(")[0]==="cubic-bezier")return qk(i)}return typeof i=="function"?i:null};function fm(t){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(t)}function Vk(t){return Mfe(t)||Lfe(t)||u8(t)||Rfe()}function Rfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mfe(t){if(Array.isArray(t))return E_(t)}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){A_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A_(t,e,n){return e=Dfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dfe(t){var e=$fe(t,"string");return fm(e)==="symbol"?e:String(e)}function $fe(t,e){if(fm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ffe(t,e){return qfe(t)||Bfe(t,e)||u8(t,e)||Ufe()}function Ufe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u8(t,e){if(t){if(typeof t=="string")return E_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E_(t,e)}}function E_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function qfe(t){if(Array.isArray(t))return t}var o0=function(e,n,r){return e+(n-e)*r},N_=function(e){var n=e.from,r=e.to;return n!==r},Vfe=function t(e,n,r){var i=dp(function(a,o){if(N_(o)){var s=e(o.from,o.to,o.velocity),l=Ffe(s,2),u=l[0],c=l[1];return Ur(Ur({},o),{},{from:u,velocity:c})}return o},n);return r<1?dp(function(a,o){return N_(o)?Ur(Ur({},o),{},{velocity:o0(o.velocity,i[a].velocity,r),from:o0(o.from,i[a].from,r)}):o},n):t(e,i,r-1)};const zfe=function(t,e,n,r,i){var a=bfe(t,e),o=a.reduce(function(w,b){return Ur(Ur({},w),{},A_({},b,[t[b],e[b]]))},{}),s=a.reduce(function(w,b){return Ur(Ur({},w),{},A_({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,u,c,d=function(){return null},p=function(){return dp(function(b,_){return _.from},s)},h=function(){return!Object.values(s).filter(N_).length},v=function(b){u||(u=b);var _=b-u,A=_/n.dt;s=Vfe(n,s,A),i(Ur(Ur(Ur({},t),e),p())),u=b,h()||(l=requestAnimationFrame(d))},y=function(b){c||(c=b);var _=(b-c)/r,A=dp(function(E,P){return o0.apply(void 0,Vk(P).concat([n(_)]))},o);if(i(Ur(Ur(Ur({},t),e),A)),_<1)l=requestAnimationFrame(d);else{var N=dp(function(E,P){return o0.apply(void 0,Vk(P).concat([n(1)]))},o);i(Ur(Ur(Ur({},t),e),N))}};return d=n.isStepper?v:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}var Hfe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Gfe(t,e){if(t==null)return{};var n=Wfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wfe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Bb(t){return Xfe(t)||Yfe(t)||Jfe(t)||Kfe()}function Kfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jfe(t,e){if(t){if(typeof t=="string")return T_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T_(t,e)}}function Yfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xfe(t){if(Array.isArray(t))return T_(t)}function T_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ua(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hk(Object(n),!0).forEach(function(r){Jh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jh(t,e,n){return e=c8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c8(r.key),r)}}function ehe(t,e,n){return e&&Qfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c8(t){var e=the(t,"string");return nf(e)==="symbol"?e:String(e)}function the(t,e){if(nf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P_(t,e)}function P_(t,e){return P_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},P_(t,e)}function rhe(t){var e=ihe();return function(){var r=s0(t),i;if(e){var a=s0(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return C_(this,i)}}function C_(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k_(t)}function k_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ihe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s0(t){return s0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},s0(t)}var Ro=function(t){nhe(n,t);var e=rhe(n);function n(r,i){var a;Zfe(this,n),a=e.call(this,r,i);var o=a.props,s=o.isActive,l=o.attributeName,u=o.from,c=o.to,d=o.steps,p=o.children,h=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(k_(a)),a.changeStyle=a.changeStyle.bind(k_(a)),!s||h<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:c}),C_(a);if(d&&d.length)a.state={style:d[0].style};else if(u){if(typeof p=="function")return a.state={style:u},C_(a);a.state={style:l?Jh({},l,u):u}}else a.state={style:{}};return a}return ehe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,c=a.to,d=a.from,p=this.state.style;if(s){if(!o){var h={style:l?Jh({},l,c):c};this.state&&p&&(l&&p[l]!==c||!l&&p!==c)&&this.setState(h);return}if(!(cfe(i.to,c)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||u?d:i.to;if(this.state&&p){var w={style:l?Jh({},l,y):y};(l&&p[l]!==y||!l&&p!==y)&&this.setState(w)}this.runAnimation(Ua(Ua({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,u=i.easing,c=i.begin,d=i.onAnimationEnd,p=i.onAnimationStart,h=zfe(o,s,jfe(u),l,this.changeStyle),v=function(){a.stopJSAnimation=h()};this.manager.start([p,c,v,l,d])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,u=o[0],c=u.style,d=u.duration,p=d===void 0?0:d,h=function(y,w,b){if(b===0)return y;var _=w.duration,A=w.easing,N=A===void 0?"ease":A,E=w.style,P=w.properties,I=w.onAnimationEnd,O=b>0?o[b-1]:w,R=P||Object.keys(E);if(typeof N=="function"||N==="spring")return[].concat(Bb(y),[a.runJSAnimation.bind(a,{from:O.style,to:E,duration:_,easing:N}),_]);var D=Uk(R,_,N),C=Ua(Ua(Ua({},O.style),E),{},{transition:D});return[].concat(Bb(y),[C,_,I]).filter(wfe)};return this.manager.start([l].concat(Bb(o.reduce(h,[c,Math.max(p,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=yfe());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,d=i.onAnimationEnd,p=i.steps,h=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var y=s?Jh({},s,l):l,w=Uk(Object.keys(y),o,u);v.start([c,a,Ua(Ua({},y),{},{transition:w}),o,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Gfe(i,Hfe),u=X.Children.count(a),c=this.state.style;if(typeof a=="function")return a(c);if(!s||u===0||o<=0)return a;var d=function(h){var v=h.props,y=v.style,w=y===void 0?{}:y,b=v.className,_=X.cloneElement(h,Ua(Ua({},l),{},{style:Ua(Ua({},w),c),className:b}));return _};return u===1?d(X.Children.only(a)):ce.createElement("div",null,X.Children.map(a,function(p){return d(p)}))}}]),n}(X.PureComponent);Ro.displayName="Animate";Ro.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ro.propTypes={from:rn.oneOfType([rn.object,rn.string]),to:rn.oneOfType([rn.object,rn.string]),attributeName:rn.string,duration:rn.number,begin:rn.number,easing:rn.oneOfType([rn.string,rn.func]),steps:rn.arrayOf(rn.shape({duration:rn.number.isRequired,style:rn.object.isRequired,easing:rn.oneOfType([rn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),rn.func]),properties:rn.arrayOf("string"),onAnimationEnd:rn.func})),children:rn.oneOfType([rn.node,rn.func]),isActive:rn.bool,canBegin:rn.bool,onAnimationEnd:rn.func,shouldReAnimate:rn.bool,onAnimationStart:rn.func,onAnimationReStart:rn.func};function hm(t){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(t)}function l0(){return l0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l0.apply(this,arguments)}function ahe(t,e){return uhe(t)||lhe(t,e)||she(t,e)||ohe()}function ohe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function she(t,e){if(t){if(typeof t=="string")return Gk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gk(t,e)}}function Gk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function uhe(t){if(Array.isArray(t))return t}function Wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wk(Object(n),!0).forEach(function(r){che(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function che(t,e,n){return e=dhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dhe(t){var e=fhe(t,"string");return hm(e)=="symbol"?e:e+""}function fhe(t,e){if(hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jk=function(e,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(o>0&&a instanceof Array){for(var d=[0,0,0,0],p=0,h=4;p<h;p++)d[p]=a[p]>o?o:a[p];c="M".concat(e,",").concat(n+s*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+s*d[1])),c+="L ".concat(e+r,",").concat(n+i-s*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),c+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-s*d[3])),c+="Z"}else if(o>0&&a===+a&&a>0){var v=Math.min(o,a);c="M ".concat(e,",").concat(n+s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+l*v,",").concat(n,`
            L `).concat(e+r-l*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+s*v,`
            L `).concat(e+r,",").concat(n+i-s*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-l*v,",").concat(n+i,`
            L `).concat(e+l*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+i-s*v," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},hhe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,o=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(a,a+s),c=Math.max(a,a+s),d=Math.min(o,o+l),p=Math.max(o,o+l);return r>=u&&r<=c&&i>=d&&i<=p}return!1},phe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IA=function(e){var n=Kk(Kk({},phe),e),r=X.useRef(),i=X.useState(-1),a=ahe(i,2),o=a[0],s=a[1];X.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&s(N)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,p=n.radius,h=n.className,v=n.animationEasing,y=n.animationDuration,w=n.animationBegin,b=n.isAnimationActive,_=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var A=$t("recharts-rectangle",h);return _?ce.createElement(Ro,{canBegin:o>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:y,animationEasing:v,isActive:_},function(N){var E=N.width,P=N.height,I=N.x,O=N.y;return ce.createElement(Ro,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:y,isActive:b,easing:v},ce.createElement("path",l0({},yt(n,!0),{className:A,d:Jk(I,O,E,P,p),ref:r})))}):ce.createElement("path",l0({},yt(n,!0),{className:A,d:Jk(l,u,c,d,p)}))},mhe=["points","className","baseLinePoints","connectNulls"];function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ud.apply(this,arguments)}function ghe(t,e){if(t==null)return{};var n=yhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yk(t){return whe(t)||bhe(t)||xhe(t)||vhe()}function vhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xhe(t,e){if(t){if(typeof t=="string")return I_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I_(t,e)}}function bhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function whe(t){if(Array.isArray(t))return I_(t)}function I_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xk=function(e){return e&&e.x===+e.x&&e.y===+e.y},_he=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){Xk(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Xk(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},fp=function(e,n){var r=_he(e);n&&(r=[r.reduce(function(a,o){return[].concat(Yk(a),Yk(o))},[])]);var i=r.map(function(a){return a.reduce(function(o,s,l){return"".concat(o).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},She=function(e,n,r){var i=fp(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(fp(n.reverse(),r).slice(1))},Ahe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,o=ghe(e,mhe);if(!n||!n.length)return null;var s=$t("recharts-polygon",r);if(i&&i.length){var l=o.stroke&&o.stroke!=="none",u=She(n,i,a);return ce.createElement("g",{className:s},ce.createElement("path",ud({},yt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),l?ce.createElement("path",ud({},yt(o,!0),{fill:"none",d:fp(n,a)})):null,l?ce.createElement("path",ud({},yt(o,!0),{fill:"none",d:fp(i,a)})):null)}var c=fp(n,a);return ce.createElement("path",ud({},yt(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",className:s,d:c}))};function O_(){return O_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O_.apply(this,arguments)}var F1=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,o=$t("recharts-dot",a);return n===+n&&r===+r&&i===+i?X.createElement("circle",O_({},yt(e,!1),Pv(e),{className:o,cx:n,cy:r,r:i})):null};function pm(t){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pm(t)}var Ehe=["x","y","top","left","width","height","className"];function j_(){return j_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j_.apply(this,arguments)}function Zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zk(Object(n),!0).forEach(function(r){The(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function The(t,e,n){return e=Phe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Phe(t){var e=Che(t,"string");return pm(e)=="symbol"?e:e+""}function Che(t,e){if(pm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function khe(t,e){if(t==null)return{};var n=Ihe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ihe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ohe=function(e,n,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},jhe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,p=e.height,h=p===void 0?0:p,v=e.className,y=khe(e,Ehe),w=Nhe({x:r,y:a,top:s,left:u,width:d,height:h},y);return!Be(r)||!Be(a)||!Be(d)||!Be(h)||!Be(s)||!Be(u)?null:ce.createElement("path",j_({},yt(w,!0),{className:$t("recharts-cross",v),d:Ohe(r,a,d,h,s,u)}))},Rhe=R1,Lhe=_D,Mhe=Mo;function Dhe(t,e){return t&&t.length?Rhe(t,Mhe(e),Lhe):void 0}var $he=Dhe;const Fhe=dn($he);var Uhe=R1,Bhe=Mo,qhe=SD;function Vhe(t,e){return t&&t.length?Uhe(t,Bhe(e),qhe):void 0}var zhe=Vhe;const Hhe=dn(zhe);var Ghe=["cx","cy","angle","ticks","axisLine"],Whe=["ticks","tick","angle","tickFormatter","stroke"];function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hp.apply(this,arguments)}function Qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qk(Object(n),!0).forEach(function(r){U1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e3(t,e){if(t==null)return{};var n=Khe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Khe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Jhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f8(r.key),r)}}function Yhe(t,e,n){return e&&t3(t.prototype,e),n&&t3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xhe(t,e,n){return e=u0(e),Zhe(t,d8()?Reflect.construct(e,n||[],u0(t).constructor):e.apply(t,n))}function Zhe(t,e){if(e&&(rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qhe(t)}function Qhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d8=function(){return!!t})()}function u0(t){return u0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},u0(t)}function epe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R_(t,e)}function R_(t,e){return R_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R_(t,e)}function U1(t,e,n){return e=f8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f8(t){var e=tpe(t,"string");return rf(e)=="symbol"?e:e+""}function tpe(t,e){if(rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var B1=function(t){function e(){return Jhe(this,e),Xhe(this,e,arguments)}return epe(e,t),Yhe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,o=a.angle,s=a.cx,l=a.cy;return En(s,l,i,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,s=r.ticks,l=Fhe(s,function(c){return c.coordinate||0}),u=Hhe(s,function(c){return c.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,s=r.ticks,l=r.axisLine,u=e3(r,Ghe),c=s.reduce(function(v,y){return[Math.min(v[0],y.coordinate),Math.max(v[1],y.coordinate)]},[1/0,-1/0]),d=En(i,a,c[0],o),p=En(i,a,c[1],o),h=vu(vu(vu({},yt(u,!1)),{},{fill:"none"},yt(l,!1)),{},{x1:d.x,y1:d.y,x2:p.x,y2:p.y});return ce.createElement("line",hp({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,s=i.angle,l=i.tickFormatter,u=i.stroke,c=e3(i,Whe),d=this.getTickTextAnchor(),p=yt(c,!1),h=yt(o,!1),v=a.map(function(y,w){var b=r.getTickValueCoord(y),_=vu(vu(vu(vu({textAnchor:d,transform:"rotate(".concat(90-s,", ").concat(b.x,", ").concat(b.y,")")},p),{},{stroke:"none",fill:u},h),{},{index:w},b),{},{payload:y});return ce.createElement(Yt,hp({className:$t("recharts-polar-radius-axis-tick",XD(o)),key:"tick-".concat(y.coordinate)},Qu(r.props,y,w)),e.renderTickItem(o,_,l?l(y.value,w):y.value))});return ce.createElement(Yt,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,o=r.tick;return!i||!i.length?null:ce.createElement(Yt,{className:$t("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),Or.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return ce.isValidElement(r)?o=ce.cloneElement(r,i):Et(r)?o=r(i):o=ce.createElement(ec,hp({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(X.PureComponent);U1(B1,"displayName","PolarRadiusAxis");U1(B1,"axisType","radiusAxis");U1(B1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function ku(){return ku=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ku.apply(this,arguments)}function n3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n3(Object(n),!0).forEach(function(r){q1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function npe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p8(r.key),r)}}function rpe(t,e,n){return e&&r3(t.prototype,e),n&&r3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ipe(t,e,n){return e=c0(e),ape(t,h8()?Reflect.construct(e,n||[],c0(t).constructor):e.apply(t,n))}function ape(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ope(t)}function ope(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h8=function(){return!!t})()}function c0(t){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c0(t)}function spe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L_(t,e)}function L_(t,e){return L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L_(t,e)}function q1(t,e,n){return e=p8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p8(t){var e=lpe(t,"string");return af(e)=="symbol"?e:e+""}function lpe(t,e){if(af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var upe=Math.PI/180,i3=1e-5,V1=function(t){function e(){return npe(this,e),ipe(this,e,arguments)}return spe(e,t),rpe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,o=i.cy,s=i.radius,l=i.orientation,u=i.tickSize,c=u||8,d=En(a,o,s,r.coordinate),p=En(a,o,s+(l==="inner"?-1:1)*c,r.coordinate);return{x1:d.x,y1:d.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*upe),o;return a>i3?o=i==="outer"?"start":"end":a<-i3?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.radius,s=r.axisLine,l=r.axisLineType,u=xu(xu({},yt(this.props,!1)),{},{fill:"none"},yt(s,!1));if(l==="circle")return ce.createElement(F1,ku({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:o}));var c=this.props.ticks,d=c.map(function(p){return En(i,a,o,p.coordinate)});return ce.createElement(Ahe,ku({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,s=i.tickLine,l=i.tickFormatter,u=i.stroke,c=yt(this.props,!1),d=yt(o,!1),p=xu(xu({},c),{},{fill:"none"},yt(s,!1)),h=a.map(function(v,y){var w=r.getTickLineCoord(v),b=r.getTickTextAnchor(v),_=xu(xu(xu({textAnchor:b},c),{},{stroke:"none",fill:u},d),{},{index:y,payload:v,x:w.x2,y:w.y2});return ce.createElement(Yt,ku({className:$t("recharts-polar-angle-axis-tick",XD(o)),key:"tick-".concat(v.coordinate)},Qu(r.props,v,y)),s&&ce.createElement("line",ku({className:"recharts-polar-angle-axis-tick-line"},p,w)),o&&e.renderTickItem(o,_,l?l(v.value,y):v.value))});return ce.createElement(Yt,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,o=r.axisLine;return a<=0||!i||!i.length?null:ce.createElement(Yt,{className:$t("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var o;return ce.isValidElement(r)?o=ce.cloneElement(r,i):Et(r)?o=r(i):o=ce.createElement(ec,ku({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(X.PureComponent);q1(V1,"displayName","PolarAngleAxis");q1(V1,"axisType","angleAxis");q1(V1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var cpe=vM,dpe=cpe(Object.getPrototypeOf,Object),fpe=dpe,hpe=Ps,ppe=fpe,mpe=Cs,gpe="[object Object]",ype=Function.prototype,vpe=Object.prototype,m8=ype.toString,xpe=vpe.hasOwnProperty,bpe=m8.call(Object);function wpe(t){if(!mpe(t)||hpe(t)!=gpe)return!1;var e=ppe(t);if(e===null)return!0;var n=xpe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&m8.call(n)==bpe}var _pe=wpe;const Spe=dn(_pe);var Ape=Ps,Epe=Cs,Npe="[object Boolean]";function Tpe(t){return t===!0||t===!1||Epe(t)&&Ape(t)==Npe}var Ppe=Tpe;const Cpe=dn(Ppe);function mm(t){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mm(t)}function d0(){return d0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d0.apply(this,arguments)}function kpe(t,e){return Rpe(t)||jpe(t,e)||Ope(t,e)||Ipe()}function Ipe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ope(t,e){if(t){if(typeof t=="string")return a3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a3(t,e)}}function a3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Rpe(t){if(Array.isArray(t))return t}function o3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o3(Object(n),!0).forEach(function(r){Lpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lpe(t,e,n){return e=Mpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mpe(t){var e=Dpe(t,"string");return mm(e)=="symbol"?e:e+""}function Dpe(t,e){if(mm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l3=function(e,n,r,i,a){var o=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-o/2,",").concat(n+a),s+="L ".concat(e+r-o/2-i,",").concat(n+a),s+="L ".concat(e,",").concat(n," Z"),s},$pe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fpe=function(e){var n=s3(s3({},$pe),e),r=X.useRef(),i=X.useState(-1),a=kpe(i,2),o=a[0],s=a[1];X.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&s(A)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,p=n.height,h=n.className,v=n.animationEasing,y=n.animationDuration,w=n.animationBegin,b=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||p!==+p||c===0&&d===0||p===0)return null;var _=$t("recharts-trapezoid",h);return b?ce.createElement(Ro,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:p,x:l,y:u},duration:y,animationEasing:v,isActive:b},function(A){var N=A.upperWidth,E=A.lowerWidth,P=A.height,I=A.x,O=A.y;return ce.createElement(Ro,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:y,easing:v},ce.createElement("path",d0({},yt(n,!0),{className:_,d:l3(I,O,N,E,P),ref:r})))}):ce.createElement("g",null,ce.createElement("path",d0({},yt(n,!0),{className:_,d:l3(l,u,c,d,p)})))},Upe=["option","shapeType","propTransformer","activeClassName","isActive"];function gm(t){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gm(t)}function Bpe(t,e){if(t==null)return{};var n=qpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function u3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u3(Object(n),!0).forEach(function(r){Vpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vpe(t,e,n){return e=zpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zpe(t){var e=Hpe(t,"string");return gm(e)=="symbol"?e:e+""}function Hpe(t,e){if(gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gpe(t,e){return f0(f0({},e),t)}function Wpe(t,e){return t==="symbols"}function c3(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ce.createElement(IA,n);case"trapezoid":return ce.createElement(Fpe,n);case"sector":return ce.createElement(e8,n);case"symbols":if(Wpe(e))return ce.createElement(YS,n);break;default:return null}}function Kpe(t){return X.isValidElement(t)?t.props:t}function g8(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Gpe:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,s=t.isActive,l=Bpe(t,Upe),u;if(X.isValidElement(e))u=X.cloneElement(e,f0(f0({},l),Kpe(e)));else if(Et(e))u=e(l);else if(Spe(e)&&!Cpe(e)){var c=i(e,l);u=ce.createElement(c3,{shapeType:n,elementProps:c})}else{var d=l;u=ce.createElement(c3,{shapeType:n,elementProps:d})}return s?ce.createElement(Yt,{className:o},u):u}function z1(t,e){return e!=null&&"trapezoids"in t.props}function H1(t,e){return e!=null&&"sectors"in t.props}function ym(t,e){return e!=null&&"points"in t.props}function Jpe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function Ype(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Xpe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Zpe(t,e){var n;return z1(t,e)?n=Jpe:H1(t,e)?n=Ype:ym(t,e)&&(n=Xpe),n}function Qpe(t,e){var n;return z1(t,e)?n="trapezoids":H1(t,e)?n="sectors":ym(t,e)&&(n="points"),n}function eme(t,e){if(z1(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(H1(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return ym(t,e)?e.payload:{}}function tme(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=Qpe(n,e),a=eme(n,e),o=r.filter(function(l,u){var c=qm(a,l),d=n.props[i].filter(function(v){var y=Zpe(n,e);return y(v,e)}),p=n.props[i].indexOf(d[d.length-1]),h=u===p;return c&&h}),s=r.indexOf(o[o.length-1]);return s}var Ly;function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function cd(){return cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cd.apply(this,arguments)}function d3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d3(Object(n),!0).forEach(function(r){ba(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v8(r.key),r)}}function rme(t,e,n){return e&&f3(t.prototype,e),n&&f3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ime(t,e,n){return e=h0(e),ame(t,y8()?Reflect.construct(e,n||[],h0(t).constructor):e.apply(t,n))}function ame(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ome(t)}function ome(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y8=function(){return!!t})()}function h0(t){return h0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},h0(t)}function sme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M_(t,e)}function M_(t,e){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},M_(t,e)}function ba(t,e,n){return e=v8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v8(t){var e=lme(t,"string");return of(e)=="symbol"?e:e+""}function lme(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Is=function(t){function e(n){var r;return nme(this,e),r=ime(this,e,[n]),ba(r,"pieRef",null),ba(r,"sectorRefs",[]),ba(r,"id",Lf("recharts-pie-")),ba(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Et(i)&&i()}),ba(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Et(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return sme(e,t),rme(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,s=a.labelLine,l=a.dataKey,u=a.valueKey,c=yt(this.props,!1),d=yt(o,!1),p=yt(s,!1),h=o&&o.offsetRadius||20,v=r.map(function(y,w){var b=(y.startAngle+y.endAngle)/2,_=En(y.cx,y.cy,y.outerRadius+h,b),A=_n(_n(_n(_n({},c),y),{},{stroke:"none"},d),{},{index:w,textAnchor:e.getTextAnchor(_.x,y.cx)},_),N=_n(_n(_n(_n({},c),y),{},{fill:"none",stroke:y.fill},p),{},{index:w,points:[En(y.cx,y.cy,y.outerRadius,b),_]}),E=l;return Rt(l)&&Rt(u)?E="value":Rt(l)&&(E=u),ce.createElement(Yt,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(w)},s&&e.renderLabelLineItem(s,N,"line"),e.renderLabelItem(o,A,Sr(y,E)))});return ce.createElement(Yt,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,o=a.activeShape,s=a.blendStroke,l=a.inactiveShape;return r.map(function(u,c){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var d=i.isActiveIndex(c),p=l&&i.hasActiveIndex()?l:null,h=d?o:p,v=_n(_n({},u),{},{stroke:s?u.fill:u.stroke,tabIndex:-1});return ce.createElement(Yt,cd({ref:function(w){w&&!i.sectorRefs.includes(w)&&i.sectorRefs.push(w)},tabIndex:-1,className:"recharts-pie-sector"},Qu(i.props,u,c),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(c)}),ce.createElement(g8,cd({option:h,isActive:d,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,o=i.isAnimationActive,s=i.animationBegin,l=i.animationDuration,u=i.animationEasing,c=i.animationId,d=this.state,p=d.prevSectors,h=d.prevIsAnimationActive;return ce.createElement(Ro,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var y=v.t,w=[],b=a&&a[0],_=b.startAngle;return a.forEach(function(A,N){var E=p&&p[N],P=N>0?Yi(A,"paddingAngle",0):0;if(E){var I=Vi(E.endAngle-E.startAngle,A.endAngle-A.startAngle),O=_n(_n({},A),{},{startAngle:_+P,endAngle:_+I(y)+P});w.push(O),_=O.endAngle}else{var R=A.endAngle,D=A.startAngle,C=Vi(0,R-D),L=C(y),F=_n(_n({},A),{},{startAngle:_+P,endAngle:_+L+P});w.push(F),_=F.endAngle}}),ce.createElement(Yt,null,r.renderSectorsStatically(w))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!qm(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,o=i.sectors,s=i.className,l=i.label,u=i.cx,c=i.cy,d=i.innerRadius,p=i.outerRadius,h=i.isAnimationActive,v=this.state.isAnimationFinished;if(a||!o||!o.length||!Be(u)||!Be(c)||!Be(d)||!Be(p))return null;var y=$t("recharts-pie",s);return ce.createElement(Yt,{tabIndex:this.props.rootTabIndex,className:y,ref:function(b){r.pieRef=b}},this.renderSectors(),l&&this.renderLabels(o),Or.renderCallByParent(this.props,null,!1),(!h||v)&&ms.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(ce.isValidElement(r))return ce.cloneElement(r,i);if(Et(r))return r(i);var o=$t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return ce.createElement(i0,cd({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,a){if(ce.isValidElement(r))return ce.cloneElement(r,i);var o=a;if(Et(r)&&(o=r(i),ce.isValidElement(o)))return o;var s=$t("recharts-pie-label-text",typeof r!="boolean"&&!Et(r)?r.className:"");return ce.createElement(ec,cd({},i,{alignmentBaseline:"middle",className:s}),o)}}])}(X.PureComponent);Ly=Is;ba(Is,"displayName","Pie");ba(Is,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!dc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ba(Is,"parseDeltaAngle",function(t,e){var n=ci(e-t),r=Math.min(Math.abs(e-t),360);return n*r});ba(Is,"getRealPieData",function(t){var e=t.data,n=t.children,r=yt(t,!1),i=Xi(n,Dm);return e&&e.length?e.map(function(a,o){return _n(_n(_n({payload:a},r),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return _n(_n({},r),a.props)}):[]});ba(Is,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,o=YD(i,a),s=r+di(t.cx,i,i/2),l=n+di(t.cy,a,a/2),u=di(t.innerRadius,o,0),c=di(t.outerRadius,o,o*.8),d=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:s,cy:l,innerRadius:u,outerRadius:c,maxRadius:d}});ba(Is,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?_n(_n({},e.type.defaultProps),e.props):e.props,i=Ly.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,o=r.startAngle,s=r.endAngle,l=r.paddingAngle,u=r.dataKey,c=r.nameKey,d=r.valueKey,p=r.tooltipType,h=Math.abs(r.minAngle),v=Ly.parseCoordinateOfPie(r,n),y=Ly.parseDeltaAngle(o,s),w=Math.abs(y),b=u;Rt(u)&&Rt(d)?(eo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Rt(u)&&(eo(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=d);var _=i.filter(function(O){return Sr(O,b,0)!==0}).length,A=(w>=360?_:_-1)*l,N=w-_*h-A,E=i.reduce(function(O,R){var D=Sr(R,b,0);return O+(Be(D)?D:0)},0),P;if(E>0){var I;P=i.map(function(O,R){var D=Sr(O,b,0),C=Sr(O,c,R),L=(Be(D)?D:0)/E,F;R?F=I.endAngle+ci(y)*l*(D!==0?1:0):F=o;var $=F+ci(y)*((D!==0?h:0)+L*N),V=(F+$)/2,Y=(v.innerRadius+v.outerRadius)/2,W=[{name:C,value:D,payload:O,dataKey:b,type:p}],U=En(v.cx,v.cy,Y,V);return I=_n(_n(_n({percent:L,cornerRadius:a,name:C,tooltipPayload:W,midAngle:V,middleRadius:Y,tooltipPosition:U},O),v),{},{value:Sr(O,b),startAngle:F,endAngle:$,payload:O,paddingAngle:ci(y)*l}),I})}return _n(_n({},v),{},{sectors:P,data:i})});var ume=Math.ceil,cme=Math.max;function dme(t,e,n,r){for(var i=-1,a=cme(ume((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=t,t+=n;return o}var fme=dme,hme=DM,h3=1/0,pme=17976931348623157e292;function mme(t){if(!t)return t===0?t:0;if(t=hme(t),t===h3||t===-h3){var e=t<0?-1:1;return e*pme}return t===t?t:0}var x8=mme,gme=fme,yme=T1,qb=x8;function vme(t){return function(e,n,r){return r&&typeof r!="number"&&yme(e,n,r)&&(n=r=void 0),e=qb(e),n===void 0?(n=e,e=0):n=qb(n),r=r===void 0?e<n?1:-1:qb(r),gme(e,n,r,t)}}var xme=vme,bme=xme,wme=bme(),_me=wme;const p0=dn(_me);function vm(t){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(t)}function p3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p3(Object(n),!0).forEach(function(r){b8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b8(t,e,n){return e=Sme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sme(t){var e=Ame(t,"string");return vm(e)=="symbol"?e:e+""}function Ame(t,e){if(vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eme=["Webkit","Moz","O","ms"],Nme=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Eme.reduce(function(a,o){return m3(m3({},a),{},b8({},o+r,n))},{});return i[e]=n,i};function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m0.apply(this,arguments)}function g3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g3(Object(n),!0).forEach(function(r){Ui(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_8(r.key),r)}}function Pme(t,e,n){return e&&y3(t.prototype,e),n&&y3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cme(t,e,n){return e=g0(e),kme(t,w8()?Reflect.construct(e,n||[],g0(t).constructor):e.apply(t,n))}function kme(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ime(t)}function Ime(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w8=function(){return!!t})()}function g0(t){return g0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},g0(t)}function Ome(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D_(t,e)}function D_(t,e){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},D_(t,e)}function Ui(t,e,n){return e=_8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _8(t){var e=jme(t,"string");return sf(e)=="symbol"?e:e+""}function jme(t,e){if(sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rme=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=up().domain(p0(0,l)).range([a,a+o-s]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},v3=function(e){return e.changedTouches&&!!e.changedTouches.length},lf=function(t){function e(n){var r;return Tme(this,e),r=Cme(this,e,[n]),Ui(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ui(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ui(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),Ui(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ui(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ui(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ui(r,"handleSlideDragStart",function(i){var a=v3(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Ome(e,t),Pme(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,c=u.length-1,d=Math.min(i,a),p=Math.max(i,a),h=e.getIndexInRange(o,d),v=e.getIndexInRange(o,p);return{startIndex:h-h%l,endIndex:v===c?c:v-v%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=Sr(a[r],s,r);return Et(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,p=l.startIndex,h=l.endIndex,v=l.onChange,y=r.pageX-a;y>0?y=Math.min(y,u+c-d-s,u+c-d-o):y<0&&(y=Math.max(y,u-o,u-s));var w=this.getIndex({startX:o+y,endX:s+y});(w.startIndex!==p||w.endIndex!==h)&&v&&v(w),this.setState({startX:o+y,endX:s+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=v3(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,u=this.state[o],c=this.props,d=c.x,p=c.width,h=c.travellerWidth,v=c.onChange,y=c.gap,w=c.data,b={startX:this.state.startX,endX:this.state.endX},_=r.pageX-a;_>0?_=Math.min(_,d+p-h-u):_<0&&(_=Math.max(_,d-u)),b[o]=u+_;var A=this.getIndex(b),N=A.startIndex,E=A.endIndex,P=function(){var O=w.length-1;return o==="startX"&&(s>l?N%y===0:E%y===0)||s<l&&E===O||o==="endX"&&(s>l?E%y===0:N%y===0)||s>l&&E===O};this.setState(Ui(Ui({},o,u+_),"brushMoveStartX",r.pageX),function(){v&&P()&&v(A)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,c=this.state[i],d=s.indexOf(c);if(d!==-1){var p=d+r;if(!(p===-1||p>=s.length)){var h=s[p];i==="startX"&&h>=u||i==="endX"&&h<=l||this.setState(Ui({},i,h),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.fill,u=r.stroke;return ce.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.data,u=r.children,c=r.padding,d=X.Children.only(u);return d?ce.cloneElement(d,{x:i,y:a,width:o,height:s,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,s=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,p=l.traveller,h=l.ariaLabel,v=l.data,y=l.startIndex,w=l.endIndex,b=Math.max(r,this.props.x),_=Vb(Vb({},yt(this.props,!1)),{},{x:b,y:u,width:c,height:d}),A=h||"Min value: ".concat((a=v[y])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=v[w])===null||o===void 0?void 0:o.name);return ce.createElement(Yt,{tabIndex:0,role:"slider","aria-label":A,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),s.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,_))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,u=a.travellerWidth,c=Math.min(r,i)+u,d=Math.max(Math.abs(i-r)-u,0);return ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:o,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,p=c.endX,h=5,v={pointerEvents:"none",fill:u};return ce.createElement(Yt,{className:"recharts-brush-texts"},ce.createElement(ec,m0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,p)-h,y:o+s/2},v),this.getTextOfTick(i)),ce.createElement(ec,m0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,p)+l+h,y:o+s/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,s=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,p=this.state,h=p.startX,v=p.endX,y=p.isTextActive,w=p.isSlideMoving,b=p.isTravellerMoving,_=p.isTravellerFocused;if(!i||!i.length||!Be(s)||!Be(l)||!Be(u)||!Be(c)||u<=0||c<=0)return null;var A=$t("recharts-brush",a),N=ce.Children.count(o)===1,E=Nme("userSelect","none");return ce.createElement(Yt,{className:A,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(h,v),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(v,"endX"),(y||w||b||_||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,s=r.height,l=r.stroke,u=Math.floor(a+s/2)-1;return ce.createElement(ce.Fragment,null,ce.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),ce.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),ce.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return ce.isValidElement(r)?a=ce.cloneElement(r,i):Et(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,s=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return Vb({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},a&&a.length?Rme({data:a,width:o,x:s,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var p=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>i?s=l:o=l}return i>=r[s]?s:o}}])}(X.PureComponent);Ui(lf,"displayName","Brush");Ui(lf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Lme=rA;function Mme(t,e){var n;return Lme(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var Dme=Mme,$me=cM,Fme=Mo,Ume=Dme,Bme=Pi,qme=T1;function Vme(t,e,n){var r=Bme(t)?$me:Ume;return n&&qme(t,e,n)&&(e=void 0),r(t,Fme(e))}var zme=Vme;const Hme=dn(zme);var Io=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},x3=OM;function Gme(t,e,n){e=="__proto__"&&x3?x3(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Wme=Gme,Kme=Wme,Jme=kM,Yme=Mo;function Xme(t,e){var n={};return e=Yme(e),Jme(t,function(r,i,a){Kme(n,i,e(r,i,a))}),n}var Zme=Xme;const Qme=dn(Zme);function ege(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var tge=ege,nge=rA;function rge(t,e){var n=!0;return nge(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var ige=rge,age=tge,oge=ige,sge=Mo,lge=Pi,uge=T1;function cge(t,e,n){var r=lge(t)?age:oge;return n&&uge(t,e,n)&&(e=void 0),r(t,sge(e))}var dge=cge;const S8=dn(dge);var fge=["x","y"];function xm(t){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xm(t)}function $_(){return $_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$_.apply(this,arguments)}function b3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b3(Object(n),!0).forEach(function(r){hge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hge(t,e,n){return e=pge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pge(t){var e=mge(t,"string");return xm(e)=="symbol"?e:e+""}function mge(t,e){if(xm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gge(t,e){if(t==null)return{};var n=yge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vge(t,e){var n=t.x,r=t.y,i=gge(t,fge),a="".concat(n),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),u="".concat(e.height||i.height),c=parseInt(u,10),d="".concat(e.width||i.width),p=parseInt(d,10);return Fh(Fh(Fh(Fh(Fh({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:c,width:p,name:e.name,radius:e.radius})}function w3(t){return ce.createElement(g8,$_({shapeType:"rectangle",propTransformer:vge,activeClassName:"recharts-active-bar"},t))}var xge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=Be(r)||VK(r);return a?e(r,i):(a||nc(),n)}},bge=["value","background"],A8;function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function wge(t,e){if(t==null)return{};var n=_ge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _ge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function y0(){return y0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y0.apply(this,arguments)}function _3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_3(Object(n),!0).forEach(function(r){hl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N8(r.key),r)}}function Age(t,e,n){return e&&S3(t.prototype,e),n&&S3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ege(t,e,n){return e=v0(e),Nge(t,E8()?Reflect.construct(e,n||[],v0(t).constructor):e.apply(t,n))}function Nge(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tge(t)}function Tge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E8=function(){return!!t})()}function v0(t){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},v0(t)}function Pge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F_(t,e)}function F_(t,e){return F_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},F_(t,e)}function hl(t,e,n){return e=N8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N8(t){var e=Cge(t,"string");return uf(e)=="symbol"?e:e+""}function Cge(t,e){if(uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mc=function(t){function e(){var n;Sge(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ege(this,e,[].concat(i)),hl(n,"state",{isAnimationFinished:!1}),hl(n,"id",Lf("recharts-bar-")),hl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),hl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return Pge(e,t),Age(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,u=a.activeBar,c=yt(this.props,!1);return r&&r.map(function(d,p){var h=p===l,v=h?u:o,y=ur(ur(ur({},c),d),{},{isActive:h,option:v,index:p,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ce.createElement(Yt,y0({className:"recharts-bar-rectangle"},Qu(i.props,d,p),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(p)}),ce.createElement(w3,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,d=i.animationId,p=this.state.prevData;return ce.createElement(Ro,{begin:l,duration:u,isActive:s,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var v=h.t,y=a.map(function(w,b){var _=p&&p[b];if(_){var A=Vi(_.x,w.x),N=Vi(_.y,w.y),E=Vi(_.width,w.width),P=Vi(_.height,w.height);return ur(ur({},w),{},{x:A(v),y:N(v),width:E(v),height:P(v)})}if(o==="horizontal"){var I=Vi(0,w.height),O=I(v);return ur(ur({},w),{},{y:w.y+w.height-O,height:O})}var R=Vi(0,w.width),D=R(v);return ur(ur({},w),{},{width:D})});return ce.createElement(Yt,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!qm(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=yt(this.props.background,!1);return a.map(function(u,c){u.value;var d=u.background,p=wge(u,bge);if(!d)return null;var h=ur(ur(ur(ur(ur({},p),{},{fill:"#eee"},d),l),Qu(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:c,className:"recharts-bar-background-rectangle"});return ce.createElement(w3,y0({key:"background-bar-".concat(c),option:r.props.background,isActive:c===s},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,u=a.layout,c=a.children,d=Xi(c,Vm);if(!d)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,h=function(w,b){var _=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:_,errorVal:Sr(w,b)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ce.createElement(Yt,v,d.map(function(y){return ce.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,s=r.xAxis,l=r.yAxis,u=r.left,c=r.top,d=r.width,p=r.height,h=r.isAnimationActive,v=r.background,y=r.id;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,b=$t("recharts-bar",o),_=s&&s.allowDataOverflow,A=l&&l.allowDataOverflow,N=_||A,E=Rt(y)?this.id:y;return ce.createElement(Yt,{className:b},_||A?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(E)},ce.createElement("rect",{x:_?u:u-d/2,y:A?c:c-p/2,width:_?d:d*2,height:A?p:p*2}))):null,ce.createElement(Yt,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(E,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,E),(!h||w)&&ms.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(X.PureComponent);A8=mc;hl(mc,"displayName","Bar");hl(mc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!dc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});hl(mc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,p=t.offset,h=lce(r,n);if(!h)return null;var v=e.layout,y=n.type.defaultProps,w=y!==void 0?ur(ur({},y),n.props):n.props,b=w.dataKey,_=w.children,A=w.minPointSize,N=v==="horizontal"?o:a,E=u?N.scale.domain():null,P=mce({numericAxis:N}),I=Xi(_,Dm),O=d.map(function(R,D){var C,L,F,$,V,Y;u?C=uce(u[c+D],E):(C=Sr(R,b),Array.isArray(C)||(C=[P,C]));var W=xge(A,A8.defaultProps.minPointSize)(C[1],D);if(v==="horizontal"){var U,Q=[o.scale(C[0]),o.scale(C[1])],le=Q[0],oe=Q[1];L=fk({axis:a,ticks:s,bandSize:i,offset:h.offset,entry:R,index:D}),F=(U=oe??le)!==null&&U!==void 0?U:void 0,$=h.size;var j=le-oe;if(V=Number.isNaN(j)?0:j,Y={x:L,y:o.y,width:$,height:o.height},Math.abs(W)>0&&Math.abs(V)<Math.abs(W)){var z=ci(V||W)*(Math.abs(W)-Math.abs(V));F-=z,V+=z}}else{var K=[a.scale(C[0]),a.scale(C[1])],re=K[0],ae=K[1];if(L=re,F=fk({axis:o,ticks:l,bandSize:i,offset:h.offset,entry:R,index:D}),$=ae-re,V=h.size,Y={x:a.x,y:F,width:a.width,height:V},Math.abs(W)>0&&Math.abs($)<Math.abs(W)){var fe=ci($||W)*(Math.abs(W)-Math.abs($));$+=fe}}return ur(ur(ur({},R),{},{x:L,y:F,width:$,height:V,value:u?C:C[1],payload:R,background:Y},I&&I[D]&&I[D].props),{},{tooltipPayload:[KD(n,R)],tooltipPosition:{x:L+$/2,y:F+V/2}})});return ur({data:O,layout:v},p)});function bm(t){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bm(t)}function kge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T8(r.key),r)}}function Ige(t,e,n){return e&&A3(t.prototype,e),n&&A3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function E3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E3(Object(n),!0).forEach(function(r){G1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G1(t,e,n){return e=T8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T8(t){var e=Oge(t,"string");return bm(e)=="symbol"?e:e+""}function Oge(t,e){if(bm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P8=function(e,n,r,i,a){var o=e.width,s=e.height,l=e.layout,u=e.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},p=!!qi(u,mc);return c.reduce(function(h,v){var y=n[v],w=y.orientation,b=y.domain,_=y.padding,A=_===void 0?{}:_,N=y.mirror,E=y.reversed,P="".concat(w).concat(N?"Mirror":""),I,O,R,D,C;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var L=b[1]-b[0],F=1/0,$=y.categoricalDomain.sort(GK);if($.forEach(function(K,re){re>0&&(F=Math.min((K||0)-($[re-1]||0),F))}),Number.isFinite(F)){var V=F/L,Y=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(I=V*Y/2),y.padding==="no-gap"){var W=di(e.barCategoryGap,V*Y),U=V*Y/2;I=U-W-(U-W)/Y*W}}}i==="xAxis"?O=[r.left+(A.left||0)+(I||0),r.left+r.width-(A.right||0)-(I||0)]:i==="yAxis"?O=l==="horizontal"?[r.top+r.height-(A.bottom||0),r.top+(A.top||0)]:[r.top+(A.top||0)+(I||0),r.top+r.height-(A.bottom||0)-(I||0)]:O=y.range,E&&(O=[O[1],O[0]]);var Q=zD(y,a,p),le=Q.scale,oe=Q.realScaleType;le.domain(b).range(O),HD(le);var j=GD(le,Wa(Wa({},y),{},{realScaleType:oe}));i==="xAxis"?(C=w==="top"&&!N||w==="bottom"&&N,R=r.left,D=d[P]-C*y.height):i==="yAxis"&&(C=w==="left"&&!N||w==="right"&&N,R=d[P]-C*y.width,D=r.top);var z=Wa(Wa(Wa({},y),j),{},{realScaleType:oe,x:R,y:D,scale:le,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return z.bandSize=t0(z,j),!y.hide&&i==="xAxis"?d[P]+=(C?-1:1)*z.height:y.hide||(d[P]+=(C?-1:1)*z.width),Wa(Wa({},h),{},G1({},v,z))},{})},C8=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},jge=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return C8({x:n,y:r},{x:i,y:a})},k8=function(){function t(e){kge(this,t),this.scale=e}return Ige(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();G1(k8,"EPS",1e-4);var OA=function(e){var n=Object.keys(e).reduce(function(r,i){return Wa(Wa({},r),{},G1({},i,k8.create(e[i])))},{});return Wa(Wa({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return Qme(i,function(l,u){return n[u].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return S8(i,function(a,o){return n[o].isInRange(a)})}})};function Rge(t){return(t%180+180)%180}var Lge=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Rge(i),o=a*Math.PI/180,s=Math.atan(r/n),l=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},Mge=Mo,Dge=Lm,$ge=E1;function Fge(t){return function(e,n,r){var i=Object(e);if(!Dge(e)){var a=Mge(n);e=$ge(e),n=function(s){return a(i[s],s,i)}}var o=t(e,n,r);return o>-1?i[a?e[o]:o]:void 0}}var Uge=Fge,Bge=x8;function qge(t){var e=Bge(t),n=e%1;return e===e?n?e-n:e:0}var Vge=qge,zge=AM,Hge=Mo,Gge=Vge,Wge=Math.max;function Kge(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Gge(n);return i<0&&(i=Wge(r+i,0)),zge(t,Hge(e),i)}var Jge=Kge,Yge=Uge,Xge=Jge,Zge=Yge(Xge),Qge=Zge;const eye=dn(Qge);var tye=JW(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),jA=X.createContext(void 0),RA=X.createContext(void 0),I8=X.createContext(void 0),O8=X.createContext({}),j8=X.createContext(void 0),R8=X.createContext(0),L8=X.createContext(0),N3=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=e.clipPathId,s=e.children,l=e.width,u=e.height,c=tye(a);return ce.createElement(jA.Provider,{value:r},ce.createElement(RA.Provider,{value:i},ce.createElement(O8.Provider,{value:a},ce.createElement(I8.Provider,{value:c},ce.createElement(j8.Provider,{value:o},ce.createElement(R8.Provider,{value:u},ce.createElement(L8.Provider,{value:l},s)))))))},nye=function(){return X.useContext(j8)},M8=function(e){var n=X.useContext(jA);n==null&&nc();var r=n[e];return r==null&&nc(),r},rye=function(){var e=X.useContext(jA);return ul(e)},iye=function(){var e=X.useContext(RA),n=eye(e,function(r){return S8(r.domain,Number.isFinite)});return n||ul(e)},D8=function(e){var n=X.useContext(RA);n==null&&nc();var r=n[e];return r==null&&nc(),r},aye=function(){var e=X.useContext(I8);return e},oye=function(){return X.useContext(O8)},LA=function(){return X.useContext(L8)},MA=function(){return X.useContext(R8)};function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function sye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F8(r.key),r)}}function uye(t,e,n){return e&&lye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cye(t,e,n){return e=x0(e),dye(t,$8()?Reflect.construct(e,n||[],x0(t).constructor):e.apply(t,n))}function dye(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fye(t)}function fye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($8=function(){return!!t})()}function x0(t){return x0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},x0(t)}function hye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U_(t,e)}function U_(t,e){return U_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},U_(t,e)}function T3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T3(Object(n),!0).forEach(function(r){DA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DA(t,e,n){return e=F8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F8(t){var e=pye(t,"string");return cf(e)=="symbol"?e:e+""}function pye(t,e){if(cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function mye(t,e){return xye(t)||vye(t,e)||yye(t,e)||gye()}function gye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yye(t,e){if(t){if(typeof t=="string")return C3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C3(t,e)}}function C3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function xye(t){if(Array.isArray(t))return t}function B_(){return B_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B_.apply(this,arguments)}var bye=function(e,n){var r;return ce.isValidElement(e)?r=ce.cloneElement(e,n):Et(e)?r=e(n):r=ce.createElement("line",B_({},n,{className:"recharts-reference-line-line"})),r},wye=function(e,n,r,i,a,o,s,l,u){var c=a.x,d=a.y,p=a.width,h=a.height;if(r){var v=u.y,y=e.y.apply(v,{position:o});if(Io(u,"discard")&&!e.y.isInRange(y))return null;var w=[{x:c+p,y},{x:c,y}];return l==="left"?w.reverse():w}if(n){var b=u.x,_=e.x.apply(b,{position:o});if(Io(u,"discard")&&!e.x.isInRange(_))return null;var A=[{x:_,y:d+h},{x:_,y:d}];return s==="top"?A.reverse():A}if(i){var N=u.segment,E=N.map(function(P){return e.apply(P,{position:o})});return Io(u,"discard")&&Hme(E,function(P){return!e.isInRange(P)})?null:E}return null};function _ye(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,s=t.className,l=t.alwaysShow,u=nye(),c=M8(i),d=D8(a),p=aye();if(!u||!p)return null;eo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=OA({x:c.scale,y:d.scale}),v=Er(e),y=Er(n),w=r&&r.length===2,b=wye(h,v,y,w,p,t.position,c.orientation,d.orientation,t);if(!b)return null;var _=mye(b,2),A=_[0],N=A.x,E=A.y,P=_[1],I=P.x,O=P.y,R=Io(t,"hidden")?"url(#".concat(u,")"):void 0,D=P3(P3({clipPath:R},yt(t,!0)),{},{x1:N,y1:E,x2:I,y2:O});return ce.createElement(Yt,{className:$t("recharts-reference-line",s)},bye(o,D),Or.renderCallByParent(t,jge({x1:N,y1:E,x2:I,y2:O})))}var $A=function(t){function e(){return sye(this,e),cye(this,e,arguments)}return hye(e,t),uye(e,[{key:"render",value:function(){return ce.createElement(_ye,this.props)}}])}(ce.Component);DA($A,"displayName","ReferenceLine");DA($A,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function q_(){return q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q_.apply(this,arguments)}function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function k3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k3(Object(n),!0).forEach(function(r){W1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B8(r.key),r)}}function Eye(t,e,n){return e&&Aye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nye(t,e,n){return e=b0(e),Tye(t,U8()?Reflect.construct(e,n||[],b0(t).constructor):e.apply(t,n))}function Tye(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pye(t)}function Pye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U8=function(){return!!t})()}function b0(t){return b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},b0(t)}function Cye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V_(t,e)}function V_(t,e){return V_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V_(t,e)}function W1(t,e,n){return e=B8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B8(t){var e=kye(t,"string");return df(e)=="symbol"?e:e+""}function kye(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Iye=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=OA({x:i.scale,y:a.scale}),s=o.apply({x:n,y:r},{bandAware:!0});return Io(e,"discard")&&!o.isInRange(s)?null:s},K1=function(t){function e(){return Sye(this,e),Nye(this,e,arguments)}return Cye(e,t),Eye(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,u=Er(i),c=Er(a);if(eo(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=Iye(this.props);if(!d)return null;var p=d.x,h=d.y,v=this.props,y=v.shape,w=v.className,b=Io(this.props,"hidden")?"url(#".concat(l,")"):void 0,_=I3(I3({clipPath:b},yt(this.props,!0)),{},{cx:p,cy:h});return ce.createElement(Yt,{className:$t("recharts-reference-dot",w)},e.renderDot(y,_),Or.renderCallByParent(this.props,{x:p-o,y:h-o,width:2*o,height:2*o}))}}])}(ce.Component);W1(K1,"displayName","ReferenceDot");W1(K1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});W1(K1,"renderDot",function(t,e){var n;return ce.isValidElement(t)?n=ce.cloneElement(t,e):Et(t)?n=t(e):n=ce.createElement(F1,q_({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function z_(){return z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z_.apply(this,arguments)}function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function O3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O3(Object(n),!0).forEach(function(r){J1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V8(r.key),r)}}function Rye(t,e,n){return e&&jye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lye(t,e,n){return e=w0(e),Mye(t,q8()?Reflect.construct(e,n||[],w0(t).constructor):e.apply(t,n))}function Mye(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dye(t)}function Dye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q8=function(){return!!t})()}function w0(t){return w0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w0(t)}function $ye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H_(t,e)}function H_(t,e){return H_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},H_(t,e)}function J1(t,e,n){return e=V8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V8(t){var e=Fye(t,"string");return ff(e)=="symbol"?e:e+""}function Fye(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uye=function(e,n,r,i,a){var o=a.x1,s=a.x2,l=a.y1,u=a.y2,c=a.xAxis,d=a.yAxis;if(!c||!d)return null;var p=OA({x:c.scale,y:d.scale}),h={x:e?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},v={x:n?p.x.apply(s,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return Io(a,"discard")&&(!p.isInRange(h)||!p.isInRange(v))?null:C8(h,v)},Y1=function(t){function e(){return Oye(this,e),Lye(this,e,arguments)}return $ye(e,t),Rye(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,s=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;eo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Er(i),p=Er(a),h=Er(o),v=Er(s),y=this.props.shape;if(!d&&!p&&!h&&!v&&!y)return null;var w=Uye(d,p,h,v,this.props);if(!w&&!y)return null;var b=Io(this.props,"hidden")?"url(#".concat(c,")"):void 0;return ce.createElement(Yt,{className:$t("recharts-reference-area",l)},e.renderRect(y,j3(j3({clipPath:b},yt(this.props,!0)),w)),Or.renderCallByParent(this.props,w))}}])}(ce.Component);J1(Y1,"displayName","ReferenceArea");J1(Y1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});J1(Y1,"renderRect",function(t,e){var n;return ce.isValidElement(t)?n=ce.cloneElement(t,e):Et(t)?n=t(e):n=ce.createElement(IA,z_({},e,{className:"recharts-reference-area-rect"})),n});function z8(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Bye(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Lge(r,n)}function qye(t,e,n){var r=n==="width",i=t.x,a=t.y,o=t.width,s=t.height;return e===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function _0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Vye(t,e){return z8(t,e+1)}function zye(t,e,n,r,i){for(var a=(r||[]).slice(),o=e.start,s=e.end,l=0,u=1,c=o,d=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:z8(r,u)};var y=l,w,b=function(){return w===void 0&&(w=n(v,y)),w},_=v.coordinate,A=l===0||_0(t,_,b,c,s);A||(l=0,c=o,u+=1),A&&(c=_+t*(b()/2+i),l+=u)},p;u<=a.length;)if(p=d(),p)return p.v;return[]}function wm(t){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(t)}function R3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R3(Object(n),!0).forEach(function(r){Hye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hye(t,e,n){return e=Gye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gye(t){var e=Wye(t,"string");return wm(e)=="symbol"?e:e+""}function Wye(t,e){if(wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kye(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,s=e.start,l=e.end,u=function(p){var h=a[p],v,y=function(){return v===void 0&&(v=n(h,p)),v};if(p===o-1){var w=t*(h.coordinate+t*y()/2-l);a[p]=h=ei(ei({},h),{},{tickCoord:w>0?h.coordinate-w*t:h.coordinate})}else a[p]=h=ei(ei({},h),{},{tickCoord:h.coordinate});var b=_0(t,h.tickCoord,y,s,l);b&&(l=h.tickCoord-t*(y()/2+i),a[p]=ei(ei({},h),{},{isShow:!0}))},c=o-1;c>=0;c--)u(c);return a}function Jye(t,e,n,r,i,a){var o=(r||[]).slice(),s=o.length,l=e.start,u=e.end;if(a){var c=r[s-1],d=n(c,s-1),p=t*(c.coordinate+t*d/2-u);o[s-1]=c=ei(ei({},c),{},{tickCoord:p>0?c.coordinate-p*t:c.coordinate});var h=_0(t,c.tickCoord,function(){return d},l,u);h&&(u=c.tickCoord-t*(d/2+i),o[s-1]=ei(ei({},c),{},{isShow:!0}))}for(var v=a?s-1:s,y=function(_){var A=o[_],N,E=function(){return N===void 0&&(N=n(A,_)),N};if(_===0){var P=t*(A.coordinate-t*E()/2-l);o[_]=A=ei(ei({},A),{},{tickCoord:P<0?A.coordinate-P*t:A.coordinate})}else o[_]=A=ei(ei({},A),{},{tickCoord:A.coordinate});var I=_0(t,A.tickCoord,E,l,u);I&&(l=A.tickCoord+t*(E()/2+i),o[_]=ei(ei({},A),{},{isShow:!0}))},w=0;w<v;w++)y(w);return o}function FA(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,s=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(Be(l)||dc.isSsr)return Vye(i,typeof l=="number"&&Be(l)?l:0);var p=[],h=s==="top"||s==="bottom"?"width":"height",v=c&&h==="width"?lp(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(A,N){var E=Et(u)?u(A.value,N):A.value;return h==="width"?Bye(lp(E,{fontSize:e,letterSpacing:n}),v,d):lp(E,{fontSize:e,letterSpacing:n})[h]},w=i.length>=2?ci(i[1].coordinate-i[0].coordinate):1,b=qye(a,w,h);return l==="equidistantPreserveStart"?zye(w,b,y,i,o):(l==="preserveStart"||l==="preserveStartEnd"?p=Jye(w,b,y,i,o,l==="preserveStartEnd"):p=Kye(w,b,y,i,o),p.filter(function(_){return _.isShow}))}var Yye=["viewBox"],Xye=["viewBox"],Zye=["ticks"];function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function L3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L3(Object(n),!0).forEach(function(r){UA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zb(t,e){if(t==null)return{};var n=Qye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function eve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G8(r.key),r)}}function tve(t,e,n){return e&&M3(t.prototype,e),n&&M3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nve(t,e,n){return e=S0(e),rve(t,H8()?Reflect.construct(e,n||[],S0(t).constructor):e.apply(t,n))}function rve(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ive(t)}function ive(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H8=function(){return!!t})()}function S0(t){return S0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S0(t)}function ave(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G_(t,e)}function G_(t,e){return G_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},G_(t,e)}function UA(t,e,n){return e=G8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G8(t){var e=ove(t,"string");return hf(e)=="symbol"?e:e+""}function ove(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qf=function(t){function e(n){var r;return eve(this,e),r=nve(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return ave(e,t),tve(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=zb(r,Yye),s=this.props,l=s.viewBox,u=zb(s,Xye);return!Sd(a,l)||!Sd(o,u)||!Sd(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,u=i.orientation,c=i.tickSize,d=i.mirror,p=i.tickMargin,h,v,y,w,b,_,A=d?-1:1,N=r.tickSize||c,E=Be(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":h=v=r.coordinate,w=o+ +!d*l,y=w-A*N,_=y-A*p,b=E;break;case"left":y=w=r.coordinate,v=a+ +!d*s,h=v-A*N,b=h-A*p,_=E;break;case"right":y=w=r.coordinate,v=a+ +d*s,h=v+A*N,b=h+A*p,_=E;break;default:h=v=r.coordinate,w=o+ +d*l,y=w+A*N,_=y+A*p,b=E;break}return{line:{x1:h,y1:y,x2:v,y2:w},tick:{x:b,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,d=xr(xr(xr({},yt(this.props,!1)),yt(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!u||l==="bottom"&&u);d=xr(xr({},d),{},{x1:i,y1:a+p*s,x2:i+o,y2:a+p*s})}else{var h=+(l==="left"&&!u||l==="right"&&u);d=xr(xr({},d),{},{x1:i+h*o,y1:a,x2:i+h*o,y2:a+s})}return ce.createElement("line",dd({},d,{className:$t("recharts-cartesian-axis-line",Yi(c,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,s=this.props,l=s.tickLine,u=s.stroke,c=s.tick,d=s.tickFormatter,p=s.unit,h=FA(xr(xr({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),w=yt(this.props,!1),b=yt(c,!1),_=xr(xr({},w),{},{fill:"none"},yt(l,!1)),A=h.map(function(N,E){var P=o.getTickLineCoord(N),I=P.line,O=P.tick,R=xr(xr(xr(xr({textAnchor:v,verticalAnchor:y},w),{},{stroke:"none",fill:u},b),O),{},{index:E,payload:N,visibleTicksCount:h.length,tickFormatter:d});return ce.createElement(Yt,dd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Qu(o.props,N,E)),l&&ce.createElement("line",dd({},_,I,{className:$t("recharts-cartesian-axis-tick-line",Yi(l,"className"))})),c&&e.renderTickItem(c,R,"".concat(Et(d)?d(N.value,E):N.value).concat(p||"")))});return ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},A)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var d=this.props,p=d.ticks,h=zb(d,Zye),v=p;return Et(l)&&(v=p&&p.length>0?l(this.props):l(h)),o<=0||s<=0||!v||!v.length?null:ce.createElement(Yt,{className:$t("recharts-cartesian-axis",u),ref:function(w){r.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Or.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o,s=$t(i.className,"recharts-cartesian-axis-tick-value");return ce.isValidElement(r)?o=ce.cloneElement(r,xr(xr({},i),{},{className:s})):Et(r)?o=r(xr(xr({},i),{},{className:s})):o=ce.createElement(ec,dd({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(X.Component);UA(qf,"displayName","CartesianAxis");UA(qf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var sve=["x1","y1","x2","y2","key"],lve=["offset"];function rc(t){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(t)}function D3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D3(Object(n),!0).forEach(function(r){uve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uve(t,e,n){return e=cve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cve(t){var e=dve(t,"string");return rc(e)=="symbol"?e:e+""}function dve(t,e){if(rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fu.apply(this,arguments)}function $3(t,e){if(t==null)return{};var n=fve(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var hve=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return ce.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function W8(t,e){var n;if(ce.isValidElement(t))n=ce.cloneElement(t,e);else if(Et(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=$3(e,sve),u=yt(l,!1);u.offset;var c=$3(u,lve);n=ce.createElement("line",Fu({},c,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return n}function pve(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var u=ni(ni({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(l),index:l});return W8(i,u)});return ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function mve(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var u=ni(ni({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(l),index:l});return W8(i,u)});return ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function gve(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,o=t.height,s=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=s.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==c[0]&&c.unshift(0);var d=c.map(function(p,h){var v=!c[h+1],y=v?i+o-p:c[h+1]-p;if(y<=0)return null;var w=h%e.length;return ce.createElement("rect",{key:"react-".concat(h),y:p,x:r,height:y,width:a,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function yve(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,s=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(p){return Math.round(p+a-a)}).sort(function(p,h){return p-h});a!==c[0]&&c.unshift(0);var d=c.map(function(p,h){var v=!c[h+1],y=v?a+s-p:c[h+1]-p;if(y<=0)return null;var w=h%r.length;return ce.createElement("rect",{key:"react-".concat(h),x:p,y:o,width:y,height:l,stroke:"none",fill:r[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var vve=function(e,n){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return VD(FA(ni(ni(ni({},qf.defaultProps),r),{},{ticks:ds(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},xve=function(e,n){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return VD(FA(ni(ni(ni({},qf.defaultProps),r),{},{ticks:ds(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},Uc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function zm(t){var e,n,r,i,a,o,s=LA(),l=MA(),u=oye(),c=ni(ni({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Uc.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Uc.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Uc.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Uc.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Uc.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Uc.verticalFill,x:Be(t.x)?t.x:u.left,y:Be(t.y)?t.y:u.top,width:Be(t.width)?t.width:u.width,height:Be(t.height)?t.height:u.height}),d=c.x,p=c.y,h=c.width,v=c.height,y=c.syncWithTicks,w=c.horizontalValues,b=c.verticalValues,_=rye(),A=iye();if(!Be(h)||h<=0||!Be(v)||v<=0||!Be(d)||d!==+d||!Be(p)||p!==+p)return null;var N=c.verticalCoordinatesGenerator||vve,E=c.horizontalCoordinatesGenerator||xve,P=c.horizontalPoints,I=c.verticalPoints;if((!P||!P.length)&&Et(E)){var O=w&&w.length,R=E({yAxis:A?ni(ni({},A),{},{ticks:O?w:A.ticks}):void 0,width:s,height:l,offset:u},O?!0:y);eo(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(rc(R),"]")),Array.isArray(R)&&(P=R)}if((!I||!I.length)&&Et(N)){var D=b&&b.length,C=N({xAxis:_?ni(ni({},_),{},{ticks:D?b:_.ticks}):void 0,width:s,height:l,offset:u},D?!0:y);eo(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(rc(C),"]")),Array.isArray(C)&&(I=C)}return ce.createElement("g",{className:"recharts-cartesian-grid"},ce.createElement(hve,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),ce.createElement(pve,Fu({},c,{offset:u,horizontalPoints:P,xAxis:_,yAxis:A})),ce.createElement(mve,Fu({},c,{offset:u,verticalPoints:I,xAxis:_,yAxis:A})),ce.createElement(gve,Fu({},c,{horizontalPoints:P})),ce.createElement(yve,Fu({},c,{verticalPoints:I})))}zm.displayName="CartesianGrid";var bve=["type","layout","connectNulls","ref"],wve=["key"];function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function F3(t,e){if(t==null)return{};var n=_ve(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _ve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pp(){return pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pp.apply(this,arguments)}function U3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U3(Object(n),!0).forEach(function(r){Ka(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bc(t){return Nve(t)||Eve(t)||Ave(t)||Sve()}function Sve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ave(t,e){if(t){if(typeof t=="string")return W_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W_(t,e)}}function Eve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nve(t){if(Array.isArray(t))return W_(t)}function W_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J8(r.key),r)}}function Pve(t,e,n){return e&&B3(t.prototype,e),n&&B3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cve(t,e,n){return e=A0(e),kve(t,K8()?Reflect.construct(e,n||[],A0(t).constructor):e.apply(t,n))}function kve(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ive(t)}function Ive(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K8=function(){return!!t})()}function A0(t){return A0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},A0(t)}function Ove(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K_(t,e)}function K_(t,e){return K_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K_(t,e)}function Ka(t,e,n){return e=J8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J8(t){var e=jve(t,"string");return pf(e)=="symbol"?e:e+""}function jve(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ol=function(t){function e(){var n;Tve(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Cve(this,e,[].concat(i)),Ka(n,"state",{isAnimationFinished:!0,totalLength:0}),Ka(n,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),Ka(n,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(b,_){return b+_});if(!u)return n.generateSimpleStrokeDasharray(s,o);for(var c=Math.floor(o/u),d=o%u,p=s-o,h=[],v=0,y=0;v<l.length;y+=l[v],++v)if(y+l[v]>d){h=[].concat(Bc(l.slice(0,v)),[d-y]);break}var w=h.length%2===0?[0,p]:[p];return[].concat(Bc(e.repeat(l,c)),Bc(h),w).map(function(b){return"".concat(b,"px")}).join(", ")}),Ka(n,"id",Lf("recharts-line-")),Ka(n,"pathRef",function(o){n.mainCurve=o}),Ka(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ka(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Ove(e,t),Pve(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,s=a.xAxis,l=a.yAxis,u=a.layout,c=a.children,d=Xi(c,Vm);if(!d)return null;var p=function(y,w){return{x:y.x,y:y.y,value:y.value,errorVal:Sr(y.payload,w)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ce.createElement(Yt,h,d.map(function(v){return ce.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,c=s.dataKey,d=yt(this.props,!1),p=yt(l,!0),h=u.map(function(y,w){var b=Fi(Fi(Fi({key:"dot-".concat(w),r:3},d),p),{},{index:w,cx:y.x,cy:y.y,value:y.value,dataKey:c,payload:y.payload,points:u});return e.renderDotItem(l,b)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return ce.createElement(Yt,pp({className:"recharts-line-dots",key:"dots"},v),h)}},{key:"renderCurveStatically",value:function(r,i,a,o){var s=this.props,l=s.type,u=s.layout,c=s.connectNulls;s.ref;var d=F3(s,bve),p=Fi(Fi(Fi({},yt(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},o),{},{type:l,layout:u,connectNulls:c});return ce.createElement(i0,pp({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,c=o.animationBegin,d=o.animationDuration,p=o.animationEasing,h=o.animationId,v=o.animateNewValues,y=o.width,w=o.height,b=this.state,_=b.prevPoints,A=b.totalLength;return ce.createElement(Ro,{begin:c,duration:d,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var E=N.t;if(_){var P=_.length/s.length,I=s.map(function(L,F){var $=Math.floor(F*P);if(_[$]){var V=_[$],Y=Vi(V.x,L.x),W=Vi(V.y,L.y);return Fi(Fi({},L),{},{x:Y(E),y:W(E)})}if(v){var U=Vi(y*2,L.x),Q=Vi(w/2,L.y);return Fi(Fi({},L),{},{x:U(E),y:Q(E)})}return Fi(Fi({},L),{},{x:L.x,y:L.y})});return a.renderCurveStatically(I,r,i)}var O=Vi(0,A),R=O(E),D;if(l){var C="".concat(l).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});D=a.getStrokeDasharray(R,A,C)}else D=a.generateSimpleStrokeDasharray(A,R);return a.renderCurveStatically(s,r,i,{strokeDasharray:D})})}},{key:"renderCurve",value:function(r,i){var a=this.props,o=a.points,s=a.isAnimationActive,l=this.state,u=l.prevPoints,c=l.totalLength;return s&&o&&o.length&&(!u&&c>0||!qm(u,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,u=i.xAxis,c=i.yAxis,d=i.top,p=i.left,h=i.width,v=i.height,y=i.isAnimationActive,w=i.id;if(a||!s||!s.length)return null;var b=this.state.isAnimationFinished,_=s.length===1,A=$t("recharts-line",l),N=u&&u.allowDataOverflow,E=c&&c.allowDataOverflow,P=N||E,I=Rt(w)?this.id:w,O=(r=yt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},R=O.r,D=R===void 0?3:R,C=O.strokeWidth,L=C===void 0?2:C,F=tJ(o)?o:{},$=F.clipDot,V=$===void 0?!0:$,Y=D*2+L;return ce.createElement(Yt,{className:A},N||E?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(I)},ce.createElement("rect",{x:N?p:p-h/2,y:E?d:d-v/2,width:N?h:h*2,height:E?v:v*2})),!V&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(I)},ce.createElement("rect",{x:p-Y/2,y:d-Y/2,width:h+Y,height:v+Y}))):null,!_&&this.renderCurve(P,I),this.renderErrorBar(P,I),(_||o)&&this.renderDots(P,V,I),(!y||b)&&ms.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Bc(r),[0]):r,o=[],s=0;s<i;++s)o=[].concat(Bc(o),Bc(a));return o}},{key:"renderDotItem",value:function(r,i){var a;if(ce.isValidElement(r))a=ce.cloneElement(r,i);else if(Et(r))a=r(i);else{var o=i.key,s=F3(i,wve),l=$t("recharts-line-dot",typeof r!="boolean"?r.className:"");a=ce.createElement(F1,pp({key:o},s,{className:l}))}return a}}])}(X.PureComponent);Ka(Ol,"displayName","Line");Ka(Ol,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!dc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ka(Ol,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,s=t.bandSize,l=t.displayedData,u=t.offset,c=e.layout,d=l.map(function(p,h){var v=Sr(p,o);return c==="horizontal"?{x:dk({axis:n,ticks:i,bandSize:s,entry:p,index:h}),y:Rt(v)?null:r.scale(v),value:v,payload:p}:{x:Rt(v)?null:n.scale(v),y:dk({axis:r,ticks:a,bandSize:s,entry:p,index:h}),value:v,payload:p}});return Fi({points:d,layout:c},u)});function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function Rve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z8(r.key),r)}}function Mve(t,e,n){return e&&Lve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dve(t,e,n){return e=E0(e),$ve(t,Y8()?Reflect.construct(e,n||[],E0(t).constructor):e.apply(t,n))}function $ve(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fve(t)}function Fve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y8=function(){return!!t})()}function E0(t){return E0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},E0(t)}function Uve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J_(t,e)}function J_(t,e){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},J_(t,e)}function X8(t,e,n){return e=Z8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z8(t){var e=Bve(t,"string");return mf(e)=="symbol"?e:e+""}function Bve(t,e){if(mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Y_(){return Y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y_.apply(this,arguments)}function qve(t){var e=t.xAxisId,n=LA(),r=MA(),i=M8(e);return i==null?null:X.createElement(qf,Y_({},i,{className:$t("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return ds(o,!0)}}))}var Vl=function(t){function e(){return Rve(this,e),Dve(this,e,arguments)}return Uve(e,t),Mve(e,[{key:"render",value:function(){return X.createElement(qve,this.props)}}])}(X.Component);X8(Vl,"displayName","XAxis");X8(Vl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function Vve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t$(r.key),r)}}function Hve(t,e,n){return e&&zve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gve(t,e,n){return e=N0(e),Wve(t,Q8()?Reflect.construct(e,n||[],N0(t).constructor):e.apply(t,n))}function Wve(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kve(t)}function Kve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q8=function(){return!!t})()}function N0(t){return N0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},N0(t)}function Jve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X_(t,e)}function X_(t,e){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},X_(t,e)}function e$(t,e,n){return e=t$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t$(t){var e=Yve(t,"string");return gf(e)=="symbol"?e:e+""}function Yve(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Z_(){return Z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z_.apply(this,arguments)}var Xve=function(e){var n=e.yAxisId,r=LA(),i=MA(),a=D8(n);return a==null?null:X.createElement(qf,Z_({},a,{className:$t("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return ds(s,!0)}}))},zl=function(t){function e(){return Vve(this,e),Gve(this,e,arguments)}return Jve(e,t),Hve(e,[{key:"render",value:function(){return X.createElement(Xve,this.props)}}])}(X.Component);e$(zl,"displayName","YAxis");e$(zl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function q3(t){return t0e(t)||e0e(t)||Qve(t)||Zve()}function Zve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qve(t,e){if(t){if(typeof t=="string")return Q_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q_(t,e)}}function e0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t0e(t){if(Array.isArray(t))return Q_(t)}function Q_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var e5=function(e,n,r,i,a){var o=Xi(e,$A),s=Xi(e,K1),l=[].concat(q3(o),q3(s)),u=Xi(e,Y1),c="".concat(i,"Id"),d=i[0],p=n;if(l.length&&(p=l.reduce(function(y,w){if(w.props[c]===r&&Io(w.props,"extendDomain")&&Be(w.props[d])){var b=w.props[d];return[Math.min(y[0],b),Math.max(y[1],b)]}return y},p)),u.length){var h="".concat(d,"1"),v="".concat(d,"2");p=u.reduce(function(y,w){if(w.props[c]===r&&Io(w.props,"extendDomain")&&Be(w.props[h])&&Be(w.props[v])){var b=w.props[h],_=w.props[v];return[Math.min(y[0],b,_),Math.max(y[1],b,_)]}return y},p)}return a&&a.length&&(p=a.reduce(function(y,w){return Be(w)?[Math.min(y[0],w),Math.max(y[1],w)]:y},p)),p},n$={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function a(l,u,c,d,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new i(c,d||l,p),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],h]:l._events[v].push(h):(l._events[v]=h,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,h=d.length,v=new Array(h);p<h;p++)v[p]=d[p].fn;return v},s.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,c,d,p,h,v){var y=n?n+u:u;if(!this._events[y])return!1;var w=this._events[y],b=arguments.length,_,A;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),b){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,c),!0;case 3:return w.fn.call(w.context,c,d),!0;case 4:return w.fn.call(w.context,c,d,p),!0;case 5:return w.fn.call(w.context,c,d,p,h),!0;case 6:return w.fn.call(w.context,c,d,p,h,v),!0}for(A=1,_=new Array(b-1);A<b;A++)_[A-1]=arguments[A];w.fn.apply(w.context,_)}else{var N=w.length,E;for(A=0;A<N;A++)switch(w[A].once&&this.removeListener(u,w[A].fn,void 0,!0),b){case 1:w[A].fn.call(w[A].context);break;case 2:w[A].fn.call(w[A].context,c);break;case 3:w[A].fn.call(w[A].context,c,d);break;case 4:w[A].fn.call(w[A].context,c,d,p);break;default:if(!_)for(E=1,_=new Array(b-1);E<b;E++)_[E-1]=arguments[E];w[A].fn.apply(w[A].context,_)}}return!0},s.prototype.on=function(u,c,d){return a(this,u,c,d,!1)},s.prototype.once=function(u,c,d){return a(this,u,c,d,!0)},s.prototype.removeListener=function(u,c,d,p){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return o(this,h),this;var v=this._events[h];if(v.fn)v.fn===c&&(!p||v.once)&&(!d||v.context===d)&&o(this,h);else{for(var y=0,w=[],b=v.length;y<b;y++)(v[y].fn!==c||p&&!v[y].once||d&&v[y].context!==d)&&w.push(v[y]);w.length?this._events[h]=w.length===1?w[0]:w:o(this,h)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(n$);var n0e=n$.exports;const r0e=dn(n0e);var Hb=new r0e,Gb="recharts.syncMouseEvents";function _m(t){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_m(t)}function i0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r$(r.key),r)}}function o0e(t,e,n){return e&&a0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wb(t,e,n){return e=r$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r$(t){var e=s0e(t,"string");return _m(e)=="symbol"?e:e+""}function s0e(t,e){if(_m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var l0e=function(){function t(){i0e(this,t),Wb(this,"activeIndex",0),Wb(this,"coordinateList",[]),Wb(this,"layout","horizontal")}return o0e(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,s=o===void 0?null:o,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,p=n.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+u,p=o+this.offset.top+s/2+c;this.mouseHandlerCallback({pageX:d,pageY:p})}}}])}();function u0e(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Be(r)&&Be(i))return!0}return!1}function c0e(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function i$(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,o=En(e,n,r,i),s=En(e,n,r,a);return{points:[o,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function d0e(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,p=En(s,l,u,d),h=En(s,l,c,d);r=p.x,i=p.y,a=h.x,o=h.y}else return i$(e);return[{x:r,y:i},{x:a,y:o}]}function Sm(t){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(t)}function V3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V3(Object(n),!0).forEach(function(r){f0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f0e(t,e,n){return e=h0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h0e(t){var e=p0e(t,"string");return Sm(e)=="symbol"?e:e+""}function p0e(t,e){if(Sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m0e(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,s=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,p=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!a||!o||p!=="ScatterChart"&&i!=="axis")return null;var v,y=i0;if(p==="ScatterChart")v=o,y=jhe;else if(p==="BarChart")v=c0e(d,o,l,c),y=IA;else if(d==="radial"){var w=i$(o),b=w.cx,_=w.cy,A=w.radius,N=w.startAngle,E=w.endAngle;v={cx:b,cy:_,startAngle:N,endAngle:E,innerRadius:A,outerRadius:A},y=e8}else v={points:d0e(d,o,l)},y=i0;var P=fy(fy(fy(fy({stroke:"#ccc",pointerEvents:"none"},l),v),yt(h,!1)),{},{payload:s,payloadIndex:u,className:$t("recharts-tooltip-cursor",h.className)});return X.isValidElement(h)?X.cloneElement(h,P):X.createElement(y,P)}var g0e=["item"],y0e=["children","className","width","height","style","compact","title","desc"];function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function fd(){return fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fd.apply(this,arguments)}function z3(t,e){return b0e(t)||x0e(t,e)||o$(t,e)||v0e()}function v0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function b0e(t){if(Array.isArray(t))return t}function H3(t,e){if(t==null)return{};var n=w0e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function w0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s$(r.key),r)}}function A0e(t,e,n){return e&&S0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function E0e(t,e,n){return e=T0(e),N0e(t,a$()?Reflect.construct(e,n||[],T0(t).constructor):e.apply(t,n))}function N0e(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T0e(t)}function T0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a$=function(){return!!t})()}function T0(t){return T0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},T0(t)}function P0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t5(t,e)}function t5(t,e){return t5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},t5(t,e)}function vf(t){return I0e(t)||k0e(t)||o$(t)||C0e()}function C0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o$(t,e){if(t){if(typeof t=="string")return n5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n5(t,e)}}function k0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I0e(t){if(Array.isArray(t))return n5(t)}function n5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G3(Object(n),!0).forEach(function(r){wt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wt(t,e,n){return e=s$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s$(t){var e=O0e(t,"string");return yf(e)=="symbol"?e:e+""}function O0e(t,e){if(yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j0e={xAxis:["bottom","top"],yAxis:["left","right"]},R0e={width:"100%",height:"100%"},l$={x:0,y:0};function hy(t){return t}var L0e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},M0e=function(e,n,r,i){var a=n.find(function(c){return c&&c.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return Ne(Ne(Ne({},i),En(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,u=i.angle;return Ne(Ne(Ne({},i),En(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return l$},X1=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(vf(s),vf(u)):s},[]);return o.length>0?o:e&&e.length&&Be(i)&&Be(a)?e.slice(i,a+1):[]};function u$(t){return t==="number"?[0,"auto"]:void 0}var r5=function(e,n,r,i){var a=e.graphicalItems,o=e.tooltipAxis,s=X1(n,e);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var h=d===void 0?s:d;p=Tv(h,o.dataKey,i)}else p=d&&d[r]||s[r];return p?[].concat(vf(l),[KD(u,p)]):l},[])},W3=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},o=L0e(a,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=nce(o,s,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,p=r5(e,n,c,d),h=M0e(r,s,c,a);return{activeTooltipIndex:c,activeLabel:d,activePayload:p,activeCoordinate:h}}return null},D0e=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,p=e.stackOffset,h=qD(c,a);return r.reduce(function(v,y){var w,b=y.type.defaultProps!==void 0?Ne(Ne({},y.type.defaultProps),y.props):y.props,_=b.type,A=b.dataKey,N=b.allowDataOverflow,E=b.allowDuplicatedCategory,P=b.scale,I=b.ticks,O=b.includeHidden,R=b[o];if(v[R])return v;var D=X1(e.data,{graphicalItems:i.filter(function(j){var z,K=o in j.props?j.props[o]:(z=j.type.defaultProps)===null||z===void 0?void 0:z[o];return K===R}),dataStartIndex:l,dataEndIndex:u}),C=D.length,L,F,$;u0e(b.domain,N,_)&&(L=y_(b.domain,null,N),h&&(_==="number"||P!=="auto")&&($=cp(D,A,"category")));var V=u$(_);if(!L||L.length===0){var Y,W=(Y=b.domain)!==null&&Y!==void 0?Y:V;if(A){if(L=cp(D,A,_),_==="category"&&h){var U=HK(L);E&&U?(F=L,L=p0(0,C)):E||(L=mk(W,L,y).reduce(function(j,z){return j.indexOf(z)>=0?j:[].concat(vf(j),[z])},[]))}else if(_==="category")E?L=L.filter(function(j){return j!==""&&!Rt(j)}):L=mk(W,L,y).reduce(function(j,z){return j.indexOf(z)>=0||z===""||Rt(z)?j:[].concat(vf(j),[z])},[]);else if(_==="number"){var Q=sce(D,i.filter(function(j){var z,K,re=o in j.props?j.props[o]:(z=j.type.defaultProps)===null||z===void 0?void 0:z[o],ae="hide"in j.props?j.props.hide:(K=j.type.defaultProps)===null||K===void 0?void 0:K.hide;return re===R&&(O||!ae)}),A,a,c);Q&&(L=Q)}h&&(_==="number"||P!=="auto")&&($=cp(D,A,"category"))}else h?L=p0(0,C):s&&s[R]&&s[R].hasStack&&_==="number"?L=p==="expand"?[0,1]:WD(s[R].stackGroups,l,u):L=BD(D,i.filter(function(j){var z=o in j.props?j.props[o]:j.type.defaultProps[o],K="hide"in j.props?j.props.hide:j.type.defaultProps.hide;return z===R&&(O||!K)}),_,c,!0);if(_==="number")L=e5(d,L,R,a,I),W&&(L=y_(W,L,N));else if(_==="category"&&W){var le=W,oe=L.every(function(j){return le.indexOf(j)>=0});oe&&(L=le)}}return Ne(Ne({},v),{},wt({},R,Ne(Ne({},b),{},{axisType:a,domain:L,categoricalDomain:$,duplicateDomain:F,originalDomain:(w=b.domain)!==null&&w!==void 0?w:V,isCategorical:h,layout:c})))},{})},$0e=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,p=X1(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),h=p.length,v=qD(c,a),y=-1;return r.reduce(function(w,b){var _=b.type.defaultProps!==void 0?Ne(Ne({},b.type.defaultProps),b.props):b.props,A=_[o],N=u$("number");if(!w[A]){y++;var E;return v?E=p0(0,h):s&&s[A]&&s[A].hasStack?(E=WD(s[A].stackGroups,l,u),E=e5(d,E,A,a)):(E=y_(N,BD(p,r.filter(function(P){var I,O,R=o in P.props?P.props[o]:(I=P.type.defaultProps)===null||I===void 0?void 0:I[o],D="hide"in P.props?P.props.hide:(O=P.type.defaultProps)===null||O===void 0?void 0:O.hide;return R===A&&!D}),"number",c),i.defaultProps.allowDataOverflow),E=e5(d,E,A,a)),Ne(Ne({},w),{},wt({},A,Ne(Ne({axisType:a},i.defaultProps),{},{hide:!0,orientation:Yi(j0e,"".concat(a,".").concat(y%2),null),domain:E,originalDomain:N,isCategorical:v,layout:c})))}return w},{})},F0e=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(i,"Id"),p=Xi(c,a),h={};return p&&p.length?h=D0e(e,{axes:p,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(h=$0e(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),h},U0e=function(e){var n=ul(e),r=ds(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:iA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:t0(n,r)}},K3=function(e){var n=e.children,r=e.defaultShowTooltip,i=qi(n,lf),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},B0e=function(e){return!e||!e.length?!1:e.some(function(n){var r=hs(n&&n.type);return r&&r.indexOf("Bar")>=0})},J3=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},q0e=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,u=r.width,c=r.height,d=r.children,p=r.margin||{},h=qi(d,lf),v=qi(d,Co),y=Object.keys(l).reduce(function(E,P){var I=l[P],O=I.orientation;return!I.mirror&&!I.hide?Ne(Ne({},E),{},wt({},O,E[O]+I.width)):E},{left:p.left||0,right:p.right||0}),w=Object.keys(o).reduce(function(E,P){var I=o[P],O=I.orientation;return!I.mirror&&!I.hide?Ne(Ne({},E),{},wt({},O,Yi(E,"".concat(O))+I.height)):E},{top:p.top||0,bottom:p.bottom||0}),b=Ne(Ne({},w),y),_=b.bottom;h&&(b.bottom+=h.props.height||lf.defaultProps.height),v&&n&&(b=ace(b,i,r,n));var A=u-b.left-b.right,N=c-b.top-b.bottom;return Ne(Ne({brushBottom:_},b),{},{width:Math.max(A,0),height:Math.max(N,0)})},V0e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},BA=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,p=function(b,_){var A=_.graphicalItems,N=_.stackGroups,E=_.offset,P=_.updateId,I=_.dataStartIndex,O=_.dataEndIndex,R=b.barSize,D=b.layout,C=b.barGap,L=b.barCategoryGap,F=b.maxBarSize,$=J3(D),V=$.numericAxisName,Y=$.cateAxisName,W=B0e(A),U=[];return A.forEach(function(Q,le){var oe=X1(b.data,{graphicalItems:[Q],dataStartIndex:I,dataEndIndex:O}),j=Q.type.defaultProps!==void 0?Ne(Ne({},Q.type.defaultProps),Q.props):Q.props,z=j.dataKey,K=j.maxBarSize,re=j["".concat(V,"Id")],ae=j["".concat(Y,"Id")],fe={},xe=l.reduce(function(Ae,De){var Me=_["".concat(De.axisType,"Map")],st=j["".concat(De.axisType,"Id")];Me&&Me[st]||De.axisType==="zAxis"||nc();var Fe=Me[st];return Ne(Ne({},Ae),{},wt(wt({},De.axisType,Fe),"".concat(De.axisType,"Ticks"),ds(Fe)))},fe),ue=xe[Y],ye=xe["".concat(Y,"Ticks")],Se=N&&N[re]&&N[re].hasStack&&gce(Q,N[re].stackGroups),me=hs(Q.type).indexOf("Bar")>=0,je=t0(ue,ye),se=[],ee=W&&rce({barSize:R,stackGroups:N,totalSize:V0e(xe,Y)});if(me){var Ve,qe,Ge=Rt(K)?F:K,_e=(Ve=(qe=t0(ue,ye,!0))!==null&&qe!==void 0?qe:Ge)!==null&&Ve!==void 0?Ve:0;se=ice({barGap:C,barCategoryGap:L,bandSize:_e!==je?_e:je,sizeList:ee[ae],maxBarSize:Ge}),_e!==je&&(se=se.map(function(Ae){return Ne(Ne({},Ae),{},{position:Ne(Ne({},Ae.position),{},{offset:Ae.position.offset-_e/2})})}))}var Re=Q&&Q.type&&Q.type.getComposedData;Re&&U.push({props:Ne(Ne({},Re(Ne(Ne({},xe),{},{displayedData:oe,props:b,dataKey:z,item:Q,bandSize:je,barPosition:se,offset:E,stackedData:Se,layout:D,dataStartIndex:I,dataEndIndex:O}))),{},wt(wt(wt({key:Q.key||"item-".concat(le)},V,xe[V]),Y,xe[Y]),"animationId",P)),childIndex:iJ(Q,b.children),item:Q})}),U},h=function(b,_){var A=b.props,N=b.dataStartIndex,E=b.dataEndIndex,P=b.updateId;if(!lP({props:A}))return null;var I=A.children,O=A.layout,R=A.stackOffset,D=A.data,C=A.reverseStackOrder,L=J3(O),F=L.numericAxisName,$=L.cateAxisName,V=Xi(I,r),Y=pce(D,V,"".concat(F,"Id"),"".concat($,"Id"),R,C),W=l.reduce(function(j,z){var K="".concat(z.axisType,"Map");return Ne(Ne({},j),{},wt({},K,F0e(A,Ne(Ne({},z),{},{graphicalItems:V,stackGroups:z.axisType===F&&Y,dataStartIndex:N,dataEndIndex:E}))))},{}),U=q0e(Ne(Ne({},W),{},{props:A,graphicalItems:V}),_==null?void 0:_.legendBBox);Object.keys(W).forEach(function(j){W[j]=c(A,W[j],U,j.replace("Map",""),n)});var Q=W["".concat($,"Map")],le=U0e(Q),oe=p(A,Ne(Ne({},W),{},{dataStartIndex:N,dataEndIndex:E,updateId:P,graphicalItems:V,stackGroups:Y,offset:U}));return Ne(Ne({formattedGraphicalItems:oe,graphicalItems:V,offset:U,stackGroups:Y},le),W)},v=function(w){function b(_){var A,N,E;return _0e(this,b),E=E0e(this,b,[_]),wt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),wt(E,"accessibilityManager",new l0e),wt(E,"handleLegendBBoxUpdate",function(P){if(P){var I=E.state,O=I.dataStartIndex,R=I.dataEndIndex,D=I.updateId;E.setState(Ne({legendBBox:P},h({props:E.props,dataStartIndex:O,dataEndIndex:R,updateId:D},Ne(Ne({},E.state),{},{legendBBox:P}))))}}),wt(E,"handleReceiveSyncEvent",function(P,I,O){if(E.props.syncId===P){if(O===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(I)}}),wt(E,"handleBrushChange",function(P){var I=P.startIndex,O=P.endIndex;if(I!==E.state.dataStartIndex||O!==E.state.dataEndIndex){var R=E.state.updateId;E.setState(function(){return Ne({dataStartIndex:I,dataEndIndex:O},h({props:E.props,dataStartIndex:I,dataEndIndex:O,updateId:R},E.state))}),E.triggerSyncEvent({dataStartIndex:I,dataEndIndex:O})}}),wt(E,"handleMouseEnter",function(P){var I=E.getMouseInfo(P);if(I){var O=Ne(Ne({},I),{},{isTooltipActive:!0});E.setState(O),E.triggerSyncEvent(O);var R=E.props.onMouseEnter;Et(R)&&R(O,P)}}),wt(E,"triggeredAfterMouseMove",function(P){var I=E.getMouseInfo(P),O=I?Ne(Ne({},I),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(O),E.triggerSyncEvent(O);var R=E.props.onMouseMove;Et(R)&&R(O,P)}),wt(E,"handleItemMouseEnter",function(P){E.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),wt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),wt(E,"handleMouseMove",function(P){P.persist(),E.throttleTriggeredAfterMouseMove(P)}),wt(E,"handleMouseLeave",function(P){E.throttleTriggeredAfterMouseMove.cancel();var I={isTooltipActive:!1};E.setState(I),E.triggerSyncEvent(I);var O=E.props.onMouseLeave;Et(O)&&O(I,P)}),wt(E,"handleOuterEvent",function(P){var I=rJ(P),O=Yi(E.props,"".concat(I));if(I&&Et(O)){var R,D;/.*touch.*/i.test(I)?D=E.getMouseInfo(P.changedTouches[0]):D=E.getMouseInfo(P),O((R=D)!==null&&R!==void 0?R:{},P)}}),wt(E,"handleClick",function(P){var I=E.getMouseInfo(P);if(I){var O=Ne(Ne({},I),{},{isTooltipActive:!0});E.setState(O),E.triggerSyncEvent(O);var R=E.props.onClick;Et(R)&&R(O,P)}}),wt(E,"handleMouseDown",function(P){var I=E.props.onMouseDown;if(Et(I)){var O=E.getMouseInfo(P);I(O,P)}}),wt(E,"handleMouseUp",function(P){var I=E.props.onMouseUp;if(Et(I)){var O=E.getMouseInfo(P);I(O,P)}}),wt(E,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),wt(E,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.handleMouseDown(P.changedTouches[0])}),wt(E,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&E.handleMouseUp(P.changedTouches[0])}),wt(E,"handleDoubleClick",function(P){var I=E.props.onDoubleClick;if(Et(I)){var O=E.getMouseInfo(P);I(O,P)}}),wt(E,"handleContextMenu",function(P){var I=E.props.onContextMenu;if(Et(I)){var O=E.getMouseInfo(P);I(O,P)}}),wt(E,"triggerSyncEvent",function(P){E.props.syncId!==void 0&&Hb.emit(Gb,E.props.syncId,P,E.eventEmitterSymbol)}),wt(E,"applySyncEvent",function(P){var I=E.props,O=I.layout,R=I.syncMethod,D=E.state.updateId,C=P.dataStartIndex,L=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)E.setState(Ne({dataStartIndex:C,dataEndIndex:L},h({props:E.props,dataStartIndex:C,dataEndIndex:L,updateId:D},E.state)));else if(P.activeTooltipIndex!==void 0){var F=P.chartX,$=P.chartY,V=P.activeTooltipIndex,Y=E.state,W=Y.offset,U=Y.tooltipTicks;if(!W)return;if(typeof R=="function")V=R(U,P);else if(R==="value"){V=-1;for(var Q=0;Q<U.length;Q++)if(U[Q].value===P.activeLabel){V=Q;break}}var le=Ne(Ne({},W),{},{x:W.left,y:W.top}),oe=Math.min(F,le.x+le.width),j=Math.min($,le.y+le.height),z=U[V]&&U[V].value,K=r5(E.state,E.props.data,V),re=U[V]?{x:O==="horizontal"?U[V].coordinate:oe,y:O==="horizontal"?j:U[V].coordinate}:l$;E.setState(Ne(Ne({},P),{},{activeLabel:z,activeCoordinate:re,activePayload:K,activeTooltipIndex:V}))}else E.setState(P)}),wt(E,"renderCursor",function(P){var I,O=E.state,R=O.isTooltipActive,D=O.activeCoordinate,C=O.activePayload,L=O.offset,F=O.activeTooltipIndex,$=O.tooltipAxisBandSize,V=E.getTooltipEventType(),Y=(I=P.props.active)!==null&&I!==void 0?I:R,W=E.props.layout,U=P.key||"_recharts-cursor";return ce.createElement(m0e,{key:U,activeCoordinate:D,activePayload:C,activeTooltipIndex:F,chartName:n,element:P,isActive:Y,layout:W,offset:L,tooltipAxisBandSize:$,tooltipEventType:V})}),wt(E,"renderPolarAxis",function(P,I,O){var R=Yi(P,"type.axisType"),D=Yi(E.state,"".concat(R,"Map")),C=P.type.defaultProps,L=C!==void 0?Ne(Ne({},C),P.props):P.props,F=D&&D[L["".concat(R,"Id")]];return X.cloneElement(P,Ne(Ne({},F),{},{className:$t(R,F.className),key:P.key||"".concat(I,"-").concat(O),ticks:ds(F,!0)}))}),wt(E,"renderPolarGrid",function(P){var I=P.props,O=I.radialLines,R=I.polarAngles,D=I.polarRadius,C=E.state,L=C.radiusAxisMap,F=C.angleAxisMap,$=ul(L),V=ul(F),Y=V.cx,W=V.cy,U=V.innerRadius,Q=V.outerRadius;return X.cloneElement(P,{polarAngles:Array.isArray(R)?R:ds(V,!0).map(function(le){return le.coordinate}),polarRadius:Array.isArray(D)?D:ds($,!0).map(function(le){return le.coordinate}),cx:Y,cy:W,innerRadius:U,outerRadius:Q,key:P.key||"polar-grid",radialLines:O})}),wt(E,"renderLegend",function(){var P=E.state.formattedGraphicalItems,I=E.props,O=I.children,R=I.width,D=I.height,C=E.props.margin||{},L=R-(C.left||0)-(C.right||0),F=FD({children:O,formattedGraphicalItems:P,legendWidth:L,legendContent:u});if(!F)return null;var $=F.item,V=H3(F,g0e);return X.cloneElement($,Ne(Ne({},V),{},{chartWidth:R,chartHeight:D,margin:C,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),wt(E,"renderTooltip",function(){var P,I=E.props,O=I.children,R=I.accessibilityLayer,D=qi(O,bi);if(!D)return null;var C=E.state,L=C.isTooltipActive,F=C.activeCoordinate,$=C.activePayload,V=C.activeLabel,Y=C.offset,W=(P=D.props.active)!==null&&P!==void 0?P:L;return X.cloneElement(D,{viewBox:Ne(Ne({},Y),{},{x:Y.left,y:Y.top}),active:W,label:V,payload:W?$:[],coordinate:F,accessibilityLayer:R})}),wt(E,"renderBrush",function(P){var I=E.props,O=I.margin,R=I.data,D=E.state,C=D.offset,L=D.dataStartIndex,F=D.dataEndIndex,$=D.updateId;return X.cloneElement(P,{key:P.key||"_recharts-brush",onChange:ly(E.handleBrushChange,P.props.onChange),data:R,x:Be(P.props.x)?P.props.x:C.left,y:Be(P.props.y)?P.props.y:C.top+C.height+C.brushBottom-(O.bottom||0),width:Be(P.props.width)?P.props.width:C.width,startIndex:L,endIndex:F,updateId:"brush-".concat($)})}),wt(E,"renderReferenceElement",function(P,I,O){if(!P)return null;var R=E,D=R.clipPathId,C=E.state,L=C.xAxisMap,F=C.yAxisMap,$=C.offset,V=P.type.defaultProps||{},Y=P.props,W=Y.xAxisId,U=W===void 0?V.xAxisId:W,Q=Y.yAxisId,le=Q===void 0?V.yAxisId:Q;return X.cloneElement(P,{key:P.key||"".concat(I,"-").concat(O),xAxis:L[U],yAxis:F[le],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:D})}),wt(E,"renderActivePoints",function(P){var I=P.item,O=P.activePoint,R=P.basePoint,D=P.childIndex,C=P.isRange,L=[],F=I.props.key,$=I.item.type.defaultProps!==void 0?Ne(Ne({},I.item.type.defaultProps),I.item.props):I.item.props,V=$.activeDot,Y=$.dataKey,W=Ne(Ne({index:D,dataKey:Y,cx:O.x,cy:O.y,r:4,fill:kA(I.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},yt(V,!1)),Pv(V));return L.push(b.renderActiveDot(V,W,"".concat(F,"-activePoint-").concat(D))),R?L.push(b.renderActiveDot(V,Ne(Ne({},W),{},{cx:R.x,cy:R.y}),"".concat(F,"-basePoint-").concat(D))):C&&L.push(null),L}),wt(E,"renderGraphicChild",function(P,I,O){var R=E.filterFormatItem(P,I,O);if(!R)return null;var D=E.getTooltipEventType(),C=E.state,L=C.isTooltipActive,F=C.tooltipAxis,$=C.activeTooltipIndex,V=C.activeLabel,Y=E.props.children,W=qi(Y,bi),U=R.props,Q=U.points,le=U.isRange,oe=U.baseLine,j=R.item.type.defaultProps!==void 0?Ne(Ne({},R.item.type.defaultProps),R.item.props):R.item.props,z=j.activeDot,K=j.hide,re=j.activeBar,ae=j.activeShape,fe=!!(!K&&L&&W&&(z||re||ae)),xe={};D!=="axis"&&W&&W.props.trigger==="click"?xe={onClick:ly(E.handleItemMouseEnter,P.props.onClick)}:D!=="axis"&&(xe={onMouseLeave:ly(E.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:ly(E.handleItemMouseEnter,P.props.onMouseEnter)});var ue=X.cloneElement(P,Ne(Ne({},R.props),xe));function ye(De){return typeof F.dataKey=="function"?F.dataKey(De.payload):null}if(fe)if($>=0){var Se,me;if(F.dataKey&&!F.allowDuplicatedCategory){var je=typeof F.dataKey=="function"?ye:"payload.".concat(F.dataKey.toString());Se=Tv(Q,je,V),me=le&&oe&&Tv(oe,je,V)}else Se=Q==null?void 0:Q[$],me=le&&oe&&oe[$];if(ae||re){var se=P.props.activeIndex!==void 0?P.props.activeIndex:$;return[X.cloneElement(P,Ne(Ne(Ne({},R.props),xe),{},{activeIndex:se})),null,null]}if(!Rt(Se))return[ue].concat(vf(E.renderActivePoints({item:R,activePoint:Se,basePoint:me,childIndex:$,isRange:le})))}else{var ee,Ve=(ee=E.getItemByXY(E.state.activeCoordinate))!==null&&ee!==void 0?ee:{graphicalItem:ue},qe=Ve.graphicalItem,Ge=qe.item,_e=Ge===void 0?P:Ge,Re=qe.childIndex,Ae=Ne(Ne(Ne({},R.props),xe),{},{activeIndex:Re});return[X.cloneElement(_e,Ae),null,null]}return le?[ue,null,null]:[ue,null]}),wt(E,"renderCustomized",function(P,I,O){return X.cloneElement(P,Ne(Ne({key:"recharts-customized-".concat(O)},E.props),E.state))}),wt(E,"renderMap",{CartesianGrid:{handler:hy,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:hy},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:hy},YAxis:{handler:hy},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((A=_.id)!==null&&A!==void 0?A:Lf("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=$M(E.triggeredAfterMouseMove,(N=_.throttleDelay)!==null&&N!==void 0?N:1e3/60),E.state={},E}return P0e(b,w),A0e(b,[{key:"componentDidMount",value:function(){var A,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var A=this.props,N=A.children,E=A.data,P=A.height,I=A.layout,O=qi(N,bi);if(O){var R=O.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,C=r5(this.state,E,R,D),L=this.state.tooltipTicks[R].coordinate,F=(this.state.offset.top+P)/2,$=I==="horizontal",V=$?{x:L,y:F}:{y:L,x:F},Y=this.state.formattedGraphicalItems.find(function(U){var Q=U.item;return Q.type.name==="Scatter"});Y&&(V=Ne(Ne({},V),Y.props.points[R].tooltipPosition),C=Y.props.points[R].tooltipPayload);var W={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:D,activePayload:C,activeCoordinate:V};this.setState(W),this.renderCursor(O),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(A,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==A.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==A.margin){var E,P;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(A){O2([qi(A.children,bi)],[qi(this.props.children,bi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var A=qi(this.props.children,bi);if(A&&typeof A.props.shared=="boolean"){var N=A.props.shared?"axis":"item";return s.indexOf(N)>=0?N:a}return a}},{key:"getMouseInfo",value:function(A){if(!this.container)return null;var N=this.container,E=N.getBoundingClientRect(),P=kae(E),I={chartX:Math.round(A.pageX-P.left),chartY:Math.round(A.pageY-P.top)},O=E.width/N.offsetWidth||1,R=this.inRange(I.chartX,I.chartY,O);if(!R)return null;var D=this.state,C=D.xAxisMap,L=D.yAxisMap,F=this.getTooltipEventType(),$=W3(this.state,this.props.data,this.props.layout,R);if(F!=="axis"&&C&&L){var V=ul(C).scale,Y=ul(L).scale,W=V&&V.invert?V.invert(I.chartX):null,U=Y&&Y.invert?Y.invert(I.chartY):null;return Ne(Ne({},I),{},{xValue:W,yValue:U},$)}return $?Ne(Ne({},I),$):null}},{key:"inRange",value:function(A,N){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,I=A/E,O=N/E;if(P==="horizontal"||P==="vertical"){var R=this.state.offset,D=I>=R.left&&I<=R.left+R.width&&O>=R.top&&O<=R.top+R.height;return D?{x:I,y:O}:null}var C=this.state,L=C.angleAxisMap,F=C.radiusAxisMap;if(L&&F){var $=ul(L);return vk({x:I,y:O},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var A=this.props.children,N=this.getTooltipEventType(),E=qi(A,bi),P={};E&&N==="axis"&&(E.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var I=Pv(this.props,this.handleOuterEvent);return Ne(Ne({},I),P)}},{key:"addListener",value:function(){Hb.on(Gb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Hb.removeListener(Gb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(A,N,E){for(var P=this.state.formattedGraphicalItems,I=0,O=P.length;I<O;I++){var R=P[I];if(R.item===A||R.props.key===A.key||N===hs(R.item.type)&&E===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var A=this.clipPathId,N=this.state.offset,E=N.left,P=N.top,I=N.height,O=N.width;return ce.createElement("defs",null,ce.createElement("clipPath",{id:A},ce.createElement("rect",{x:E,y:P,height:I,width:O})))}},{key:"getXScales",value:function(){var A=this.state.xAxisMap;return A?Object.entries(A).reduce(function(N,E){var P=z3(E,2),I=P[0],O=P[1];return Ne(Ne({},N),{},wt({},I,O.scale))},{}):null}},{key:"getYScales",value:function(){var A=this.state.yAxisMap;return A?Object.entries(A).reduce(function(N,E){var P=z3(E,2),I=P[0],O=P[1];return Ne(Ne({},N),{},wt({},I,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(A){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[A])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(A){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[A])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(A){var N=this.state,E=N.formattedGraphicalItems,P=N.activeItem;if(E&&E.length)for(var I=0,O=E.length;I<O;I++){var R=E[I],D=R.props,C=R.item,L=C.type.defaultProps!==void 0?Ne(Ne({},C.type.defaultProps),C.props):C.props,F=hs(C.type);if(F==="Bar"){var $=(D.data||[]).find(function(U){return hhe(A,U)});if($)return{graphicalItem:R,payload:$}}else if(F==="RadialBar"){var V=(D.data||[]).find(function(U){return vk(A,U)});if(V)return{graphicalItem:R,payload:V}}else if(z1(R,P)||H1(R,P)||ym(R,P)){var Y=tme({graphicalItem:R,activeTooltipItem:P,itemData:L.data}),W=L.activeIndex===void 0?Y:L.activeIndex;return{graphicalItem:Ne(Ne({},R),{},{childIndex:W}),payload:ym(R,P)?L.data[Y]:R.props.data[Y]}}}return null}},{key:"render",value:function(){var A=this;if(!lP(this))return null;var N=this.props,E=N.children,P=N.className,I=N.width,O=N.height,R=N.style,D=N.compact,C=N.title,L=N.desc,F=H3(N,y0e),$=yt(F,!1);if(D)return ce.createElement(N3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement(R2,fd({},$,{width:I,height:O,title:C,desc:L}),this.renderClipPath(),cP(E,this.renderMap)));if(this.props.accessibilityLayer){var V,Y;$.tabIndex=(V=this.props.tabIndex)!==null&&V!==void 0?V:0,$.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",$.onKeyDown=function(U){A.accessibilityManager.keyboardEvent(U)},$.onFocus=function(){A.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return ce.createElement(N3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement("div",fd({className:$t("recharts-wrapper",P),style:Ne({position:"relative",cursor:"default",width:I,height:O},R)},W,{ref:function(Q){A.container=Q}}),ce.createElement(R2,fd({},$,{width:I,height:O,title:C,desc:L,style:R0e}),this.renderClipPath(),cP(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(X.Component);wt(v,"displayName",n),wt(v,"defaultProps",Ne({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),wt(v,"getDerivedStateFromProps",function(w,b){var _=w.dataKey,A=w.data,N=w.children,E=w.width,P=w.height,I=w.layout,O=w.stackOffset,R=w.margin,D=b.dataStartIndex,C=b.dataEndIndex;if(b.updateId===void 0){var L=K3(w);return Ne(Ne(Ne({},L),{},{updateId:0},h(Ne(Ne({props:w},L),{},{updateId:0}),b)),{},{prevDataKey:_,prevData:A,prevWidth:E,prevHeight:P,prevLayout:I,prevStackOffset:O,prevMargin:R,prevChildren:N})}if(_!==b.prevDataKey||A!==b.prevData||E!==b.prevWidth||P!==b.prevHeight||I!==b.prevLayout||O!==b.prevStackOffset||!Sd(R,b.prevMargin)){var F=K3(w),$={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},V=Ne(Ne({},W3(b,A,I)),{},{updateId:b.updateId+1}),Y=Ne(Ne(Ne({},F),$),V);return Ne(Ne(Ne({},Y),h(Ne({props:w},Y),b)),{},{prevDataKey:_,prevData:A,prevWidth:E,prevHeight:P,prevLayout:I,prevStackOffset:O,prevMargin:R,prevChildren:N})}if(!O2(N,b.prevChildren)){var W,U,Q,le,oe=qi(N,lf),j=oe&&(W=(U=oe.props)===null||U===void 0?void 0:U.startIndex)!==null&&W!==void 0?W:D,z=oe&&(Q=(le=oe.props)===null||le===void 0?void 0:le.endIndex)!==null&&Q!==void 0?Q:C,K=j!==D||z!==C,re=!Rt(A),ae=re&&!K?b.updateId:b.updateId+1;return Ne(Ne({updateId:ae},h(Ne(Ne({props:w},b),{},{updateId:ae,dataStartIndex:j,dataEndIndex:z}),b)),{},{prevChildren:N,dataStartIndex:j,dataEndIndex:z})}return null}),wt(v,"renderActiveDot",function(w,b,_){var A;return X.isValidElement(w)?A=X.cloneElement(w,b):Et(w)?A=w(b):A=ce.createElement(F1,b),ce.createElement(Yt,{className:"recharts-active-dot",key:_},A)});var y=X.forwardRef(function(b,_){return ce.createElement(v,fd({},b,{ref:_}))});return y.displayName=v.displayName,y},qA=BA({chartName:"LineChart",GraphicalChild:Ol,axisComponents:[{axisType:"xAxis",AxisComp:Vl},{axisType:"yAxis",AxisComp:zl}],formatAxisMap:P8}),z0e=BA({chartName:"BarChart",GraphicalChild:mc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Vl},{axisType:"yAxis",AxisComp:zl}],formatAxisMap:P8}),H0e=BA({chartName:"PieChart",GraphicalChild:Is,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:V1},{axisType:"radiusAxis",AxisComp:B1}],formatAxisMap:Nce,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function G0e({data:t}){const e=["#3b82f6","#60a5fa","#93c5fd","#cbd5e1","#ef4444"];return f.jsx(Mm,{width:"100%",height:300,children:f.jsxs(z0e,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[f.jsx(zm,{strokeDasharray:"3 3"}),f.jsx(Vl,{dataKey:"range"}),f.jsx(zl,{}),f.jsx(bi,{}),f.jsx(mc,{dataKey:"count",fill:"#3b82f6",radius:[8,8,0,0],children:t.map((n,r)=>f.jsx(Dm,{fill:e[r%e.length]},`cell-${r}`))})]})})}function W0e({data:t}){return f.jsx(Mm,{width:"100%",height:300,children:f.jsxs(qA,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[f.jsx(zm,{strokeDasharray:"3 3"}),f.jsx(Vl,{dataKey:"date"}),f.jsx(zl,{}),f.jsx(bi,{}),f.jsx(Co,{}),f.jsx(Ol,{type:"monotone",dataKey:"completions",stroke:"#10b981",strokeWidth:2,name:"Completions"}),f.jsx(Ol,{type:"monotone",dataKey:"assignments",stroke:"#3b82f6",strokeWidth:2,name:"Assignments"})]})})}const Y3=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"];function K0e({data:t}){return f.jsx(Mm,{width:"100%",height:300,children:f.jsxs(H0e,{children:[f.jsx(Is,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:n})=>`${e}: ${(n*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((e,n)=>f.jsx(Dm,{fill:Y3[n%Y3.length]},`cell-${n}`))}),f.jsx(bi,{}),f.jsx(Co,{})]})})}function J0e({user:t}){const[e,n]=X.useState({totalAssignments:0,totalCompletions:0,averageScore:0,completionRate:0}),[r,i]=X.useState({scoreDistribution:[],completionTrend:[],stationPerformance:[],studentPerformance:[],hintUsage:[],diagnosisAccuracy:[],timeToCompletion:[],sloTrends:[]}),[a,o]=X.useState(!0);X.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:l}=await ke.from("stations").select("id, title").eq("created_by",t.id);if(!l)return;const u=l.map(W=>W.id),{data:c}=await ke.from("case_snapshots").select("id, station_id, clinical_case").in("station_id",u);if(!c)return;const d=c.map(W=>W.id),{data:p}=await ke.from("assignments").select("id, snapshot_id, created_at, due_at").in("snapshot_id",d),{data:h}=await ke.from("simulation_runs").select("score, submitted_at, assignment_id, started_at, student_id, transcript").in("assignment_id",(p==null?void 0:p.map(W=>W.id))||[]),v=(h==null?void 0:h.filter(W=>W.submitted_at))||[],y=v.map(W=>{var U;return((U=W.score)==null?void 0:U.overall)||0}).filter(W=>W>0),w=y.length>0?y.reduce((W,U)=>W+U,0)/y.length:0;n({totalAssignments:(p==null?void 0:p.length)||0,totalCompletions:v.length,averageScore:Math.round(w),completionRate:p&&p.length>0?Math.round(v.length/p.length*100):0});const _=[{range:"0-20",min:0,max:20},{range:"21-40",min:21,max:40},{range:"41-60",min:41,max:60},{range:"61-80",min:61,max:80},{range:"81-100",min:81,max:100}].map(W=>({range:W.range,count:y.filter(U=>U>=W.min&&U<=W.max).length})),A=new Date,N=[];for(let W=6;W>=0;W--){const U=new Date(A);U.setDate(U.getDate()-W);const Q=U.toISOString().split("T")[0],le=v.filter(j=>{var K;return((K=j.submitted_at)==null?void 0:K.split("T")[0])===Q}).length,oe=(p==null?void 0:p.filter(j=>{var K;return((K=j.created_at)==null?void 0:K.split("T")[0])===Q}).length)||0;N.push({date:U.toLocaleDateString("en-US",{month:"short",day:"numeric"}),completions:le,assignments:oe})}const E=new Map;v.forEach(W=>{const U=p==null?void 0:p.find(Q=>Q.id===W.assignment_id);if(U){const Q=c.find(le=>le.id===U.snapshot_id);if(Q){const le=l.find(oe=>oe.id===Q.station_id);if(le){const oe=E.get(le.title||"Untitled")||0;E.set(le.title||"Untitled",oe+1)}}}});const P=Array.from(E.entries()).map(([W,U])=>({name:W,value:U})).slice(0,6),I=new Map;p==null||p.forEach(W=>{var z;const U=v.filter(K=>K.assignment_id===W.id),Q=U.map(K=>{var re;return((re=K.score)==null?void 0:re.overall)||0}).filter(K=>K>0),le=c.find(K=>K.id===W.snapshot_id),oe=((z=le==null?void 0:le.clinical_case)==null?void 0:z.title)||"Untitled Assignment",j=new Set(U.map(K=>K.student_id));I.set(oe,{scores:Q,completions:U.length,totalStudents:j.size})});const O=Array.from(I.entries()).map(([W,U])=>({assignmentTitle:W,averageScore:U.scores.length>0?Math.round(U.scores.reduce((Q,le)=>Q+le,0)/U.scores.length):0,completions:U.completions,totalStudents:U.totalStudents})).sort((W,U)=>U.averageScore-W.averageScore).slice(0,10),R=new Map;v.forEach(W=>{var Q,le;const U=p==null?void 0:p.find(oe=>oe.id===W.assignment_id);if(U){const oe=c.find(re=>re.id===U.snapshot_id),j=((Q=oe==null?void 0:oe.clinical_case)==null?void 0:Q.title)||"Untitled Assignment",z=((le=W.transcript)==null?void 0:le.hintsUsed)||0,K=R.get(j)||{hints:[],total:0};K.hints.push(z),K.total+=z,R.set(j,K)}});const D=Array.from(R.entries()).map(([W,U])=>({assignmentTitle:W,averageHints:U.hints.length>0?Math.round(U.total/U.hints.length*10)/10:0,totalHints:U.total})).sort((W,U)=>U.averageHints-W.averageHints).slice(0,10),C=[];for(let W=6;W>=0;W--){const U=new Date(A);U.setDate(U.getDate()-W);const Q=U.toISOString().split("T")[0],le=v.filter(z=>{var re;return((re=z.submitted_at)==null?void 0:re.split("T")[0])===Q});let oe=0,j=0;le.forEach(z=>{const K=z.score;(K==null?void 0:K.diagnosisCorrect)!==void 0&&(j++,K.diagnosisCorrect&&oe++)}),C.push({date:U.toLocaleDateString("en-US",{month:"short",day:"numeric"}),accuracy:j>0?Math.round(oe/j*100):0,total:j})}const L=new Map;v.forEach(W=>{var Q;const U=p==null?void 0:p.find(le=>le.id===W.assignment_id);if(U&&W.started_at&&W.submitted_at){const le=c.find(ae=>ae.id===U.snapshot_id),oe=((Q=le==null?void 0:le.clinical_case)==null?void 0:Q.title)||"Untitled Assignment",j=new Date(W.started_at).getTime(),K=(new Date(W.submitted_at).getTime()-j)/(1e3*60),re=L.get(oe)||[];re.push(K),L.set(oe,re)}});const F=Array.from(L.entries()).map(([W,U])=>{const Q=[...U].sort((oe,j)=>oe-j),le=Q.length>0?Q[Math.floor(Q.length/2)]:0;return{assignmentTitle:W,averageTime:U.length>0?Math.round(U.reduce((oe,j)=>oe+j,0)/U.length*10)/10:0,medianTime:Math.round(le*10)/10}}).slice(0,10),$=new Map;v.forEach(W=>{const U=W.score;((U==null?void 0:U.sloResults)||[]).forEach(le=>{const oe=$.get(le.sloId)||{text:"",correct:0,total:0};oe.total++,le.status==="Achieved"&&oe.correct++,$.set(le.sloId,oe)})});const{data:V}=await ke.from("slo").select("id, text");V==null||V.forEach(W=>{const U=$.get(W.id);U&&(U.text=W.text)});const Y=Array.from($.entries()).map(([W,U])=>({sloId:W,sloText:U.text||"Unknown SLO",achievementRate:U.total>0?Math.round(U.correct/U.total*100):0,attempts:U.total})).sort((W,U)=>U.attempts-W.attempts).slice(0,10);i({scoreDistribution:_,completionTrend:N,stationPerformance:P,studentPerformance:O,hintUsage:D,diagnosisAccuracy:C,timeToCompletion:F,sloTrends:Y})}catch(l){console.error("Error loading analytics:",l)}finally{o(!1)}};return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto pb-20 md:pb-0",children:f.jsxs("div",{className:"p-4 md:p-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Analytics Dashboard"}),a?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Total Assignments"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.totalAssignments})]}),f.jsx(Eo,{className:"w-8 h-8 text-blue-600"})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Completions"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.totalCompletions})]}),f.jsx(Cl,{className:"w-8 h-8 text-green-600"})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Average Score"}),f.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[e.averageScore,"%"]})]}),f.jsx(Tf,{className:"w-8 h-8 text-purple-600"})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Completion Rate"}),f.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[e.completionRate,"%"]})]}),f.jsx(Qa,{className:"w-8 h-8 text-orange-600"})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Score Distribution"}),r.scoreDistribution.length>0?f.jsx(G0e,{data:r.scoreDistribution}):f.jsx("p",{className:"text-gray-500 text-center py-8",children:"No score data available"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Completion Trend (Last 7 Days)"}),r.completionTrend.length>0?f.jsx(W0e,{data:r.completionTrend}):f.jsx("p",{className:"text-gray-500 text-center py-8",children:"No trend data available"})]})]}),r.stationPerformance.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Station Performance"}),f.jsx(K0e,{data:r.stationPerformance})]}),r.studentPerformance.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Top Assignments Performance"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignment"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average Score"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completions"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Students"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.studentPerformance.map((l,u)=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:l.assignmentTitle}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f.jsxs("span",{className:`font-semibold ${l.averageScore>=80?"text-green-600":l.averageScore>=60?"text-yellow-600":"text-red-600"}`,children:[l.averageScore,"%"]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.completions}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.totalStudents})]},u))})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r.diagnosisAccuracy.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Diagnosis Accuracy Trend (Last 7 Days)"}),f.jsx("div",{className:"space-y-3",children:r.diagnosisAccuracy.map((l,u)=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-600",children:l.date}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:`h-2 rounded-full ${l.accuracy>=80?"bg-green-500":l.accuracy>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${l.accuracy}%`}})}),f.jsxs("span",{className:"text-sm font-semibold text-gray-900 w-12 text-right",children:[l.accuracy,"%"]}),f.jsxs("span",{className:"text-xs text-gray-500",children:["(",l.total,")"]})]})]},u))})]}),r.hintUsage.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Hint Usage by Assignment"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Assignment"}),f.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Hints"}),f.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.hintUsage.map((l,u)=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:l.assignmentTitle}),f.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:l.averageHints}),f.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:l.totalHints})]},u))})]})})]})]}),r.timeToCompletion.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Time to Completion"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assignment"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Time (min)"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Median Time (min)"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.timeToCompletion.map((l,u)=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:l.assignmentTitle}),f.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:l.averageTime}),f.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:l.medianTime})]},u))})]})})]}),r.sloTrends.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"SLO Achievement Trends"}),f.jsx("div",{className:"space-y-4",children:r.sloTrends.map((l,u)=>f.jsxs("div",{className:"border-l-4 border-primary-500 pl-4 py-2",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:l.sloText}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:`h-2 rounded-full ${l.achievementRate>=70?"bg-green-500":l.achievementRate>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${l.achievementRate}%`}})}),f.jsxs("span",{className:"text-sm font-semibold text-gray-900 w-16 text-right",children:[l.achievementRate,"%"]}),f.jsxs("span",{className:"text-xs text-gray-500",children:["(",l.attempts," attempts)"]})]})]},u))})]})]})]})}),f.jsx(Vr,{role:"faculty"})]})}function Y0e({user:t}){const[e,n]=X.useState({totalStations:0,approvedCases:0,pendingReview:0,totalAssignments:0}),[r,i]=X.useState(!0);X.useEffect(()=>{a()},[]);const a=async()=>{try{const{data:s}=await ke.from("stations").select("id").eq("created_by",t.id),{data:l}=await ke.from("case_snapshots").select("id, station_id").eq("approved_by",t.id),u=(s==null?void 0:s.map(y=>y.id))||[],{data:c}=await ke.from("case_snapshots").select("station_id").in("station_id",u),d=new Set((c==null?void 0:c.map(y=>y.station_id))||[]),p=u.filter(y=>!d.has(y)),h=(l==null?void 0:l.map(y=>y.id))||[],{data:v}=await ke.from("assignments").select("id").in("snapshot_id",h);n({totalStations:(s==null?void 0:s.length)||0,approvedCases:(l==null?void 0:l.length)||0,pendingReview:p.length,totalAssignments:(v==null?void 0:v.length)||0})}catch(s){console.error("Error loading stats:",s)}finally{i(!1)}},o=async()=>{await IS()};return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"faculty"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto pb-20 md:pb-0",children:f.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"}),f.jsx("p",{className:"text-gray-600",children:"View your account information and statistics"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center",children:f.jsx(To,{className:"w-10 h-10 text-primary-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),f.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mt-1",children:[f.jsx(vL,{className:"w-4 h-4"}),f.jsx("span",{children:t.email})]}),f.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mt-1",children:[f.jsx(Pf,{className:"w-4 h-4"}),f.jsxs("span",{children:["Member since ",new Date(t.created_at).toLocaleDateString()]})]})]})]}),f.jsx("div",{className:"border-t pt-4",children:f.jsx("div",{className:"flex items-center gap-2 text-sm",children:f.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-800 rounded-full font-medium",children:"Faculty"})})})]}),!r&&f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Total Stations"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.totalStations})]}),f.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:f.jsx(Qi,{className:"w-6 h-6 text-blue-600"})})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Approved Cases"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.approvedCases})]}),f.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:f.jsx(Qa,{className:"w-6 h-6 text-green-600"})})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.pendingReview})]}),f.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:f.jsx(uc,{className:"w-6 h-6 text-yellow-600"})})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Total Assignments"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.totalAssignments})]}),f.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:f.jsx(Qi,{className:"w-6 h-6 text-purple-600"})})]})})]}),r&&f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[f.jsx(yL,{className:"w-5 h-5"}),f.jsx("span",{children:"Sign Out"})]})})]})}),f.jsx(Vr,{role:"faculty"})]})}function X3({user:t}){const e=ro(),[n,r]=X.useState([]),[i,a]=X.useState([]),[o,s]=X.useState(!0),[l,u]=X.useState("all"),[c,d]=X.useState(""),[p,h]=X.useState("all");X.useEffect(()=>{v()},[]),X.useEffect(()=>{y()},[n,l,c,p]);const v=async()=>{try{const{data:E}=await ke.from("cohort_members").select("cohort_id").eq("student_id",t.id);if(!E||E.length===0){s(!1);return}const P=E.map(D=>D.cohort_id),{data:I,error:O}=await ke.from("assignments").select("*").in("cohort_id",P).order("created_at",{ascending:!1});if(O)throw O;const R=await Promise.all((I||[]).map(async D=>{var W;const{data:C}=await ke.from("case_snapshots").select("*").eq("id",D.snapshot_id).single(),{data:L}=await ke.from("simulation_runs").select("id, score, submitted_at").eq("assignment_id",D.id).eq("student_id",t.id).order("submitted_at",{ascending:!1}),F=(L==null?void 0:L.length)||0,$=(L==null?void 0:L.reduce((U,Q)=>{const le=Q.score;return Math.max(U,(le==null?void 0:le.overall)||0)},0))||0,V=(W=L==null?void 0:L[0])==null?void 0:W.submitted_at;let Y="not_started";return F>0&&(Y=(L==null?void 0:L.some(Q=>Q.submitted_at))?"completed":"in_progress"),{...D,snapshot:C,attemptsCount:F,bestScore:$,lastAttempt:V,status:Y}}));r(R)}catch(E){console.error("Error loading assignments:",E)}finally{s(!1)}},y=()=>{let E=[...n];if(p==="pending"?E=E.filter(P=>P.status==="not_started"&&(!P.due_at||new Date(P.due_at)>new Date)):p==="in_progress"?E=E.filter(P=>P.status==="in_progress"):p==="completed"&&(E=E.filter(P=>P.status==="completed")),l!=="all"&&(E=E.filter(P=>P.status===l)),c){const P=c.toLowerCase();E=E.filter(I=>{var O,R,D,C,L,F,$;return((D=(R=(O=I.snapshot)==null?void 0:O.clinical_case)==null?void 0:R.title)==null?void 0:D.toLowerCase().includes(P))||(($=(F=(L=(C=I.snapshot)==null?void 0:C.clinical_case)==null?void 0:L.patientProfile)==null?void 0:F.name)==null?void 0:$.toLowerCase().includes(P))})}a(E)},w=E=>Math.max(0,E.max_attempts-(E.attemptsCount||0)),b=E=>E.due_at?new Date(E.due_at)<new Date&&E.status!=="completed":!1,_=({dueDate:E})=>{const[P,I]=X.useState("");return X.useEffect(()=>{const O=()=>{const D=new Date,L=new Date(E).getTime()-D.getTime();if(L<=0){I("Overdue");return}const F=Math.floor(L/(1e3*60*60*24)),$=Math.floor(L%(1e3*60*60*24)/(1e3*60*60)),V=Math.floor(L%(1e3*60*60)/(1e3*60));F>0?I(`${F}d ${$}h left`):$>0?I(`${$}h ${V}m left`):I(`${V}m left`)};O();const R=setInterval(O,6e4);return()=>clearInterval(R)},[E]),f.jsxs("span",{className:"text-xs text-primary-600 font-medium ml-2",children:["(",P,")"]})},A=E=>b(E)?f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Overdue"}):E.status==="completed"?f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Completed"}):E.status==="in_progress"?f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"In Progress"}):f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:"Not Started"}),N={total:n.length,completed:n.filter(E=>E.status==="completed").length,inProgress:n.filter(E=>E.status==="in_progress").length,notStarted:n.filter(E=>E.status==="not_started").length};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 pb-20 md:pb-6",children:[f.jsxs("div",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"My Assignments"}),f.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"View and manage your OSCE simulations"})]}),!o&&f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6",children:[f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border border-gray-200 hover:shadow-lg transition-shadow",children:[f.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:N.total}),f.jsx("div",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"Total"})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border border-green-200 hover:shadow-lg transition-shadow",children:[f.jsx("div",{className:"text-2xl md:text-3xl font-bold text-green-700",children:N.completed}),f.jsx("div",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"Completed"})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border border-yellow-200 hover:shadow-lg transition-shadow",children:[f.jsx("div",{className:"text-2xl md:text-3xl font-bold text-yellow-700",children:N.inProgress}),f.jsx("div",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"In Progress"})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border border-gray-200 hover:shadow-lg transition-shadow",children:[f.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-700",children:N.notStarted}),f.jsx("div",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"Not Started"})]})]}),!o&&f.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[f.jsx("div",{className:"border-b border-gray-200",children:f.jsx("div",{className:"flex overflow-x-auto",children:[{key:"all",label:"All",count:n.length},{key:"pending",label:"Pending",count:n.filter(E=>E.status==="not_started"&&(!E.due_at||new Date(E.due_at)>new Date)).length},{key:"in_progress",label:"In Progress",count:n.filter(E=>E.status==="in_progress").length},{key:"completed",label:"Completed",count:n.filter(E=>E.status==="completed").length}].map(E=>f.jsxs("button",{onClick:()=>h(E.key),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${p===E.key?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[E.label,E.count>0&&f.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${p===E.key?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-600"}`,children:E.count})]},E.key))})}),f.jsx("div",{className:"p-4 border-b border-gray-200",children:f.jsxs("div",{className:"relative",children:[f.jsx(jS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:"Search assignments...",value:c,onChange:E=>d(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})})]}),o?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):i.length===0?f.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[f.jsx(r1,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:n.length===0?"No Assignments Available":"No Assignments Match Your Filters"}),f.jsx("p",{className:"text-gray-600 text-sm mb-4",children:n.length===0?"You don't have any assignments yet. Check back later or contact your faculty if you expect to see assignments here.":"Try adjusting your search or filter criteria to find what you're looking for."}),n.length>0&&f.jsx("button",{onClick:()=>{h("all"),u("all"),d("")},className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Clear Filters"}),n.length===0&&f.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:f.jsxs("p",{className:"text-sm text-blue-800",children:[f.jsx("strong",{children:"Tip:"})," Make sure you're enrolled in cohorts to receive assignments. You can manage your cohorts in your Profile settings."]})})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(E=>{var P,I,O,R,D,C;return f.jsxs("div",{className:`bg-white rounded-xl shadow-md p-5 md:p-6 hover:shadow-xl transition-all border-2 ${b(E)?"border-l-4 border-red-500 border-r-2 border-t-2 border-b-2":"border-gray-200"}`,children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900 flex-1",children:((I=(P=E.snapshot)==null?void 0:P.clinical_case)==null?void 0:I.title)||"Untitled Station"}),A(E)]}),((R=(O=E.snapshot)==null?void 0:O.clinical_case)==null?void 0:R.patientProfile)&&f.jsxs("div",{className:"mb-3 text-sm text-gray-600",children:[f.jsx("span",{className:"font-medium",children:"Patient:"})," ",E.snapshot.clinical_case.patientProfile.name]}),f.jsxs("div",{className:"space-y-2 mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f.jsx(uc,{className:"w-4 h-4"}),f.jsxs("span",{children:[((C=(D=E.snapshot)==null?void 0:D.clinical_case)==null?void 0:C.durationMinutes)||15," minutes"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f.jsx(kT,{className:"w-4 h-4"}),f.jsxs("span",{children:[w(E)," of ",E.max_attempts," attempts left"]})]}),E.bestScore!==void 0&&E.bestScore>0&&f.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[f.jsx(Qa,{className:"w-4 h-4"}),f.jsxs("span",{children:["Best Score: ",E.bestScore.toFixed(0),"%"]})]}),E.due_at&&f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[f.jsx(Pf,{className:"w-4 h-4"}),f.jsxs("span",{className:b(E)?"text-red-600 font-medium":"",children:["Due: ",new Date(E.due_at).toLocaleDateString()]}),!b(E)&&new Date(E.due_at)>new Date&&f.jsx(_,{dueDate:E.due_at})]})]}),f.jsx("div",{className:"flex gap-2",children:E.status==="completed"?f.jsxs("button",{onClick:()=>{e("/results")},className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:[f.jsx(No,{className:"w-4 h-4"}),"View Results"]}):f.jsxs("button",{onClick:()=>e(`/simulation/${E.id}`),disabled:w(E)===0,className:"flex-1 flex items-center justify-center gap-2 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[f.jsx(kT,{className:"w-4 h-4"}),E.status==="in_progress"?"Continue":"Start Simulation"]})})]},E.id)})})]}),f.jsx(Vr,{role:"student"})]})}function X0e({activeTab:t,onTabChange:e}){const n=[{id:"chat",label:"Chat",icon:Nz},{id:"exam",label:"Exam",icon:kz},{id:"labs",label:"Labs",icon:Iz},{id:"diagnosis",label:"Diagnosis",icon:Qi}];return f.jsx("div",{className:"bg-white border-b-2 border-gray-300 shadow-sm",children:f.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:n.map(r=>{const i=r.icon,a=t===r.id;return f.jsxs("button",{onClick:()=>e(r.id),className:`flex items-center gap-2 px-4 md:px-6 py-3 md:py-4 text-sm md:text-base font-semibold border-b-3 transition-all whitespace-nowrap ${a?"border-primary-600 text-primary-700 bg-primary-50":"border-transparent text-gray-600 hover:text-primary-600 hover:bg-gray-50 hover:border-gray-300"}`,children:[f.jsx(i,{className:`w-4 h-4 md:w-5 md:h-5 ${a?"text-primary-600":""}`}),f.jsx("span",{children:r.label})]},r.id)})})})}function Z0e({messages:t,input:e,setInput:n,sending:r,onSendMessage:i,onRequestHint:a,hintsRemaining:o}){const s=X.useRef(null);return X.useEffect(()=>{var l;(l=s.current)==null||l.scrollIntoView({behavior:"smooth"})},[t]),f.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[f.jsxs("div",{className:"bg-white border-b-2 border-gray-300 p-4 flex items-center justify-between shadow-sm",children:[f.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Chat with Patient"}),f.jsxs("button",{onClick:a,disabled:o<=0,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-gray-900 rounded-lg hover:from-yellow-500 hover:to-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md font-semibold text-sm",children:[f.jsx(gL,{className:"w-4 h-4"}),"Hint (",o,")"]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map((l,u)=>f.jsxs("div",{className:`flex ${l.role==="user"?"justify-end":"justify-start"} items-start gap-2`,children:[l.role==="assistant"&&f.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx(To,{className:"w-4 h-4 text-primary-600"})}),f.jsxs("div",{className:`max-w-[85%] md:max-w-[75%] rounded-xl p-3 md:p-4 shadow-md ${l.role==="user"?"bg-gradient-to-br from-primary-600 to-primary-700 text-white":"bg-white border-2 border-gray-200 text-gray-900"}`,children:[f.jsx("p",{className:`whitespace-pre-wrap ${l.role==="user"?"text-white":"text-gray-800"}`,children:l.content}),f.jsx("span",{className:`text-xs mt-2 block ${l.role==="user"?"text-primary-100":"text-gray-500"}`,children:l.timestamp instanceof Date?l.timestamp.toLocaleTimeString():new Date(l.timestamp).toLocaleTimeString()})]}),l.role==="user"&&f.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx(To,{className:"w-4 h-4 text-gray-600"})})]},u)),r&&f.jsxs("div",{className:"flex justify-start items-start gap-2",children:[f.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:f.jsx(To,{className:"w-4 h-4 text-primary-600"})}),f.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 shadow-sm",children:f.jsxs("div",{className:"flex gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),f.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),f.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),f.jsx("div",{ref:s})]}),f.jsx("div",{className:"bg-white border-t-2 border-gray-300 p-4 shadow-lg",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:e,onChange:l=>n(l.target.value),onKeyPress:l=>l.key==="Enter"&&!r&&i(),placeholder:"Ask a question...",className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 placeholder-gray-400",disabled:r}),f.jsx("button",{onClick:i,disabled:r||!e.trim(),className:"px-5 py-3 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-lg hover:from-primary-700 hover:to-primary-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md font-semibold",children:f.jsx(Pz,{className:"w-5 h-5"})})]})})]})}function Q0e({caseData:t,vitalsEnabled:e=!1,onToggleVitals:n}){const r=(t==null?void 0:t.physicalExam)||{},i=r.vitals||{},a=r.generalExam||"",o=r.systemicExam||"";return f.jsxs("div",{className:"flex flex-col h-full overflow-y-auto p-4 md:p-6 space-y-4 md:space-y-6 bg-gray-50",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Physical Examination"}),f.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"AI-generated examination findings"})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 md:p-6 border border-gray-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"bg-primary-100 p-2 rounded-lg",children:f.jsx(wz,{className:"w-5 h-5 text-primary-700"})}),f.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Vital Signs"})]}),n&&f.jsx("button",{onClick:n,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${e?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e?f.jsxs(f.Fragment,{children:[f.jsx(a1,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm",children:"Enabled"})]}):f.jsxs(f.Fragment,{children:[f.jsx(CT,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm",children:"Enable Vitals"})]})})]}),e?f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-2",children:"Blood Pressure"}),f.jsx("div",{className:"w-full px-3 py-2.5 bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-lg text-gray-900 font-medium",children:i.bp||"Not recorded"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-2",children:"Heart Rate"}),f.jsx("div",{className:"w-full px-3 py-2.5 bg-gradient-to-br from-red-50 to-red-100 border-2 border-red-200 rounded-lg text-gray-900 font-medium",children:i.hr||"Not recorded"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-2",children:"Respiratory Rate"}),f.jsx("div",{className:"w-full px-3 py-2.5 bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-lg text-gray-900 font-medium",children:i.rr||"Not recorded"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-2",children:"Temperature"}),f.jsx("div",{className:"w-full px-3 py-2.5 bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200 rounded-lg text-gray-900 font-medium",children:i.temp||"Not recorded"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-2",children:"SpO2"}),f.jsx("div",{className:"w-full px-3 py-2.5 bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-lg text-gray-900 font-medium",children:i.spo2||"Not recorded"})]})]}):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(CT,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),f.jsx("p",{className:"text-sm md:text-base",children:"Vital signs are hidden"}),f.jsx("p",{className:"text-xs md:text-sm mt-1",children:'Click "Enable Vitals" to view vital signs'})]})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 md:p-6 border border-gray-200",children:[f.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-4",children:"General Examination"}),f.jsx("div",{className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg min-h-[120px] text-gray-900 whitespace-pre-wrap leading-relaxed",children:a||"General examination findings not available."})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 md:p-6 border border-gray-200",children:[f.jsx("div",{className:"flex items-center gap-2 mb-4",children:f.jsx("span",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Systemic Examination"})}),f.jsx("div",{className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg min-h-[200px] text-gray-900 whitespace-pre-wrap leading-relaxed",children:o||"Systemic examination findings not available."})]})]})}const c$=[{name:"BEDSIDE TESTS",tests:["ECG","Blood Glucose","Urine Dipstick"]},{name:"BASIC LABS",tests:["CBC","CMP","ESR","CRP","TSH","Lipid Profile","LFT","RFT","ABG"]},{name:"ADVANCED LABS",tests:["Troponin","BNP","D-dimer","Coagulation Profile","Blood Culture","HbA1c"]},{name:"IMAGING",tests:["Chest X-Ray","CT Head","CT Chest","CT Abdomen","Abdominal Ultrasound","Echocardiogram"]}];c$.flatMap(t=>t.tests.map(e=>({test:e,category:t.name})));function d$(t,e,n){if(n&&n[t])return n[t];const r=t.toLowerCase();return r.includes("ecg")?"Normal sinus rhythm, no acute changes":r.includes("glucose")?"Random blood glucose: 180 mg/dL (elevated)":r.includes("urine")?"Negative for nitrites, leukocyte esterase, protein, blood":r.includes("cbc")?"WBC: 15,000/L (elevated), Hb: 12 g/dL, Platelets: 250,000/L":r.includes("cmp")?"Na: 138 mEq/L, K: 4.2 mEq/L, Creatinine: 1.2 mg/dL, BUN: 45 mg/dL (elevated)":r.includes("crp")?"150 mg/L (markedly elevated)":r.includes("chest x-ray")||r.includes("chest xray")?"Consolidation in right lower lobe, consistent with pneumonia":r.includes("ct head")?"No acute intracranial pathology, age-appropriate atrophy":r.includes("ct chest")?"Right lower lobe consolidation with air bronchograms, consistent with pneumonia":r.includes("blood culture")?"Pending (results typically available in 48-72 hours)":r.includes("troponin")?"0.02 ng/mL (normal)":r.includes("bnp")?"200 pg/mL (mildly elevated)":r.includes("d-dimer")?"0.8 mg/L (elevated)":r.includes("abg")?"pH: 7.35, pCO2: 42 mmHg, pO2: 65 mmHg, HCO3: 22 mEq/L (respiratory acidosis with hypoxemia)":`Result for ${t}: See detailed report`}function Z3(t,e){return e.some(n=>n.testName===t)}function e1e({labOrders:t,labResults:e,onOrderTest:n,caseData:r}){const[i,a]=X.useState("order"),o=(l,u)=>{Z3(l,t)||n(l,u)},s=l=>{const u=e.find(c=>c.testName===l);return u?u.result:d$(l,r,r==null?void 0:r.labResults)};return f.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[f.jsx("div",{className:"bg-white border-b-2 border-gray-300 p-4 shadow-sm",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>a("order"),className:`px-6 py-2.5 rounded-lg font-semibold transition-all shadow-md ${i==="order"?"bg-gradient-to-r from-primary-600 to-primary-700 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Order Tests"}),f.jsx("button",{onClick:()=>a("view"),className:`px-6 py-2.5 rounded-lg font-semibold transition-all shadow-md ${i==="view"?"bg-gradient-to-r from-primary-600 to-primary-700 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"View Results"})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:i==="order"?f.jsx("div",{className:"space-y-4 md:space-y-6",children:c$.map(l=>f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-5 md:p-6 border border-gray-200",children:[f.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-4 pb-2 border-b-2 border-gray-200",children:l.name}),f.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3",children:l.tests.map(u=>{const c=Z3(u,t);return f.jsxs("button",{onClick:()=>o(u,l.name),disabled:c,className:`px-4 py-2 rounded-lg text-sm md:text-base font-semibold transition-all shadow-sm ${c?"bg-gradient-to-r from-green-500 to-green-600 text-white cursor-not-allowed shadow-md":"bg-gray-100 text-gray-800 hover:bg-primary-100 hover:text-primary-700 hover:shadow-md border-2 border-gray-200"}`,children:[u,c&&" "]},u)})})]},l.name))}):f.jsx("div",{className:"space-y-4",children:t.length===0?f.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 md:p-12 text-center border border-gray-200",children:f.jsx("p",{className:"text-gray-600 font-medium",children:'No tests ordered yet. Switch to "Order Tests" to order lab tests.'})}):t.map(l=>{const u=s(l.testName);return f.jsxs("div",{className:"bg-white rounded-xl shadow-md p-5 md:p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b-2 border-gray-200",children:[f.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:l.testName}),f.jsx("span",{className:"text-xs md:text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full font-medium",children:l.category})]}),f.jsx("p",{className:"text-gray-800 font-medium leading-relaxed",children:u})]},l.testName)})})})]})}function t1e({diagnosis:t,onUpdate:e}){const[n,r]=X.useState(t);return X.useEffect(()=>{e(n)},[n,e]),f.jsxs("div",{className:"flex flex-col h-full overflow-y-auto p-4 md:p-6 bg-gray-50",children:[f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("div",{className:"bg-primary-100 p-2 rounded-lg",children:f.jsx(Qi,{className:"w-5 h-5 md:w-6 md:h-6 text-primary-700"})}),f.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Enter Diagnosis"})]}),f.jsx("p",{className:"text-sm md:text-base text-gray-600 ml-12",children:"Enter your diagnosis based on the patient's history, physical examination findings, and laboratory results."})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm md:text-base font-semibold text-gray-700 mb-3",children:"Your Diagnosis"}),f.jsx("textarea",{value:n,onChange:i=>r(i.target.value),placeholder:"Enter your diagnosis here (e.g., Pitta Jwara, Vata-Pitta imbalance, etc.)...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 min-h-[200px] md:min-h-[250px] text-gray-900 placeholder-gray-400 text-base leading-relaxed shadow-sm"})]}),n&&f.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl p-4 md:p-5 shadow-md",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"bg-green-500 p-1.5 rounded-full",children:f.jsx(No,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold text-green-900 block",children:"Diagnosis Entered"}),f.jsx("span",{className:"text-sm text-green-800 mt-1 block",children:n})]})]})})]})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let n1e,r1e;function i1e(){return{geminiUrl:n1e,vertexUrl:r1e}}function a1e(t,e,n,r){var i,a;if(!(t!=null&&t.baseUrl)){const o=i1e();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(a=o.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Os{}function He(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function x(t,e,n){for(let a=0;a<e.length-1;a++){const o=e[a];if(o.endsWith("[]")){const s=o.slice(0,-2);if(!(s in t))if(Array.isArray(n))t[s]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[s])){const l=t[s];if(Array.isArray(n))for(let u=0;u<l.length;u++){const c=l[u];x(c,e.slice(a+1),n[u])}else for(const u of l)x(u,e.slice(a+1),n)}return}else if(o.endsWith("[0]")){const s=o.slice(0,-3);s in t||(t[s]=[{}]);const l=t[s];x(l[0],e.slice(a+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in t){const o=t[a];return Array.isArray(o)?o.map(s=>m(s,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function o1e(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),a=r.split("."),o=new Set;let s=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){s=l;break}if(s!==-1&&a.length>s)for(let l=s;l<a.length;l++){const u=a[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}i5(t,i,a,0,o)}}function i5(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const o=a.slice(0,-2),s=t;if(o in s&&Array.isArray(s[o]))for(const l of s[o])i5(l,e,n,r+1,i)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,s=Object.keys(o).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of s)l[u]=o[u];for(const[u,c]of Object.entries(l)){const d=[];for(const p of n.slice(r))p==="*"?d.push(u):d.push(p);x(o,d,c)}for(const u of s)delete o[u]}}else{const o=t;a in o&&i5(o[a],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VA(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s1e(t){const e={},n=m(t,["operationName"]);n!=null&&x(e,["operationName"],n);const r=m(t,["resourceName"]);return r!=null&&x(e,["_url","resourceName"],r),e}function l1e(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["metadata"]);r!=null&&x(e,["metadata"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);a!=null&&x(e,["error"],a);const o=m(t,["response","generateVideoResponse"]);return o!=null&&x(e,["response"],c1e(o)),e}function u1e(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["metadata"]);r!=null&&x(e,["metadata"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);a!=null&&x(e,["error"],a);const o=m(t,["response"]);return o!=null&&x(e,["response"],d1e(o)),e}function c1e(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>f1e(o))),x(e,["generatedVideos"],a)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function d1e(t){const e={},n=m(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>h1e(o))),x(e,["generatedVideos"],a)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function f1e(t){const e={},n=m(t,["video"]);return n!=null&&x(e,["video"],x1e(n)),e}function h1e(t){const e={},n=m(t,["_self"]);return n!=null&&x(e,["video"],b1e(n)),e}function p1e(t){const e={},n=m(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function m1e(t){const e={},n=m(t,["operationName"]);return n!=null&&x(e,["_url","operationName"],n),e}function g1e(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["metadata"]);r!=null&&x(e,["metadata"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);a!=null&&x(e,["error"],a);const o=m(t,["response"]);return o!=null&&x(e,["response"],y1e(o)),e}function y1e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["parent"]);r!=null&&x(e,["parent"],r);const i=m(t,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function f$(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["metadata"]);r!=null&&x(e,["metadata"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);a!=null&&x(e,["error"],a);const o=m(t,["response"]);return o!=null&&x(e,["response"],v1e(o)),e}function v1e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["parent"]);r!=null&&x(e,["parent"],r);const i=m(t,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function x1e(t){const e={},n=m(t,["uri"]);n!=null&&x(e,["uri"],n);const r=m(t,["encodedVideo"]);r!=null&&x(e,["videoBytes"],VA(r));const i=m(t,["encoding"]);return i!=null&&x(e,["mimeType"],i),e}function b1e(t){const e={},n=m(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],VA(r));const i=m(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Q3;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Q3||(Q3={}));var e4;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(e4||(e4={}));var t4;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(t4||(t4={}));var pl;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pl||(pl={}));var n4;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(n4||(n4={}));var r4;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(r4||(r4={}));var i4;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(i4||(i4={}));var a4;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(a4||(a4={}));var o4;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(o4||(o4={}));var s4;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(s4||(s4={}));var l4;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(l4||(l4={}));var u4;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(u4||(u4={}));var c4;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(c4||(c4={}));var d4;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(d4||(d4={}));var f4;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(f4||(f4={}));var h4;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(h4||(h4={}));var p4;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(p4||(p4={}));var m4;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(m4||(m4={}));var P0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(P0||(P0={}));var g4;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(g4||(g4={}));var y4;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(y4||(y4={}));var v4;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(v4||(v4={}));var a5;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(a5||(a5={}));var x4;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(x4||(x4={}));var b4;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(b4||(b4={}));var w4;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(w4||(w4={}));var _4;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(_4||(_4={}));var S4;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(S4||(S4={}));var A4;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(A4||(A4={}));var E4;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(E4||(E4={}));var N4;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(N4||(N4={}));var T4;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(T4||(T4={}));var P4;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(P4||(P4={}));var C4;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(C4||(C4={}));var k4;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(k4||(k4={}));var I4;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(I4||(I4={}));var O4;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(O4||(O4={}));var j4;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(j4||(j4={}));var R4;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(R4||(R4={}));var L4;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(L4||(L4={}));var M4;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(M4||(M4={}));var D4;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(D4||(D4={}));var $4;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})($4||($4={}));var F4;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(F4||(F4={}));var U4;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(U4||(U4={}));var B4;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(B4||(B4={}));var q4;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(q4||(q4={}));var V4;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(V4||(V4={}));var z4;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(z4||(z4={}));var H4;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(H4||(H4={}));var G4;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(G4||(G4={}));var W4;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(W4||(W4={}));var hd;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(hd||(hd={}));class o5{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Uh{get text(){var e,n,r,i,a,o,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",c=!1;const d=[];for(const p of(l=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[h,v]of Object.entries(p))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(v!==null||v!==void 0)&&d.push(h);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;c=!0,u+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?u:void 0}get data(){var e,n,r,i,a,o,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const c=[];for(const d of(l=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[p,h]of Object.entries(d))p!=="inlineData"&&(h!==null||h!==void 0)&&c.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(u+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,a,o,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,a,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(l=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,a,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(l=(s=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.output}}class K4{}class J4{}class w1e{}class _1e{}class S1e{}class A1e{}class Y4{}class X4{}class Z4{}class E1e{}class C0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new C0;let i;const a=e;return n?i=u1e(a):i=l1e(a),Object.assign(r,i),r}}class Q4{}class eI{}class tI{}class N1e{}class T1e{}class P1e{}class zA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new zA,a=g1e(e);return Object.assign(r,a),r}}class C1e{}class k1e{}class I1e{}class nI{}class O1e{get text(){var e,n,r;let i="",a=!1;const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof s.text=="string"){if(typeof s.thought=="boolean"&&s.thought)continue;a=!0,i+=s.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,n,r;let i="";const a=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[s,l]of Object.entries(o))s!=="inlineData"&&l!==null&&a.push(s);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class j1e{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class HA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new HA,a=f$(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function h$(t,e){const n=Zt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function p$(t){return Array.isArray(t)?t.map(e=>k0(e)):[k0(t)]}function k0(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function m$(t){const e=k0(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function g$(t){const e=k0(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rI(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function y$(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>rI(e)):[rI(t)]}function s5(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function iI(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function aI(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ri(t){if(t==null)throw new Error("ContentUnion is required");return s5(t)?t:{role:"user",parts:y$(t)}}function GA(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ri(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ri(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ri(n)):[ri(e)]}function Aa(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(iI(t)||aI(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ri(t)]}const e=[],n=[],r=s5(t[0]);for(const i of t){const a=s5(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(iI(i)||aI(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:y$(n)}),e}function R1e(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(pl).includes(n[0].toUpperCase())?n[0].toUpperCase():pl.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(pl).includes(r.toUpperCase())?r.toUpperCase():pl.TYPE_UNSPECIFIED})}}function Nd(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&R1e(t.type,e);for(const[o,s]of Object.entries(t))if(s!=null)if(o=="type"){if(s==="null")throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;e.type=Object.values(pl).includes(s.toUpperCase())?s.toUpperCase():pl.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Nd(s);else if(r.includes(o)){const l=[];for(const u of s){if(u.type=="null"){e.nullable=!0;continue}l.push(Nd(u))}e[o]=l}else if(i.includes(o)){const l={};for(const[u,c]of Object.entries(s))l[u]=Nd(c);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=s}return e}function WA(t){return Nd(t)}function KA(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function JA(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Vf(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Nd(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Nd(e.response));return t}function zf(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function L1e(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function js(t,e){if(typeof e!="string")throw new Error("name must be a string");return L1e(t,e,"cachedContents")}function v$(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Hl(t){return VA(t)}function M1e(t){return t!=null&&typeof t=="object"&&"name"in t}function D1e(t){return t!=null&&typeof t=="object"&&"video"in t}function $1e(t){return t!=null&&typeof t=="object"&&"uri"in t}function x$(t){var e;let n;if(M1e(t)&&(n=t.name),!($1e(t)&&(n=t.uri,n===void 0))&&!(D1e(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function b$(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function w$(t){for(const e of["models","tunedModels","publisherModels"])if(F1e(t,e))return t[e];return[]}function F1e(t,e){return t!==null&&typeof t=="object"&&e in t}function U1e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function B1e(t,e={}){const n=[],r=new Set;for(const i of t){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const o=U1e(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function _$(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function q1e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function S$(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let a=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Hf(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function A$(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V1e(t){const e={},n=m(t,["responsesFile"]);n!=null&&x(e,["fileName"],n);const r=m(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>bxe(o))),x(e,["inlinedResponses"],a)}const i=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),x(e,["inlinedEmbedContentResponses"],a)}return e}function z1e(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&x(e,["format"],n);const r=m(t,["gcsDestination","outputUriPrefix"]);r!=null&&x(e,["gcsUri"],r);const i=m(t,["bigqueryDestination","outputUri"]);return i!=null&&x(e,["bigqueryUri"],i),e}function H1e(t){const e={},n=m(t,["format"]);n!=null&&x(e,["predictionsFormat"],n);const r=m(t,["gcsUri"]);r!=null&&x(e,["gcsDestination","outputUriPrefix"],r);const i=m(t,["bigqueryUri"]);if(i!=null&&x(e,["bigqueryDestination","outputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function My(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["metadata","displayName"]);r!=null&&x(e,["displayName"],r);const i=m(t,["metadata","state"]);i!=null&&x(e,["state"],A$(i));const a=m(t,["metadata","createTime"]);a!=null&&x(e,["createTime"],a);const o=m(t,["metadata","endTime"]);o!=null&&x(e,["endTime"],o);const s=m(t,["metadata","updateTime"]);s!=null&&x(e,["updateTime"],s);const l=m(t,["metadata","model"]);l!=null&&x(e,["model"],l);const u=m(t,["metadata","output"]);return u!=null&&x(e,["dest"],V1e(S$(u))),e}function l5(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["displayName"]);r!=null&&x(e,["displayName"],r);const i=m(t,["state"]);i!=null&&x(e,["state"],A$(i));const a=m(t,["error"]);a!=null&&x(e,["error"],a);const o=m(t,["createTime"]);o!=null&&x(e,["createTime"],o);const s=m(t,["startTime"]);s!=null&&x(e,["startTime"],s);const l=m(t,["endTime"]);l!=null&&x(e,["endTime"],l);const u=m(t,["updateTime"]);u!=null&&x(e,["updateTime"],u);const c=m(t,["model"]);c!=null&&x(e,["model"],c);const d=m(t,["inputConfig"]);d!=null&&x(e,["src"],G1e(d));const p=m(t,["outputConfig"]);p!=null&&x(e,["dest"],z1e(S$(p)));const h=m(t,["completionStats"]);return h!=null&&x(e,["completionStats"],h),e}function G1e(t){const e={},n=m(t,["instancesFormat"]);n!=null&&x(e,["format"],n);const r=m(t,["gcsSource","uris"]);r!=null&&x(e,["gcsUri"],r);const i=m(t,["bigquerySource","inputUri"]);return i!=null&&x(e,["bigqueryUri"],i),e}function W1e(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=m(e,["fileName"]);r!=null&&x(n,["fileName"],r);const i=m(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>xxe(t,o))),x(n,["requests","requests"],a)}return n}function K1e(t){const e={},n=m(t,["format"]);n!=null&&x(e,["instancesFormat"],n);const r=m(t,["gcsUri"]);r!=null&&x(e,["gcsSource","uris"],r);const i=m(t,["bigqueryUri"]);if(i!=null&&x(e,["bigquerySource","inputUri"],i),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function J1e(t){const e={},n=m(t,["data"]);if(n!=null&&x(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Y1e(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],Hf(t,r)),n}function X1e(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],Hf(t,r)),n}function Z1e(t){const e={},n=m(t,["content"]);n!=null&&x(e,["content"],n);const r=m(t,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],Q1e(r));const i=m(t,["tokenCount"]);i!=null&&x(e,["tokenCount"],i);const a=m(t,["finishReason"]);a!=null&&x(e,["finishReason"],a);const o=m(t,["avgLogprobs"]);o!=null&&x(e,["avgLogprobs"],o);const s=m(t,["groundingMetadata"]);s!=null&&x(e,["groundingMetadata"],s);const l=m(t,["index"]);l!=null&&x(e,["index"],l);const u=m(t,["logprobsResult"]);u!=null&&x(e,["logprobsResult"],u);const c=m(t,["safetyRatings"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>h)),x(e,["safetyRatings"],p)}const d=m(t,["urlContextMetadata"]);return d!=null&&x(e,["urlContextMetadata"],d),e}function Q1e(t){const e={},n=m(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["citations"],r)}return e}function E$(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Txe(a))),x(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&x(e,["role"],r),e}function exe(t,e){const n={},r=m(t,["displayName"]);if(e!==void 0&&r!=null&&x(e,["batch","displayName"],r),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function txe(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=m(t,["dest"]);return e!==void 0&&i!=null&&x(e,["outputConfig"],H1e(q1e(i))),n}function oI(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["src"]);i!=null&&x(n,["batch","inputConfig"],W1e(t,_$(t,i)));const a=m(e,["config"]);return a!=null&&exe(a,n),n}function nxe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["model"],Zt(t,r));const i=m(e,["src"]);i!=null&&x(n,["inputConfig"],K1e(_$(t,i)));const a=m(e,["config"]);return a!=null&&txe(a,n),n}function rxe(t,e){const n={},r=m(t,["displayName"]);return e!==void 0&&r!=null&&x(e,["batch","displayName"],r),n}function ixe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["src"]);i!=null&&x(n,["batch","inputConfig"],dxe(t,i));const a=m(e,["config"]);return a!=null&&rxe(a,n),n}function axe(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],Hf(t,r)),n}function oxe(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],Hf(t,r)),n}function sxe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&x(e,["name"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);return a!=null&&x(e,["error"],a),e}function lxe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["name"]);r!=null&&x(e,["name"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);return a!=null&&x(e,["error"],a),e}function uxe(t,e){const n={},r=m(e,["contents"]);if(r!=null){let a=GA(t,r);Array.isArray(a)&&(a=a.map(o=>o)),x(n,["requests[]","request","content"],a)}const i=m(e,["config"]);return i!=null&&(x(n,["_self"],cxe(i,n)),o1e(n,{"requests[].*":"requests[].request.*"})),n}function cxe(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&x(e,["requests[]","title"],i);const a=m(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&x(e,["requests[]","outputDimensionality"],a),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function dxe(t,e){const n={},r=m(e,["fileName"]);r!=null&&x(n,["file_name"],r);const i=m(e,["inlinedRequests"]);return i!=null&&x(n,["requests"],uxe(t,i)),n}function fxe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function hxe(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&x(n,["systemInstruction"],E$(ri(i)));const a=m(e,["temperature"]);a!=null&&x(r,["temperature"],a);const o=m(e,["topP"]);o!=null&&x(r,["topP"],o);const s=m(e,["topK"]);s!=null&&x(r,["topK"],s);const l=m(e,["candidateCount"]);l!=null&&x(r,["candidateCount"],l);const u=m(e,["maxOutputTokens"]);u!=null&&x(r,["maxOutputTokens"],u);const c=m(e,["stopSequences"]);c!=null&&x(r,["stopSequences"],c);const d=m(e,["responseLogprobs"]);d!=null&&x(r,["responseLogprobs"],d);const p=m(e,["logprobs"]);p!=null&&x(r,["logprobs"],p);const h=m(e,["presencePenalty"]);h!=null&&x(r,["presencePenalty"],h);const v=m(e,["frequencyPenalty"]);v!=null&&x(r,["frequencyPenalty"],v);const y=m(e,["seed"]);y!=null&&x(r,["seed"],y);const w=m(e,["responseMimeType"]);w!=null&&x(r,["responseMimeType"],w);const b=m(e,["responseSchema"]);b!=null&&x(r,["responseSchema"],WA(b));const _=m(e,["responseJsonSchema"]);if(_!=null&&x(r,["responseJsonSchema"],_),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=m(e,["safetySettings"]);if(n!==void 0&&A!=null){let L=A;Array.isArray(L)&&(L=L.map(F=>Pxe(F))),x(n,["safetySettings"],L)}const N=m(e,["tools"]);if(n!==void 0&&N!=null){let L=zf(N);Array.isArray(L)&&(L=L.map(F=>Cxe(Vf(F)))),x(n,["tools"],L)}const E=m(e,["toolConfig"]);if(n!==void 0&&E!=null&&x(n,["toolConfig"],E),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=m(e,["cachedContent"]);n!==void 0&&P!=null&&x(n,["cachedContent"],js(t,P));const I=m(e,["responseModalities"]);I!=null&&x(r,["responseModalities"],I);const O=m(e,["mediaResolution"]);O!=null&&x(r,["mediaResolution"],O);const R=m(e,["speechConfig"]);if(R!=null&&x(r,["speechConfig"],KA(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=m(e,["thinkingConfig"]);D!=null&&x(r,["thinkingConfig"],D);const C=m(e,["imageConfig"]);return C!=null&&x(r,["imageConfig"],C),r}function pxe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Z1e(u))),x(e,["candidates"],l)}const i=m(t,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const a=m(t,["promptFeedback"]);a!=null&&x(e,["promptFeedback"],a);const o=m(t,["responseId"]);o!=null&&x(e,["responseId"],o);const s=m(t,["usageMetadata"]);return s!=null&&x(e,["usageMetadata"],s),e}function mxe(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],Hf(t,r)),n}function gxe(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],Hf(t,r)),n}function yxe(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function vxe(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function xxe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["request","model"],Zt(t,r));const i=m(e,["contents"]);if(i!=null){let s=Aa(i);Array.isArray(s)&&(s=s.map(l=>E$(l))),x(n,["request","contents"],s)}const a=m(e,["metadata"]);a!=null&&x(n,["metadata"],a);const o=m(e,["config"]);return o!=null&&x(n,["request","generationConfig"],hxe(t,o,m(n,["request"],{}))),n}function bxe(t){const e={},n=m(t,["response"]);n!=null&&x(e,["response"],pxe(n));const r=m(t,["error"]);return r!=null&&x(e,["error"],r),e}function wxe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);if(e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function _xe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);e!==void 0&&i!=null&&x(e,["_query","pageToken"],i);const a=m(t,["filter"]);return e!==void 0&&a!=null&&x(e,["_query","filter"],a),n}function Sxe(t){const e={},n=m(t,["config"]);return n!=null&&wxe(n,e),e}function Axe(t){const e={},n=m(t,["config"]);return n!=null&&_xe(n,e),e}function Exe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>My(o))),x(e,["batchJobs"],a)}return e}function Nxe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>l5(o))),x(e,["batchJobs"],a)}return e}function Txe(t){const e={},n=m(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=m(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=m(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const a=m(t,["fileData"]);a!=null&&x(e,["fileData"],fxe(a));const o=m(t,["functionResponse"]);o!=null&&x(e,["functionResponse"],o);const s=m(t,["inlineData"]);s!=null&&x(e,["inlineData"],J1e(s));const l=m(t,["text"]);l!=null&&x(e,["text"],l);const u=m(t,["thought"]);u!=null&&x(e,["thought"],u);const c=m(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=m(t,["videoMetadata"]);return d!=null&&x(e,["videoMetadata"],d),e}function Pxe(t){const e={},n=m(t,["category"]);if(n!=null&&x(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=m(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function Cxe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=m(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const a=m(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const o=m(t,["codeExecution"]);if(o!=null&&x(e,["codeExecution"],o),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(t,["googleMaps"]);s!=null&&x(e,["googleMaps"],yxe(s));const l=m(t,["googleSearch"]);l!=null&&x(e,["googleSearch"],vxe(l));const u=m(t,["urlContext"]);return u!=null&&x(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var As;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(As||(As={}));class gc{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(a=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kxe extends Os{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new gc(As.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=oI(this.apiClient,e),r=n._url,i=He("{model}:batchGenerateContent",r),s=n.batch.inputConfig.requests,l=s.requests,u=[];for(const c of l){const d=Object.assign({},c);if(d.systemInstruction){const p=d.systemInstruction;delete d.systemInstruction;const h=d.request;h.systemInstruction=p,d.request=h}u.push(d)}return s.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),o=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=nxe(this.apiClient,e);return s=He("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>l5(c))}else{const u=oI(this.apiClient,e);return s=He("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o.then(c=>My(c))}}async createEmbeddingsInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ixe(this.apiClient,e);return a=He("{model}:asyncBatchEmbedContent",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>My(l))}}async get(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=gxe(this.apiClient,e);return s=He("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>l5(c))}else{const u=mxe(this.apiClient,e);return s=He("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o.then(c=>My(c))}}async cancel(e){var n,r,i,a;let o="",s={};if(this.apiClient.isVertexAI()){const l=X1e(this.apiClient,e);o=He("batchPredictionJobs/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Y1e(this.apiClient,e);o=He("batches/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Axe(e);return s=He("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Nxe(c),p=new nI;return Object.assign(p,d),p})}else{const u=Sxe(e);return s=He("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Exe(c),p=new nI;return Object.assign(p,d),p})}}async delete(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=oxe(this.apiClient,e);return s=He("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>lxe(c))}else{const u=axe(this.apiClient,e);return s=He("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>sxe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ixe(t){const e={},n=m(t,["data"]);if(n!=null&&x(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function sI(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Zxe(a))),x(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&x(e,["role"],r),e}function Oxe(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=m(t,["expireTime"]);e!==void 0&&i!=null&&x(e,["expireTime"],i);const a=m(t,["displayName"]);e!==void 0&&a!=null&&x(e,["displayName"],a);const o=m(t,["contents"]);if(e!==void 0&&o!=null){let c=Aa(o);Array.isArray(c)&&(c=c.map(d=>sI(d))),x(e,["contents"],c)}const s=m(t,["systemInstruction"]);e!==void 0&&s!=null&&x(e,["systemInstruction"],sI(ri(s)));const l=m(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Qxe(d))),x(e,["tools"],c)}const u=m(t,["toolConfig"]);if(e!==void 0&&u!=null&&x(e,["toolConfig"],u),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function jxe(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=m(t,["expireTime"]);e!==void 0&&i!=null&&x(e,["expireTime"],i);const a=m(t,["displayName"]);e!==void 0&&a!=null&&x(e,["displayName"],a);const o=m(t,["contents"]);if(e!==void 0&&o!=null){let d=Aa(o);Array.isArray(d)&&(d=d.map(p=>p)),x(e,["contents"],d)}const s=m(t,["systemInstruction"]);e!==void 0&&s!=null&&x(e,["systemInstruction"],ri(s));const l=m(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>ebe(p))),x(e,["tools"],d)}const u=m(t,["toolConfig"]);e!==void 0&&u!=null&&x(e,["toolConfig"],u);const c=m(t,["kmsKeyName"]);return e!==void 0&&c!=null&&x(e,["encryption_spec","kmsKeyName"],c),n}function Rxe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["model"],h$(t,r));const i=m(e,["config"]);return i!=null&&Oxe(i,n),n}function Lxe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["model"],h$(t,r));const i=m(e,["config"]);return i!=null&&jxe(i,n),n}function Mxe(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],js(t,r)),n}function Dxe(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],js(t,r)),n}function $xe(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function Fxe(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function Uxe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Bxe(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&x(e,["description"],n);const r=m(t,["name"]);r!=null&&x(e,["name"],r);const i=m(t,["parameters"]);i!=null&&x(e,["parameters"],i);const a=m(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const o=m(t,["response"]);o!=null&&x(e,["response"],o);const s=m(t,["responseJsonSchema"]);return s!=null&&x(e,["responseJsonSchema"],s),e}function qxe(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],js(t,r)),n}function Vxe(t,e){const n={},r=m(e,["name"]);return r!=null&&x(n,["_url","name"],js(t,r)),n}function zxe(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function Hxe(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function Gxe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),n}function Wxe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),n}function Kxe(t){const e={},n=m(t,["config"]);return n!=null&&Gxe(n,e),e}function Jxe(t){const e={},n=m(t,["config"]);return n!=null&&Wxe(n,e),e}function Yxe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),x(e,["cachedContents"],a)}return e}function Xxe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),x(e,["cachedContents"],a)}return e}function Zxe(t){const e={},n=m(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=m(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=m(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const a=m(t,["fileData"]);a!=null&&x(e,["fileData"],Uxe(a));const o=m(t,["functionResponse"]);o!=null&&x(e,["functionResponse"],o);const s=m(t,["inlineData"]);s!=null&&x(e,["inlineData"],Ixe(s));const l=m(t,["text"]);l!=null&&x(e,["text"],l);const u=m(t,["thought"]);u!=null&&x(e,["thought"],u);const c=m(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=m(t,["videoMetadata"]);return d!=null&&x(e,["videoMetadata"],d),e}function Qxe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=m(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const a=m(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const o=m(t,["codeExecution"]);if(o!=null&&x(e,["codeExecution"],o),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(t,["googleMaps"]);s!=null&&x(e,["googleMaps"],zxe(s));const l=m(t,["googleSearch"]);l!=null&&x(e,["googleSearch"],Hxe(l));const u=m(t,["urlContext"]);return u!=null&&x(e,["urlContext"],u),e}function ebe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>Bxe(p))),x(e,["functionDeclarations"],d)}const r=m(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=m(t,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const a=m(t,["computerUse"]);if(a!=null&&x(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=m(t,["codeExecution"]);o!=null&&x(e,["codeExecution"],o);const s=m(t,["enterpriseWebSearch"]);s!=null&&x(e,["enterpriseWebSearch"],s);const l=m(t,["googleMaps"]);l!=null&&x(e,["googleMaps"],l);const u=m(t,["googleSearch"]);u!=null&&x(e,["googleSearch"],u);const c=m(t,["urlContext"]);return c!=null&&x(e,["urlContext"],c),e}function tbe(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=m(t,["expireTime"]);return e!==void 0&&i!=null&&x(e,["expireTime"],i),n}function nbe(t,e){const n={},r=m(t,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=m(t,["expireTime"]);return e!==void 0&&i!=null&&x(e,["expireTime"],i),n}function rbe(t,e){const n={},r=m(e,["name"]);r!=null&&x(n,["_url","name"],js(t,r));const i=m(e,["config"]);return i!=null&&tbe(i,n),n}function ibe(t,e){const n={},r=m(e,["name"]);r!=null&&x(n,["_url","name"],js(t,r));const i=m(e,["config"]);return i!=null&&nbe(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class abe extends Os{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new gc(As.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Lxe(this.apiClient,e);return s=He("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=Rxe(this.apiClient,e);return s=He("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Vxe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=qxe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Dxe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Fxe(c),p=new eI;return Object.assign(p,d),p})}else{const u=Mxe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=$xe(c),p=new eI;return Object.assign(p,d),p})}}async update(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=ibe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=rbe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async listInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Jxe(e);return s=He("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Xxe(c),p=new tI;return Object.assign(p,d),p})}else{const u=Kxe(e);return s=He("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Yxe(c),p=new tI;return Object.assign(p,d),p})}}}function lI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cn(t){return this instanceof Cn?(this.v=t,this):new Cn(t)}function Td(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(v){return Promise.resolve(v).then(h,d)}}function s(h,v){r[h]&&(i[h]=function(y){return new Promise(function(w,b){a.push([h,y,w,b])>1||l(h,y)})},v&&(i[h]=v(i[h])))}function l(h,v){try{u(r[h](v))}catch(y){p(a[0][3],y)}}function u(h){h.value instanceof Cn?Promise.resolve(h.value.v).then(c,d):p(a[0][2],h)}function c(h){l("next",h)}function d(h){l("throw",h)}function p(h,v){h(v),a.shift(),a.length&&l(a[0][0],a[0][1])}}function mp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof lI=="function"?lI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(o){return new Promise(function(s,l){o=t[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function obe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:N$(n)}function N$(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function sbe(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function uI(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let a=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),a&&!N$(t[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class lbe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new ube(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ube{constructor(e,n,r,i={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),sbe(a)}async sendMessage(e){var n;await this.sendPromise;const r=ri(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,o,s;const l=await i,u=(o=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content,c=l.automaticFunctionCallingHistory,d=this.getHistory(!0).length;let p=[];c!=null&&(p=(s=c.slice(d))!==null&&s!==void 0?s:[]);const h=u?[u]:[];this.recordHistory(r,h,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=ri(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?uI(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Td(this,arguments,function*(){var o,s,l,u;const c=[];try{for(var d=!0,p=mp(e),h;h=yield Cn(p.next()),o=h.done,!o;d=!0){u=h.value,d=!1;const v=u;if(obe(v)){const y=(i=(r=v.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;y!==void 0&&c.push(y)}yield yield Cn(v)}}catch(v){s={error:v}}finally{try{!d&&!o&&(l=p.return)&&(yield Cn(l.call(p)))}finally{if(s)throw s.error}}this.recordHistory(n,c)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...uI(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z1 extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Z1.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cbe(t){const e={},n=m(t,["file"]);return n!=null&&x(e,["file"],n),e}function dbe(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function fbe(t){const e={},n=m(t,["name"]);return n!=null&&x(e,["_url","file"],x$(n)),e}function hbe(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function pbe(t){const e={},n=m(t,["name"]);return n!=null&&x(e,["_url","file"],x$(n)),e}function mbe(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),n}function gbe(t){const e={},n=m(t,["config"]);return n!=null&&mbe(n,e),e}function ybe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),x(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vbe extends Os{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new gc(As.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=gbe(e);return a=He("files",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=ybe(l),c=new C1e;return Object.assign(c,u),c})}}async createInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=cbe(e);return a=He("upload/v1beta/files",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=dbe(l),c=new k1e;return Object.assign(c,u),c})}}async get(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=pbe(e);return a=He("files/{file}",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=fbe(e);return a=He("files/{file}",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=hbe(l),c=new I1e;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dy(t){const e={},n=m(t,["data"]);if(n!=null&&x(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function xbe(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Rbe(a))),x(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&x(e,["role"],r),e}function bbe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function wbe(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&x(e,["description"],n);const r=m(t,["name"]);r!=null&&x(e,["name"],r);const i=m(t,["parameters"]);i!=null&&x(e,["parameters"],i);const a=m(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const o=m(t,["response"]);o!=null&&x(e,["response"],o);const s=m(t,["responseJsonSchema"]);return s!=null&&x(e,["responseJsonSchema"],s),e}function _be(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const r=m(t,["responseJsonSchema"]);r!=null&&x(e,["responseJsonSchema"],r);const i=m(t,["audioTimestamp"]);i!=null&&x(e,["audioTimestamp"],i);const a=m(t,["candidateCount"]);a!=null&&x(e,["candidateCount"],a);const o=m(t,["enableAffectiveDialog"]);o!=null&&x(e,["enableAffectiveDialog"],o);const s=m(t,["frequencyPenalty"]);s!=null&&x(e,["frequencyPenalty"],s);const l=m(t,["logprobs"]);l!=null&&x(e,["logprobs"],l);const u=m(t,["maxOutputTokens"]);u!=null&&x(e,["maxOutputTokens"],u);const c=m(t,["mediaResolution"]);c!=null&&x(e,["mediaResolution"],c);const d=m(t,["presencePenalty"]);d!=null&&x(e,["presencePenalty"],d);const p=m(t,["responseLogprobs"]);p!=null&&x(e,["responseLogprobs"],p);const h=m(t,["responseMimeType"]);h!=null&&x(e,["responseMimeType"],h);const v=m(t,["responseModalities"]);v!=null&&x(e,["responseModalities"],v);const y=m(t,["responseSchema"]);y!=null&&x(e,["responseSchema"],y);const w=m(t,["routingConfig"]);w!=null&&x(e,["routingConfig"],w);const b=m(t,["seed"]);b!=null&&x(e,["seed"],b);const _=m(t,["speechConfig"]);_!=null&&x(e,["speechConfig"],T$(_));const A=m(t,["stopSequences"]);A!=null&&x(e,["stopSequences"],A);const N=m(t,["temperature"]);N!=null&&x(e,["temperature"],N);const E=m(t,["thinkingConfig"]);E!=null&&x(e,["thinkingConfig"],E);const P=m(t,["topK"]);P!=null&&x(e,["topK"],P);const I=m(t,["topP"]);if(I!=null&&x(e,["topP"],I),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sbe(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function Abe(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function Ebe(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const a=m(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const o=m(t,["topP"]);e!==void 0&&o!=null&&x(e,["setup","generationConfig","topP"],o);const s=m(t,["topK"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","topK"],s);const l=m(t,["maxOutputTokens"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","maxOutputTokens"],l);const u=m(t,["mediaResolution"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","mediaResolution"],u);const c=m(t,["seed"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","seed"],c);const d=m(t,["speechConfig"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","speechConfig"],JA(d));const p=m(t,["thinkingConfig"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","thinkingConfig"],p);const h=m(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],h);const v=m(t,["systemInstruction"]);e!==void 0&&v!=null&&x(e,["setup","systemInstruction"],xbe(ri(v)));const y=m(t,["tools"]);if(e!==void 0&&y!=null){let P=zf(y);Array.isArray(P)&&(P=P.map(I=>Mbe(Vf(I)))),x(e,["setup","tools"],P)}const w=m(t,["sessionResumption"]);e!==void 0&&w!=null&&x(e,["setup","sessionResumption"],Lbe(w));const b=m(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&x(e,["setup","inputAudioTranscription"],b);const _=m(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&x(e,["setup","outputAudioTranscription"],_);const A=m(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&x(e,["setup","realtimeInputConfig"],A);const N=m(t,["contextWindowCompression"]);e!==void 0&&N!=null&&x(e,["setup","contextWindowCompression"],N);const E=m(t,["proactivity"]);return e!==void 0&&E!=null&&x(e,["setup","proactivity"],E),n}function Nbe(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],_be(r));const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const a=m(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const o=m(t,["topP"]);e!==void 0&&o!=null&&x(e,["setup","generationConfig","topP"],o);const s=m(t,["topK"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","topK"],s);const l=m(t,["maxOutputTokens"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","maxOutputTokens"],l);const u=m(t,["mediaResolution"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","mediaResolution"],u);const c=m(t,["seed"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","seed"],c);const d=m(t,["speechConfig"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","speechConfig"],T$(JA(d)));const p=m(t,["thinkingConfig"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","thinkingConfig"],p);const h=m(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],h);const v=m(t,["systemInstruction"]);e!==void 0&&v!=null&&x(e,["setup","systemInstruction"],ri(v));const y=m(t,["tools"]);if(e!==void 0&&y!=null){let P=zf(y);Array.isArray(P)&&(P=P.map(I=>Dbe(Vf(I)))),x(e,["setup","tools"],P)}const w=m(t,["sessionResumption"]);e!==void 0&&w!=null&&x(e,["setup","sessionResumption"],w);const b=m(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&x(e,["setup","inputAudioTranscription"],b);const _=m(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&x(e,["setup","outputAudioTranscription"],_);const A=m(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&x(e,["setup","realtimeInputConfig"],A);const N=m(t,["contextWindowCompression"]);e!==void 0&&N!=null&&x(e,["setup","contextWindowCompression"],N);const E=m(t,["proactivity"]);return e!==void 0&&E!=null&&x(e,["setup","proactivity"],E),n}function Tbe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["setup","model"],Zt(t,r));const i=m(e,["config"]);return i!=null&&x(n,["config"],Ebe(i,n)),n}function Pbe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["setup","model"],Zt(t,r));const i=m(e,["config"]);return i!=null&&x(n,["config"],Nbe(i,n)),n}function Cbe(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&x(e,["musicGenerationConfig"],n),e}function kbe(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["weightedPrompts"],r)}return e}function Ibe(t){const e={},n=m(t,["media"]);if(n!=null){let u=p$(n);Array.isArray(u)&&(u=u.map(c=>Dy(c))),x(e,["mediaChunks"],u)}const r=m(t,["audio"]);r!=null&&x(e,["audio"],Dy(g$(r)));const i=m(t,["audioStreamEnd"]);i!=null&&x(e,["audioStreamEnd"],i);const a=m(t,["video"]);a!=null&&x(e,["video"],Dy(m$(a)));const o=m(t,["text"]);o!=null&&x(e,["text"],o);const s=m(t,["activityStart"]);s!=null&&x(e,["activityStart"],s);const l=m(t,["activityEnd"]);return l!=null&&x(e,["activityEnd"],l),e}function Obe(t){const e={},n=m(t,["media"]);if(n!=null){let u=p$(n);Array.isArray(u)&&(u=u.map(c=>c)),x(e,["mediaChunks"],u)}const r=m(t,["audio"]);r!=null&&x(e,["audio"],g$(r));const i=m(t,["audioStreamEnd"]);i!=null&&x(e,["audioStreamEnd"],i);const a=m(t,["video"]);a!=null&&x(e,["video"],m$(a));const o=m(t,["text"]);o!=null&&x(e,["text"],o);const s=m(t,["activityStart"]);s!=null&&x(e,["activityStart"],s);const l=m(t,["activityEnd"]);return l!=null&&x(e,["activityEnd"],l),e}function jbe(t){const e={},n=m(t,["setupComplete"]);n!=null&&x(e,["setupComplete"],n);const r=m(t,["serverContent"]);r!=null&&x(e,["serverContent"],r);const i=m(t,["toolCall"]);i!=null&&x(e,["toolCall"],i);const a=m(t,["toolCallCancellation"]);a!=null&&x(e,["toolCallCancellation"],a);const o=m(t,["usageMetadata"]);o!=null&&x(e,["usageMetadata"],$be(o));const s=m(t,["goAway"]);s!=null&&x(e,["goAway"],s);const l=m(t,["sessionResumptionUpdate"]);return l!=null&&x(e,["sessionResumptionUpdate"],l),e}function Rbe(t){const e={},n=m(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=m(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=m(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const a=m(t,["fileData"]);a!=null&&x(e,["fileData"],bbe(a));const o=m(t,["functionResponse"]);o!=null&&x(e,["functionResponse"],o);const s=m(t,["inlineData"]);s!=null&&x(e,["inlineData"],Dy(s));const l=m(t,["text"]);l!=null&&x(e,["text"],l);const u=m(t,["thought"]);u!=null&&x(e,["thought"],u);const c=m(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=m(t,["videoMetadata"]);return d!=null&&x(e,["videoMetadata"],d),e}function Lbe(t){const e={},n=m(t,["handle"]);if(n!=null&&x(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function T$(t){const e={},n=m(t,["languageCode"]);n!=null&&x(e,["languageCode"],n);const r=m(t,["voiceConfig"]);if(r!=null&&x(e,["voiceConfig"],r),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Mbe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=m(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const a=m(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const o=m(t,["codeExecution"]);if(o!=null&&x(e,["codeExecution"],o),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(t,["googleMaps"]);s!=null&&x(e,["googleMaps"],Sbe(s));const l=m(t,["googleSearch"]);l!=null&&x(e,["googleSearch"],Abe(l));const u=m(t,["urlContext"]);return u!=null&&x(e,["urlContext"],u),e}function Dbe(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>wbe(p))),x(e,["functionDeclarations"],d)}const r=m(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=m(t,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const a=m(t,["computerUse"]);if(a!=null&&x(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=m(t,["codeExecution"]);o!=null&&x(e,["codeExecution"],o);const s=m(t,["enterpriseWebSearch"]);s!=null&&x(e,["enterpriseWebSearch"],s);const l=m(t,["googleMaps"]);l!=null&&x(e,["googleMaps"],l);const u=m(t,["googleSearch"]);u!=null&&x(e,["googleSearch"],u);const c=m(t,["urlContext"]);return c!=null&&x(e,["urlContext"],c),e}function $be(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&x(e,["promptTokenCount"],n);const r=m(t,["cachedContentTokenCount"]);r!=null&&x(e,["cachedContentTokenCount"],r);const i=m(t,["candidatesTokenCount"]);i!=null&&x(e,["responseTokenCount"],i);const a=m(t,["toolUsePromptTokenCount"]);a!=null&&x(e,["toolUsePromptTokenCount"],a);const o=m(t,["thoughtsTokenCount"]);o!=null&&x(e,["thoughtsTokenCount"],o);const s=m(t,["totalTokenCount"]);s!=null&&x(e,["totalTokenCount"],s);const l=m(t,["promptTokensDetails"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>v)),x(e,["promptTokensDetails"],h)}const u=m(t,["cacheTokensDetails"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(v=>v)),x(e,["cacheTokensDetails"],h)}const c=m(t,["candidatesTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(v=>v)),x(e,["responseTokensDetails"],h)}const d=m(t,["toolUsePromptTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(v=>v)),x(e,["toolUsePromptTokensDetails"],h)}const p=m(t,["trafficType"]);return p!=null&&x(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fbe(t){const e={},n=m(t,["data"]);if(n!=null&&x(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Ube(t){const e={},n=m(t,["content"]);n!=null&&x(e,["content"],n);const r=m(t,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],Bbe(r));const i=m(t,["tokenCount"]);i!=null&&x(e,["tokenCount"],i);const a=m(t,["finishReason"]);a!=null&&x(e,["finishReason"],a);const o=m(t,["avgLogprobs"]);o!=null&&x(e,["avgLogprobs"],o);const s=m(t,["groundingMetadata"]);s!=null&&x(e,["groundingMetadata"],s);const l=m(t,["index"]);l!=null&&x(e,["index"],l);const u=m(t,["logprobsResult"]);u!=null&&x(e,["logprobsResult"],u);const c=m(t,["safetyRatings"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>h)),x(e,["safetyRatings"],p)}const d=m(t,["urlContextMetadata"]);return d!=null&&x(e,["urlContextMetadata"],d),e}function Bbe(t){const e={},n=m(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["citations"],r)}return e}function qbe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["contents"]);if(i!=null){let a=Aa(i);Array.isArray(a)&&(a=a.map(o=>o)),x(n,["contents"],a)}return n}function Vbe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),x(e,["tokensInfo"],i)}return e}function zbe(t){const e={},n=m(t,["values"]);n!=null&&x(e,["values"],n);const r=m(t,["statistics"]);return r!=null&&x(e,["statistics"],Hbe(r)),e}function Hbe(t){const e={},n=m(t,["truncated"]);n!=null&&x(e,["truncated"],n);const r=m(t,["token_count"]);return r!=null&&x(e,["tokenCount"],r),e}function Q1(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Ywe(a))),x(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&x(e,["role"],r),e}function Gbe(t){const e={},n=m(t,["controlType"]);n!=null&&x(e,["controlType"],n);const r=m(t,["enableControlImageComputation"]);return r!=null&&x(e,["computeControl"],r),e}function Wbe(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Kbe(t,e){const n={},r=m(t,["systemInstruction"]);e!==void 0&&r!=null&&x(e,["systemInstruction"],ri(r));const i=m(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>O$(s))),x(e,["tools"],o)}const a=m(t,["generationConfig"]);return e!==void 0&&a!=null&&x(e,["generationConfig"],Dwe(a)),n}function Jbe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["contents"]);if(i!=null){let o=Aa(i);Array.isArray(o)&&(o=o.map(s=>Q1(s))),x(n,["contents"],o)}const a=m(e,["config"]);return a!=null&&Wbe(a),n}function Ybe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["contents"]);if(i!=null){let o=Aa(i);Array.isArray(o)&&(o=o.map(s=>s)),x(n,["contents"],o)}const a=m(e,["config"]);return a!=null&&Kbe(a,n),n}function Xbe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["totalTokens"]);r!=null&&x(e,["totalTokens"],r);const i=m(t,["cachedContentTokenCount"]);return i!=null&&x(e,["cachedContentTokenCount"],i),e}function Zbe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["totalTokens"]);return r!=null&&x(e,["totalTokens"],r),e}function Qbe(t,e){const n={},r=m(e,["model"]);return r!=null&&x(n,["_url","name"],Zt(t,r)),n}function ewe(t,e){const n={},r=m(e,["model"]);return r!=null&&x(n,["_url","name"],Zt(t,r)),n}function twe(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function nwe(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}function rwe(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=m(t,["negativePrompt"]);e!==void 0&&i!=null&&x(e,["parameters","negativePrompt"],i);const a=m(t,["numberOfImages"]);e!==void 0&&a!=null&&x(e,["parameters","sampleCount"],a);const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&x(e,["parameters","aspectRatio"],o);const s=m(t,["guidanceScale"]);e!==void 0&&s!=null&&x(e,["parameters","guidanceScale"],s);const l=m(t,["seed"]);e!==void 0&&l!=null&&x(e,["parameters","seed"],l);const u=m(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&x(e,["parameters","safetySetting"],u);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c);const d=m(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&x(e,["parameters","includeSafetyAttributes"],d);const p=m(t,["includeRaiReason"]);e!==void 0&&p!=null&&x(e,["parameters","includeRaiReason"],p);const h=m(t,["language"]);e!==void 0&&h!=null&&x(e,["parameters","language"],h);const v=m(t,["outputMimeType"]);e!==void 0&&v!=null&&x(e,["parameters","outputOptions","mimeType"],v);const y=m(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&x(e,["parameters","outputOptions","compressionQuality"],y);const w=m(t,["addWatermark"]);e!==void 0&&w!=null&&x(e,["parameters","addWatermark"],w);const b=m(t,["labels"]);e!==void 0&&b!=null&&x(e,["labels"],b);const _=m(t,["editMode"]);e!==void 0&&_!=null&&x(e,["parameters","editMode"],_);const A=m(t,["baseSteps"]);return e!==void 0&&A!=null&&x(e,["parameters","editConfig","baseSteps"],A),n}function iwe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["prompt"]);i!=null&&x(n,["instances[0]","prompt"],i);const a=m(e,["referenceImages"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(l=>n2e(l))),x(n,["instances[0]","referenceImages"],s)}const o=m(e,["config"]);return o!=null&&rwe(o,n),n}function awe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>ex(a))),x(e,["generatedImages"],i)}return e}function owe(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&x(e,["requests[]","title"],i);const a=m(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&x(e,["requests[]","outputDimensionality"],a),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function swe(t,e){const n={},r=m(t,["taskType"]);e!==void 0&&r!=null&&x(e,["instances[]","task_type"],r);const i=m(t,["title"]);e!==void 0&&i!=null&&x(e,["instances[]","title"],i);const a=m(t,["outputDimensionality"]);e!==void 0&&a!=null&&x(e,["parameters","outputDimensionality"],a);const o=m(t,["mimeType"]);e!==void 0&&o!=null&&x(e,["instances[]","mimeType"],o);const s=m(t,["autoTruncate"]);return e!==void 0&&s!=null&&x(e,["parameters","autoTruncate"],s),n}function lwe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["contents"]);if(i!=null){let s=GA(t,i);Array.isArray(s)&&(s=s.map(l=>l)),x(n,["requests[]","content"],s)}const a=m(e,["config"]);a!=null&&owe(a,n);const o=m(e,["model"]);return o!==void 0&&x(n,["requests[]","model"],Zt(t,o)),n}function uwe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["contents"]);if(i!=null){let o=GA(t,i);Array.isArray(o)&&(o=o.map(s=>s)),x(n,["instances[]","content"],o)}const a=m(e,["config"]);return a!=null&&swe(a,n),n}function cwe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),x(e,["embeddings"],a)}const i=m(t,["metadata"]);return i!=null&&x(e,["metadata"],i),e}function dwe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>zbe(o))),x(e,["embeddings"],a)}const i=m(t,["metadata"]);return i!=null&&x(e,["metadata"],i),e}function fwe(t){const e={},n=m(t,["endpoint"]);n!=null&&x(e,["name"],n);const r=m(t,["deployedModelId"]);return r!=null&&x(e,["deployedModelId"],r),e}function hwe(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function pwe(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&x(e,["description"],n);const r=m(t,["name"]);r!=null&&x(e,["name"],r);const i=m(t,["parameters"]);i!=null&&x(e,["parameters"],i);const a=m(t,["parametersJsonSchema"]);a!=null&&x(e,["parametersJsonSchema"],a);const o=m(t,["response"]);o!=null&&x(e,["response"],o);const s=m(t,["responseJsonSchema"]);return s!=null&&x(e,["responseJsonSchema"],s),e}function mwe(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&x(n,["systemInstruction"],Q1(ri(i)));const a=m(e,["temperature"]);a!=null&&x(r,["temperature"],a);const o=m(e,["topP"]);o!=null&&x(r,["topP"],o);const s=m(e,["topK"]);s!=null&&x(r,["topK"],s);const l=m(e,["candidateCount"]);l!=null&&x(r,["candidateCount"],l);const u=m(e,["maxOutputTokens"]);u!=null&&x(r,["maxOutputTokens"],u);const c=m(e,["stopSequences"]);c!=null&&x(r,["stopSequences"],c);const d=m(e,["responseLogprobs"]);d!=null&&x(r,["responseLogprobs"],d);const p=m(e,["logprobs"]);p!=null&&x(r,["logprobs"],p);const h=m(e,["presencePenalty"]);h!=null&&x(r,["presencePenalty"],h);const v=m(e,["frequencyPenalty"]);v!=null&&x(r,["frequencyPenalty"],v);const y=m(e,["seed"]);y!=null&&x(r,["seed"],y);const w=m(e,["responseMimeType"]);w!=null&&x(r,["responseMimeType"],w);const b=m(e,["responseSchema"]);b!=null&&x(r,["responseSchema"],WA(b));const _=m(e,["responseJsonSchema"]);if(_!=null&&x(r,["responseJsonSchema"],_),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=m(e,["safetySettings"]);if(n!==void 0&&A!=null){let L=A;Array.isArray(L)&&(L=L.map(F=>r2e(F))),x(n,["safetySettings"],L)}const N=m(e,["tools"]);if(n!==void 0&&N!=null){let L=zf(N);Array.isArray(L)&&(L=L.map(F=>u2e(Vf(F)))),x(n,["tools"],L)}const E=m(e,["toolConfig"]);if(n!==void 0&&E!=null&&x(n,["toolConfig"],E),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=m(e,["cachedContent"]);n!==void 0&&P!=null&&x(n,["cachedContent"],js(t,P));const I=m(e,["responseModalities"]);I!=null&&x(r,["responseModalities"],I);const O=m(e,["mediaResolution"]);O!=null&&x(r,["mediaResolution"],O);const R=m(e,["speechConfig"]);if(R!=null&&x(r,["speechConfig"],KA(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=m(e,["thinkingConfig"]);D!=null&&x(r,["thinkingConfig"],D);const C=m(e,["imageConfig"]);return C!=null&&x(r,["imageConfig"],C),r}function gwe(t,e,n){const r={},i=m(e,["systemInstruction"]);n!==void 0&&i!=null&&x(n,["systemInstruction"],ri(i));const a=m(e,["temperature"]);a!=null&&x(r,["temperature"],a);const o=m(e,["topP"]);o!=null&&x(r,["topP"],o);const s=m(e,["topK"]);s!=null&&x(r,["topK"],s);const l=m(e,["candidateCount"]);l!=null&&x(r,["candidateCount"],l);const u=m(e,["maxOutputTokens"]);u!=null&&x(r,["maxOutputTokens"],u);const c=m(e,["stopSequences"]);c!=null&&x(r,["stopSequences"],c);const d=m(e,["responseLogprobs"]);d!=null&&x(r,["responseLogprobs"],d);const p=m(e,["logprobs"]);p!=null&&x(r,["logprobs"],p);const h=m(e,["presencePenalty"]);h!=null&&x(r,["presencePenalty"],h);const v=m(e,["frequencyPenalty"]);v!=null&&x(r,["frequencyPenalty"],v);const y=m(e,["seed"]);y!=null&&x(r,["seed"],y);const w=m(e,["responseMimeType"]);w!=null&&x(r,["responseMimeType"],w);const b=m(e,["responseSchema"]);b!=null&&x(r,["responseSchema"],WA(b));const _=m(e,["responseJsonSchema"]);_!=null&&x(r,["responseJsonSchema"],_);const A=m(e,["routingConfig"]);A!=null&&x(r,["routingConfig"],A);const N=m(e,["modelSelectionConfig"]);N!=null&&x(r,["modelConfig"],N);const E=m(e,["safetySettings"]);if(n!==void 0&&E!=null){let Y=E;Array.isArray(Y)&&(Y=Y.map(W=>W)),x(n,["safetySettings"],Y)}const P=m(e,["tools"]);if(n!==void 0&&P!=null){let Y=zf(P);Array.isArray(Y)&&(Y=Y.map(W=>O$(Vf(W)))),x(n,["tools"],Y)}const I=m(e,["toolConfig"]);n!==void 0&&I!=null&&x(n,["toolConfig"],I);const O=m(e,["labels"]);n!==void 0&&O!=null&&x(n,["labels"],O);const R=m(e,["cachedContent"]);n!==void 0&&R!=null&&x(n,["cachedContent"],js(t,R));const D=m(e,["responseModalities"]);D!=null&&x(r,["responseModalities"],D);const C=m(e,["mediaResolution"]);C!=null&&x(r,["mediaResolution"],C);const L=m(e,["speechConfig"]);L!=null&&x(r,["speechConfig"],I$(KA(L)));const F=m(e,["audioTimestamp"]);F!=null&&x(r,["audioTimestamp"],F);const $=m(e,["thinkingConfig"]);$!=null&&x(r,["thinkingConfig"],$);const V=m(e,["imageConfig"]);return V!=null&&x(r,["imageConfig"],V),r}function cI(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["contents"]);if(i!=null){let o=Aa(i);Array.isArray(o)&&(o=o.map(s=>Q1(s))),x(n,["contents"],o)}const a=m(e,["config"]);return a!=null&&x(n,["generationConfig"],mwe(t,a,n)),n}function dI(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["contents"]);if(i!=null){let o=Aa(i);Array.isArray(o)&&(o=o.map(s=>s)),x(n,["contents"],o)}const a=m(e,["config"]);return a!=null&&x(n,["generationConfig"],gwe(t,a,n)),n}function fI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Ube(u))),x(e,["candidates"],l)}const i=m(t,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const a=m(t,["promptFeedback"]);a!=null&&x(e,["promptFeedback"],a);const o=m(t,["responseId"]);o!=null&&x(e,["responseId"],o);const s=m(t,["usageMetadata"]);return s!=null&&x(e,["usageMetadata"],s),e}function hI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),x(e,["candidates"],u)}const i=m(t,["createTime"]);i!=null&&x(e,["createTime"],i);const a=m(t,["modelVersion"]);a!=null&&x(e,["modelVersion"],a);const o=m(t,["promptFeedback"]);o!=null&&x(e,["promptFeedback"],o);const s=m(t,["responseId"]);s!=null&&x(e,["responseId"],s);const l=m(t,["usageMetadata"]);return l!=null&&x(e,["usageMetadata"],l),e}function ywe(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=m(t,["aspectRatio"]);e!==void 0&&i!=null&&x(e,["parameters","aspectRatio"],i);const a=m(t,["guidanceScale"]);if(e!==void 0&&a!=null&&x(e,["parameters","guidanceScale"],a),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&x(e,["parameters","safetySetting"],o);const s=m(t,["personGeneration"]);e!==void 0&&s!=null&&x(e,["parameters","personGeneration"],s);const l=m(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&x(e,["parameters","includeSafetyAttributes"],l);const u=m(t,["includeRaiReason"]);e!==void 0&&u!=null&&x(e,["parameters","includeRaiReason"],u);const c=m(t,["language"]);e!==void 0&&c!=null&&x(e,["parameters","language"],c);const d=m(t,["outputMimeType"]);e!==void 0&&d!=null&&x(e,["parameters","outputOptions","mimeType"],d);const p=m(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&x(e,["parameters","outputOptions","compressionQuality"],p),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const h=m(t,["imageSize"]);if(e!==void 0&&h!=null&&x(e,["parameters","sampleImageSize"],h),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function vwe(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=m(t,["negativePrompt"]);e!==void 0&&i!=null&&x(e,["parameters","negativePrompt"],i);const a=m(t,["numberOfImages"]);e!==void 0&&a!=null&&x(e,["parameters","sampleCount"],a);const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&x(e,["parameters","aspectRatio"],o);const s=m(t,["guidanceScale"]);e!==void 0&&s!=null&&x(e,["parameters","guidanceScale"],s);const l=m(t,["seed"]);e!==void 0&&l!=null&&x(e,["parameters","seed"],l);const u=m(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&x(e,["parameters","safetySetting"],u);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c);const d=m(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&x(e,["parameters","includeSafetyAttributes"],d);const p=m(t,["includeRaiReason"]);e!==void 0&&p!=null&&x(e,["parameters","includeRaiReason"],p);const h=m(t,["language"]);e!==void 0&&h!=null&&x(e,["parameters","language"],h);const v=m(t,["outputMimeType"]);e!==void 0&&v!=null&&x(e,["parameters","outputOptions","mimeType"],v);const y=m(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&x(e,["parameters","outputOptions","compressionQuality"],y);const w=m(t,["addWatermark"]);e!==void 0&&w!=null&&x(e,["parameters","addWatermark"],w);const b=m(t,["labels"]);e!==void 0&&b!=null&&x(e,["labels"],b);const _=m(t,["imageSize"]);e!==void 0&&_!=null&&x(e,["parameters","sampleImageSize"],_);const A=m(t,["enhancePrompt"]);return e!==void 0&&A!=null&&x(e,["parameters","enhancePrompt"],A),n}function xwe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["prompt"]);i!=null&&x(n,["instances[0]","prompt"],i);const a=m(e,["config"]);return a!=null&&ywe(a,n),n}function bwe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["prompt"]);i!=null&&x(n,["instances[0]","prompt"],i);const a=m(e,["config"]);return a!=null&&vwe(a,n),n}function wwe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>jwe(o))),x(e,["generatedImages"],a)}const i=m(t,["positivePromptSafetyAttributes"]);return i!=null&&x(e,["positivePromptSafetyAttributes"],C$(i)),e}function _we(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>ex(o))),x(e,["generatedImages"],a)}const i=m(t,["positivePromptSafetyAttributes"]);return i!=null&&x(e,["positivePromptSafetyAttributes"],k$(i)),e}function Swe(t,e){const n={},r=m(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=m(t,["durationSeconds"]);if(e!==void 0&&i!=null&&x(e,["parameters","durationSeconds"],i),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=m(t,["aspectRatio"]);e!==void 0&&a!=null&&x(e,["parameters","aspectRatio"],a);const o=m(t,["resolution"]);e!==void 0&&o!=null&&x(e,["parameters","resolution"],o);const s=m(t,["personGeneration"]);if(e!==void 0&&s!=null&&x(e,["parameters","personGeneration"],s),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=m(t,["negativePrompt"]);e!==void 0&&l!=null&&x(e,["parameters","negativePrompt"],l);const u=m(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&x(e,["parameters","enhancePrompt"],u),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const c=m(t,["lastFrame"]);e!==void 0&&c!=null&&x(e,["instances[0]","lastFrame"],tx(c));const d=m(t,["referenceImages"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>_2e(h))),x(e,["instances[0]","referenceImages"],p)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Awe(t,e){const n={},r=m(t,["numberOfVideos"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&x(e,["parameters","storageUri"],i);const a=m(t,["fps"]);e!==void 0&&a!=null&&x(e,["parameters","fps"],a);const o=m(t,["durationSeconds"]);e!==void 0&&o!=null&&x(e,["parameters","durationSeconds"],o);const s=m(t,["seed"]);e!==void 0&&s!=null&&x(e,["parameters","seed"],s);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l);const u=m(t,["resolution"]);e!==void 0&&u!=null&&x(e,["parameters","resolution"],u);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c);const d=m(t,["pubsubTopic"]);e!==void 0&&d!=null&&x(e,["parameters","pubsubTopic"],d);const p=m(t,["negativePrompt"]);e!==void 0&&p!=null&&x(e,["parameters","negativePrompt"],p);const h=m(t,["enhancePrompt"]);e!==void 0&&h!=null&&x(e,["parameters","enhancePrompt"],h);const v=m(t,["generateAudio"]);e!==void 0&&v!=null&&x(e,["parameters","generateAudio"],v);const y=m(t,["lastFrame"]);e!==void 0&&y!=null&&x(e,["instances[0]","lastFrame"],ao(y));const w=m(t,["referenceImages"]);if(e!==void 0&&w!=null){let A=w;Array.isArray(A)&&(A=A.map(N=>S2e(N))),x(e,["instances[0]","referenceImages"],A)}const b=m(t,["mask"]);e!==void 0&&b!=null&&x(e,["instances[0]","mask"],w2e(b));const _=m(t,["compressionQuality"]);return e!==void 0&&_!=null&&x(e,["parameters","compressionQuality"],_),n}function Ewe(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["metadata"]);r!=null&&x(e,["metadata"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);a!=null&&x(e,["error"],a);const o=m(t,["response","generateVideoResponse"]);return o!=null&&x(e,["response"],Cwe(o)),e}function Nwe(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["metadata"]);r!=null&&x(e,["metadata"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);a!=null&&x(e,["error"],a);const o=m(t,["response"]);return o!=null&&x(e,["response"],kwe(o)),e}function Twe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["prompt"]);i!=null&&x(n,["instances[0]","prompt"],i);const a=m(e,["image"]);a!=null&&x(n,["instances[0]","image"],tx(a));const o=m(e,["video"]);o!=null&&x(n,["instances[0]","video"],j$(o));const s=m(e,["source"]);s!=null&&Iwe(s,n);const l=m(e,["config"]);return l!=null&&Swe(l,n),n}function Pwe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["prompt"]);i!=null&&x(n,["instances[0]","prompt"],i);const a=m(e,["image"]);a!=null&&x(n,["instances[0]","image"],ao(a));const o=m(e,["video"]);o!=null&&x(n,["instances[0]","video"],R$(o));const s=m(e,["source"]);s!=null&&Owe(s,n);const l=m(e,["config"]);return l!=null&&Awe(l,n),n}function Cwe(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Lwe(o))),x(e,["generatedVideos"],a)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function kwe(t){const e={},n=m(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Mwe(o))),x(e,["generatedVideos"],a)}const r=m(t,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=m(t,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function Iwe(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=m(t,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],tx(i));const a=m(t,["video"]);return e!==void 0&&a!=null&&x(e,["instances[0]","video"],j$(a)),n}function Owe(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=m(t,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],ao(i));const a=m(t,["video"]);return e!==void 0&&a!=null&&x(e,["instances[0]","video"],R$(a)),n}function jwe(t){const e={},n=m(t,["_self"]);n!=null&&x(e,["image"],qwe(n));const r=m(t,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const i=m(t,["_self"]);return i!=null&&x(e,["safetyAttributes"],C$(i)),e}function ex(t){const e={},n=m(t,["_self"]);n!=null&&x(e,["image"],P$(n));const r=m(t,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const i=m(t,["_self"]);i!=null&&x(e,["safetyAttributes"],k$(i));const a=m(t,["prompt"]);return a!=null&&x(e,["enhancedPrompt"],a),e}function Rwe(t){const e={},n=m(t,["_self"]);n!=null&&x(e,["mask"],P$(n));const r=m(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),x(e,["labels"],i)}return e}function Lwe(t){const e={},n=m(t,["video"]);return n!=null&&x(e,["video"],x2e(n)),e}function Mwe(t){const e={},n=m(t,["_self"]);return n!=null&&x(e,["video"],b2e(n)),e}function Dwe(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&x(e,["modelConfig"],n);const r=m(t,["responseJsonSchema"]);r!=null&&x(e,["responseJsonSchema"],r);const i=m(t,["audioTimestamp"]);i!=null&&x(e,["audioTimestamp"],i);const a=m(t,["candidateCount"]);a!=null&&x(e,["candidateCount"],a);const o=m(t,["enableAffectiveDialog"]);o!=null&&x(e,["enableAffectiveDialog"],o);const s=m(t,["frequencyPenalty"]);s!=null&&x(e,["frequencyPenalty"],s);const l=m(t,["logprobs"]);l!=null&&x(e,["logprobs"],l);const u=m(t,["maxOutputTokens"]);u!=null&&x(e,["maxOutputTokens"],u);const c=m(t,["mediaResolution"]);c!=null&&x(e,["mediaResolution"],c);const d=m(t,["presencePenalty"]);d!=null&&x(e,["presencePenalty"],d);const p=m(t,["responseLogprobs"]);p!=null&&x(e,["responseLogprobs"],p);const h=m(t,["responseMimeType"]);h!=null&&x(e,["responseMimeType"],h);const v=m(t,["responseModalities"]);v!=null&&x(e,["responseModalities"],v);const y=m(t,["responseSchema"]);y!=null&&x(e,["responseSchema"],y);const w=m(t,["routingConfig"]);w!=null&&x(e,["routingConfig"],w);const b=m(t,["seed"]);b!=null&&x(e,["seed"],b);const _=m(t,["speechConfig"]);_!=null&&x(e,["speechConfig"],I$(_));const A=m(t,["stopSequences"]);A!=null&&x(e,["stopSequences"],A);const N=m(t,["temperature"]);N!=null&&x(e,["temperature"],N);const E=m(t,["thinkingConfig"]);E!=null&&x(e,["thinkingConfig"],E);const P=m(t,["topK"]);P!=null&&x(e,["topK"],P);const I=m(t,["topP"]);if(I!=null&&x(e,["topP"],I),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $we(t,e){const n={},r=m(e,["model"]);return r!=null&&x(n,["_url","name"],Zt(t,r)),n}function Fwe(t,e){const n={},r=m(e,["model"]);return r!=null&&x(n,["_url","name"],Zt(t,r)),n}function Uwe(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function Bwe(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function qwe(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&x(e,["imageBytes"],Hl(n));const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function P$(t){const e={},n=m(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&x(e,["imageBytes"],Hl(r));const i=m(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function tx(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&x(e,["bytesBase64Encoded"],Hl(n));const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function ao(t){const e={},n=m(t,["gcsUri"]);n!=null&&x(e,["gcsUri"],n);const r=m(t,["imageBytes"]);r!=null&&x(e,["bytesBase64Encoded"],Hl(r));const i=m(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function Vwe(t,e,n){const r={},i=m(e,["pageSize"]);n!==void 0&&i!=null&&x(n,["_query","pageSize"],i);const a=m(e,["pageToken"]);n!==void 0&&a!=null&&x(n,["_query","pageToken"],a);const o=m(e,["filter"]);n!==void 0&&o!=null&&x(n,["_query","filter"],o);const s=m(e,["queryBase"]);return n!==void 0&&s!=null&&x(n,["_url","models_url"],b$(t,s)),r}function zwe(t,e,n){const r={},i=m(e,["pageSize"]);n!==void 0&&i!=null&&x(n,["_query","pageSize"],i);const a=m(e,["pageToken"]);n!==void 0&&a!=null&&x(n,["_query","pageToken"],a);const o=m(e,["filter"]);n!==void 0&&o!=null&&x(n,["_query","filter"],o);const s=m(e,["queryBase"]);return n!==void 0&&s!=null&&x(n,["_url","models_url"],b$(t,s)),r}function Hwe(t,e){const n={},r=m(e,["config"]);return r!=null&&Vwe(t,r,n),n}function Gwe(t,e){const n={},r=m(e,["config"]);return r!=null&&zwe(t,r,n),n}function Wwe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["_self"]);if(i!=null){let a=w$(i);Array.isArray(a)&&(a=a.map(o=>u5(o))),x(e,["models"],a)}return e}function Kwe(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["_self"]);if(i!=null){let a=w$(i);Array.isArray(a)&&(a=a.map(o=>c5(o))),x(e,["models"],a)}return e}function Jwe(t){const e={},n=m(t,["maskMode"]);n!=null&&x(e,["maskMode"],n);const r=m(t,["segmentationClasses"]);r!=null&&x(e,["maskClasses"],r);const i=m(t,["maskDilation"]);return i!=null&&x(e,["dilation"],i),e}function u5(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["displayName"]);r!=null&&x(e,["displayName"],r);const i=m(t,["description"]);i!=null&&x(e,["description"],i);const a=m(t,["version"]);a!=null&&x(e,["version"],a);const o=m(t,["_self"]);o!=null&&x(e,["tunedModelInfo"],c2e(o));const s=m(t,["inputTokenLimit"]);s!=null&&x(e,["inputTokenLimit"],s);const l=m(t,["outputTokenLimit"]);l!=null&&x(e,["outputTokenLimit"],l);const u=m(t,["supportedGenerationMethods"]);u!=null&&x(e,["supportedActions"],u);const c=m(t,["temperature"]);c!=null&&x(e,["temperature"],c);const d=m(t,["maxTemperature"]);d!=null&&x(e,["maxTemperature"],d);const p=m(t,["topP"]);p!=null&&x(e,["topP"],p);const h=m(t,["topK"]);h!=null&&x(e,["topK"],h);const v=m(t,["thinking"]);return v!=null&&x(e,["thinking"],v),e}function c5(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["displayName"]);r!=null&&x(e,["displayName"],r);const i=m(t,["description"]);i!=null&&x(e,["description"],i);const a=m(t,["versionId"]);a!=null&&x(e,["version"],a);const o=m(t,["deployedModels"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>fwe(p))),x(e,["endpoints"],d)}const s=m(t,["labels"]);s!=null&&x(e,["labels"],s);const l=m(t,["_self"]);l!=null&&x(e,["tunedModelInfo"],d2e(l));const u=m(t,["defaultCheckpointId"]);u!=null&&x(e,["defaultCheckpointId"],u);const c=m(t,["checkpoints"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(p=>p)),x(e,["checkpoints"],d)}return e}function Ywe(t){const e={},n=m(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=m(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=m(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const a=m(t,["fileData"]);a!=null&&x(e,["fileData"],hwe(a));const o=m(t,["functionResponse"]);o!=null&&x(e,["functionResponse"],o);const s=m(t,["inlineData"]);s!=null&&x(e,["inlineData"],Fbe(s));const l=m(t,["text"]);l!=null&&x(e,["text"],l);const u=m(t,["thought"]);u!=null&&x(e,["thought"],u);const c=m(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=m(t,["videoMetadata"]);return d!=null&&x(e,["videoMetadata"],d),e}function Xwe(t){const e={},n=m(t,["productImage"]);return n!=null&&x(e,["image"],ao(n)),e}function Zwe(t,e){const n={},r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=m(t,["baseSteps"]);e!==void 0&&i!=null&&x(e,["parameters","baseSteps"],i);const a=m(t,["outputGcsUri"]);e!==void 0&&a!=null&&x(e,["parameters","storageUri"],a);const o=m(t,["seed"]);e!==void 0&&o!=null&&x(e,["parameters","seed"],o);const s=m(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&x(e,["parameters","safetySetting"],s);const l=m(t,["personGeneration"]);e!==void 0&&l!=null&&x(e,["parameters","personGeneration"],l);const u=m(t,["addWatermark"]);e!==void 0&&u!=null&&x(e,["parameters","addWatermark"],u);const c=m(t,["outputMimeType"]);e!==void 0&&c!=null&&x(e,["parameters","outputOptions","mimeType"],c);const d=m(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&x(e,["parameters","outputOptions","compressionQuality"],d);const p=m(t,["enhancePrompt"]);e!==void 0&&p!=null&&x(e,["parameters","enhancePrompt"],p);const h=m(t,["labels"]);return e!==void 0&&h!=null&&x(e,["labels"],h),n}function Qwe(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["source"]);i!=null&&t2e(i,n);const a=m(e,["config"]);return a!=null&&Zwe(a,n),n}function e2e(t){const e={},n=m(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ex(i))),x(e,["generatedImages"],r)}return e}function t2e(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=m(t,["personImage"]);e!==void 0&&i!=null&&x(e,["instances[0]","personImage","image"],ao(i));const a=m(t,["productImages"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(s=>Xwe(s))),x(e,["instances[0]","productImages"],o)}return n}function n2e(t){const e={},n=m(t,["referenceImage"]);n!=null&&x(e,["referenceImage"],ao(n));const r=m(t,["referenceId"]);r!=null&&x(e,["referenceId"],r);const i=m(t,["referenceType"]);i!=null&&x(e,["referenceType"],i);const a=m(t,["maskImageConfig"]);a!=null&&x(e,["maskImageConfig"],Jwe(a));const o=m(t,["controlImageConfig"]);o!=null&&x(e,["controlImageConfig"],Gbe(o));const s=m(t,["styleImageConfig"]);s!=null&&x(e,["styleImageConfig"],s);const l=m(t,["subjectImageConfig"]);return l!=null&&x(e,["subjectImageConfig"],l),e}function C$(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const r=m(t,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const i=m(t,["contentType"]);return i!=null&&x(e,["contentType"],i),e}function k$(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&x(e,["categories"],n);const r=m(t,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const i=m(t,["contentType"]);return i!=null&&x(e,["contentType"],i),e}function r2e(t){const e={},n=m(t,["category"]);if(n!=null&&x(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=m(t,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function i2e(t){const e={},n=m(t,["image"]);return n!=null&&x(e,["image"],ao(n)),e}function a2e(t,e){const n={},r=m(t,["mode"]);e!==void 0&&r!=null&&x(e,["parameters","mode"],r);const i=m(t,["maxPredictions"]);e!==void 0&&i!=null&&x(e,["parameters","maxPredictions"],i);const a=m(t,["confidenceThreshold"]);e!==void 0&&a!=null&&x(e,["parameters","confidenceThreshold"],a);const o=m(t,["maskDilation"]);e!==void 0&&o!=null&&x(e,["parameters","maskDilation"],o);const s=m(t,["binaryColorThreshold"]);e!==void 0&&s!=null&&x(e,["parameters","binaryColorThreshold"],s);const l=m(t,["labels"]);return e!==void 0&&l!=null&&x(e,["labels"],l),n}function o2e(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["source"]);i!=null&&l2e(i,n);const a=m(e,["config"]);return a!=null&&a2e(a,n),n}function s2e(t){const e={},n=m(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Rwe(i))),x(e,["generatedMasks"],r)}return e}function l2e(t,e){const n={},r=m(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=m(t,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],ao(i));const a=m(t,["scribbleImage"]);return e!==void 0&&a!=null&&x(e,["instances[0]","scribble"],i2e(a)),n}function I$(t){const e={},n=m(t,["languageCode"]);n!=null&&x(e,["languageCode"],n);const r=m(t,["voiceConfig"]);if(r!=null&&x(e,["voiceConfig"],r),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function u2e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=m(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const a=m(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const o=m(t,["codeExecution"]);if(o!=null&&x(e,["codeExecution"],o),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(t,["googleMaps"]);s!=null&&x(e,["googleMaps"],Uwe(s));const l=m(t,["googleSearch"]);l!=null&&x(e,["googleSearch"],Bwe(l));const u=m(t,["urlContext"]);return u!=null&&x(e,["urlContext"],u),e}function O$(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>pwe(p))),x(e,["functionDeclarations"],d)}const r=m(t,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=m(t,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const a=m(t,["computerUse"]);if(a!=null&&x(e,["computerUse"],a),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=m(t,["codeExecution"]);o!=null&&x(e,["codeExecution"],o);const s=m(t,["enterpriseWebSearch"]);s!=null&&x(e,["enterpriseWebSearch"],s);const l=m(t,["googleMaps"]);l!=null&&x(e,["googleMaps"],l);const u=m(t,["googleSearch"]);u!=null&&x(e,["googleSearch"],u);const c=m(t,["urlContext"]);return c!=null&&x(e,["urlContext"],c),e}function c2e(t){const e={},n=m(t,["baseModel"]);n!=null&&x(e,["baseModel"],n);const r=m(t,["createTime"]);r!=null&&x(e,["createTime"],r);const i=m(t,["updateTime"]);return i!=null&&x(e,["updateTime"],i),e}function d2e(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&x(e,["baseModel"],n);const r=m(t,["createTime"]);r!=null&&x(e,["createTime"],r);const i=m(t,["updateTime"]);return i!=null&&x(e,["updateTime"],i),e}function f2e(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=m(t,["description"]);e!==void 0&&i!=null&&x(e,["description"],i);const a=m(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&x(e,["defaultCheckpointId"],a),n}function h2e(t,e){const n={},r=m(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=m(t,["description"]);e!==void 0&&i!=null&&x(e,["description"],i);const a=m(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&x(e,["defaultCheckpointId"],a),n}function p2e(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","name"],Zt(t,r));const i=m(e,["config"]);return i!=null&&f2e(i,n),n}function m2e(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["config"]);return i!=null&&h2e(i,n),n}function g2e(t,e){const n={},r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=m(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&x(e,["parameters","safetySetting"],i);const a=m(t,["personGeneration"]);e!==void 0&&a!=null&&x(e,["parameters","personGeneration"],a);const o=m(t,["includeRaiReason"]);e!==void 0&&o!=null&&x(e,["parameters","includeRaiReason"],o);const s=m(t,["outputMimeType"]);e!==void 0&&s!=null&&x(e,["parameters","outputOptions","mimeType"],s);const l=m(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&x(e,["parameters","outputOptions","compressionQuality"],l);const u=m(t,["enhanceInputImage"]);e!==void 0&&u!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=m(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=m(t,["labels"]);e!==void 0&&d!=null&&x(e,["labels"],d);const p=m(t,["numberOfImages"]);e!==void 0&&p!=null&&x(e,["parameters","sampleCount"],p);const h=m(t,["mode"]);return e!==void 0&&h!=null&&x(e,["parameters","mode"],h),n}function y2e(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["_url","model"],Zt(t,r));const i=m(e,["image"]);i!=null&&x(n,["instances[0]","image"],ao(i));const a=m(e,["upscaleFactor"]);a!=null&&x(n,["parameters","upscaleConfig","upscaleFactor"],a);const o=m(e,["config"]);return o!=null&&g2e(o,n),n}function v2e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>ex(a))),x(e,["generatedImages"],i)}return e}function x2e(t){const e={},n=m(t,["uri"]);n!=null&&x(e,["uri"],n);const r=m(t,["encodedVideo"]);r!=null&&x(e,["videoBytes"],Hl(r));const i=m(t,["encoding"]);return i!=null&&x(e,["mimeType"],i),e}function b2e(t){const e={},n=m(t,["gcsUri"]);n!=null&&x(e,["uri"],n);const r=m(t,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],Hl(r));const i=m(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function w2e(t){const e={},n=m(t,["image"]);n!=null&&x(e,["_self"],ao(n));const r=m(t,["maskMode"]);return r!=null&&x(e,["maskMode"],r),e}function _2e(t){const e={},n=m(t,["image"]);n!=null&&x(e,["image"],tx(n));const r=m(t,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function S2e(t){const e={},n=m(t,["image"]);n!=null&&x(e,["image"],ao(n));const r=m(t,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function j$(t){const e={},n=m(t,["uri"]);n!=null&&x(e,["uri"],n);const r=m(t,["videoBytes"]);r!=null&&x(e,["encodedVideo"],Hl(r));const i=m(t,["mimeType"]);return i!=null&&x(e,["encoding"],i),e}function R$(t){const e={},n=m(t,["uri"]);n!=null&&x(e,["gcsUri"],n);const r=m(t,["videoBytes"]);r!=null&&x(e,["bytesBase64Encoded"],Hl(r));const i=m(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A2e="Content-Type",E2e="X-Server-Timeout",N2e="User-Agent",d5="x-goog-api-client",T2e="1.29.1",P2e=`google-genai-sdk/${T2e}`,C2e="v1beta1",k2e="v1beta",pI=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class I2e{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:C2e,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:k2e,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,s]of Object.entries(e.queryParams))i.searchParams.append(o,String(s));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const a=new AbortController,o=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>a.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=o}return n&&n.extraBody!==null&&O2e(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await mI(i),new o5(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await mI(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Td(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:s,value:l}=yield Cn(i.read());if(s){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=a.decode(l,{stream:!0});try{const d=JSON.parse(u);if("error"in d){const p=JSON.parse(JSON.stringify(d.error)),h=p.status,v=p.code,y=`got status: ${h}. ${JSON.stringify(d)}`;if(v>=400&&v<600)throw new Z1({message:y,status:v})}}catch(d){if(d.name==="ApiError")throw d}o+=u;let c=o.match(pI);for(;c;){const d=c[1];try{const p=new Response(d,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Cn(new o5(p)),o=o.slice(c[0].length),c=o.match(pI)}catch(p){throw new Error(`exception parsing stream chunk ${d}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=P2e+" "+this.clientOptions.userAgentExtra;return e[N2e]=n,e[d5]=n,e[A2e]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(E2e,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,o=await a.stat(e);i.sizeBytes=String(o.size);const s=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(s===void 0||s==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=s;const l={file:i},u=this.getFileName(e),c=He("upload/v1beta/files",l._url),d=await this.fetchUploadUrl(c,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return a.upload(e,d,this)}async uploadFileToFileSearchStore(e,n,r){var i;const a=this.clientOptions.uploader,o=await a.stat(n),s=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(n),d={};r!=null&&r.customMetadata&&(d.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(d.chunkingConfig=r.chunkingConfig);const p=await this.fetchUploadUrl(u,s,l,c,d,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,a,o){var s;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(s=u==null?void 0:u.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function mI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Z1({message:i,status:n}):new Error(i)}}function O2e(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,o){const s=Object.assign({},a);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],c=s[l];u&&typeof u=="object"&&!Array.isArray(u)&&c&&typeof c=="object"&&!Array.isArray(c)?s[l]=r(c,u):(c&&u&&typeof c!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof c}, New type: ${typeof u}. Overwriting.`),s[l]=u)}return s}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j2e="mcp_used/unknown";let R2e=!1;function L$(t){for(const e of t)if(L2e(e)||typeof e=="object"&&"inputSchema"in e)return!0;return R2e}function M$(t){var e;const n=(e=t[d5])!==null&&e!==void 0?e:"";t[d5]=(n+` ${j2e}`).trimStart()}function L2e(t){return t!==null&&typeof t=="object"&&t instanceof YA}function M2e(t,e=100){return Td(this,arguments,function*(){let r,i=0;for(;i<e;){const a=yield Cn(t.listTools({cursor:r}));for(const o of a.tools)yield yield Cn(o),i++;if(!a.nextCursor)break;r=a.nextCursor}})}class YA{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new YA(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const a={},o=[];for(const c of this.mcpClients)try{for(var s=!0,l=(n=void 0,mp(M2e(c))),u;u=await l.next(),e=u.done,!e;s=!0){i=u.value,s=!1;const d=i;o.push(d);const p=d.name;if(a[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);a[p]=c}}catch(d){n={error:d}}finally{try{!s&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),B1e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function D2e(t,e,n){const r=new j1e;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class $2e{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),o=B2e(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${s}`;let u=()=>{};const c=new Promise(A=>{u=A}),d=e.callbacks,p=function(){u({})},h=this.apiClient,v={onopen:p,onmessage:A=>{D2e(h,d.onmessage,A)},onerror:(n=d==null?void 0:d.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=d==null?void 0:d.onclose)!==null&&r!==void 0?r:function(A){}},y=this.webSocketFactory.create(l,U2e(o),v);y.connect(),await c;const _={setup:{model:Zt(this.apiClient,e.model)}};return y.send(JSON.stringify(_)),new F2e(y,this.apiClient)}}class F2e{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=kbe(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Cbe(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(hd.PLAY)}pause(){this.sendPlaybackControl(hd.PAUSE)}stop(){this.sendPlaybackControl(hd.STOP)}resetContext(){this.sendPlaybackControl(hd.RESET_CONTEXT)}close(){this.conn.close()}}function U2e(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function B2e(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q2e="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function V2e(t,e,n){const r=new O1e;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(t.isVertexAI()){const o=jbe(a);Object.assign(r,o)}else Object.assign(r,a);e(r)}class z2e{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new $2e(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,a,o,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&L$(e.config.tools)&&M$(d);const p=K2e(d);if(this.apiClient.isVertexAI())c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,c);else{const R=this.apiClient.getApiKey();let D="BidiGenerateContent",C="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",C="access_token"),c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${D}?${C}=${R}`}let h=()=>{};const v=new Promise(R=>{h=R}),y=e.callbacks,w=function(){var R;(R=y==null?void 0:y.onopen)===null||R===void 0||R.call(y),h({})},b=this.apiClient,_={onopen:w,onmessage:R=>{V2e(b,y.onmessage,R)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(R){}},A=this.webSocketFactory.create(c,W2e(p),_);A.connect(),await v;let N=Zt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const R=this.apiClient.getProject(),D=this.apiClient.getLocation();N=`projects/${R}/locations/${D}/`+N}let E={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[P0.AUDIO]}:e.config.responseModalities=[P0.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(s=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[],I=[];for(const R of P)if(this.isCallableTool(R)){const D=R;I.push(await D.tool())}else I.push(R);I.length>0&&(e.config.tools=I);const O={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?E=Pbe(this.apiClient,O):E=Tbe(this.apiClient,O),delete E.config,A.send(JSON.stringify(E)),new G2e(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const H2e={turnComplete:!0};class G2e{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Aa(n.turns),e.isVertexAI()||(r=r.map(i=>Q1(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(q2e)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},H2e),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Obe(e)}:n={realtimeInput:Ibe(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function W2e(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function K2e(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gI=10;function yI(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Pd(o)){i=!0;break}if(!i)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Pd(t){return"callTool"in t&&typeof t.callTool=="function"}function J2e(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Pd(i)))!==null&&r!==void 0?r:!1}function vI(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Pd(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(i)}),n}function xI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y2e extends Os{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,a,o,s;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!J2e(n)||yI(n.config))return await this.generateContentInternal(l);const u=vI(n);if(u.length>0){const y=u.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let c,d;const p=Aa(l.contents),h=(a=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:gI;let v=0;for(;v<h&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const y=c.candidates[0].content,w=[];for(const b of(s=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(Pd(b)){const A=await b.callTool(c.functionCalls);w.push(...A)}v++,d={role:"user",parts:w},l.contents=Aa(l.contents),l.contents.push(y),l.contents.push(d),xI(l.config)&&(p.push(y),p.push(d))}return xI(l.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),yI(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}const r=vI(n);if(r.length>0){const i=r.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${i}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:o.push(l);let s;return a?s={generatedImages:o,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:s={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},s}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new gc(As.PAGED_ITEM_MODELS,s=>this.listInternal(s),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,o,s,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(a=n.source)===null||a===void 0?void 0:a.video)===null||o===void 0)&&o.uri&&(!((l=(s=n.source)===null||s===void 0?void 0:s.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const o=await Promise.all(a.map(async l=>Pd(l)?await l.tool():l)),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(s.config.tools=o,e.config&&e.config.tools&&L$(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),M$(u),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return s}async initAfcToolsMap(e){var n,r,i;const a=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Pd(o)){const s=o,l=await s.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,s)}}return a}async processAfcStream(e){var n,r,i;const a=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:gI;let o=!1,s=0;const l=await this.initAfcToolsMap(e);return function(u,c,d){var p,h;return Td(this,arguments,function*(){for(var v,y,w,b;s<a;){o&&(s++,o=!1);const E=yield Cn(u.processParamsMaybeAddMcpUsage(d)),P=yield Cn(u.generateContentStreamInternal(E)),I=[],O=[];try{for(var _=!0,A=(y=void 0,mp(P)),N;N=yield Cn(A.next()),v=N.done,!v;_=!0){b=N.value,_=!1;const R=b;if(yield yield Cn(R),R.candidates&&(!((p=R.candidates[0])===null||p===void 0)&&p.content)){O.push(R.candidates[0].content);for(const D of(h=R.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(s<a&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(D.functionCall.name)){const C=yield Cn(c.get(D.functionCall.name).callTool([D.functionCall]));I.push(...C)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(R){y={error:R}}finally{try{!_&&!v&&(w=A.return)&&(yield Cn(w.call(A)))}finally{if(y)throw y.error}}if(I.length>0){o=!0;const R=new Uh;R.candidates=[{content:{role:"user",parts:I}}],yield yield Cn(R);const D=[];D.push(...O),D.push({role:"user",parts:I});const C=Aa(d.contents).concat(D);d.contents=C}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=dI(this.apiClient,e);return s=He("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=hI(c),p=new Uh;return Object.assign(p,d),p})}else{const u=cI(this.apiClient,e);return s=He("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=fI(c),p=new Uh;return Object.assign(p,d),p})}}async generateContentStreamInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=dI(this.apiClient,e);return s=He("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(d){return Td(this,arguments,function*(){var p,h,v,y;try{for(var w=!0,b=mp(d),_;_=yield Cn(b.next()),p=_.done,!p;w=!0){y=_.value,w=!1;const A=y,N=hI(yield Cn(A.json()));N.sdkHttpResponse={headers:A.headers};const E=new Uh;Object.assign(E,N),yield yield Cn(E)}}catch(A){h={error:A}}finally{try{!w&&!p&&(v=b.return)&&(yield Cn(v.call(b)))}finally{if(h)throw h.error}}})})}else{const u=cI(this.apiClient,e);return s=He("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(d){return Td(this,arguments,function*(){var p,h,v,y;try{for(var w=!0,b=mp(d),_;_=yield Cn(b.next()),p=_.done,!p;w=!0){y=_.value,w=!1;const A=y,N=fI(yield Cn(A.json()));N.sdkHttpResponse={headers:A.headers};const E=new Uh;Object.assign(E,N),yield yield Cn(E)}}catch(A){h={error:A}}finally{try{!w&&!p&&(v=b.return)&&(yield Cn(v.call(b)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=uwe(this.apiClient,e);return s=He("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=dwe(c),p=new K4;return Object.assign(p,d),p})}else{const u=lwe(this.apiClient,e);return s=He("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=cwe(c),p=new K4;return Object.assign(p,d),p})}}async generateImagesInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=bwe(this.apiClient,e);return s=He("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=_we(c),p=new J4;return Object.assign(p,d),p})}else{const u=xwe(this.apiClient,e);return s=He("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=wwe(c),p=new J4;return Object.assign(p,d),p})}}async editImageInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const s=iwe(this.apiClient,e);return a=He("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=awe(l),c=new w1e;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const s=y2e(this.apiClient,e);return a=He("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=v2e(l),c=new _1e;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const s=Qwe(this.apiClient,e);return a=He("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=e2e(l),c=new S1e;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const s=o2e(this.apiClient,e);return a=He("{model}:predict",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=s2e(l),c=new A1e;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Fwe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c5(c))}else{const u=$we(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o.then(c=>u5(c))}}async listInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Gwe(this.apiClient,e);return s=He("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Kwe(c),p=new Y4;return Object.assign(p,d),p})}else{const u=Hwe(this.apiClient,e);return s=He("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Wwe(c),p=new Y4;return Object.assign(p,d),p})}}async update(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=m2e(this.apiClient,e);return s=He("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c5(c))}else{const u=p2e(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o.then(c=>u5(c))}}async delete(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=ewe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=nwe(c),p=new X4;return Object.assign(p,d),p})}else{const u=Qbe(this.apiClient,e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=twe(c),p=new X4;return Object.assign(p,d),p})}}async countTokens(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Ybe(this.apiClient,e);return s=He("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Zbe(c),p=new Z4;return Object.assign(p,d),p})}else{const u=Jbe(this.apiClient,e);return s=He("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=Xbe(c),p=new Z4;return Object.assign(p,d),p})}}async computeTokens(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const s=qbe(this.apiClient,e);return a=He("{model}:computeTokens",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=Vbe(l),c=new E1e;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Pwe(this.apiClient,e);return s=He("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=Nwe(c),p=new C0;return Object.assign(p,d),p})}else{const u=Twe(this.apiClient,e);return s=He("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o.then(c=>{const d=Ewe(c),p=new C0;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X2e extends Os{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=m1e(e);return s=He("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o}else{const u=p1e(e);return s=He("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const s=s1e(e);return a=He("{resourceName}:fetchPredictOperation",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2e(t){const e={},n=m(t,["data"]);if(n!=null&&x(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Q2e(t){const e={},n=m(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>s_e(a))),x(e,["parts"],i)}const r=m(t,["role"]);return r!=null&&x(e,["role"],r),e}function e_e(t,e,n){const r={},i=m(e,["expireTime"]);n!==void 0&&i!=null&&x(n,["expireTime"],i);const a=m(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&x(n,["newSessionExpireTime"],a);const o=m(e,["uses"]);n!==void 0&&o!=null&&x(n,["uses"],o);const s=m(e,["liveConnectConstraints"]);n!==void 0&&s!=null&&x(n,["bidiGenerateContentSetup"],o_e(t,s));const l=m(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&x(n,["fieldMask"],l),r}function t_e(t,e){const n={},r=m(e,["config"]);return r!=null&&x(n,["config"],e_e(t,r,n)),n}function n_e(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&x(e,["fileUri"],n);const r=m(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function r_e(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&x(e,["enableWidget"],n),e}function i_e(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&x(e,["timeRangeFilter"],n),e}function a_e(t,e){const n={},r=m(t,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const i=m(t,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const a=m(t,["temperature"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig","temperature"],a);const o=m(t,["topP"]);e!==void 0&&o!=null&&x(e,["setup","generationConfig","topP"],o);const s=m(t,["topK"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","topK"],s);const l=m(t,["maxOutputTokens"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","maxOutputTokens"],l);const u=m(t,["mediaResolution"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","mediaResolution"],u);const c=m(t,["seed"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","seed"],c);const d=m(t,["speechConfig"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","speechConfig"],JA(d));const p=m(t,["thinkingConfig"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","thinkingConfig"],p);const h=m(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],h);const v=m(t,["systemInstruction"]);e!==void 0&&v!=null&&x(e,["setup","systemInstruction"],Q2e(ri(v)));const y=m(t,["tools"]);if(e!==void 0&&y!=null){let P=zf(y);Array.isArray(P)&&(P=P.map(I=>u_e(Vf(I)))),x(e,["setup","tools"],P)}const w=m(t,["sessionResumption"]);e!==void 0&&w!=null&&x(e,["setup","sessionResumption"],l_e(w));const b=m(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&x(e,["setup","inputAudioTranscription"],b);const _=m(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&x(e,["setup","outputAudioTranscription"],_);const A=m(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&x(e,["setup","realtimeInputConfig"],A);const N=m(t,["contextWindowCompression"]);e!==void 0&&N!=null&&x(e,["setup","contextWindowCompression"],N);const E=m(t,["proactivity"]);return e!==void 0&&E!=null&&x(e,["setup","proactivity"],E),n}function o_e(t,e){const n={},r=m(e,["model"]);r!=null&&x(n,["setup","model"],Zt(t,r));const i=m(e,["config"]);return i!=null&&x(n,["config"],a_e(i,n)),n}function s_e(t){const e={},n=m(t,["functionCall"]);n!=null&&x(e,["functionCall"],n);const r=m(t,["codeExecutionResult"]);r!=null&&x(e,["codeExecutionResult"],r);const i=m(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const a=m(t,["fileData"]);a!=null&&x(e,["fileData"],n_e(a));const o=m(t,["functionResponse"]);o!=null&&x(e,["functionResponse"],o);const s=m(t,["inlineData"]);s!=null&&x(e,["inlineData"],Z2e(s));const l=m(t,["text"]);l!=null&&x(e,["text"],l);const u=m(t,["thought"]);u!=null&&x(e,["thought"],u);const c=m(t,["thoughtSignature"]);c!=null&&x(e,["thoughtSignature"],c);const d=m(t,["videoMetadata"]);return d!=null&&x(e,["videoMetadata"],d),e}function l_e(t){const e={},n=m(t,["handle"]);if(n!=null&&x(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function u_e(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["functionDeclarations"],c)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=m(t,["googleSearchRetrieval"]);r!=null&&x(e,["googleSearchRetrieval"],r);const i=m(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const a=m(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const o=m(t,["codeExecution"]);if(o!=null&&x(e,["codeExecution"],o),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(t,["googleMaps"]);s!=null&&x(e,["googleMaps"],r_e(s));const l=m(t,["googleSearch"]);l!=null&&x(e,["googleSearch"],i_e(l));const u=m(t,["urlContext"]);return u!=null&&x(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c_e(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);e.push(...i)}else e.push(n)}return e.join(",")}function d_e(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const a=c_e(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let s=[];i.length>0&&(s=i.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];a&&l.push(a),s.length>0&&l.push(...s),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class f_e extends Os{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=t_e(this.apiClient,e);a=He("auth_tokens",s._url),o=s._query,delete s.config,delete s._url,delete s._query;const l=d_e(s,e.config);return i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h_e(t,e){const n={},r=m(t,["displayName"]);return e!==void 0&&r!=null&&x(e,["displayName"],r),n}function p_e(t){const e={},n=m(t,["config"]);return n!=null&&h_e(n,e),e}function m_e(t,e){const n={},r=m(t,["force"]);return e!==void 0&&r!=null&&x(e,["_query","force"],r),n}function g_e(t){const e={},n=m(t,["name"]);n!=null&&x(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&m_e(r,e),e}function y_e(t){const e={},n=m(t,["name"]);return n!=null&&x(e,["_url","name"],n),e}function v_e(t,e){const n={},r=m(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),x(e,["customMetadata"],a)}const i=m(t,["chunkingConfig"]);return e!==void 0&&i!=null&&x(e,["chunkingConfig"],i),n}function x_e(t){const e={},n=m(t,["name"]);n!=null&&x(e,["name"],n);const r=m(t,["metadata"]);r!=null&&x(e,["metadata"],r);const i=m(t,["done"]);i!=null&&x(e,["done"],i);const a=m(t,["error"]);a!=null&&x(e,["error"],a);const o=m(t,["response"]);return o!=null&&x(e,["response"],w_e(o)),e}function b_e(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&x(e,["_url","file_search_store_name"],n);const r=m(t,["fileName"]);r!=null&&x(e,["fileName"],r);const i=m(t,["config"]);return i!=null&&v_e(i,e),e}function w_e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["parent"]);r!=null&&x(e,["parent"],r);const i=m(t,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function __e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),n}function S_e(t){const e={},n=m(t,["config"]);return n!=null&&__e(n,e),e}function A_e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),x(e,["fileSearchStores"],a)}return e}function E_e(t,e){const n={},r=m(t,["mimeType"]);e!==void 0&&r!=null&&x(e,["mimeType"],r);const i=m(t,["displayName"]);e!==void 0&&i!=null&&x(e,["displayName"],i);const a=m(t,["customMetadata"]);if(e!==void 0&&a!=null){let s=a;Array.isArray(s)&&(s=s.map(l=>l)),x(e,["customMetadata"],s)}const o=m(t,["chunkingConfig"]);return e!==void 0&&o!=null&&x(e,["chunkingConfig"],o),n}function N_e(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&x(e,["_url","file_search_store_name"],n);const r=m(t,["config"]);return r!=null&&E_e(r,e),e}function T_e(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&x(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P_e(t,e){const n={},r=m(t,["force"]);return e!==void 0&&r!=null&&x(e,["_query","force"],r),n}function C_e(t){const e={},n=m(t,["name"]);n!=null&&x(e,["_url","name"],n);const r=m(t,["config"]);return r!=null&&P_e(r,e),e}function k_e(t){const e={},n=m(t,["name"]);return n!=null&&x(e,["_url","name"],n),e}function I_e(t,e){const n={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=m(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),n}function O_e(t){const e={},n=m(t,["parent"]);n!=null&&x(e,["_url","parent"],n);const r=m(t,["config"]);return r!=null&&I_e(r,e),e}function j_e(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&x(e,["sdkHttpResponse"],n);const r=m(t,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=m(t,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),x(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R_e extends Os{constructor(e){super(),this.apiClient=e,this.list=async n=>new gc(As.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=k_e(e);return a=He("{name}",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=C_e(e);i=He("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=O_e(e);return a=He("{parent}/documents",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=j_e(l),c=new N1e;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L_e extends Os{constructor(e,n=new R_e(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new gc(As.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=p_e(e);return a=He("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=y_e(e);return a=He("{name}",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=g_e(e);i=He("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=S_e(e);return a=He("fileSearchStores",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=A_e(l),c=new T1e;return Object.assign(c,u),c})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=N_e(e);return a=He("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=T_e(l),c=new P1e;return Object.assign(c,u),c})}}async importFile(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=b_e(e);return a=He("{file_search_store_name}:importFile",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=x_e(l),c=new zA;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M_e(t,e){const n={},r=m(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function D_e(t,e){const n={},r=m(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function $_e(t,e,n){const r={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=m(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&x(e,["displayName"],i),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=m(t,["epochCount"]);e!==void 0&&a!=null&&x(e,["tuningTask","hyperparameters","epochCount"],a);const o=m(t,["learningRateMultiplier"]);if(o!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=m(t,["batchSize"]);e!==void 0&&s!=null&&x(e,["tuningTask","hyperparameters","batchSize"],s);const l=m(t,["learningRate"]);if(e!==void 0&&l!=null&&x(e,["tuningTask","hyperparameters","learningRate"],l),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function F_e(t,e,n){const r={};let i=m(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const h=m(t,["validationDataset"]);e!==void 0&&h!=null&&x(e,["supervisedTuningSpec"],bI(h))}else if(i==="PREFERENCE_TUNING"){const h=m(t,["validationDataset"]);e!==void 0&&h!=null&&x(e,["preferenceOptimizationSpec"],bI(h))}const a=m(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&x(e,["tunedModelDisplayName"],a);const o=m(t,["description"]);e!==void 0&&o!=null&&x(e,["description"],o);let s=m(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const h=m(t,["epochCount"]);e!==void 0&&h!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],h)}else if(s==="PREFERENCE_TUNING"){const h=m(t,["epochCount"]);e!==void 0&&h!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],h)}let l=m(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const h=m(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h)}else if(l==="PREFERENCE_TUNING"){const h=m(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],h)}let u=m(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const h=m(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h)}else if(u==="PREFERENCE_TUNING"){const h=m(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],h)}let c=m(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const h=m(t,["adapterSize"]);e!==void 0&&h!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h)}else if(c==="PREFERENCE_TUNING"){const h=m(t,["adapterSize"]);e!==void 0&&h!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],h)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const d=m(t,["labels"]);e!==void 0&&d!=null&&x(e,["labels"],d);const p=m(t,["beta"]);return e!==void 0&&p!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),r}function U_e(t,e){const n={},r=m(t,["baseModel"]);r!=null&&x(n,["baseModel"],r);const i=m(t,["preTunedModel"]);i!=null&&x(n,["preTunedModel"],i);const a=m(t,["trainingDataset"]);a!=null&&X_e(a);const o=m(t,["config"]);return o!=null&&$_e(o,n),n}function B_e(t,e){const n={},r=m(t,["baseModel"]);r!=null&&x(n,["baseModel"],r);const i=m(t,["preTunedModel"]);i!=null&&x(n,["preTunedModel"],i);const a=m(t,["trainingDataset"]);a!=null&&Z_e(a,n,e);const o=m(t,["config"]);return o!=null&&F_e(o,n,e),n}function q_e(t,e){const n={},r=m(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function V_e(t,e){const n={},r=m(t,["name"]);return r!=null&&x(n,["_url","name"],r),n}function z_e(t,e,n){const r={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&x(e,["_query","pageToken"],a);const o=m(t,["filter"]);return e!==void 0&&o!=null&&x(e,["_query","filter"],o),r}function H_e(t,e,n){const r={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&x(e,["_query","pageToken"],a);const o=m(t,["filter"]);return e!==void 0&&o!=null&&x(e,["_query","filter"],o),r}function G_e(t,e){const n={},r=m(t,["config"]);return r!=null&&z_e(r,n),n}function W_e(t,e){const n={},r=m(t,["config"]);return r!=null&&H_e(r,n),n}function K_e(t,e){const n={},r=m(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const i=m(t,["nextPageToken"]);i!=null&&x(n,["nextPageToken"],i);const a=m(t,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(s=>D$(s))),x(n,["tuningJobs"],o)}return n}function J_e(t,e){const n={},r=m(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const i=m(t,["nextPageToken"]);i!=null&&x(n,["nextPageToken"],i);const a=m(t,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(s=>f5(s))),x(n,["tuningJobs"],o)}return n}function Y_e(t,e){const n={},r=m(t,["name"]);r!=null&&x(n,["model"],r);const i=m(t,["name"]);return i!=null&&x(n,["endpoint"],i),n}function X_e(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=m(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),x(n,["examples","examples"],i)}return n}function Z_e(t,e,n){const r={};let i=m(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=m(t,["gcsUri"]);e!==void 0&&o!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=m(t,["gcsUri"]);e!==void 0&&o!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let a=m(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=m(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=m(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function D$(t,e){const n={},r=m(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const i=m(t,["name"]);i!=null&&x(n,["name"],i);const a=m(t,["state"]);a!=null&&x(n,["state"],v$(a));const o=m(t,["createTime"]);o!=null&&x(n,["createTime"],o);const s=m(t,["tuningTask","startTime"]);s!=null&&x(n,["startTime"],s);const l=m(t,["tuningTask","completeTime"]);l!=null&&x(n,["endTime"],l);const u=m(t,["updateTime"]);u!=null&&x(n,["updateTime"],u);const c=m(t,["description"]);c!=null&&x(n,["description"],c);const d=m(t,["baseModel"]);d!=null&&x(n,["baseModel"],d);const p=m(t,["_self"]);return p!=null&&x(n,["tunedModel"],Y_e(p)),n}function f5(t,e){const n={},r=m(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const i=m(t,["name"]);i!=null&&x(n,["name"],i);const a=m(t,["state"]);a!=null&&x(n,["state"],v$(a));const o=m(t,["createTime"]);o!=null&&x(n,["createTime"],o);const s=m(t,["startTime"]);s!=null&&x(n,["startTime"],s);const l=m(t,["endTime"]);l!=null&&x(n,["endTime"],l);const u=m(t,["updateTime"]);u!=null&&x(n,["updateTime"],u);const c=m(t,["error"]);c!=null&&x(n,["error"],c);const d=m(t,["description"]);d!=null&&x(n,["description"],d);const p=m(t,["baseModel"]);p!=null&&x(n,["baseModel"],p);const h=m(t,["tunedModel"]);h!=null&&x(n,["tunedModel"],h);const v=m(t,["preTunedModel"]);v!=null&&x(n,["preTunedModel"],v);const y=m(t,["supervisedTuningSpec"]);y!=null&&x(n,["supervisedTuningSpec"],y);const w=m(t,["preferenceOptimizationSpec"]);w!=null&&x(n,["preferenceOptimizationSpec"],w);const b=m(t,["tuningDataStats"]);b!=null&&x(n,["tuningDataStats"],b);const _=m(t,["encryptionSpec"]);_!=null&&x(n,["encryptionSpec"],_);const A=m(t,["partnerModelTuningSpec"]);A!=null&&x(n,["partnerModelTuningSpec"],A);const N=m(t,["customBaseModel"]);N!=null&&x(n,["customBaseModel"],N);const E=m(t,["experiment"]);E!=null&&x(n,["experiment"],E);const P=m(t,["labels"]);P!=null&&x(n,["labels"],P);const I=m(t,["outputUri"]);I!=null&&x(n,["outputUri"],I);const O=m(t,["pipelineJob"]);O!=null&&x(n,["pipelineJob"],O);const R=m(t,["serviceAccount"]);R!=null&&x(n,["serviceAccount"],R);const D=m(t,["tunedModelDisplayName"]);D!=null&&x(n,["tunedModelDisplayName"],D);const C=m(t,["veoTuningSpec"]);return C!=null&&x(n,["veoTuningSpec"],C),n}function Q_e(t,e){const n={},r=m(t,["sdkHttpResponse"]);r!=null&&x(n,["sdkHttpResponse"],r);const i=m(t,["name"]);i!=null&&x(n,["name"],i);const a=m(t,["metadata"]);a!=null&&x(n,["metadata"],a);const o=m(t,["done"]);o!=null&&x(n,["done"],o);const s=m(t,["error"]);return s!=null&&x(n,["error"],s),n}function bI(t,e){const n={},r=m(t,["gcsUri"]);r!=null&&x(n,["validationDatasetUri"],r);const i=m(t,["vertexDatasetResource"]);return i!=null&&x(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e5e extends Os{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new gc(As.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let o="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?o=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(o=a.name.split("/operations/")[0]),{name:o,state:a5.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=V_e(e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>f5(c))}else{const u=q_e(e);return s=He("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>D$(c))}}async listInternal(e){var n,r,i,a;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=W_e(e);return s=He("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=J_e(c),p=new Q4;return Object.assign(p,d),p})}else{const u=G_e(e);return s=He("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=K_e(c),p=new Q4;return Object.assign(p,d),p})}}async cancel(e){var n,r,i,a;let o="",s={};if(this.apiClient.isVertexAI()){const l=D_e(e);o=He("{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=M_e(e);o=He("{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const s=B_e(e,e);return a=He("tuningJobs",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>f5(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=U_e(e);return a=He("tunedModels",s._url),o=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>Q_e(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t5e{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const n5e=1024*1024*8,r5e=3,i5e=1e3,a5e=2,I0="x-goog-upload-status";async function o5e(t,e,n){var r;const i=await $$(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[I0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function s5e(t,e,n){var r;const i=await $$(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[I0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=f$(a),s=new HA;return Object.assign(s,o),s}async function $$(t,e,n){var r,i;let a=0,o=0,s=new o5(new Response),l="upload";for(a=t.size;o<a;){const u=Math.min(n5e,a-o),c=t.slice(o,o+u);o+u>=a&&(l+=", finalize");let d=0,p=i5e;for(;d<r5e&&(s=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((r=s==null?void 0:s.headers)===null||r===void 0)&&r[I0]));)d++,await u5e(p),p=p*a5e;if(o+=u,((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[I0])!=="active")break;if(a<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function l5e(t){return{size:t.size,type:t.type}}function u5e(t){return new Promise(e=>setTimeout(e,t))}class c5e{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await o5e(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await s5e(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await l5e(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d5e{create(e,n,r){return new f5e(e,n,r)}}class f5e{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wI="x-goog-api-key";class h5e{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(wI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(wI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p5e="gl-node/";class m5e{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=a1e(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new h5e(this.apiKey);this.apiClient=new I2e({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:p5e+"web",uploader:new c5e,downloader:new t5e}),this.models=new Y2e(this.apiClient),this.live=new z2e(this.apiClient,i,new d5e),this.batches=new kxe(this.apiClient),this.chats=new lbe(this.models,this.apiClient),this.caches=new abe(this.apiClient),this.files=new vbe(this.apiClient),this.operations=new X2e(this.apiClient),this.authTokens=new f_e(this.apiClient),this.tunings=new e5e(this.apiClient),this.fileSearchStores=new L_e(this.apiClient)}}const _I="AIzaSyCkJEDZIXsL6sLcAnAi2EE-WbzOIX6gKWY";function g5e(t){return t==="male"?"Zephyr":"Puck"}function y5e(t){const[e,...n]=t.split(";").map(o=>o.trim()),[r,i]=e.split("/"),a={numChannels:1,sampleRate:24e3,bitsPerSample:16};if(i&&i.startsWith("L")){const o=parseInt(i.slice(1),10);isNaN(o)||(a.bitsPerSample=o)}for(const o of n){const[s,l]=o.split("=").map(u=>u.trim());s==="rate"&&(a.sampleRate=parseInt(l,10))}return a}function v5e(t,e){const{numChannels:n,sampleRate:r,bitsPerSample:i}=e,a=r*n*i/8,o=n*i/8,s=new ArrayBuffer(44),l=new DataView(s);return l.setUint32(0,1179011410,!0),l.setUint32(4,36+t,!0),l.setUint32(8,1163280727,!0),l.setUint32(12,544501094,!0),l.setUint32(16,16,!0),l.setUint16(20,1,!0),l.setUint16(22,n,!0),l.setUint32(24,r,!0),l.setUint32(28,a,!0),l.setUint16(32,o,!0),l.setUint16(34,i,!0),l.setUint32(36,1635017060,!0),l.setUint32(40,t,!0),new Uint8Array(s)}function x5e(t,e){const n=y5e(e),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);const a=v5e(i.length,n),o=new Uint8Array(a.length+i.length);return o.set(a,0),o.set(i,a.length),o}async function b5e(t){var e,n,r,i,a,o,s,l,u;try{const c=new m5e({apiKey:_I}),d=g5e(t.gender),p={temperature:1,responseModalities:["audio"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:d}}}},h="gemini-2.5-pro-preview-tts",v=[{role:"user",parts:[{text:t.text}]}],y=await c.models.generateContentStream({model:h,config:p,contents:v}),w=[];let b="audio/L16;rate=24000";for await(const D of y)if(!(!D.candidates||!((n=(e=D.candidates[0])==null?void 0:e.content)!=null&&n.parts)))if((o=(a=(i=(r=D.candidates[0])==null?void 0:r.content)==null?void 0:i.parts)==null?void 0:a[0])!=null&&o.inlineData){const C=D.candidates[0].content.parts[0].inlineData;b=C.mimeType||b;const L=C.data||"",F=atob(L),$=new Uint8Array(F.length);for(let V=0;V<F.length;V++)$[V]=F.charCodeAt(V);w.push($)}else D.text&&console.debug("TTS: Received text chunk:",D.text);if(w.length===0)return console.debug("TTS: No audio chunks received from Gemini TTS"),null;const _=w.reduce((D,C)=>D+C.length,0),A=new Uint8Array(_);let N=0;for(const D of w)A.set(D,N),N+=D.length;const E=Array.from(A).map(D=>String.fromCharCode(D)).join(""),P=btoa(E),I=x5e(P,b);return await new AudioContext().decodeAudioData(I.buffer)}catch(c){return(c==null?void 0:c.code)===429||(c==null?void 0:c.status)===429||(s=c==null?void 0:c.message)!=null&&s.includes("429")||(l=c==null?void 0:c.message)!=null&&l.includes("quota")||(u=c==null?void 0:c.message)!=null&&u.includes("RESOURCE_EXHAUSTED")?(console.debug("TTS: Gemini TTS quota/rate limit exceeded, falling back to Web Speech API"),null):(console.debug("TTS: Error synthesizing speech with Gemini TTS (will use fallback):",(c==null?void 0:c.message)||c),null)}}async function w5e(t){try{const e=new AudioContext,n=e.createBufferSource();return n.buffer=t,n.connect(e.destination),n.start(0),new Promise(r=>{n.onended=()=>r()})}catch(e){console.error("TTS: Error playing audio:",e)}}async function SI(t,e="other",n="en-US"){try{const r=await b5e({text:t,gender:e,languageCode:n});if(r){await w5e(r);return}if("speechSynthesis"in window){const a=await new Promise(l=>{const u=speechSynthesis.getVoices();u.length>0?l(u):(speechSynthesis.onvoiceschanged=()=>{l(speechSynthesis.getVoices())},setTimeout(()=>l(speechSynthesis.getVoices()),1e3))}),o=new SpeechSynthesisUtterance(t),s=a.find(l=>{const u=l.name.toLowerCase();return e==="male"&&(u.includes("male")||u.includes("david")||u.includes("daniel")||u.includes("thomas")||u.includes("alex"))||e==="female"&&(u.includes("female")||u.includes("samantha")||u.includes("karen")||u.includes("zira")||u.includes("susan")||u.includes("victoria"))});s&&(o.voice=s),o.lang=n,o.rate=.9,o.pitch=e==="male"?.9:e==="female"?1.1:1,o.volume=1,speechSynthesis.speak(o)}}catch(r){console.debug("TTS: Error speaking text (non-critical):",r)}}const _5e="AIzaSyCkJEDZIXsL6sLcAnAi2EE-WbzOIX6gKWY",S5e="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";function A5e({user:t}){var ee,Ve,qe,Ge;const{assignmentId:e}=Q0(),n=ro(),r=Ts(),[i,a]=X.useState(null),[o,s]=X.useState(null),[l,u]=X.useState([]),[c,d]=X.useState(""),[p,h]=X.useState(!0),[v,y]=X.useState(!1),[w,b]=X.useState(0),[_,A]=X.useState(null),[N,E]=X.useState(!1),[P,I]=X.useState("chat"),[O,R]=X.useState(0),[D,C]=X.useState([]),[L,F]=X.useState([]),[$,V]=X.useState(""),[Y,W]=X.useState(!1),U=10;X.useEffect(()=>{e&&(Q(),le())},[e]);const Q=async()=>{try{const{data:_e,error:Re}=await ke.from("assignments").select("*").eq("id",e).single();if(Re)throw Re;a(_e);const{data:Ae,error:De}=await ke.from("case_snapshots").select("*").eq("id",_e.snapshot_id).single();if(De)throw De;s(Ae);const{data:Me}=await ke.from("simulation_runs").select("*").eq("assignment_id",e).eq("student_id",t.id).is("submitted_at",null).order("created_at",{ascending:!1}).limit(1);let st;if(Me&&Me.length>0){if(st=Me[0],A(st.id),st.transcript){const Fe=st.transcript;Fe.messages&&u(Fe.messages.map(We=>({...We,timestamp:typeof We.timestamp=="string"?new Date(We.timestamp):We.timestamp}))),R(Fe.hintsUsed||0),C(Fe.labOrders||[]),F(Fe.labResults||[]),V(Fe.diagnosis||""),W(Fe.vitalsEnabled||!1)}}else{const{data:Fe,error:We}=await ke.from("simulation_runs").insert({assignment_id:e,student_id:t.id,started_at:new Date().toISOString(),transcript:{messages:[],hintsUsed:0,labOrders:[],labResults:[],diagnosis:"",vitalsEnabled:!1}}).select().single();if(We)throw We;st=Fe,A(Fe.id)}}catch(_e){console.error("Error loading assignment:",_e),r.error("Failed to load assignment")}finally{h(!1)}},le=()=>{const _e=setInterval(()=>{b(Re=>{var De;const Ae=Re+1;if((De=o==null?void 0:o.clinical_case)!=null&&De.durationMinutes){const Me=o.clinical_case.durationMinutes*60;Ae>=Me*.8&&!N&&E(!0)}return Ae})},1e3);return()=>clearInterval(_e)},oe=_e=>{const Re=Math.floor(_e/60),Ae=_e%60;return`${Re}:${Ae.toString().padStart(2,"0")}`},j=async()=>{if(!_)return;const _e={messages:l.map(Re=>({...Re,timestamp:Re.timestamp instanceof Date?Re.timestamp.toISOString():Re.timestamp})),hintsUsed:O,labOrders:D,labResults:L,diagnosis:$,vitalsEnabled:Y};await ke.from("simulation_runs").update({transcript:_e}).eq("id",_)},z=(_e,Re)=>{var vt,nt;if(!(o!=null&&o.clinical_case))return"";const Ae=o.clinical_case,De=((vt=Ae.patientProfile)==null?void 0:vt.name)||"Patient",Me=Ae.historyOfPresentIllness||"",st=((nt=Ae.patientProfile)==null?void 0:nt.prakriti)||"Sama",Fe=Ae.doshaAnalysis||{},We=Re.slice(-5).map(Je=>`${Je.role==="user"?"Clinician":"Patient"}: ${Je.content}`).join(`
`);return`You are ${De}, a virtual patient in an Ayurvedic medical simulation. You are speaking with a clinician who is examining you.

IMPORTANT: You are the PATIENT. The user asking questions is the CLINICIAN/DOCTOR. Do not switch roles.

Patient Context:
- History of Present Illness: ${Me}
- Prakriti: ${st}
- Dosha Analysis: Vata ${Fe.vata||33}%, Pitta ${Fe.pitta||33}%, Kapha ${Fe.kapha||34}%

Recent Conversation:
${We}

Clinician: ${_e}

Respond as the patient would, staying in character. Be natural, concise (1-2 sentences), and consistent with the case. Do not reveal diagnosis or treatment unless asked directly about symptoms. Keep responses under 100 words.`},K=_e=>{if(!(o!=null&&o.clinical_case))return null;const Re=o.clinical_case,Ae=_e.toLowerCase();if(Ae.includes("physical exam")||Ae.includes("vitals")||Ae.includes("examination")){const De=Re.physicalExam;if(!De)return"Physical examination information is not available. Please perform the examination yourself.";let Me=`Based on the physical examination:
`;return De.vitals&&(Me+="Vitals: ",De.vitals.bp&&(Me+=`BP ${De.vitals.bp}, `),De.vitals.hr&&(Me+=`HR ${De.vitals.hr}, `),De.vitals.rr&&(Me+=`RR ${De.vitals.rr}, `),De.vitals.temp&&(Me+=`Temp ${De.vitals.temp}, `),De.vitals.spo2&&(Me+=`SpO2 ${De.vitals.spo2}. `),Me+=`
`),De.generalExam&&(Me+=`General Examination: ${De.generalExam}
`),De.systemicExam&&(Me+=`Systemic Examination: ${De.systemicExam}
`),Me.trim()||"Physical examination findings are being documented."}if(Ae.includes("lab")||Ae.includes("test result")||Ae.includes("investigation")){const De=Re.labResults||{};for(const[Me,st]of Object.entries(De))if(Ae.includes(Me.toLowerCase())||Me.toLowerCase().includes(Ae))return`${Me}: ${st}`;return Object.keys(De).length>0?`Lab results are available. Please check the Labs tab to view specific test results. Available tests: ${Object.keys(De).join(", ")}`:"No lab results are available yet. Please order tests from the Labs tab."}return null},re=async()=>{var De,Me,st,Fe,We,vt,nt,Je;if(!c.trim()||!_||!o)return;const _e={role:"user",content:c,timestamp:new Date},Re=[...l,_e];u(Re);const Ae=c;d(""),y(!0);try{const rt=K(Ae);if(rt){const xt={role:"assistant",content:rt,timestamp:new Date},mt=[...Re,xt];u(mt),await j(),y(!1);return}if(o!=null&&o.id)try{const{data:xt,error:mt}=await ke.from("faq_cache").select("faq_data").eq("snapshot_id",o.id).maybeSingle();if(mt&&mt.code!=="PGRST116"&&console.debug("FAQ cache error:",mt),xt!=null&&xt.faq_data){const vn=xt.faq_data,Mn=Ae.toLowerCase().trim();for(const[on,_t]of Object.entries(vn)){const zt=on.toLowerCase();if(Mn.includes(zt)||zt.includes(Mn)||Mn.split(/\s+/).filter(na=>na.length>3&&zt.includes(na)).length>=2){const na={role:"assistant",content:_t,timestamp:new Date},Tr=[...Re,na];u(Tr),await j();const ra=((Me=(De=o==null?void 0:o.clinical_case)==null?void 0:De.patientProfile)==null?void 0:Me.gender)||"other";SI(_t,ra==="male"?"male":ra==="female"?"female":"other").catch(ia=>{console.debug("TTS error (non-critical):",ia)}),y(!1);return}}}}catch(xt){console.debug("FAQ cache check failed, using Gemini API:",xt)}const dt=z(Ae,l);if(!dt)throw new Error("Unable to build patient context. Please refresh the page.");const Qt=await fetch(S5e,{method:"POST",headers:{"Content-Type":"application/json","X-goog-api-key":_5e},body:JSON.stringify({contents:[{parts:[{text:dt}]}],generationConfig:{temperature:.8,topK:40,topP:.95,maxOutputTokens:1024}})});if(!Qt.ok){const xt=await Qt.text();let mt=`Gemini API error (${Qt.status})`;try{const vn=JSON.parse(xt);(st=vn.error)!=null&&st.message?mt+=": "+vn.error.message:mt+=": "+xt}catch{mt+=": "+xt}throw new Error(mt)}const Bt=await Qt.json();if(!Bt.candidates||Bt.candidates.length===0)throw new Error("No response from Gemini API. Please check your API key and try again.");const it=((vt=(We=(Fe=Bt.candidates[0])==null?void 0:Fe.content)==null?void 0:We.parts[0])==null?void 0:vt.text)||"I'm sorry, I didn't understand that.",Ct={role:"assistant",content:it,timestamp:new Date},an=[...Re,Ct];u(an),await j();const gt=((Je=(nt=o==null?void 0:o.clinical_case)==null?void 0:nt.patientProfile)==null?void 0:Je.gender)||"other";SI(it,gt==="male"?"male":gt==="female"?"female":"other").catch(xt=>{console.debug("TTS error (non-critical):",xt)})}catch(rt){console.error("Error sending message:",rt),r.error("Failed to send message: "+rt.message)}finally{y(!1)}},ae=async()=>{if(!(O>=U||!_||!o)){y(!0);try{const _e=["Consider asking about the onset and progression of symptoms.","Think about the patient's dosha imbalance - what symptoms suggest this?","Review the physical examination findings carefully.","Consider what laboratory tests would be most helpful for this presentation.","Think about the differential diagnoses based on the chief complaint.","Consider the patient's age, gender, and prakriti in your assessment.","Review the history of present illness for key diagnostic clues.","Consider what additional history might be relevant.","Think about the most likely diagnosis given the symptoms.","Consider what treatment approach would be appropriate."],Ae={role:"assistant",content:_e[Math.floor(Math.random()*_e.length)],timestamp:new Date};u([...l,Ae]),R(O+1),await j()}catch(_e){console.error("Error requesting hint:",_e),r.error("Failed to get hint: "+_e.message)}finally{y(!1)}}},fe=(_e,Re)=>{var Fe;const Ae={testName:_e,category:Re,orderedAt:new Date().toISOString()},De=[...D,Ae];C(De);const Me={testName:_e,result:d$(_e,o==null?void 0:o.clinical_case,(Fe=o==null?void 0:o.clinical_case)==null?void 0:Fe.labResults),category:Re},st=[...L,Me];F(st),j()},xe=_e=>{V(_e),j()},ue=async()=>{var _e,Re,Ae,De,Me,st,Fe;if(_)try{await j();let We;try{We=await ke.functions.invoke("score_simulation",{body:{runId:_}})}catch(rt){throw console.error("Function invoke error (catch block):",rt),(_e=rt.message)!=null&&_e.includes("Failed to fetch")||(Re=rt.message)!=null&&Re.includes("NetworkError")||(Ae=rt.message)!=null&&Ae.includes("Failed to send")||!rt.message?new Error("Edge Function not available. Please ensure the score_simulation function is deployed in Supabase. Check the Supabase Dashboard  Edge Functions."):new Error(`Failed to call Edge Function: ${rt.message||"Unknown error"}`)}const{data:vt,error:nt}=We||{};if(nt)throw console.error("Scoring function error details:",{error:nt,message:nt.message,context:nt.context,status:nt.status}),(De=nt.message)!=null&&De.includes("Failed to send")||(Me=nt.message)!=null&&Me.includes("fetch")||(st=nt.message)!=null&&st.includes("NetworkError")||(Fe=nt.message)!=null&&Fe.includes("Failed to fetch")?new Error("Edge Function not available. Please ensure the score_simulation function is deployed in Supabase. Check the Supabase Dashboard  Edge Functions."):new Error(nt.message||"Failed to score simulation");if(!vt||!vt.score)throw console.error("Invalid response from scoring function:",vt),new Error("Invalid response from scoring function");const{error:Je}=await ke.from("simulation_runs").update({submitted_at:new Date().toISOString(),score:vt.score}).eq("id",_);if(Je)throw console.error("Update error:",Je),new Error("Failed to update simulation run");n(`/debrief/${_}`)}catch(We){console.error("Error submitting:",We);const vt=We.message||"Please try again.";r.error(`Error submitting simulation: ${vt}. If this persists, the Edge Function may not be deployed. Please check Supabase Dashboard  Edge Functions.`)}};if(p)return f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});const ye=((Ve=(ee=o==null?void 0:o.clinical_case)==null?void 0:ee.patientProfile)==null?void 0:Ve.name)||"Patient",me=(((qe=o==null?void 0:o.clinical_case)==null?void 0:qe.durationMinutes)||15)*60,je=w/me*100,se=w>=me;return f.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-gray-50 to-gray-100 pb-20 md:pb-4",children:[f.jsxs("div",{className:"bg-white border-b-2 border-gray-300 shadow-sm p-4 md:p-6",children:[f.jsx("div",{className:"flex items-center justify-between mb-3",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:"https://raw.githubusercontent.com/akashmanjunath2505/public/main/KAYA.png",alt:"Kaya Logo",className:"h-8 w-auto object-contain hidden md:block"}),f.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center shadow-md",children:f.jsx(To,{className:"w-6 h-6 text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:ye}),f.jsx("p",{className:"text-sm md:text-base text-gray-600",children:((Ge=o==null?void 0:o.clinical_case)==null?void 0:Ge.title)||"Clinical Case"})]})]})}),f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 mt-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(uc,{className:`w-5 h-5 ${N?"text-red-600":"text-gray-700"}`}),f.jsxs("span",{className:`font-mono text-base md:text-lg font-semibold ${N?"text-red-600":"text-gray-900"}`,children:[oe(w)," / ",oe(me)]}),N&&!se&&f.jsx("span",{className:"text-xs md:text-sm text-red-600 font-medium bg-red-50 px-2 py-1 rounded",children:"Time running out!"})]}),se&&f.jsxs("span",{className:"text-sm text-red-700 font-semibold flex items-center gap-2 bg-red-50 px-3 py-1.5 rounded-lg",children:[f.jsx(n1,{className:"w-5 h-5"}),"Time's up!"]})]}),f.jsx("div",{className:"mt-3 w-full bg-gray-200 rounded-full h-3 shadow-inner",children:f.jsx("div",{className:`h-3 rounded-full transition-all shadow-sm ${je>=100?"bg-red-600":je>=80?"bg-yellow-500":"bg-primary-600"}`,style:{width:`${Math.min(je,100)}%`}})})]}),f.jsx(X0e,{activeTab:P,onTabChange:I}),f.jsxs("div",{className:"flex-1 overflow-hidden",children:[P==="chat"&&f.jsx(Z0e,{messages:l,input:c,setInput:d,sending:v,onSendMessage:re,onRequestHint:ae,hintsRemaining:U-O}),P==="exam"&&f.jsx(Q0e,{caseData:o==null?void 0:o.clinical_case,vitalsEnabled:Y,onToggleVitals:async()=>{const _e=!Y;if(W(_e),_){const Re={messages:l.map(Ae=>({...Ae,timestamp:Ae.timestamp instanceof Date?Ae.timestamp.toISOString():Ae.timestamp})),hintsUsed:O,labOrders:D,labResults:L,diagnosis:$,vitalsEnabled:_e};await ke.from("simulation_runs").update({transcript:Re}).eq("id",_)}}}),P==="labs"&&f.jsx(e1e,{labOrders:D,labResults:L,onOrderTest:fe,caseData:o==null?void 0:o.clinical_case}),P==="diagnosis"&&f.jsx(t1e,{diagnosis:$,onUpdate:xe})]}),f.jsxs("div",{className:"bg-white border-t border-gray-200 p-4",children:[f.jsxs("button",{onClick:ue,disabled:!_,className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[f.jsx(No,{className:"w-4 h-4"}),"Submit for Scoring"]}),se&&f.jsx("p",{className:"text-xs text-red-600 mt-2 text-center",children:"Your time is up. You can still submit your responses."})]}),f.jsx(Vr,{role:"student"}),f.jsx(kl,{toasts:r.toasts,onClose:r.removeToast})]})}function E5e({activeTab:t,onTabChange:e}){const n=[{id:"feedback",label:"Feedback",icon:Qi},{id:"review",label:"Review",icon:a1},{id:"questions",label:"Questions",icon:_z}];return f.jsx("div",{className:"bg-white border-b border-gray-200",children:f.jsx("div",{className:"flex overflow-x-auto",children:n.map(r=>{const i=r.icon,a=t===r.id;return f.jsxs("button",{onClick:()=>e(r.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${a?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[f.jsx(i,{className:"w-4 h-4"}),r.label]},r.id)})})})}function N5e({accuracy:t,timeTaken:e,currentStreak:n}){return f.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[f.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Accuracy"}),f.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[t,"%"]})]}),f.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[f.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Time Taken"}),f.jsx("div",{className:"text-3xl font-bold text-blue-600",children:e})]}),f.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[f.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Current Streak"}),f.jsxs("div",{className:"text-3xl font-bold text-yellow-600 flex items-center gap-1",children:[n,f.jsx("span",{className:"text-2xl",children:""})]})]})]})}function T5e({reasoning:t}){const[e,n]=X.useState(!0);return f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("button",{onClick:()=>n(!e),className:"flex items-center justify-between w-full mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"STEPWISE REASONING"}),f.jsx(i1,{className:`w-5 h-5 text-gray-500 transition-transform ${e?"":"rotate-180"}`})]}),e&&f.jsx("div",{className:"prose max-w-none",children:f.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:t})})]})}function P5e({potentialDiagnoses:t,studentDiagnosis:e,correctDiagnosis:n}){const[r,i]=X.useState(!0);return f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("button",{onClick:()=>i(!r),className:"flex items-center justify-between w-full mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"DIFFERENTIALS REVIEW"}),f.jsx(i1,{className:`w-5 h-5 text-gray-500 transition-transform ${r?"":"rotate-180"}`})]}),r&&f.jsx("div",{className:"space-y-3",children:t.map((a,o)=>{const s=a.dx===n,l=a.dx===e;return f.jsx("div",{className:`p-4 rounded-lg border-2 ${s?"bg-green-50 border-green-200":l?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[s?f.jsx(No,{className:"w-5 h-5 text-green-600"}):l?f.jsx(qu,{className:"w-5 h-5 text-red-600"}):null,f.jsx("span",{className:"font-medium text-gray-900",children:a.dx})]}),l&&!s&&f.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Your Pick"})]})},o)})})]})}function C5e({pearls:t}){const[e,n]=X.useState(!0);return!t||t.length===0?null:f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("button",{onClick:()=>n(!e),className:"flex items-center justify-between w-full mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"LEARNING PEARLS"}),f.jsx(i1,{className:`w-5 h-5 text-gray-500 transition-transform ${e?"":"rotate-180"}`})]}),e&&f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((r,i)=>f.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(gL,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),f.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:r})]})},i))})]})}function k5e({references:t}){const[e,n]=X.useState(!0);return!t||t.length===0?null:f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("button",{onClick:()=>n(!e),className:"flex items-center justify-between w-full mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"FURTHER READING"}),f.jsx(i1,{className:`w-5 h-5 text-gray-500 transition-transform ${e?"":"rotate-180"}`})]}),e&&f.jsx("div",{className:"space-y-3",children:t.map((r,i)=>f.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(r1,{className:"w-5 h-5 text-primary-600 flex-shrink-0 mt-0.5"}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-gray-900",children:r.title}),f.jsx("div",{className:"text-sm text-gray-600 mt-1",children:r.reference})]})]})},i))})]})}const I5e="modulepreload",O5e=function(t){return"/"+t},AI={},Kb=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=O5e(l),l in AI)return;AI[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":I5e,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((p,h)=>{d.addEventListener("load",p),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function un(t){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(t)}var no=Uint8Array,Ki=Uint16Array,XA=Int32Array,ZA=new no([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),QA=new no([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),EI=new no([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F$=function(t,e){for(var n=new Ki(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new XA(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},U$=F$(ZA,2),j5e=U$.b,h5=U$.r;j5e[28]=258,h5[258]=28;var R5e=F$(QA,0),NI=R5e.r,p5=new Ki(32768);for(var In=0;In<32768;++In){var el=(In&43690)>>1|(In&21845)<<1;el=(el&52428)>>2|(el&13107)<<2,el=(el&61680)>>4|(el&3855)<<4,p5[In]=((el&65280)>>8|(el&255)<<8)>>1}var gp=function(t,e,n){for(var r=t.length,i=0,a=new Ki(e);i<r;++i)t[i]&&++a[t[i]-1];var o=new Ki(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(n){s=new Ki(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],d=o[t[i]-1]++<<c,p=d|(1<<c)-1;d<=p;++d)s[p5[d]>>l]=u}else for(s=new Ki(r),i=0;i<r;++i)t[i]&&(s[i]=p5[o[t[i]-1]++]>>15-t[i]);return s},ic=new no(288);for(var In=0;In<144;++In)ic[In]=8;for(var In=144;In<256;++In)ic[In]=9;for(var In=256;In<280;++In)ic[In]=7;for(var In=280;In<288;++In)ic[In]=8;var O0=new no(32);for(var In=0;In<32;++In)O0[In]=5;var L5e=gp(ic,9,0),M5e=gp(O0,5,0),B$=function(t){return(t+7)/8|0},D5e=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new no(t.subarray(e,n))},Qo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Bh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Jb=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:V$,l:0};if(i==1){var o=new no(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(E,P){return E.f-P.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=i-1;)s=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};for(var p=a[0].s,r=1;r<i;++r)a[r].s>p&&(p=a[r].s);var h=new Ki(p+1),v=m5(n[c-1],h,0);if(v>e){var r=0,y=0,w=v-e,b=1<<w;for(a.sort(function(P,I){return h[I.s]-h[P.s]||P.f-I.f});r<i;++r){var _=a[r].s;if(h[_]>e)y+=b-(1<<v-h[_]),h[_]=e;else break}for(y>>=w;y>0;){var A=a[r].s;h[A]<e?y-=1<<e-h[A]++-1:++r}for(;r>=0&&y;--r){var N=a[r].s;h[N]==e&&(--h[N],++y)}v=e}return{t:new no(h),l:v}},m5=function(t,e,n){return t.s==-1?Math.max(m5(t.l,e,n+1),m5(t.r,e,n+1)):e[t.s]=n},TI=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ki(++e),r=0,i=t[0],a=1,o=function(l){n[r++]=l},s=1;s<=e;++s)if(t[s]==i&&s!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[s]}return{c:n.subarray(0,r),n:e}},qh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},q$=function(t,e,n){var r=n.length,i=B$(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<r;++a)t[i+a+4]=n[a];return(i+4+r)*8},PI=function(t,e,n,r,i,a,o,s,l,u,c){Qo(e,c++,n),++i[256];for(var d=Jb(i,15),p=d.t,h=d.l,v=Jb(a,15),y=v.t,w=v.l,b=TI(p),_=b.c,A=b.n,N=TI(y),E=N.c,P=N.n,I=new Ki(19),O=0;O<_.length;++O)++I[_[O]&31];for(var O=0;O<E.length;++O)++I[E[O]&31];for(var R=Jb(I,7),D=R.t,C=R.l,L=19;L>4&&!D[EI[L-1]];--L);var F=u+5<<3,$=qh(i,ic)+qh(a,O0)+o,V=qh(i,p)+qh(a,y)+o+14+3*L+qh(I,D)+2*I[16]+3*I[17]+7*I[18];if(l>=0&&F<=$&&F<=V)return q$(e,c,t.subarray(l,l+u));var Y,W,U,Q;if(Qo(e,c,1+(V<$)),c+=2,V<$){Y=gp(p,h,0),W=p,U=gp(y,w,0),Q=y;var le=gp(D,C,0);Qo(e,c,A-257),Qo(e,c+5,P-1),Qo(e,c+10,L-4),c+=14;for(var O=0;O<L;++O)Qo(e,c+3*O,D[EI[O]]);c+=3*L;for(var oe=[_,E],j=0;j<2;++j)for(var z=oe[j],O=0;O<z.length;++O){var K=z[O]&31;Qo(e,c,le[K]),c+=D[K],K>15&&(Qo(e,c,z[O]>>5&127),c+=z[O]>>12)}}else Y=L5e,W=ic,U=M5e,Q=O0;for(var O=0;O<s;++O){var re=r[O];if(re>255){var K=re>>18&31;Bh(e,c,Y[K+257]),c+=W[K+257],K>7&&(Qo(e,c,re>>23&31),c+=ZA[K]);var ae=re&31;Bh(e,c,U[ae]),c+=Q[ae],ae>3&&(Bh(e,c,re>>5&8191),c+=QA[ae])}else Bh(e,c,Y[re]),c+=W[re]}return Bh(e,c,Y[256]),c+W[256]},$5e=new XA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),V$=new no(0),F5e=function(t,e,n,r,i,a){var o=a.z||t.length,s=new no(r+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(r,s.length-i),u=a.l,c=(a.r||0)&7;if(e){c&&(l[0]=a.r>>3);for(var d=$5e[e-1],p=d>>13,h=d&8191,v=(1<<n)-1,y=a.p||new Ki(32768),w=a.h||new Ki(v+1),b=Math.ceil(n/3),_=2*b,A=function(se){return(t[se]^t[se+1]<<b^t[se+2]<<_)&v},N=new XA(25e3),E=new Ki(288),P=new Ki(32),I=0,O=0,R=a.i||0,D=0,C=a.w||0,L=0;R+2<o;++R){var F=A(R),$=R&32767,V=w[F];if(y[$]=V,w[F]=$,C<=R){var Y=o-R;if((I>7e3||D>24576)&&(Y>423||!u)){c=PI(t,l,0,N,E,P,O,D,L,R-L,c),D=I=O=0,L=R;for(var W=0;W<286;++W)E[W]=0;for(var W=0;W<30;++W)P[W]=0}var U=2,Q=0,le=h,oe=$-V&32767;if(Y>2&&F==A(R-oe))for(var j=Math.min(p,Y)-1,z=Math.min(32767,R),K=Math.min(258,Y);oe<=z&&--le&&$!=V;){if(t[R+U]==t[R+U-oe]){for(var re=0;re<K&&t[R+re]==t[R+re-oe];++re);if(re>U){if(U=re,Q=oe,re>j)break;for(var ae=Math.min(oe,re-2),fe=0,W=0;W<ae;++W){var xe=R-oe+W&32767,ue=y[xe],ye=xe-ue&32767;ye>fe&&(fe=ye,V=xe)}}}$=V,V=y[$],oe+=$-V&32767}if(Q){N[D++]=268435456|h5[U]<<18|NI[Q];var Se=h5[U]&31,me=NI[Q]&31;O+=ZA[Se]+QA[me],++E[257+Se],++P[me],C=R+U,++I}else N[D++]=t[R],++E[t[R]]}}for(R=Math.max(R,C);R<o;++R)N[D++]=t[R],++E[t[R]];c=PI(t,l,u,N,E,P,O,D,L,R-L,c),u||(a.r=c&7|l[c/8|0]<<3,c-=7,a.h=w,a.p=y,a.i=R,a.w=C)}else{for(var R=a.w||0;R<o+u;R+=65535){var je=R+65535;je>=o&&(l[c/8|0]=u,je=o),c=q$(l,c+1,t.subarray(R,je))}a.i=o}return D5e(s,0,r+B$(c)+i)},z$=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,a=n.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},U5e=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new no(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return F5e(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},H$=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},B5e=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=z$();i.p(e.dictionary),H$(t,2,i.d())}};function g5(t,e){e||(e={});var n=z$();n.p(t);var r=U5e(t,e,e.dictionary?6:2,4);return B5e(r,e),H$(r,r.length-4,n.d()),r}var q5e=typeof TextDecoder<"u"&&new TextDecoder,V5e=0;try{q5e.decode(V$,{stream:!0}),V5e=1}catch{}function z5e(t){if(Array.isArray(t))return t}function H5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function CI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function G5e(t,e){if(t){if(typeof t=="string")return CI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CI(t,e):void 0}}function W5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kI(t,e){return z5e(t)||H5e(t,e)||G5e(t,e)||W5e()}function II(t,e="utf8"){return new TextDecoder(e).decode(t)}const K5e=new TextEncoder;function J5e(t){return K5e.encode(t)}const Y5e=1024*8,X5e=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),Yb={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class eE{constructor(e=Y5e,n={}){tn(this,"buffer");tn(this,"byteLength");tn(this,"byteOffset");tn(this,"length");tn(this,"offset");tn(this,"lastWrittenByte");tn(this,"littleEndian");tn(this,"_data");tn(this,"_mark");tn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,a=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof eE)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=Yb[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===X5e&&n!=="uint8"&&n!=="int8"){const s=new Uint8Array(this.buffer.slice(i,i+r));s.reverse();const l=new Yb[n](s.buffer);return this.offset+=r,l.reverse(),l}const o=new Yb[n](a);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return II(this.readBytes(e))}decodeText(e=1,n="utf8"){return II(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(J5e(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Gf(t){let e=t.length;for(;--e>=0;)t[e]=0}const Z5e=3,Q5e=258,G$=29,eSe=256,tSe=eSe+1+G$,W$=30,nSe=512,rSe=new Array((tSe+2)*2);Gf(rSe);const iSe=new Array(W$*2);Gf(iSe);const aSe=new Array(nSe);Gf(aSe);const oSe=new Array(Q5e-Z5e+1);Gf(oSe);const sSe=new Array(G$);Gf(sSe);const lSe=new Array(W$);Gf(lSe);const uSe=(t,e,n,r)=>{let i=t&65535|0,a=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var y5=uSe;const cSe=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},dSe=new Uint32Array(cSe()),fSe=(t,e,n,r)=>{const i=dSe,a=r+n;t^=-1;for(let o=r;o<a;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var yo=fSe,v5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K$={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const hSe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var pSe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)hSe(n,r)&&(t[r]=n[r])}}return t},mSe=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,a=t.length;r<a;r++){let o=t[r];n.set(o,i),i+=o.length}return n},J$={assign:pSe,flattenChunks:mSe};let Y$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Y$=!1}const Am=new Uint8Array(256);for(let t=0;t<256;t++)Am[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Am[254]=Am[254]=1;var gSe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,a,o=t.length,s=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),a=0,i=0;a<s;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|n&63):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|n&63):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|n&63);return e};const ySe=(t,e)=>{if(e<65534&&t.subarray&&Y$)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var vSe=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){a[i++]=o;continue}let s=Am[o];if(s>4){a[i++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<n;)o=o<<6|t[r++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return ySe(a,i)},xSe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Am[t[n]]>e?n:e},x5={string2buf:gSe,buf2string:vSe,utf8border:xSe};function bSe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var wSe=bSe;const py=16209,_Se=16191;var SSe=function(e,n){let r,i,a,o,s,l,u,c,d,p,h,v,y,w,b,_,A,N,E,P,I,O,R,D;const C=e.state;r=e.next_in,R=e.input,i=r+(e.avail_in-5),a=e.next_out,D=e.output,o=a-(n-e.avail_out),s=a+(e.avail_out-257),l=C.dmax,u=C.wsize,c=C.whave,d=C.wnext,p=C.window,h=C.hold,v=C.bits,y=C.lencode,w=C.distcode,b=(1<<C.lenbits)-1,_=(1<<C.distbits)-1;e:do{v<15&&(h+=R[r++]<<v,v+=8,h+=R[r++]<<v,v+=8),A=y[h&b];t:for(;;){if(N=A>>>24,h>>>=N,v-=N,N=A>>>16&255,N===0)D[a++]=A&65535;else if(N&16){E=A&65535,N&=15,N&&(v<N&&(h+=R[r++]<<v,v+=8),E+=h&(1<<N)-1,h>>>=N,v-=N),v<15&&(h+=R[r++]<<v,v+=8,h+=R[r++]<<v,v+=8),A=w[h&_];n:for(;;){if(N=A>>>24,h>>>=N,v-=N,N=A>>>16&255,N&16){if(P=A&65535,N&=15,v<N&&(h+=R[r++]<<v,v+=8,v<N&&(h+=R[r++]<<v,v+=8)),P+=h&(1<<N)-1,P>l){e.msg="invalid distance too far back",C.mode=py;break e}if(h>>>=N,v-=N,N=a-o,P>N){if(N=P-N,N>c&&C.sane){e.msg="invalid distance too far back",C.mode=py;break e}if(I=0,O=p,d===0){if(I+=u-N,N<E){E-=N;do D[a++]=p[I++];while(--N);I=a-P,O=D}}else if(d<N){if(I+=u+d-N,N-=d,N<E){E-=N;do D[a++]=p[I++];while(--N);if(I=0,d<E){N=d,E-=N;do D[a++]=p[I++];while(--N);I=a-P,O=D}}}else if(I+=d-N,N<E){E-=N;do D[a++]=p[I++];while(--N);I=a-P,O=D}for(;E>2;)D[a++]=O[I++],D[a++]=O[I++],D[a++]=O[I++],E-=3;E&&(D[a++]=O[I++],E>1&&(D[a++]=O[I++]))}else{I=a-P;do D[a++]=D[I++],D[a++]=D[I++],D[a++]=D[I++],E-=3;while(E>2);E&&(D[a++]=D[I++],E>1&&(D[a++]=D[I++]))}}else if(N&64){e.msg="invalid distance code",C.mode=py;break e}else{A=w[(A&65535)+(h&(1<<N)-1)];continue n}break}}else if(N&64)if(N&32){C.mode=_Se;break e}else{e.msg="invalid literal/length code",C.mode=py;break e}else{A=y[(A&65535)+(h&(1<<N)-1)];continue t}break}}while(r<i&&a<s);E=v>>3,r-=E,v-=E<<3,h&=(1<<v)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<s?257+(s-a):257-(a-s),C.hold=h,C.bits=v};const qc=15,OI=852,jI=592,RI=0,Xb=1,LI=2,ASe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ESe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),NSe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),TSe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),PSe=(t,e,n,r,i,a,o,s)=>{const l=s.bits;let u=0,c=0,d=0,p=0,h=0,v=0,y=0,w=0,b=0,_=0,A,N,E,P,I,O=null,R;const D=new Uint16Array(qc+1),C=new Uint16Array(qc+1);let L=null,F,$,V;for(u=0;u<=qc;u++)D[u]=0;for(c=0;c<r;c++)D[e[n+c]]++;for(h=l,p=qc;p>=1&&D[p]===0;p--);if(h>p&&(h=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<p&&D[d]===0;d++);for(h<d&&(h=d),w=1,u=1;u<=qc;u++)if(w<<=1,w-=D[u],w<0)return-1;if(w>0&&(t===RI||p!==1))return-1;for(C[1]=0,u=1;u<qc;u++)C[u+1]=C[u]+D[u];for(c=0;c<r;c++)e[n+c]!==0&&(o[C[e[n+c]]++]=c);if(t===RI?(O=L=o,R=20):t===Xb?(O=ASe,L=ESe,R=257):(O=NSe,L=TSe,R=0),_=0,c=0,u=d,I=a,v=h,y=0,E=-1,b=1<<h,P=b-1,t===Xb&&b>OI||t===LI&&b>jI)return 1;for(;;){F=u-y,o[c]+1<R?($=0,V=o[c]):o[c]>=R?($=L[o[c]-R],V=O[o[c]-R]):($=96,V=0),A=1<<u-y,N=1<<v,d=N;do N-=A,i[I+(_>>y)+N]=F<<24|$<<16|V|0;while(N!==0);for(A=1<<u-1;_&A;)A>>=1;if(A!==0?(_&=A-1,_+=A):_=0,c++,--D[u]===0){if(u===p)break;u=e[n+o[c]]}if(u>h&&(_&P)!==E){for(y===0&&(y=h),I+=d,v=u-y,w=1<<v;v+y<p&&(w-=D[v+y],!(w<=0));)v++,w<<=1;if(b+=1<<v,t===Xb&&b>OI||t===LI&&b>jI)return 1;E=_&P,i[E]=h<<24|v<<16|I-a|0}}return _!==0&&(i[I+_]=u-y<<24|64<<16|0),s.bits=h,0};var yp=PSe;const CSe=0,X$=1,Z$=2,{Z_FINISH:MI,Z_BLOCK:kSe,Z_TREES:my,Z_OK:ac,Z_STREAM_END:ISe,Z_NEED_DICT:OSe,Z_STREAM_ERROR:Pa,Z_DATA_ERROR:Q$,Z_MEM_ERROR:e7,Z_BUF_ERROR:jSe,Z_DEFLATED:DI}=K$,nx=16180,$I=16181,FI=16182,UI=16183,BI=16184,qI=16185,VI=16186,zI=16187,HI=16188,GI=16189,j0=16190,es=16191,Zb=16192,WI=16193,Qb=16194,KI=16195,JI=16196,YI=16197,XI=16198,gy=16199,yy=16200,ZI=16201,QI=16202,eO=16203,tO=16204,nO=16205,ew=16206,rO=16207,iO=16208,jn=16209,t7=16210,n7=16211,RSe=852,LSe=592,MSe=15,DSe=MSe,aO=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function $Se(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const yc=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<nx||e.mode>n7?1:0},r7=t=>{if(yc(t))return Pa;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=nx,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(RSe),e.distcode=e.distdyn=new Int32Array(LSe),e.sane=1,e.back=-1,ac},i7=t=>{if(yc(t))return Pa;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,r7(t)},a7=(t,e)=>{let n;if(yc(t))return Pa;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Pa:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,i7(t))},o7=(t,e)=>{if(!t)return Pa;const n=new $Se;t.state=n,n.strm=t,n.window=null,n.mode=nx;const r=a7(t,e);return r!==ac&&(t.state=null),r},FSe=t=>o7(t,DSe);let oO=!0,tw,nw;const USe=t=>{if(oO){tw=new Int32Array(512),nw=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(yp(X$,t.lens,0,288,tw,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;yp(Z$,t.lens,0,32,nw,0,t.work,{bits:5}),oO=!1}t.lencode=tw,t.lenbits=9,t.distcode=nw,t.distbits=5},s7=(t,e,n,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},BSe=(t,e)=>{let n,r,i,a,o,s,l,u,c,d,p,h,v,y,w=0,b,_,A,N,E,P,I,O;const R=new Uint8Array(4);let D,C;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(yc(t)||!t.output||!t.input&&t.avail_in!==0)return Pa;n=t.state,n.mode===es&&(n.mode=Zb),o=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,s=t.avail_in,u=n.hold,c=n.bits,d=s,p=l,O=ac;e:for(;;)switch(n.mode){case nx:if(n.wrap===0){n.mode=Zb;break}for(;c<16;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,R[0]=u&255,R[1]=u>>>8&255,n.check=yo(n.check,R,2,0),u=0,c=0,n.mode=$I;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=jn;break}if((u&15)!==DI){t.msg="unknown compression method",n.mode=jn;break}if(u>>>=4,c-=4,I=(u&15)+8,n.wbits===0&&(n.wbits=I),I>15||I>n.wbits){t.msg="invalid window size",n.mode=jn;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?GI:es,u=0,c=0;break;case $I:for(;c<16;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(n.flags=u,(n.flags&255)!==DI){t.msg="unknown compression method",n.mode=jn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=jn;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,n.check=yo(n.check,R,2,0)),u=0,c=0,n.mode=FI;case FI:for(;c<32;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,R[2]=u>>>16&255,R[3]=u>>>24&255,n.check=yo(n.check,R,4,0)),u=0,c=0,n.mode=UI;case UI:for(;c<16;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,n.check=yo(n.check,R,2,0)),u=0,c=0,n.mode=BI;case BI:if(n.flags&1024){for(;c<16;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,n.check=yo(n.check,R,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=qI;case qI:if(n.flags&1024&&(h=n.length,h>s&&(h=s),h&&(n.head&&(I=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),I)),n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,h,a)),s-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=VI;case VI:if(n.flags&2048){if(s===0)break e;h=0;do I=r[a+h++],n.head&&I&&n.length<65536&&(n.head.name+=String.fromCharCode(I));while(I&&h<s);if(n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,h,a)),s-=h,a+=h,I)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=zI;case zI:if(n.flags&4096){if(s===0)break e;h=0;do I=r[a+h++],n.head&&I&&n.length<65536&&(n.head.comment+=String.fromCharCode(I));while(I&&h<s);if(n.flags&512&&n.wrap&4&&(n.check=yo(n.check,r,h,a)),s-=h,a+=h,I)break e}else n.head&&(n.head.comment=null);n.mode=HI;case HI:if(n.flags&512){for(;c<16;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=jn;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=es;break;case GI:for(;c<32;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}t.adler=n.check=aO(u),u=0,c=0,n.mode=j0;case j0:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=u,n.bits=c,OSe;t.adler=n.check=1,n.mode=es;case es:if(e===kSe||e===my)break e;case Zb:if(n.last){u>>>=c&7,c-=c&7,n.mode=ew;break}for(;c<3;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}switch(n.last=u&1,u>>>=1,c-=1,u&3){case 0:n.mode=WI;break;case 1:if(USe(n),n.mode=gy,e===my){u>>>=2,c-=2;break e}break;case 2:n.mode=JI;break;case 3:t.msg="invalid block type",n.mode=jn}u>>>=2,c-=2;break;case WI:for(u>>>=c&7,c-=c&7;c<32;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=jn;break}if(n.length=u&65535,u=0,c=0,n.mode=Qb,e===my)break e;case Qb:n.mode=KI;case KI:if(h=n.length,h){if(h>s&&(h=s),h>l&&(h=l),h===0)break e;i.set(r.subarray(a,a+h),o),s-=h,a+=h,l-=h,o+=h,n.length-=h;break}n.mode=es;break;case JI:for(;c<14;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(n.nlen=(u&31)+257,u>>>=5,c-=5,n.ndist=(u&31)+1,u>>>=5,c-=5,n.ncode=(u&15)+4,u>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=jn;break}n.have=0,n.mode=YI;case YI:for(;n.have<n.ncode;){for(;c<3;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}n.lens[L[n.have++]]=u&7,u>>>=3,c-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},O=yp(CSe,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,O){t.msg="invalid code lengths set",n.mode=jn;break}n.have=0,n.mode=XI;case XI:for(;n.have<n.nlen+n.ndist;){for(;w=n.lencode[u&(1<<n.lenbits)-1],b=w>>>24,_=w>>>16&255,A=w&65535,!(b<=c);){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(A<16)u>>>=b,c-=b,n.lens[n.have++]=A;else{if(A===16){for(C=b+2;c<C;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(u>>>=b,c-=b,n.have===0){t.msg="invalid bit length repeat",n.mode=jn;break}I=n.lens[n.have-1],h=3+(u&3),u>>>=2,c-=2}else if(A===17){for(C=b+3;c<C;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}u>>>=b,c-=b,I=0,h=3+(u&7),u>>>=3,c-=3}else{for(C=b+7;c<C;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}u>>>=b,c-=b,I=0,h=11+(u&127),u>>>=7,c-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=jn;break}for(;h--;)n.lens[n.have++]=I}}if(n.mode===jn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=jn;break}if(n.lenbits=9,D={bits:n.lenbits},O=yp(X$,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,O){t.msg="invalid literal/lengths set",n.mode=jn;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},O=yp(Z$,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,O){t.msg="invalid distances set",n.mode=jn;break}if(n.mode=gy,e===my)break e;case gy:n.mode=yy;case yy:if(s>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=u,n.bits=c,SSe(t,p),o=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,s=t.avail_in,u=n.hold,c=n.bits,n.mode===es&&(n.back=-1);break}for(n.back=0;w=n.lencode[u&(1<<n.lenbits)-1],b=w>>>24,_=w>>>16&255,A=w&65535,!(b<=c);){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(_&&!(_&240)){for(N=b,E=_,P=A;w=n.lencode[P+((u&(1<<N+E)-1)>>N)],b=w>>>24,_=w>>>16&255,A=w&65535,!(N+b<=c);){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}u>>>=N,c-=N,n.back+=N}if(u>>>=b,c-=b,n.back+=b,n.length=A,_===0){n.mode=nO;break}if(_&32){n.back=-1,n.mode=es;break}if(_&64){t.msg="invalid literal/length code",n.mode=jn;break}n.extra=_&15,n.mode=ZI;case ZI:if(n.extra){for(C=n.extra;c<C;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=QI;case QI:for(;w=n.distcode[u&(1<<n.distbits)-1],b=w>>>24,_=w>>>16&255,A=w&65535,!(b<=c);){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(!(_&240)){for(N=b,E=_,P=A;w=n.distcode[P+((u&(1<<N+E)-1)>>N)],b=w>>>24,_=w>>>16&255,A=w&65535,!(N+b<=c);){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}u>>>=N,c-=N,n.back+=N}if(u>>>=b,c-=b,n.back+=b,_&64){t.msg="invalid distance code",n.mode=jn;break}n.offset=A,n.extra=_&15,n.mode=eO;case eO:if(n.extra){for(C=n.extra;c<C;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=jn;break}n.mode=tO;case tO:if(l===0)break e;if(h=p-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=jn;break}h>n.wnext?(h-=n.wnext,v=n.wsize-h):v=n.wnext-h,h>n.length&&(h=n.length),y=n.window}else y=i,v=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[o++]=y[v++];while(--h);n.length===0&&(n.mode=yy);break;case nO:if(l===0)break e;i[o++]=n.length,l--,n.mode=yy;break;case ew:if(n.wrap){for(;c<32;){if(s===0)break e;s--,u|=r[a++]<<c,c+=8}if(p-=l,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?yo(n.check,i,p,o-p):y5(n.check,i,p,o-p)),p=l,n.wrap&4&&(n.flags?u:aO(u))!==n.check){t.msg="incorrect data check",n.mode=jn;break}u=0,c=0}n.mode=rO;case rO:if(n.wrap&&n.flags){for(;c<32;){if(s===0)break e;s--,u+=r[a++]<<c,c+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=jn;break}u=0,c=0}n.mode=iO;case iO:O=ISe;break e;case jn:O=Q$;break e;case t7:return e7;case n7:default:return Pa}return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=u,n.bits=c,(n.wsize||p!==t.avail_out&&n.mode<jn&&(n.mode<ew||e!==MI))&&s7(t,t.output,t.next_out,p-t.avail_out),d-=t.avail_in,p-=t.avail_out,t.total_in+=d,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?yo(n.check,i,p,t.next_out-p):y5(n.check,i,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===es?128:0)+(n.mode===gy||n.mode===Qb?256:0),(d===0&&p===0||e===MI)&&O===ac&&(O=jSe),O},qSe=t=>{if(yc(t))return Pa;let e=t.state;return e.window&&(e.window=null),t.state=null,ac},VSe=(t,e)=>{if(yc(t))return Pa;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,ac):Pa},zSe=(t,e)=>{const n=e.length;let r,i,a;return yc(t)||(r=t.state,r.wrap!==0&&r.mode!==j0)?Pa:r.mode===j0&&(i=1,i=y5(i,e,n,0),i!==r.check)?Q$:(a=s7(t,e,n,n),a?(r.mode=t7,e7):(r.havedict=1,ac))};var HSe=i7,GSe=a7,WSe=r7,KSe=FSe,JSe=o7,YSe=BSe,XSe=qSe,ZSe=VSe,QSe=zSe,eAe="pako inflate (from Nodeca project)",as={inflateReset:HSe,inflateReset2:GSe,inflateResetKeep:WSe,inflateInit:KSe,inflateInit2:JSe,inflate:YSe,inflateEnd:XSe,inflateGetHeader:ZSe,inflateSetDictionary:QSe,inflateInfo:eAe};function tAe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var nAe=tAe;const l7=Object.prototype.toString,{Z_NO_FLUSH:rAe,Z_FINISH:iAe,Z_OK:Em,Z_STREAM_END:rw,Z_NEED_DICT:iw,Z_STREAM_ERROR:aAe,Z_DATA_ERROR:sO,Z_MEM_ERROR:oAe}=K$;function Hm(t){this.options=J$.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wSe,this.strm.avail_out=0;let n=as.inflateInit2(this.strm,e.windowBits);if(n!==Em)throw new Error(v5[n]);if(this.header=new nAe,as.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=x5.string2buf(e.dictionary):l7.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=as.inflateSetDictionary(this.strm,e.dictionary),n!==Em)))throw new Error(v5[n])}Hm.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?iAe:rAe,l7.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=as.inflate(n,o),a===iw&&i&&(a=as.inflateSetDictionary(n,i),a===Em?a=as.inflate(n,o):a===sO&&(a=iw));n.avail_in>0&&a===rw&&n.state.wrap>0&&t[n.next_in]!==0;)as.inflateReset(n),a=as.inflate(n,o);switch(a){case aAe:case sO:case iw:case oAe:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||a===rw))if(this.options.to==="string"){let l=x5.utf8border(n.output,n.next_out),u=n.next_out-l,c=x5.buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===Em&&s===0)){if(a===rw)return a=as.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Hm.prototype.onData=function(t){this.chunks.push(t)};Hm.prototype.onEnd=function(t){t===Em&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=J$.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function sAe(t,e){const n=new Hm(e);if(n.push(t),n.err)throw n.msg||v5[n.err];return n.result}var lAe=Hm,uAe=sAe,cAe={Inflate:lAe,inflate:uAe};const{Inflate:dAe,inflate:fAe}=cAe;var lO=dAe,hAe=fAe;const u7=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;u7[t]=e}const uO=4294967295;function pAe(t,e,n){let r=t;for(let i=0;i<n;i++)r=u7[(r^e[i])&255]^r>>>8;return r}function mAe(t,e){return(pAe(uO,t,e)^uO)>>>0}function cO(t,e,n){const r=t.readUint32(),i=mAe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function c7(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function d7(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function f7(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function h7(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=t[a]+(n[a]>>1)&255;for(;a<r;a++)e[a]=t[a]+(e[a-i]+n[a]>>1)&255}}function p7(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=t[a]+n[a]&255;for(;a<r;a++)e[a]=t[a]+gAe(e[a-i],n[a],n[a-i])&255}}function gAe(t,e,n){const r=t+e-n,i=Math.abs(r-t),a=Math.abs(r-e),o=Math.abs(r-n);return i<=a&&i<=o?t:a<=o?e:n}function yAe(t,e,n,r,i,a){switch(t){case 0:c7(e,n,i);break;case 1:d7(e,n,i,a);break;case 2:f7(e,n,r,i);break;case 3:h7(e,n,r,i,a);break;case 4:p7(e,n,r,i,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const vAe=new Uint16Array([255]),xAe=new Uint8Array(vAe.buffer),bAe=xAe[0]===255;function wAe(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(a/8)*i,l=new Uint8Array(r*n*s);let u=0;for(let c=0;c<7;c++){const d=o[c],p=Math.ceil((n-d.x)/d.xStep),h=Math.ceil((r-d.y)/d.yStep);if(p<=0||h<=0)continue;const v=p*s,y=new Uint8Array(v);for(let w=0;w<h;w++){const b=e[u++],_=e.subarray(u,u+v);u+=v;const A=new Uint8Array(v);yAe(b,_,A,y,v,s),y.set(A);for(let N=0;N<p;N++){const E=d.x+N*d.xStep,P=d.y+w*d.yStep;if(!(E>=n||P>=r))for(let I=0;I<s;I++)l[(P*n+E)*s+I]=A[N*s+I]}}}if(a===16){const c=new Uint16Array(l.buffer);if(bAe)for(let d=0;d<c.length;d++)c[d]=_Ae(c[d]);return c}else return l}function _Ae(t){return(t&255)<<8|t>>8&255}const SAe=new Uint16Array([255]),AAe=new Uint8Array(SAe.buffer),EAe=AAe[0]===255,NAe=new Uint8Array(0);function dO(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,o=Math.ceil(a/8)*i,s=Math.ceil(a/8*i*n),l=new Uint8Array(r*s);let u=NAe,c=0,d,p;for(let h=0;h<r;h++){switch(d=e.subarray(c+1,c+1+s),p=l.subarray(h*s,(h+1)*s),e[c]){case 0:c7(d,p,s);break;case 1:d7(d,p,s,o);break;case 2:f7(d,p,u,s);break;case 3:h7(d,p,u,s,o);break;case 4:p7(d,p,u,s,o);break;default:throw new Error(`Unsupported filter: ${e[c]}`)}u=p,c+=s+1}if(a===16){const h=new Uint16Array(l.buffer);if(EAe)for(let v=0;v<h.length;v++)h[v]=TAe(h[v]);return h}else return l}function TAe(t){return(t&255)<<8|t>>8&255}const $y=Uint8Array.of(137,80,78,71,13,10,26,10);function fO(t){if(!PAe(t.readBytes($y.length)))throw new Error("wrong PNG signature")}function PAe(t){if(t.length<$y.length)return!1;for(let e=0;e<$y.length;e++)if(t[e]!==$y[e])return!1;return!0}const CAe="tEXt",kAe=0,m7=new TextDecoder("latin1");function IAe(t){if(jAe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const OAe=/^[\u0000-\u00FF]*$/;function jAe(t){if(!OAe.test(t))throw new Error("invalid latin1 text")}function RAe(t,e,n){const r=g7(e);t[r]=LAe(e,n-r.length-1)}function g7(t){for(t.mark();t.readByte()!==kAe;);const e=t.offset;t.reset();const n=m7.decode(t.readBytes(e-t.offset-1));return t.skip(1),IAe(n),n}function LAe(t,e){return m7.decode(t.readBytes(e))}const $i={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},aw={UNKNOWN:-1,DEFLATE:0},hO={UNKNOWN:-1,ADAPTIVE:0},ow={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},vy={NONE:0,BACKGROUND:1,PREVIOUS:2},sw={SOURCE:0,OVER:1};class MAe extends eE{constructor(n,r={}){super(n);tn(this,"_checkCrc");tn(this,"_inflator");tn(this,"_png");tn(this,"_apng");tn(this,"_end");tn(this,"_hasPalette");tn(this,"_palette");tn(this,"_hasTransparency");tn(this,"_transparency");tn(this,"_compressionMethod");tn(this,"_filterMethod");tn(this,"_interlaceMethod");tn(this,"_colorType");tn(this,"_isAnimated");tn(this,"_numberOfFrames");tn(this,"_numberOfPlays");tn(this,"_frames");tn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new lO,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=aw.UNKNOWN,this._filterMethod=hO.UNKNOWN,this._interlaceMethod=ow.UNKNOWN,this._colorType=$i.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(fO(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(fO(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case CAe:RAe(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?cO(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?cO(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=DAe(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case $i.GREYSCALE:i=1;break;case $i.TRUECOLOUR:i=3;break;case $i.INDEXED_COLOUR:i=1;break;case $i.GREYSCALE_ALPHA:i=2;break;case $i.TRUECOLOUR_ALPHA:i=4;break;case $i.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==aw.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<r;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case $i.GREYSCALE:case $i.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case $i.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case $i.UNKNOWN:case $i.GREYSCALE_ALPHA:case $i.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=g7(this),i=this.readUint8();if(i!==aw.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:hAe(a)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=dO({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const a=this._apng.frames.at(n-1);this.disposeFrame(i,a,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case vy.NONE:break;case vy.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const s=(a*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[s+l]=0}break;case vy.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,a=(o,s)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+s)*this._png.channels,u=(o*r.width+s)*this._png.channels;return{index:l,frameIndex:u}};switch(r.blendOp){case sw.SOURCE:for(let o=0;o<r.height;o++)for(let s=0;s<r.width;s++){const{index:l,frameIndex:u}=a(o,s);for(let c=0;c<this._png.channels;c++)n.data[l+c]=r.data[u+c]}break;case sw.OVER:for(let o=0;o<r.height;o++)for(let s=0;s<r.width;s++){const{index:l,frameIndex:u}=a(o,s);for(let c=0;c<this._png.channels;c++){const d=r.data[u+this._png.channels-1]/i,p=c%(this._png.channels-1)===0?1:r.data[u+c],h=Math.floor(d*p+(1-d)*n.data[l+c]);n.data[l+c]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==hO.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===ow.NO_INTERLACE)this._png.data=dO({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===ow.ADAM7)this._png.data=wAe({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:vy.NONE,blendOp:sw.SOURCE,data:n}),this._inflator=new lO,this._writingDataChunks=!1}}function DAe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var pO;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(pO||(pO={}));function $Ae(t,e){return new MAe(t,e).decode()}var At=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function lw(){At.console&&typeof At.console.log=="function"&&At.console.log.apply(At.console,arguments)}var gn={log:lw,warn:function(t){At.console&&(typeof At.console.warn=="function"?At.console.warn.apply(At.console,arguments):lw.call(null,arguments))},error:function(t){At.console&&(typeof At.console.error=="function"?At.console.error.apply(At.console,arguments):lw(t))}};function uw(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Nu(r.response,e,n)},r.onerror=function(){gn.error("could not download file")},r.send()}function mO(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function xy(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Nu=At.saveAs||((typeof window>"u"?"undefined":un(window))!=="object"||window!==At?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=At.URL||At.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?mO(i.href)?uw(t,e,n):xy(i,i.target="_blank"):xy(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){xy(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(mO(t))uw(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){xy(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:un(a)!=="object"&&(gn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return uw(t,e,n);var i=t.type==="application/octet-stream",a=/constructor/i.test(At.HTMLElement)||At.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":un(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var c=s.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},s.readAsDataURL(t)}else{var l=At.URL||At.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function y7(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,o=i.exec(t);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+s+l+u}}var Fy=At.atob.bind(At),gO=At.btoa.bind(At);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function cw(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];n=Jr(n,r,i,a,e[0],7,-680876936),a=Jr(a,n,r,i,e[1],12,-389564586),i=Jr(i,a,n,r,e[2],17,606105819),r=Jr(r,i,a,n,e[3],22,-1044525330),n=Jr(n,r,i,a,e[4],7,-176418897),a=Jr(a,n,r,i,e[5],12,1200080426),i=Jr(i,a,n,r,e[6],17,-1473231341),r=Jr(r,i,a,n,e[7],22,-45705983),n=Jr(n,r,i,a,e[8],7,1770035416),a=Jr(a,n,r,i,e[9],12,-1958414417),i=Jr(i,a,n,r,e[10],17,-42063),r=Jr(r,i,a,n,e[11],22,-1990404162),n=Jr(n,r,i,a,e[12],7,1804603682),a=Jr(a,n,r,i,e[13],12,-40341101),i=Jr(i,a,n,r,e[14],17,-1502002290),n=Yr(n,r=Jr(r,i,a,n,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Yr(a,n,r,i,e[6],9,-1069501632),i=Yr(i,a,n,r,e[11],14,643717713),r=Yr(r,i,a,n,e[0],20,-373897302),n=Yr(n,r,i,a,e[5],5,-701558691),a=Yr(a,n,r,i,e[10],9,38016083),i=Yr(i,a,n,r,e[15],14,-660478335),r=Yr(r,i,a,n,e[4],20,-405537848),n=Yr(n,r,i,a,e[9],5,568446438),a=Yr(a,n,r,i,e[14],9,-1019803690),i=Yr(i,a,n,r,e[3],14,-187363961),r=Yr(r,i,a,n,e[8],20,1163531501),n=Yr(n,r,i,a,e[13],5,-1444681467),a=Yr(a,n,r,i,e[2],9,-51403784),i=Yr(i,a,n,r,e[7],14,1735328473),n=Xr(n,r=Yr(r,i,a,n,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Xr(a,n,r,i,e[8],11,-2022574463),i=Xr(i,a,n,r,e[11],16,1839030562),r=Xr(r,i,a,n,e[14],23,-35309556),n=Xr(n,r,i,a,e[1],4,-1530992060),a=Xr(a,n,r,i,e[4],11,1272893353),i=Xr(i,a,n,r,e[7],16,-155497632),r=Xr(r,i,a,n,e[10],23,-1094730640),n=Xr(n,r,i,a,e[13],4,681279174),a=Xr(a,n,r,i,e[0],11,-358537222),i=Xr(i,a,n,r,e[3],16,-722521979),r=Xr(r,i,a,n,e[6],23,76029189),n=Xr(n,r,i,a,e[9],4,-640364487),a=Xr(a,n,r,i,e[12],11,-421815835),i=Xr(i,a,n,r,e[15],16,530742520),n=Zr(n,r=Xr(r,i,a,n,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Zr(a,n,r,i,e[7],10,1126891415),i=Zr(i,a,n,r,e[14],15,-1416354905),r=Zr(r,i,a,n,e[5],21,-57434055),n=Zr(n,r,i,a,e[12],6,1700485571),a=Zr(a,n,r,i,e[3],10,-1894986606),i=Zr(i,a,n,r,e[10],15,-1051523),r=Zr(r,i,a,n,e[1],21,-2054922799),n=Zr(n,r,i,a,e[8],6,1873313359),a=Zr(a,n,r,i,e[15],10,-30611744),i=Zr(i,a,n,r,e[6],15,-1560198380),r=Zr(r,i,a,n,e[13],21,1309151649),n=Zr(n,r,i,a,e[4],6,-145523070),a=Zr(a,n,r,i,e[11],10,-1120210379),i=Zr(i,a,n,r,e[2],15,718787259),r=Zr(r,i,a,n,e[9],21,-343485551),t[0]=ml(n,t[0]),t[1]=ml(r,t[1]),t[2]=ml(i,t[2]),t[3]=ml(a,t[3])}function rx(t,e,n,r,i,a){return e=ml(ml(e,t),ml(r,a)),ml(e<<i|e>>>32-i,n)}function Jr(t,e,n,r,i,a,o){return rx(e&n|~e&r,t,e,i,a,o)}function Yr(t,e,n,r,i,a,o){return rx(e&r|n&~r,t,e,i,a,o)}function Xr(t,e,n,r,i,a,o){return rx(e^n^r,t,e,i,a,o)}function Zr(t,e,n,r,i,a,o){return rx(n^(e|~r),t,e,i,a,o)}function v7(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)cw(r,FAe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(cw(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,cw(r,i),r}function FAe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var yO="0123456789abcdef".split("");function UAe(t){for(var e="",n=0;n<4;n++)e+=yO[t>>8*n+4&15]+yO[t>>8*n&15];return e}function BAe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function b5(t){return v7(t).map(BAe).join("")}var qAe=function(t){for(var e=0;e<t.length;e++)t[e]=UAe(t[e]);return t.join("")}(v7("hello"))!="5d41402abc4b2a76b9719d911017c592";function ml(t,e){if(qAe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function w5(t,e){var n,r,i,a;if(t!==n){for(var o=(i=t,a=1+(256/t.length|0),new Array(a+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var c=s[l];u=(u+c+o.charCodeAt(l))%256,s[l]=s[u],s[u]=c}n=t,r=s}else s=r;var d=e.length,p=0,h=0,v="";for(l=0;l<d;l++)h=(h+(c=s[p=(p+1)%256]))%256,s[p]=s[h],s[h]=c,o=s[(s[p]+s[h])%256],v+=String.fromCharCode(e.charCodeAt(l)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vO={print:4,modify:8,copy:16,"annot-forms":32};function Kc(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(s){if(vO.perm!==void 0)throw new Error("Invalid permission: "+s);i+=vO[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=b5(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=w5(this.encryptionKey,this.padding)}function Jc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function xO(t){if(un(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!i],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[n]){var o=e[n][a];try{o[0].apply(t,r)}catch(s){At.console&&gn.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function R0(t){if(!(this instanceof R0))return new R0(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function x7(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Iu(t,e,n,r,i){if(!(this instanceof Iu))return new Iu(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,x7.call(this,r,i)}function pd(t,e,n,r,i){if(!(this instanceof pd))return new pd(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,x7.call(this,r,i)}function ht(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,l=16,u="S",c=null;un(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,a=t.compress||t.compressPdf||a,(c=t.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),s=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=xO;var v="1.3",y=h.__private__.getPdfVersion=function(){return v};h.__private__.setPdfVersion=function(T){v=T};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return w};var b=h.__private__.getPageFormat=function(T){return w[T]};i=i||"a4";var _="compat",A="advanced",N=_;function E(){this.saveGraphicsState(),ee(new bt(rt,0,0,-rt,0,ru()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),u="n",N=A}function P(){this.restoreGraphicsState(),u="S",N=_}var I=h.__private__.combineFontStyleAndFontWeight=function(T,B){if(T=="bold"&&B=="normal"||T=="bold"&&B==400||T=="normal"&&B=="italic"||T=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(T=B==400||B==="normal"?T==="italic"?"italic":"normal":B!=700&&B!=="bold"||T!=="normal"?(B==700?"bold":B)+""+T:"bold"),T};h.advancedAPI=function(T){var B=N===_;return B&&E.call(this),typeof T!="function"||(T(this),B&&P.call(this)),this},h.compatAPI=function(T){var B=N===A;return B&&P.call(this),typeof T!="function"||(T(this),B&&E.call(this)),this},h.isAdvancedAPI=function(){return N===A};var O,R=function(T){if(N!==A)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=h.roundToPrecision=h.__private__.roundToPrecision=function(T,B){var ie=e||B;if(isNaN(T)||isNaN(ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(ie).replace(/0+$/,"")};O=h.hpf=h.__private__.hpf=typeof l=="number"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return D(T,l)}:l==="smart"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return D(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return D(T,16)};var C=h.f2=h.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return D(T,2)},L=h.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return D(T,3)},F=h.scale=h.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return N===_?T*rt:N===A?T:void 0},$=function(T){return F(function(B){return N===_?ru()-B:N===A?B:void 0}(T))};h.__private__.setPrecision=h.setPrecision=function(T){typeof parseInt(T,10)=="number"&&(e=parseInt(T,10))};var V,Y="00000000000000000000000000000000",W=h.__private__.getFileId=function(){return Y},U=h.__private__.setFileId=function(T){return Y=T!==void 0&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Jn=new Kc(c.userPermissions,c.userPassword,c.ownerPassword,Y)),Y};h.setFileId=function(T){return U(T),this},h.getFileId=function(){return W()};var Q=h.__private__.convertDateToPDFDate=function(T){var B=T.getTimezoneOffset(),ie=B<0?"+":"-",de=Math.floor(Math.abs(B/60)),ge=Math.abs(B%60),Pe=[ie,K(de),"'",K(ge),"'"].join("");return["D:",T.getFullYear(),K(T.getMonth()+1),K(T.getDate()),K(T.getHours()),K(T.getMinutes()),K(T.getSeconds()),Pe].join("")},le=h.__private__.convertPDFDateToDate=function(T){var B=parseInt(T.substr(2,4),10),ie=parseInt(T.substr(6,2),10)-1,de=parseInt(T.substr(8,2),10),ge=parseInt(T.substr(10,2),10),Pe=parseInt(T.substr(12,2),10),Oe=parseInt(T.substr(14,2),10);return new Date(B,ie,de,ge,Pe,Oe,0)},oe=h.__private__.setCreationDate=function(T){var B;if(T===void 0&&(T=new Date),T instanceof Date)B=Q(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=T}return V=B},j=h.__private__.getCreationDate=function(T){var B=V;return T==="jsDate"&&(B=le(V)),B};h.setCreationDate=function(T){return oe(T),this},h.getCreationDate=function(T){return j(T)};var z,K=h.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},re=h.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},ae=0,fe=[],xe=[],ue=0,ye=[],Se=[],me=!1,je=xe;h.__private__.setCustomOutputDestination=function(T){me=!0,je=T};var se=function(T){me||(je=T)};h.__private__.resetCustomOutputDestination=function(){me=!1,je=xe};var ee=h.__private__.out=function(T){return T=T.toString(),ue+=T.length+1,je.push(T),je},Ve=h.__private__.write=function(T){return ee(arguments.length===1?T.toString():Array.prototype.join.call(arguments," "))},qe=h.__private__.getArrayBuffer=function(T){for(var B=T.length,ie=new ArrayBuffer(B),de=new Uint8Array(ie);B--;)de[B]=T.charCodeAt(B);return ie},Ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return Ge};var _e=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(T){return _e=N===A?T/rt:T,this};var Re,Ae=h.__private__.getFontSize=h.getFontSize=function(){return N===_?_e:_e*rt},De=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(T){return De=T,this},h.__private__.getR2L=h.getR2L=function(){return De};var Me,st=h.__private__.setZoomMode=function(T){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))Re=T;else if(isNaN(T)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(T)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');Re=T}else Re=parseInt(T,10)};h.__private__.getZoomMode=function(){return Re};var Fe,We=h.__private__.setPageMode=function(T){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');Me=T};h.__private__.getPageMode=function(){return Me};var vt=h.__private__.setLayoutMode=function(T){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');Fe=T};h.__private__.getLayoutMode=function(){return Fe},h.__private__.setDisplayMode=h.setDisplayMode=function(T,B,ie){return st(T),vt(B),We(ie),this};var nt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(T){if(Object.keys(nt).indexOf(T)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nt[T]},h.__private__.getDocumentProperties=function(){return nt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(T){for(var B in nt)nt.hasOwnProperty(B)&&T[B]&&(nt[B]=T[B]);return this},h.__private__.setDocumentProperty=function(T,B){if(Object.keys(nt).indexOf(T)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nt[T]=B};var Je,rt,dt,Qt,Bt,it={},Ct={},an=[],gt={},xt={},mt={},vn={},Mn=null,on=0,_t=[],zt=new xO(h),na=t.hotfixes||[],Tr={},ra={},ia=[],bt=function T(B,ie,de,ge,Pe,Oe){if(!(this instanceof T))return new T(B,ie,de,ge,Pe,Oe);isNaN(B)&&(B=1),isNaN(ie)&&(ie=0),isNaN(de)&&(de=0),isNaN(ge)&&(ge=1),isNaN(Pe)&&(Pe=0),isNaN(Oe)&&(Oe=0),this._matrix=[B,ie,de,ge,Pe,Oe]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(O).join(T)},bt.prototype.multiply=function(T){var B=T.sx*this.sx+T.shy*this.shx,ie=T.sx*this.shy+T.shy*this.sy,de=T.shx*this.sx+T.sy*this.shx,ge=T.shx*this.shy+T.sy*this.sy,Pe=T.tx*this.sx+T.ty*this.shx+this.tx,Oe=T.tx*this.shy+T.ty*this.sy+this.ty;return new bt(B,ie,de,ge,Pe,Oe)},bt.prototype.decompose=function(){var T=this.sx,B=this.shy,ie=this.shx,de=this.sy,ge=this.tx,Pe=this.ty,Oe=Math.sqrt(T*T+B*B),tt=(T/=Oe)*ie+(B/=Oe)*de;ie-=T*tt,de-=B*tt;var ct=Math.sqrt(ie*ie+de*de);return tt/=ct,T*(de/=ct)<B*(ie/=ct)&&(T=-T,B=-B,tt=-tt,Oe=-Oe),{scale:new bt(Oe,0,0,ct,0,0),translate:new bt(1,0,0,1,ge,Pe),rotate:new bt(T,B,-B,T,0,0),skew:new bt(1,0,tt,1,0,0)}},bt.prototype.toString=function(T){return this.join(" ")},bt.prototype.inversed=function(){var T=this.sx,B=this.shy,ie=this.shx,de=this.sy,ge=this.tx,Pe=this.ty,Oe=1/(T*de-B*ie),tt=de*Oe,ct=-B*Oe,Tt=-ie*Oe,Ot=T*Oe;return new bt(tt,ct,Tt,Ot,-tt*ge-Tt*Pe,-ct*ge-Ot*Pe)},bt.prototype.applyToPoint=function(T){var B=T.x*this.sx+T.y*this.shx+this.tx,ie=T.x*this.shy+T.y*this.sy+this.ty;return new tu(B,ie)},bt.prototype.applyToRectangle=function(T){var B=this.applyToPoint(T),ie=this.applyToPoint(new tu(T.x+T.w,T.y+T.h));return new rh(B.x,B.y,ie.x-B.x,ie.y-B.y)},bt.prototype.clone=function(){var T=this.sx,B=this.shy,ie=this.shx,de=this.sy,ge=this.tx,Pe=this.ty;return new bt(T,B,ie,de,ge,Pe)},h.Matrix=bt;var $o=h.matrixMult=function(T,B){return B.multiply(T)},Fo=new bt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Fo;var aa=function(T,B){if(!xt[T]){var ie=(B instanceof Iu?"Sh":"P")+(Object.keys(gt).length+1).toString(10);B.id=ie,xt[T]=ie,gt[ie]=B,zt.publish("addPattern",B)}};h.ShadingPattern=Iu,h.TilingPattern=pd,h.addShadingPattern=function(T,B){return R("addShadingPattern()"),aa(T,B),this},h.beginTilingPattern=function(T){R("beginTilingPattern()"),ih(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},h.endTilingPattern=function(T,B){R("endTilingPattern()"),B.stream=Se[z].join(`
`),aa(T,B),zt.publish("endTilingPattern",B),ia.pop().restore()};var oa,qn=h.__private__.newObject=function(){var T=Pr();return Lr(T,!0),T},Pr=h.__private__.newObjectDeferred=function(){return ae++,fe[ae]=function(){return ue},ae},Lr=function(T,B){return B=typeof B=="boolean"&&B,fe[T]=ue,B&&ee(T+" 0 obj"),T},Gl=h.__private__.newAdditionalObject=function(){var T={objId:Pr(),content:""};return ye.push(T),T},Rs=Pr(),Oa=Pr(),lo=h.__private__.decodeColorString=function(T){var B=T.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length!==5||B[4]!=="k"&&B[4]!=="K"||(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var ie=parseFloat(B[0]);B=[ie,ie,ie,"r"]}for(var de="#",ge=0;ge<3;ge++)de+=("0"+Math.floor(255*parseFloat(B[ge])).toString(16)).slice(-2);return de},ja=h.__private__.encodeColorString=function(T){var B;typeof T=="string"&&(T={ch1:T});var ie=T.ch1,de=T.ch2,ge=T.ch3,Pe=T.ch4,Oe=T.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ie=="string"&&ie.charAt(0)!=="#"){var tt=new y7(ie);if(tt.ok)ie=tt.toHex();else if(!/^\d*\.?\d*$/.test(ie))throw new Error('Invalid color "'+ie+'" passed to jsPDF.encodeColorString.')}if(typeof ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ie)&&(ie="#"+ie[1]+ie[1]+ie[2]+ie[2]+ie[3]+ie[3]),typeof ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ie)){var ct=parseInt(ie.substr(1),16);ie=ct>>16&255,de=ct>>8&255,ge=255&ct}if(de===void 0||Pe===void 0&&ie===de&&de===ge)B=typeof ie=="string"?ie+" "+Oe[0]:T.precision===2?C(ie/255)+" "+Oe[0]:L(ie/255)+" "+Oe[0];else if(Pe===void 0||un(Pe)==="object"){if(Pe&&!isNaN(Pe.a)&&Pe.a===0)return["1.","1.","1.",Oe[1]].join(" ");B=typeof ie=="string"?[ie,de,ge,Oe[1]].join(" "):T.precision===2?[C(ie/255),C(de/255),C(ge/255),Oe[1]].join(" "):[L(ie/255),L(de/255),L(ge/255),Oe[1]].join(" ")}else B=typeof ie=="string"?[ie,de,ge,Pe,Oe[2]].join(" "):T.precision===2?[C(ie),C(de),C(ge),C(Pe),Oe[2]].join(" "):[L(ie),L(de),L(ge),L(Pe),Oe[2]].join(" ");return B},Ra=h.__private__.getFilters=function(){return o},sa=h.__private__.putStream=function(T){var B=(T=T||{}).data||"",ie=T.filters||Ra(),de=T.alreadyAppliedFilters||[],ge=T.addLength1||!1,Pe=B.length,Oe=T.objectId,tt=function(pr){return pr};if(c!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(tt=Jn.encryptor(Oe,0));var ct={};ie===!0&&(ie=["FlateEncode"]);var Tt=T.additionalKeyValues||[],Ot=(ct=ht.API.processDataByFilters!==void 0?ht.API.processDataByFilters(B,ie):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(ct.data.length!==0&&(Tt.push({key:"Length",value:ct.data.length}),ge===!0&&Tt.push({key:"Length1",value:Pe})),Ot.length!=0)if(Ot.split("/").length-1==1)Tt.push({key:"Filter",value:Ot});else{Tt.push({key:"Filter",value:"["+Ot+"]"});for(var en=0;en<Tt.length;en+=1)if(Tt[en].key==="DecodeParms"){for(var Dn=[],or=0;or<ct.reverseChain.split("/").length-1;or+=1)Dn.push("null");Dn.push(Tt[en].value),Tt[en].value="["+Dn.join(" ")+"]"}}ee("<<");for(var xn=0;xn<Tt.length;xn++)ee("/"+Tt[xn].key+" "+Tt[xn].value);ee(">>"),ct.data.length!==0&&(ee("stream"),ee(tt(ct.data)),ee("endstream"))},Wl=h.__private__.putPage=function(T){var B=T.number,ie=T.data,de=T.objId,ge=T.contentsObjId;Lr(de,!0),ee("<</Type /Page"),ee("/Parent "+T.rootDictionaryObjId+" 0 R"),ee("/Resources "+T.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(O(T.mediaBox.bottomLeftX))+" "+parseFloat(O(T.mediaBox.bottomLeftY))+" "+O(T.mediaBox.topRightX)+" "+O(T.mediaBox.topRightY)+"]"),T.cropBox!==null&&ee("/CropBox ["+O(T.cropBox.bottomLeftX)+" "+O(T.cropBox.bottomLeftY)+" "+O(T.cropBox.topRightX)+" "+O(T.cropBox.topRightY)+"]"),T.bleedBox!==null&&ee("/BleedBox ["+O(T.bleedBox.bottomLeftX)+" "+O(T.bleedBox.bottomLeftY)+" "+O(T.bleedBox.topRightX)+" "+O(T.bleedBox.topRightY)+"]"),T.trimBox!==null&&ee("/TrimBox ["+O(T.trimBox.bottomLeftX)+" "+O(T.trimBox.bottomLeftY)+" "+O(T.trimBox.topRightX)+" "+O(T.trimBox.topRightY)+"]"),T.artBox!==null&&ee("/ArtBox ["+O(T.artBox.bottomLeftX)+" "+O(T.artBox.bottomLeftY)+" "+O(T.artBox.topRightX)+" "+O(T.artBox.topRightY)+"]"),typeof T.userUnit=="number"&&T.userUnit!==1&&ee("/UserUnit "+T.userUnit),zt.publish("putPage",{objId:de,pageContext:_t[B],pageNumber:B,page:ie}),ee("/Contents "+ge+" 0 R"),ee(">>"),ee("endobj");var Pe=ie.join(`
`);return N===A&&(Pe+=`
Q`),Lr(ge,!0),sa({data:Pe,filters:Ra(),objectId:ge}),ee("endobj"),de},uo=h.__private__.putPages=function(){var T,B,ie=[];for(T=1;T<=on;T++)_t[T].objId=Pr(),_t[T].contentsObjId=Pr();for(T=1;T<=on;T++)ie.push(Wl({number:T,data:Se[T],objId:_t[T].objId,contentsObjId:_t[T].contentsObjId,mediaBox:_t[T].mediaBox,cropBox:_t[T].cropBox,bleedBox:_t[T].bleedBox,trimBox:_t[T].trimBox,artBox:_t[T].artBox,userUnit:_t[T].userUnit,rootDictionaryObjId:Rs,resourceDictionaryObjId:Oa}));Lr(Rs,!0),ee("<</Type /Pages");var de="/Kids [";for(B=0;B<on;B++)de+=ie[B]+" 0 R ";ee(de+"]"),ee("/Count "+on),ee(">>"),ee("endobj"),zt.publish("postPutPages")},Kl=function(T){zt.publish("putFont",{font:T,out:ee,newObject:qn,putStream:sa}),T.isAlreadyPutted!==!0&&(T.objectNumber=qn(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Jc(T.postScriptName)),ee("/Subtype /Type1"),typeof T.encoding=="string"&&ee("/Encoding /"+T.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},xc=function(T){T.objectNumber=qn();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[O(T.x),O(T.y),O(T.x+T.width),O(T.y+T.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var ie=T.pages[1].join(`
`);sa({data:ie,additionalKeyValues:B,objectId:T.objectNumber}),ee("endobj")},bc=function(T,B){B||(B=21);var ie=qn(),de=function(Oe,tt){var ct,Tt=[],Ot=1/(tt-1);for(ct=0;ct<1;ct+=Ot)Tt.push(ct);if(Tt.push(1),Oe[0].offset!=0){var en={offset:0,color:Oe[0].color};Oe.unshift(en)}if(Oe[Oe.length-1].offset!=1){var Dn={offset:1,color:Oe[Oe.length-1].color};Oe.push(Dn)}for(var or="",xn=0,pr=0;pr<Tt.length;pr++){for(ct=Tt[pr];ct>Oe[xn+1].offset;)xn++;var sr=Oe[xn].offset,Mr=(ct-sr)/(Oe[xn+1].offset-sr),ua=Oe[xn].color,yi=Oe[xn+1].color;or+=re(Math.round((1-Mr)*ua[0]+Mr*yi[0]).toString(16))+re(Math.round((1-Mr)*ua[1]+Mr*yi[1]).toString(16))+re(Math.round((1-Mr)*ua[2]+Mr*yi[2]).toString(16))}return or.trim()}(T.colors,B),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+B+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sa({data:de,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ie}),ee("endobj"),T.objectNumber=qn(),ee("<< /ShadingType "+T.type),ee("/ColorSpace /DeviceRGB");var Pe="/Coords ["+O(parseFloat(T.coords[0]))+" "+O(parseFloat(T.coords[1]))+" ";T.type===2?Pe+=O(parseFloat(T.coords[2]))+" "+O(parseFloat(T.coords[3])):Pe+=O(parseFloat(T.coords[2]))+" "+O(parseFloat(T.coords[3]))+" "+O(parseFloat(T.coords[4]))+" "+O(parseFloat(T.coords[5])),ee(Pe+="]"),T.matrix&&ee("/Matrix ["+T.matrix.toString()+"]"),ee("/Function "+ie+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},wc=function(T,B){var ie=Pr(),de=qn();B.push({resourcesOid:ie,objectOid:de}),T.objectNumber=de;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+T.boundingBox.map(O).join(" ")+"]"}),ge.push({key:"XStep",value:O(T.xStep)}),ge.push({key:"YStep",value:O(T.yStep)}),ge.push({key:"Resources",value:ie+" 0 R"}),T.matrix&&ge.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),sa({data:T.stream,additionalKeyValues:ge,objectId:T.objectNumber}),ee("endobj")},ix=function(T){for(var B in T.objectNumber=qn(),ee("<<"),T)switch(B){case"opacity":ee("/ca "+C(T[B]));break;case"stroke-opacity":ee("/CA "+C(T[B]))}ee(">>"),ee("endobj")},Wf=function(T){Lr(T.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var B in ee("/Font <<"),it)it.hasOwnProperty(B)&&(d===!1||d===!0&&p.hasOwnProperty(B))&&ee("/"+B+" "+it[B].objectNumber+" 0 R");ee(">>")}(),function(){if(Object.keys(gt).length>0){for(var B in ee("/Shading <<"),gt)gt.hasOwnProperty(B)&&gt[B]instanceof Iu&&gt[B].objectNumber>=0&&ee("/"+B+" "+gt[B].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),ee(">>")}}(),function(B){if(Object.keys(gt).length>0){for(var ie in ee("/Pattern <<"),gt)gt.hasOwnProperty(ie)&&gt[ie]instanceof h.TilingPattern&&gt[ie].objectNumber>=0&&gt[ie].objectNumber<B&&ee("/"+ie+" "+gt[ie].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),ee(">>")}}(T.objectOid),function(){if(Object.keys(mt).length>0){var B;for(B in ee("/ExtGState <<"),mt)mt.hasOwnProperty(B)&&mt[B].objectNumber>=0&&ee("/"+B+" "+mt[B].objectNumber+" 0 R");zt.publish("putGStateDict"),ee(">>")}}(),function(){for(var B in ee("/XObject <<"),Tr)Tr.hasOwnProperty(B)&&Tr[B].objectNumber>=0&&ee("/"+B+" "+Tr[B].objectNumber+" 0 R");zt.publish("putXobjectDict"),ee(">>")}(),ee(">>"),ee("endobj")},Gm=function(T){Ct[T.fontName]=Ct[T.fontName]||{},Ct[T.fontName][T.fontStyle]=T.id},Wm=function(T,B,ie,de,ge){var Pe={id:"F"+(Object.keys(it).length+1).toString(10),postScriptName:T,fontName:B,fontStyle:ie,encoding:de,isStandardFont:ge||!1,metadata:{}};return zt.publish("addFont",{font:Pe,instance:this}),it[Pe.id]=Pe,Gm(Pe),Pe.id},la=h.__private__.pdfEscape=h.pdfEscape=function(T,B){return function(ie,de){var ge,Pe,Oe,tt,ct,Tt,Ot,en,Dn;if(Oe=(de=de||{}).sourceEncoding||"Unicode",ct=de.outputEncoding,(de.autoencode||ct)&&it[Je].metadata&&it[Je].metadata[Oe]&&it[Je].metadata[Oe].encoding&&(tt=it[Je].metadata[Oe].encoding,!ct&&it[Je].encoding&&(ct=it[Je].encoding),!ct&&tt.codePages&&(ct=tt.codePages[0]),typeof ct=="string"&&(ct=tt[ct]),ct)){for(Ot=!1,Tt=[],ge=0,Pe=ie.length;ge<Pe;ge++)(en=ct[ie.charCodeAt(ge)])?Tt.push(String.fromCharCode(en)):Tt.push(ie[ge]),Tt[ge].charCodeAt(0)>>8&&(Ot=!0);ie=Tt.join("")}for(ge=ie.length;Ot===void 0&&ge!==0;)ie.charCodeAt(ge-1)>>8&&(Ot=!0),ge--;if(!Ot)return ie;for(Tt=de.noBOM?[]:[254,255],ge=0,Pe=ie.length;ge<Pe;ge++){if((Dn=(en=ie.charCodeAt(ge))>>8)>>8)throw new Error("Character at position "+ge+" of string '"+ie+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Tt.push(Dn),Tt.push(en-(Dn<<8))}return String.fromCharCode.apply(void 0,Tt)}(T,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Kf=h.__private__.beginPage=function(T){Se[++on]=[],_t[on]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},Jm(on),se(Se[z])},Km=function(T,B){var ie,de,ge;switch(n=B||n,typeof T=="string"&&(ie=b(T.toLowerCase()),Array.isArray(ie)&&(de=ie[0],ge=ie[1])),Array.isArray(T)&&(de=T[0]*rt,ge=T[1]*rt),isNaN(de)&&(de=i[0],ge=i[1]),(de>14400||ge>14400)&&(gn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),ge=Math.min(14400,ge)),i=[de,ge],n.substr(0,1)){case"l":ge>de&&(i=[ge,de]);break;case"p":de>ge&&(i=[ge,de])}Kf(i),hx(Qf),ee(Sc),th!==0&&ee(th+" J"),nh!==0&&ee(nh+" j"),zt.publish("addPage",{pageNumber:on})},Jf=function(T){T>0&&T<=on&&(Se.splice(T,1),_t.splice(T,1),on--,z>on&&(z=on),this.setPage(z))},Jm=function(T){T>0&&T<=on&&(z=T)},Ym=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Se.length-1},Xm=function(T,B,ie){var de,ge=void 0;return ie=ie||{},T=T!==void 0?T:it[Je].fontName,B=B!==void 0?B:it[Je].fontStyle,de=T.toLowerCase(),Ct[de]!==void 0&&Ct[de][B]!==void 0?ge=Ct[de][B]:Ct[T]!==void 0&&Ct[T][B]!==void 0?ge=Ct[T][B]:ie.disableWarning===!1&&gn.warn("Unable to look up font label for font '"+T+"', '"+B+"'. Refer to getFontList() for available fonts."),ge||ie.noFallback||(ge=Ct.times[B])==null&&(ge=Ct.times.normal),ge},_c=h.__private__.putInfo=function(){var T=qn(),B=function(de){return de};for(var ie in c!==null&&(B=Jn.encryptor(T,0)),ee("<<"),ee("/Producer ("+la(B("jsPDF "+ht.version))+")"),nt)nt.hasOwnProperty(ie)&&nt[ie]&&ee("/"+ie.substr(0,1).toUpperCase()+ie.substr(1)+" ("+la(B(nt[ie]))+")");ee("/CreationDate ("+la(B(V))+")"),ee(">>"),ee("endobj")},ax=h.__private__.putCatalog=function(T){var B=(T=T||{}).rootDictionaryObjId||Rs;switch(qn(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+B+" 0 R"),Re||(Re="fullwidth"),Re){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ie=""+Re;ie.substr(ie.length-1)==="%"&&(Re=parseInt(Re)/100),typeof Re=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+C(Re)+"]")}switch(Fe||(Fe="continuous"),Fe){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}Me&&ee("/PageMode /"+Me),zt.publish("putCatalog"),ee(">>"),ee("endobj")},ar=h.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(ae+1)),ee("/Root "+ae+" 0 R"),ee("/Info "+(ae-1)+" 0 R"),c!==null&&ee("/Encrypt "+Jn.oid+" 0 R"),ee("/ID [ <"+Y+"> <"+Y+"> ]"),ee(">>")},Zm=h.__private__.putHeader=function(){ee("%PDF-"+v),ee("%")},Qm=h.__private__.putXRef=function(){var T="0000000000";ee("xref"),ee("0 "+(ae+1)),ee("0000000000 65535 f ");for(var B=1;B<=ae;B++)typeof fe[B]=="function"?ee((T+fe[B]()).slice(-10)+" 00000 n "):fe[B]!==void 0?ee((T+fe[B]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},Uo=h.__private__.buildDocument=function(){var T;ae=0,ue=0,xe=[],fe=[],ye=[],Rs=Pr(),Oa=Pr(),se(xe),zt.publish("buildDocument"),Zm(),uo(),function(){zt.publish("putAdditionalObjects");for(var ie=0;ie<ye.length;ie++){var de=ye[ie];Lr(de.objId,!0),ee(de.content),ee("endobj")}zt.publish("postPutAdditionalObjects")}(),T=[],function(){for(var ie in it)it.hasOwnProperty(ie)&&(d===!1||d===!0&&p.hasOwnProperty(ie))&&Kl(it[ie])}(),function(){var ie;for(ie in mt)mt.hasOwnProperty(ie)&&ix(mt[ie])}(),function(){for(var ie in Tr)Tr.hasOwnProperty(ie)&&xc(Tr[ie])}(),function(ie){var de;for(de in gt)gt.hasOwnProperty(de)&&(gt[de]instanceof Iu?bc(gt[de]):gt[de]instanceof pd&&wc(gt[de],ie))}(T),zt.publish("putResources"),T.forEach(Wf),Wf({resourcesOid:Oa,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources"),c!==null&&(Jn.oid=qn(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Jn.v),ee("/R "+Jn.r),ee("/U <"+Jn.toHexString(Jn.U)+">"),ee("/O <"+Jn.toHexString(Jn.O)+">"),ee("/P "+Jn.P),ee(">>"),ee("endobj")),_c(),ax();var B=ue;return Qm(),ar(),ee("startxref"),ee(""+B),ee("%%EOF"),se(Se[z]),xe.join(`
`)},Jl=h.__private__.getBlob=function(T){return new Blob([qe(T)],{type:"application/pdf"})},La=h.output=h.__private__.output=(oa=function(T,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",T){case void 0:return Uo();case"save":h.save(B.filename);break;case"arraybuffer":return qe(Uo());case"blob":return Jl(Uo());case"bloburi":case"bloburl":if(At.URL!==void 0&&typeof At.URL.createObjectURL=="function")return At.URL&&At.URL.createObjectURL(Jl(Uo()))||void 0;gn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ie="",de=Uo();try{ie=gO(de)}catch{ie=gO(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+B.filename+";base64,"+ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(ge=B.pdfObjectUrl,Pe="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Pe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",tt=At.open();return tt!==null&&tt.document.write(Oe),tt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(At)==="[object Window]"){var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',Tt=At.open();if(Tt!==null){Tt.document.write(ct);var Ot=this;Tt.document.documentElement.querySelector("#pdfViewer").onload=function(){Tt.document.title=B.filename,Tt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ot.output("bloburl"))}}return Tt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(At)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var en='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',Dn=At.open();if(Dn!==null&&(Dn.document.write(en),Dn.document.title=B.filename),Dn||typeof safari>"u")return Dn;break;case"datauri":case"dataurl":return At.document.location.href=this.output("datauristring",B);default:return null}},oa.foo=function(){try{return oa.apply(this,arguments)}catch(ie){var T=ie.stack||"";~T.indexOf(" at ")&&(T=T.split(" at ")[1]);var B="Error in function "+T.split(`
`)[0].split("<")[0]+": "+ie.message;if(!At.console)throw new Error(B);At.console.error(B,ie),At.alert&&alert(B)}},oa.foo.bar=oa,oa.foo),Yl=function(T){return Array.isArray(na)===!0&&na.indexOf(T)>-1};switch(r){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=Yl("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rt=r}var Jn=null;oe(),U();var Yf=h.__private__.getPageInfo=h.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_t[T].objId,pageNumber:T,pageContext:_t[T]}},ox=h.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in _t)if(_t[B].objId===T)break;return Yf(B)},sx=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:_t[z].objId,pageNumber:z,pageContext:_t[z]}};h.addPage=function(){return Km.apply(this,arguments),this},h.setPage=function(){return Jm.apply(this,arguments),se.call(this,Se[z]),this},h.insertPage=function(T){return this.addPage(),this.movePage(z,T),this},h.movePage=function(T,B){var ie,de;if(T>B){ie=Se[T],de=_t[T];for(var ge=T;ge>B;ge--)Se[ge]=Se[ge-1],_t[ge]=_t[ge-1];Se[B]=ie,_t[B]=de,this.setPage(B)}else if(T<B){ie=Se[T],de=_t[T];for(var Pe=T;Pe<B;Pe++)Se[Pe]=Se[Pe+1],_t[Pe]=_t[Pe+1];Se[B]=ie,_t[B]=de,this.setPage(B)}return this},h.deletePage=function(){return Jf.apply(this,arguments),this},h.__private__.text=h.text=function(T,B,ie,de,ge){var Pe,Oe,tt,ct,Tt,Ot,en,Dn,or,xn=(de=de||{}).scope||this;if(typeof T=="number"&&typeof B=="number"&&(typeof ie=="string"||Array.isArray(ie))){var pr=ie;ie=B,B=T,T=pr}if(arguments[3]instanceof bt==0?(tt=arguments[4],ct=arguments[5],un(en=arguments[3])==="object"&&en!==null||(typeof tt=="string"&&(ct=tt,tt=null),typeof en=="string"&&(ct=en,en=null),typeof en=="number"&&(tt=en,en=null),de={flags:en,angle:tt,align:ct})):(R("The transform parameter of text() with a Matrix value"),or=ge),isNaN(B)||isNaN(ie)||T==null)throw new Error("Invalid arguments passed to jsPDF.text");if(T.length===0)return xn;var sr,Mr="",ua=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:Zl,yi=xn.internal.scaleFactor;function sg(nn){return nn=nn.split("	").join(Array(de.TabLen||9).join(" ")),la(nn,en)}function Tc(nn){for(var pn,Xn=nn.concat(),mr=[],Wo=Xn.length;Wo--;)typeof(pn=Xn.shift())=="string"?mr.push(pn):Array.isArray(nn)&&(pn.length===1||pn[1]===void 0&&pn[2]===void 0)?mr.push(pn[0]):mr.push([pn[0],pn[1],pn[2]]);return mr}function iu(nn,pn){var Xn;if(typeof nn=="string")Xn=pn(nn)[0];else if(Array.isArray(nn)){for(var mr,Wo,ph=nn.concat(),kc=[],cg=ph.length;cg--;)typeof(mr=ph.shift())=="string"?kc.push(pn(mr)[0]):Array.isArray(mr)&&typeof mr[0]=="string"&&(Wo=pn(mr[0],mr[1],mr[2]),kc.push([Wo[0],Wo[1],Wo[2]]));Xn=kc}return Xn}var Ds=!1,au=!0;if(typeof T=="string")Ds=!0;else if(Array.isArray(T)){var ou=T.concat();Oe=[];for(var su,Hr=ou.length;Hr--;)(typeof(su=ou.shift())!="string"||Array.isArray(su)&&typeof su[0]!="string")&&(au=!1);Ds=au}if(Ds===!1)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');typeof T=="string"&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var lu=_e/xn.internal.scaleFactor,uu=lu*(ua-1);switch(de.baseline){case"bottom":ie-=uu;break;case"top":ie+=lu-uu;break;case"hanging":ie+=lu-2*uu;break;case"middle":ie+=lu/2-uu}if((Ot=de.maxWidth||0)>0&&(typeof T=="string"?T=xn.splitTextToSize(T,Ot):Object.prototype.toString.call(T)==="[object Array]"&&(T=T.reduce(function(nn,pn){return nn.concat(xn.splitTextToSize(pn,Ot))},[]))),Pe={text:T,x:B,y:ie,options:de,mutex:{pdfEscape:la,activeFontKey:Je,fonts:it,activeFontSize:_e}},zt.publish("preProcessText",Pe),T=Pe.text,tt=(de=Pe.options).angle,or instanceof bt==0&&tt&&typeof tt=="number"){tt*=Math.PI/180,de.rotationDirection===0&&(tt=-tt),N===A&&(tt=-tt);var ah=Math.cos(tt),oh=Math.sin(tt);or=new bt(ah,oh,-oh,ah,0,0)}else tt&&tt instanceof bt&&(or=tt);N!==A||or||(or=Fo),(Tt=de.charSpace||Ec)!==void 0&&(Mr+=O(F(Tt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Dn=de.horizontalScale)!==void 0&&(Mr+=O(100*Dn)+` Tz
`),de.lang;var Vn=-1,Ho=de.renderingMode!==void 0?de.renderingMode:de.stroke,Pc=xn.internal.getCurrentPageInfo().pageContext;switch(Ho){case 0:case!1:case"fill":Vn=0;break;case 1:case!0:case"stroke":Vn=1;break;case 2:case"fillThenStroke":Vn=2;break;case 3:case"invisible":Vn=3;break;case 4:case"fillAndAddForClipping":Vn=4;break;case 5:case"strokeAndAddPathForClipping":Vn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vn=6;break;case 7:case"addToPathForClipping":Vn=7}var lg=Pc.usedRenderingMode!==void 0?Pc.usedRenderingMode:-1;Vn!==-1?Mr+=Vn+` Tr
`:lg!==-1&&(Mr+=`0 Tr
`),Vn!==-1&&(Pc.usedRenderingMode=Vn),ct=de.align||"left";var ca,cu=_e*ua,sh=xn.internal.pageSize.getWidth(),lh=it[Je];Tt=de.charSpace||Ec,Ot=de.maxWidth||0,en=Object.assign({autoencode:!0,noBOM:!0},de.flags);var $s=[],du=function(nn){return xn.getStringUnitWidth(nn,{font:lh,charSpace:Tt,fontSize:_e,doKerning:!1})*_e/yi};if(Object.prototype.toString.call(T)==="[object Array]"){var ki;Oe=Tc(T),ct!=="left"&&(ca=Oe.map(du));var Ii,Fs=0;if(ct==="right"){B-=ca[0],T=[],Hr=Oe.length;for(var Go=0;Go<Hr;Go++)Go===0?(Ii=Bo(B),ki=qo(ie)):(Ii=F(Fs-ca[Go]),ki=-cu),T.push([Oe[Go],Ii,ki]),Fs=ca[Go]}else if(ct==="center"){B-=ca[0]/2,T=[],Hr=Oe.length;for(var Us=0;Us<Hr;Us++)Us===0?(Ii=Bo(B),ki=qo(ie)):(Ii=F((Fs-ca[Us])/2),ki=-cu),T.push([Oe[Us],Ii,ki]),Fs=ca[Us]}else if(ct==="left"){T=[],Hr=Oe.length;for(var uh=0;uh<Hr;uh++)T.push(Oe[uh])}else if(ct==="justify"&&lh.encoding==="Identity-H"){T=[],Hr=Oe.length,Ot=Ot!==0?Ot:sh;for(var Cc=0,Yn=0;Yn<Hr;Yn++)if(ki=Yn===0?qo(ie):-cu,Ii=Yn===0?Bo(B):Cc,Yn<Hr-1){var ug=F((Ot-ca[Yn])/(Oe[Yn].split(" ").length-1)),fo=Oe[Yn].split(" ");T.push([fo[0]+" ",Ii,ki]),Cc=0;for(var ho=1;ho<fo.length;ho++){var ch=(du(fo[ho-1]+" "+fo[ho])-du(fo[ho]))*yi+ug;ho==fo.length-1?T.push([fo[ho],ch,0]):T.push([fo[ho]+" ",ch,0]),Cc-=ch}}else T.push([Oe[Yn],Ii,ki]);T.push(["",Cc,0])}else{if(ct!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(T=[],Hr=Oe.length,Ot=Ot!==0?Ot:sh,Yn=0;Yn<Hr;Yn++){ki=Yn===0?qo(ie):-cu,Ii=Yn===0?Bo(B):0;var dh=Oe[Yn].split(" ").length-1,fh=dh>0?(Ot-ca[Yn])/dh:0;Yn<Hr-1?$s.push(O(F(fh))):$s.push(0),T.push([Oe[Yn],Ii,ki])}}}(typeof de.R2L=="boolean"?de.R2L:De)===!0&&(T=iu(T,function(nn,pn,Xn){return[nn.split("").reverse().join(""),pn,Xn]})),Pe={text:T,x:B,y:ie,options:de,mutex:{pdfEscape:la,activeFontKey:Je,fonts:it,activeFontSize:_e}},zt.publish("postProcessText",Pe),T=Pe.text,sr=Pe.mutex.isHex||!1;var hh=it[Je].encoding;hh!=="WinAnsiEncoding"&&hh!=="StandardEncoding"||(T=iu(T,function(nn,pn,Xn){return[sg(nn),pn,Xn]})),Oe=Tc(T),T=[];for(var Bs,qs,Vs,fu=Array.isArray(Oe[0])?1:0,zs="",hu=function(nn,pn,Xn){var mr="";return Xn instanceof bt?(Xn=typeof de.angle=="number"?$o(Xn,new bt(1,0,0,1,nn,pn)):$o(new bt(1,0,0,1,nn,pn),Xn),N===A&&(Xn=$o(new bt(1,0,0,-1,0,0),Xn)),mr=Xn.join(" ")+` Tm
`):mr=O(nn)+" "+O(pn)+` Td
`,mr},da=0;da<Oe.length;da++){switch(zs="",fu){case 1:Vs=(sr?"<":"(")+Oe[da][0]+(sr?">":")"),Bs=parseFloat(Oe[da][1]),qs=parseFloat(Oe[da][2]);break;case 0:Vs=(sr?"<":"(")+Oe[da]+(sr?">":")"),Bs=Bo(B),qs=qo(ie)}$s!==void 0&&$s[da]!==void 0&&(zs=$s[da]+` Tw
`),da===0?T.push(zs+hu(Bs,qs,or)+Vs):fu===0?T.push(zs+Vs):fu===1&&T.push(zs+hu(Bs,qs,or)+Vs)}T=fu===0?T.join(` Tj
T* `):T.join(` Tj
`),T+=` Tj
`;var po=`BT
/`;return po+=Je+" "+_e+` Tf
`,po+=O(_e*ua)+` TL
`,po+=Ql+`
`,po+=Mr,po+=T,ee(po+="ET"),p[Je]=!0,xn};var lx=h.__private__.clip=h.clip=function(T){return ee(T==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return lx("evenodd")},h.__private__.discardPath=h.discardPath=function(){return ee("n"),this};var co=h.__private__.isValidStyle=function(T){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)!==-1&&(B=!0),B};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(T){return co(T)&&(u=T),this};var eg=h.__private__.getStyle=h.getStyle=function(T){var B=u;switch(T){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=T}return B},tg=h.close=function(){return ee("h"),this};h.stroke=function(){return ee("S"),this},h.fill=function(T){return Ls("f",T),this},h.fillEvenOdd=function(T){return Ls("f*",T),this},h.fillStroke=function(T){return Ls("B",T),this},h.fillStrokeEvenOdd=function(T){return Ls("B*",T),this};var Ls=function(T,B){un(B)==="object"?cx(B,T):ee(T)},Xf=function(T){T===null||N===A&&T===void 0||(T=eg(T),ee(T))};function ux(T,B,ie,de,ge){var Pe=new pd(B||this.boundingBox,ie||this.xStep,de||this.yStep,this.gState,ge||this.matrix);Pe.stream=this.stream;var Oe=T+"$$"+this.cloneIndex+++"$$";return aa(Oe,Pe),Pe}var cx=function(T,B){var ie=xt[T.key],de=gt[ie];if(de instanceof Iu)ee("q"),ee(dx(B)),de.gState&&h.setGState(de.gState),ee(T.matrix.toString()+" cm"),ee("/"+ie+" sh"),ee("Q");else if(de instanceof pd){var ge=new bt(1,0,0,-1,0,ru());T.matrix&&(ge=ge.multiply(T.matrix||Fo),ie=ux.call(de,T.key,T.boundingBox,T.xStep,T.yStep,ge).id),ee("q"),ee("/Pattern cs"),ee("/"+ie+" scn"),de.gState&&h.setGState(de.gState),ee(B),ee("Q")}},dx=function(T){switch(T){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Zf=h.moveTo=function(T,B){return ee(O(F(T))+" "+O($(B))+" m"),this},Xl=h.lineTo=function(T,B){return ee(O(F(T))+" "+O($(B))+" l"),this},Ms=h.curveTo=function(T,B,ie,de,ge,Pe){return ee([O(F(T)),O($(B)),O(F(ie)),O($(de)),O(F(ge)),O($(Pe)),"c"].join(" ")),this};h.__private__.line=h.line=function(T,B,ie,de,ge){if(isNaN(T)||isNaN(B)||isNaN(ie)||isNaN(de)||!co(ge))throw new Error("Invalid arguments passed to jsPDF.line");return N===_?this.lines([[ie-T,de-B]],T,B,[1,1],ge||"S"):this.lines([[ie-T,de-B]],T,B,[1,1]).stroke()},h.__private__.lines=h.lines=function(T,B,ie,de,ge,Pe){var Oe,tt,ct,Tt,Ot,en,Dn,or,xn,pr,sr,Mr;if(typeof T=="number"&&(Mr=ie,ie=B,B=T,T=Mr),de=de||[1,1],Pe=Pe||!1,isNaN(B)||isNaN(ie)||!Array.isArray(T)||!Array.isArray(de)||!co(ge)||typeof Pe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zf(B,ie),Oe=de[0],tt=de[1],Tt=T.length,pr=B,sr=ie,ct=0;ct<Tt;ct++)(Ot=T[ct]).length===2?(pr=Ot[0]*Oe+pr,sr=Ot[1]*tt+sr,Xl(pr,sr)):(en=Ot[0]*Oe+pr,Dn=Ot[1]*tt+sr,or=Ot[2]*Oe+pr,xn=Ot[3]*tt+sr,pr=Ot[4]*Oe+pr,sr=Ot[5]*tt+sr,Ms(en,Dn,or,xn,pr,sr));return Pe&&tg(),Xf(ge),this},h.path=function(T){for(var B=0;B<T.length;B++){var ie=T[B],de=ie.c;switch(ie.op){case"m":Zf(de[0],de[1]);break;case"l":Xl(de[0],de[1]);break;case"c":Ms.apply(this,de);break;case"h":tg()}}return this},h.__private__.rect=h.rect=function(T,B,ie,de,ge){if(isNaN(T)||isNaN(B)||isNaN(ie)||isNaN(de)||!co(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return N===_&&(de=-de),ee([O(F(T)),O($(B)),O(F(ie)),O(F(de)),"re"].join(" ")),Xf(ge),this},h.__private__.triangle=h.triangle=function(T,B,ie,de,ge,Pe,Oe){if(isNaN(T)||isNaN(B)||isNaN(ie)||isNaN(de)||isNaN(ge)||isNaN(Pe)||!co(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ie-T,de-B],[ge-ie,Pe-de],[T-ge,B-Pe]],T,B,[1,1],Oe,!0),this},h.__private__.roundedRect=h.roundedRect=function(T,B,ie,de,ge,Pe,Oe){if(isNaN(T)||isNaN(B)||isNaN(ie)||isNaN(de)||isNaN(ge)||isNaN(Pe)||!co(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var tt=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*ie),Pe=Math.min(Pe,.5*de),this.lines([[ie-2*ge,0],[ge*tt,0,ge,Pe-Pe*tt,ge,Pe],[0,de-2*Pe],[0,Pe*tt,-ge*tt,Pe,-ge,Pe],[2*ge-ie,0],[-ge*tt,0,-ge,-Pe*tt,-ge,-Pe],[0,2*Pe-de],[0,-Pe*tt,ge*tt,-Pe,ge,-Pe]],T+ge,B,[1,1],Oe,!0),this},h.__private__.ellipse=h.ellipse=function(T,B,ie,de,ge){if(isNaN(T)||isNaN(B)||isNaN(ie)||isNaN(de)||!co(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pe=4/3*(Math.SQRT2-1)*ie,Oe=4/3*(Math.SQRT2-1)*de;return Zf(T+ie,B),Ms(T+ie,B-Oe,T+Pe,B-de,T,B-de),Ms(T-Pe,B-de,T-ie,B-Oe,T-ie,B),Ms(T-ie,B+Oe,T-Pe,B+de,T,B+de),Ms(T+Pe,B+de,T+ie,B+Oe,T+ie,B),Xf(ge),this},h.__private__.circle=h.circle=function(T,B,ie,de){if(isNaN(T)||isNaN(B)||isNaN(ie)||!co(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,B,ie,ie,de)},h.setFont=function(T,B,ie){return ie&&(B=I(B,ie)),Je=Xm(T,B,{disableWarning:!1}),this};var fx=h.__private__.getFont=h.getFont=function(){return it[Xm.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var T,B,ie={};for(T in Ct)if(Ct.hasOwnProperty(T))for(B in ie[T]=[],Ct[T])Ct[T].hasOwnProperty(B)&&ie[T].push(B);return ie},h.addFont=function(T,B,ie,de,ge){var Pe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pe.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Pe.indexOf(arguments[3])==-1&&(ie=I(ie,de)),Wm.call(this,T,B,ie,ge=ge||"Identity-H")};var Zl,Qf=t.lineWidth||.200025,kt=h.__private__.getLineWidth=h.getLineWidth=function(){return Qf},hx=h.__private__.setLineWidth=h.setLineWidth=function(T){return Qf=T,ee(O(F(T))+" w"),this};h.__private__.setLineDash=ht.API.setLineDash=ht.API.setLineDashPattern=function(T,B){if(T=T||[],B=B||0,isNaN(B)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map(function(ie){return O(F(ie))}).join(" "),B=O(F(B)),ee("["+T+"] "+B+" d"),this};var px=h.__private__.getLineHeight=h.getLineHeight=function(){return _e*Zl};h.__private__.getLineHeight=h.getLineHeight=function(){return _e*Zl};var mx=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(T){return typeof(T=T||1.15)=="number"&&(Zl=T),this},gx=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Zl};mx(t.lineHeight);var Bo=h.__private__.getHorizontalCoordinate=function(T){return F(T)},qo=h.__private__.getVerticalCoordinate=function(T){return N===A?T:_t[z].mediaBox.topRightY-_t[z].mediaBox.bottomLeftY-F(T)},yx=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(T){return O(Bo(T))},vx=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(T){return O(qo(T))},Sc=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return lo(Sc)},h.__private__.setStrokeColor=h.setDrawColor=function(T,B,ie,de){return Sc=ja({ch1:T,ch2:B,ch3:ie,ch4:de,pdfColorType:"draw",precision:2}),ee(Sc),this};var eh=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return lo(eh)},h.__private__.setFillColor=h.setFillColor=function(T,B,ie,de){return eh=ja({ch1:T,ch2:B,ch3:ie,ch4:de,pdfColorType:"fill",precision:2}),ee(eh),this};var Ql=t.textColor||"0 g",Ac=h.__private__.getTextColor=h.getTextColor=function(){return lo(Ql)};h.__private__.setTextColor=h.setTextColor=function(T,B,ie,de){return Ql=ja({ch1:T,ch2:B,ch3:ie,ch4:de,pdfColorType:"text",precision:3}),this};var Ec=t.charSpace,xx=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Ec||0)};h.__private__.setCharSpace=h.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ec=T,this};var th=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(T){var B=h.CapJoinStyles[T];if(B===void 0)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return th=B,ee(B+" J"),this};var nh=0;h.__private__.setLineJoin=h.setLineJoin=function(T){var B=h.CapJoinStyles[T];if(B===void 0)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return nh=B,ee(B+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(O(F(T))+" M"),this},h.GState=R0,h.setGState=function(T){(T=typeof T=="string"?mt[vn[T]]:eu(null,T)).equals(Mn)||(ee("/"+T.id+" gs"),Mn=T)};var eu=function(T,B){if(!T||!vn[T]){var ie=!1;for(var de in mt)if(mt.hasOwnProperty(de)&&mt[de].equals(B)){ie=!0;break}if(ie)B=mt[de];else{var ge="GS"+(Object.keys(mt).length+1).toString(10);mt[ge]=B,B.id=ge}return T&&(vn[T]=B.id),zt.publish("addGState",B),B}};h.addGState=function(T,B){return eu(T,B),this},h.saveGraphicsState=function(){return ee("q"),an.push({key:Je,size:_e,color:Ql}),this},h.restoreGraphicsState=function(){ee("Q");var T=an.pop();return Je=T.key,_e=T.size,Ql=T.color,Mn=null,this},h.setCurrentTransformationMatrix=function(T){return ee(T.toString()+" cm"),this},h.comment=function(T){return ee("#"+T),this};var tu=function(T,B){var ie=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ie},set:function(Pe){isNaN(Pe)||(ie=parseFloat(Pe))}});var de=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(Pe){isNaN(Pe)||(de=parseFloat(Pe))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Pe){ge=Pe.toString()}}),this},rh=function(T,B,ie,de){tu.call(this,T,B),this.type="rect";var ge=ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Oe){isNaN(Oe)||(ge=parseFloat(Oe))}});var Pe=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pe},set:function(Oe){isNaN(Oe)||(Pe=parseFloat(Oe))}}),this},Nc=function(){this.page=on,this.currentPage=z,this.pages=Se.slice(0),this.pagesContext=_t.slice(0),this.x=dt,this.y=Qt,this.matrix=Bt,this.width=ng(z),this.height=Vo(z),this.outputDestination=je,this.id="",this.objectNumber=-1};Nc.prototype.restore=function(){on=this.page,z=this.currentPage,_t=this.pagesContext,Se=this.pages,dt=this.x,Qt=this.y,Bt=this.matrix,rg(z,this.width),zo(z,this.height),je=this.outputDestination};var ih=function(T,B,ie,de,ge){ia.push(new Nc),on=z=0,Se=[],dt=T,Qt=B,Bt=ge,Kf([ie,de])};for(var nu in h.beginFormObject=function(T,B,ie,de,ge){return ih(T,B,ie,de,ge),this},h.endFormObject=function(T){return function(B){if(ra[B])ia.pop().restore();else{var ie=new Nc,de="Xo"+(Object.keys(Tr).length+1).toString(10);ie.id=de,ra[B]=de,Tr[de]=ie,zt.publish("addFormObject",ie),ia.pop().restore()}}(T),this},h.doFormObject=function(T,B){var ie=Tr[ra[T]];return ee("q"),ee(B.toString()+" cm"),ee("/"+ie.id+" Do"),ee("Q"),this},h.getFormObject=function(T){var B=Tr[ra[T]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},h.save=function(T,B){return T=T||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(Nu(Jl(Uo()),T),typeof Nu.unload=="function"&&At.setTimeout&&setTimeout(Nu.unload,911),this):new Promise(function(ie,de){try{var ge=Nu(Jl(Uo()),T);typeof Nu.unload=="function"&&At.setTimeout&&setTimeout(Nu.unload,911),ie(ge)}catch(Pe){de(Pe.message)}})},ht.API)ht.API.hasOwnProperty(nu)&&(nu==="events"&&ht.API.events.length?function(T,B){var ie,de,ge;for(ge=B.length-1;ge!==-1;ge--)ie=B[ge][0],de=B[ge][1],T.subscribe.apply(T,[ie].concat(typeof de=="function"?[de]:de))}(zt,ht.API.events):h[nu]=ht.API[nu]);function ng(T){return _t[T].mediaBox.topRightX-_t[T].mediaBox.bottomLeftX}function rg(T,B){_t[T].mediaBox.topRightX=B+_t[T].mediaBox.bottomLeftX}function Vo(T){return _t[T].mediaBox.topRightY-_t[T].mediaBox.bottomLeftY}function zo(T,B){_t[T].mediaBox.topRightY=B+_t[T].mediaBox.bottomLeftY}var ig=h.getPageWidth=function(T){return ng(T=T||z)/rt},ag=h.setPageWidth=function(T,B){rg(T,B*rt)},ru=h.getPageHeight=function(T){return Vo(T=T||z)/rt},og=h.setPageHeight=function(T,B){zo(T,B*rt)};return h.internal={pdfEscape:la,getStyle:eg,getFont:fx,getFontSize:Ae,getCharSpace:xx,getTextColor:Ac,getLineHeight:px,getLineHeightFactor:gx,getLineWidth:kt,write:Ve,getHorizontalCoordinate:Bo,getVerticalCoordinate:qo,getCoordinateString:yx,getVerticalCoordinateString:vx,collections:{},newObject:qn,newAdditionalObject:Gl,newObjectDeferred:Pr,newObjectDeferredBegin:Lr,getFilters:Ra,putStream:sa,events:zt,scaleFactor:rt,pageSize:{getWidth:function(){return ig(z)},setWidth:function(T){ag(z,T)},getHeight:function(){return ru(z)},setHeight:function(T){og(z,T)}},encryptionOptions:c,encryption:Jn,getEncryptor:function(T){return c!==null?Jn.encryptor(T,0):function(B){return B}},output:La,getNumberOfPages:Ym,pages:Se,out:ee,f2:C,f3:L,getPageInfo:Yf,getPageInfoByObjId:ox,getCurrentPageInfo:sx,getPDFVersion:y,Point:tu,Rectangle:rh,Matrix:bt,hasHotfix:Yl},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return ig(z)},set:function(T){ag(z,T)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return ru(z)},set:function(T){og(z,T)},enumerable:!0,configurable:!0}),(function(T){for(var B=0,ie=Ge.length;B<ie;B++){var de=Wm.call(this,T[B][0],T[B][1],T[B][2],Ge[B][3],!0);d===!1&&(p[de]=!0);var ge=T[B][0].split("-");Gm({id:de,fontName:ge[0],fontStyle:ge[1]||""})}zt.publish("addFonts",{fonts:it,dictionary:Ct})}).call(h,Ge),Je="F1",Km(i,n),zt.publish("initialized"),h}Kc.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Kc.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Kc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Kc.prototype.processOwnerPassword=function(t,e){return w5(b5(e).substr(0,5),t)},Kc.prototype.encryptor=function(t,e){var n=b5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return w5(n,r)}},R0.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||un(t)!==un(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},ht.API={events:[]},ht.version="3.0.3";var Gn=ht.API,tE=1,vc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},jt=function(t){return t.toFixed(2)},tl=function(t){return t.toFixed(5)};Gn.__acroform__={};var Ci=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},bO=function(t){return t*tE},vo=function(t){var e=new w7,n=Qe.internal.getHeight(t)||0,r=Qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(jt(r)),Number(jt(n))],e},VAe=Gn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},zAe=Gn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},HAe=Gn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},tr=Gn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HAe(t,e-1)},nr=Gn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return VAe(t,e-1)},rr=Gn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zAe(t,e-1)},GAe=Gn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],a=t[1],o=t[2],s=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(a+s)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(a)||0,[Number(jt(l.lowerLeft_X)),Number(jt(l.lowerLeft_Y)),Number(jt(l.upperRight_X)),Number(jt(l.upperRight_Y))]},WAe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=_5(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+jt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=vo(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},_5=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(C){return C.split(`
`)}):i.map(function(C){return[C]});var a=n,o=Qe.internal.getHeight(t)||0;o=o<0?-o:o;var s=Qe.internal.getWidth(t)||0;s=s<0?-s:s;var l=function(C,L,F){if(C+1<i.length){var $=L+" "+i[C+1][0];return by($,t,F).width<=s-4}return!1};a++;e:for(;a>0;){e="",a--;var u,c,d=by("3",t,a).height,p=t.multiline?o-a:(o-d)/2,h=p+=2,v=0,y=0,w=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+by(e,t,a=12).width+", FieldWidth:"+s+`
`;break}for(var b="",_=0,A=0;A<i.length;A++)if(i.hasOwnProperty(A)){var N=!1;if(i[A].length!==1&&w!==i[A].length-1){if((d+2)*(_+2)+2>o)continue e;b+=i[A][w],N=!0,y=A,A--}else{b=(b+=i[A][w]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var E=parseInt(A),P=l(E,b,a),I=A>=i.length-1;if(P&&!I){b+=" ",w=0;continue}if(P||I){if(I)y=E;else if(t.multiline&&(d+2)*(_+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(_+2)+2>o)continue e;y=E}}for(var O="",R=v;R<=y;R++){var D=i[R];if(t.multiline){if(R===y){O+=D[w]+" ",w=(w+1)%D.length;continue}if(R===v){O+=D[D.length-1]+" ";continue}}O+=D[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,c=by(O,t,a).width,t.textAlign){case"right":u=s-c-2;break;case"center":u=(s-c)/2;break;default:u=2}e+=jt(u)+" "+jt(h)+` Td
`,e+="("+vc(O)+`) Tj
`,e+=-jt(u)+` 0 Td
`,h=-(a+2),c=0,v=N?y:y+1,_++,b=""}break}return r.text=e,r.fontSize=a,r},by=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},KAe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},JAe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},YAe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(oo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(KAe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");tE=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new _7,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&JAe(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var s=r[o],l=[],u=s.Rect;if(s.Rect&&(s.Rect=GAe(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Qe.createDefaultAppearanceStream(s),un(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=u,s.hasAppearanceStream&&!s.appearanceStreamContent){var c=WAe(s);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(s.appearanceStreamContent){var d="";for(var p in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(p)){var h=s.appearanceStreamContent[p];if(d+="/"+p+" ",d+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var v=h[o];typeof v=="function"&&(v=v.call(i,s)),d+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=h)=="function"&&(v=v.call(i,s)),d+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}a&&function(y,w){for(var b in y)if(y.hasOwnProperty(b)){var _=b,A=y[b];w.internal.newObjectDeferredBegin(A.objId,!0),un(A)==="object"&&typeof A.putStream=="function"&&A.putStream(),delete y[_]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},b7=Gn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),un(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+vc(r(t[a].toString()))+")"):i+=t[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},dw=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+vc(r(t))+")"},_o=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};_o.prototype.toString=function(){return this.objId+" 0 R"},_o.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},_o.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:b7(i,this.objId,this.scope)}):i instanceof _o?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var w7=function(){_o.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ci(w7,_o);var _7=function(){_o.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+vc(n(t))+")"}},set:function(n){t=n}})};Ci(_7,_o);var oo=function t(){_o.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!tr(e,3)},set:function(b){b?this.F=nr(e,3):this.F=rr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof L0)return;a="FieldObject"+t.FieldNum++}var b=function(_){return _};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+vc(b(a))+")"},set:function(b){a=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(b){a=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(b){s=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/tE:u},set:function(b){u=b}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof L0||this instanceof Hu))return dw(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ir==0?dw(p,this.objId,this.scope):p},set:function(b){b=b.toString(),p=this instanceof Ir==0?b.substr(0,1)==="("?Vc(b.substr(1,b.length-2)):Vc(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ir==1?Vc(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof Ir==1?"/"+b:b}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ir==0?dw(h,this.objId,this.scope):h},set:function(b){b=b.toString(),h=this instanceof Ir==0?b.substr(0,1)==="("?Vc(b.substr(1,b.length-2)):Vc(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ir==1?Vc(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof Ir==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(b){b=!!b,y=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(b){v=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,1)},set:function(b){b?this.Ff=nr(this.Ff,1):this.Ff=rr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,2)},set:function(b){b?this.Ff=nr(this.Ff,2):this.Ff=rr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,3)},set:function(b){b?this.Ff=nr(this.Ff,3):this.Ff=rr(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');w=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(w){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};Ci(oo,_o);var Cd=function(){oo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return b7(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(a,o,s){s||(s=1);for(var l,u=[];l=o.exec(a);)u.push(l[s]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,18)},set:function(n){n?this.Ff=nr(this.Ff,18):this.Ff=rr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=nr(this.Ff,19):this.Ff=rr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,20)},set:function(n){n?(this.Ff=nr(this.Ff,20),e.sort()):this.Ff=rr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,22)},set:function(n){n?this.Ff=nr(this.Ff,22):this.Ff=rr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,23)},set:function(n){n?this.Ff=nr(this.Ff,23):this.Ff=rr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,27)},set:function(n){n?this.Ff=nr(this.Ff,27):this.Ff=rr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ci(Cd,oo);var kd=function(){Cd.call(this),this.fontName="helvetica",this.combo=!1};Ci(kd,Cd);var Id=function(){kd.call(this),this.combo=!0};Ci(Id,kd);var Uy=function(){Id.call(this),this.edit=!0};Ci(Uy,Id);var Ir=function(){oo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,15)},set:function(n){n?this.Ff=nr(this.Ff,15):this.Ff=rr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,16)},set:function(n){n?this.Ff=nr(this.Ff,16):this.Ff=rr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,17)},set:function(n){n?this.Ff=nr(this.Ff,17):this.Ff=rr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,26)},set:function(n){n?this.Ff=nr(this.Ff,26):this.Ff=rr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+vc(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){un(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ci(Ir,oo);var By=function(){Ir.call(this),this.pushButton=!0};Ci(By,Ir);var Od=function(){Ir.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ci(Od,Ir);var L0=function(){var t,e;oo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+vc(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){un(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ci(L0,oo),Od.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Od.prototype.createOption=function(t){var e=new L0;return e.Parent=this,e.optionName=t,this.Kids.push(e),XAe.call(this.scope,e),e};var qy=function(){Ir.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qe.CheckBox.createAppearanceStream()};Ci(qy,Ir);var Hu=function(){oo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,13)},set:function(e){e?this.Ff=nr(this.Ff,13):this.Ff=rr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,21)},set:function(e){e?this.Ff=nr(this.Ff,21):this.Ff=rr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,23)},set:function(e){e?this.Ff=nr(this.Ff,23):this.Ff=rr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,24)},set:function(e){e?this.Ff=nr(this.Ff,24):this.Ff=rr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,25)},set:function(e){e?this.Ff=nr(this.Ff,25):this.Ff=rr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,26)},set:function(e){e?this.Ff=nr(this.Ff,26):this.Ff=rr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ci(Hu,oo);var Vy=function(){Hu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,14)},set:function(t){t?this.Ff=nr(this.Ff,14):this.Ff=rr(this.Ff,14)}}),this.password=!0};Ci(Vy,Hu);var Qe={CheckBox:{createAppearanceStream:function(){return{N:{On:Qe.CheckBox.YesNormal},D:{On:Qe.CheckBox.YesPushDown,Off:Qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=_5(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+jt(Qe.internal.getWidth(t))+" "+jt(Qe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+jt(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],a=Qe.internal.getHeight(t),o=Qe.internal.getWidth(t),s=_5(t,t.caption);return i.push("1 g"),i.push("0 0 "+jt(o)+" "+jt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+jt(o-1)+" "+jt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+jt(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+jt(Qe.internal.getWidth(t))+" "+jt(Qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qe.RadioButton.Circle.YesNormal,e.D[t]=Qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Qe.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+tl(Qe.internal.getWidth(t)/2)+" "+tl(Qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Qe.internal.Bezier_C).toFixed(5)),o=Number((r*Qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tl(Qe.internal.getWidth(t)/2)+" "+tl(Qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+tl(Qe.internal.getWidth(t)/2)+" "+tl(Qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*Qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tl(Qe.internal.getWidth(t)/2)+" "+tl(Qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qe.RadioButton.Cross.YesNormal,e.D[t]=Qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=vo(t);e.scope=t.scope;var n=[],r=Qe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+jt(Qe.internal.getWidth(t)-2)+" "+jt(Qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(jt(r.x1.x)+" "+jt(r.x1.y)+" m"),n.push(jt(r.x2.x)+" "+jt(r.x2.y)+" l"),n.push(jt(r.x4.x)+" "+jt(r.x4.y)+" m"),n.push(jt(r.x3.x)+" "+jt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=Qe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+jt(Qe.internal.getWidth(t))+" "+jt(Qe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+jt(Qe.internal.getWidth(t)-2)+" "+jt(Qe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(jt(n.x1.x)+" "+jt(n.x1.y)+" m"),r.push(jt(n.x2.x)+" "+jt(n.x2.y)+" l"),r.push(jt(n.x4.x)+" "+jt(n.x4.y)+" m"),r.push(jt(n.x3.x)+" "+jt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=vo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+jt(Qe.internal.getWidth(t))+" "+jt(Qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qe.internal.getWidth(t),n=Qe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Qe.internal.getWidth=function(t){var e=0;return un(t)==="object"&&(e=bO(t.Rect[2])),e},Qe.internal.getHeight=function(t){var e=0;return un(t)==="object"&&(e=bO(t.Rect[3])),e};var XAe=Gn.addField=function(t){if(YAe(this,t),!(t instanceof oo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Gn.AcroFormChoiceField=Cd,Gn.AcroFormListBox=kd,Gn.AcroFormComboBox=Id,Gn.AcroFormEditBox=Uy,Gn.AcroFormButton=Ir,Gn.AcroFormPushButton=By,Gn.AcroFormRadioButton=Od,Gn.AcroFormCheckBox=qy,Gn.AcroFormTextField=Hu,Gn.AcroFormPasswordField=Vy,Gn.AcroFormAppearance=Qe,Gn.AcroForm={ChoiceField:Cd,ListBox:kd,ComboBox:Id,EditBox:Uy,Button:Ir,PushButton:By,RadioButton:Od,CheckBox:qy,TextField:Hu,PasswordField:Vy,Appearance:Qe},ht.AcroForm={ChoiceField:Cd,ListBox:kd,ComboBox:Id,EditBox:Uy,Button:Ir,PushButton:By,RadioButton:Od,CheckBox:qy,TextField:Hu,PasswordField:Vy,Appearance:Qe};ht.AcroForm;function S7(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(C,L){var F,$,V,Y,W,U=n;if((L=L||n)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(P(C))for(W in r)for(V=r[W],F=0;F<V.length;F+=1){for(Y=!0,$=0;$<V[F].length;$+=1)if(V[F][$]!==void 0&&V[F][$]!==C[$]){Y=!1;break}if(Y===!0){U=W;break}}else for(W in r)for(V=r[W],F=0;F<V.length;F+=1){for(Y=!0,$=0;$<V[F].length;$+=1)if(V[F][$]!==void 0&&V[F][$]!==C.charCodeAt($)){Y=!1;break}if(Y===!0){U=W;break}}return U===n&&L!==n&&(U=L),U},a=function C(L){for(var F=this.internal.write,$=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:L.width}),Y.push({key:"Height",value:L.height}),L.colorSpace===b.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===b.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var W="",U=0,Q=L.transparency.length;U<Q;U++)W+=L.transparency[U]+" "+L.transparency[U]+" ";Y.push({key:"Mask",value:"["+W+"]"})}L.sMask!==void 0&&Y.push({key:"SMask",value:L.objectId+1+" 0 R"});var le=L.filter!==void 0?["/"+L.filter]:void 0;if($({data:L.data,additionalKeyValues:Y,alreadyAppliedFilters:le,objectId:L.objectId}),F("endobj"),"sMask"in L&&L.sMask!==void 0){var oe,j=(oe=L.sMaskBitsPerComponent)!==null&&oe!==void 0?oe:L.bitsPerComponent,z={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:j,data:L.sMask};"filter"in L&&(z.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(j," /Columns ").concat(L.width),z.filter=L.filter),C.call(this,z)}if(L.colorSpace===b.INDEXED){var K=this.internal.newObject();$({data:O(new Uint8Array(L.palette)),objectId:K}),F("endobj")}},o=function(){var C=this.internal.collections[e+"images"];for(var L in C)a.call(this,C[L])},s=function(){var C,L=this.internal.collections[e+"images"],F=this.internal.write;for(var $ in L)F("/I"+(C=L[$]).index,C.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},u=function(){var C=this.internal.collections[e+"images"];return l.call(this),C},c=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(C){return typeof t["process"+C.toUpperCase()]=="function"},p=function(C){return un(C)==="object"&&C.nodeType===1},h=function(C,L){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var F=""+C.getAttribute("src");if(F.indexOf("data:image/")===0)return Fy(unescape(F).split("base64,").pop());var $=t.loadFile(F,!0);if($!==void 0)return $}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var V;switch(L){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;default:V="image/jpeg"}return Fy(C.toDataURL(V,1).split("base64,").pop())}},v=function(C){var L=this.internal.collections[e+"images"];if(L){for(var F in L)if(C===L[F].alias)return L[F]}},y=function(C,L,F){return C||L||(C=-96,L=-96),C<0&&(C=-1*F.width*72/C/this.internal.scaleFactor),L<0&&(L=-1*F.height*72/L/this.internal.scaleFactor),C===0&&(C=L*F.width/F.height),L===0&&(L=C*F.height/F.width),[C,L]},w=function(C,L,F,$,V,Y){var W=y.call(this,F,$,V),U=this.internal.getCoordinateString,Q=this.internal.getVerticalCoordinateString,le=u.call(this);if(F=W[0],$=W[1],le[V.index]=V,Y){Y*=Math.PI/180;var oe=Math.cos(Y),j=Math.sin(Y),z=function(re){return re.toFixed(4)},K=[z(oe),z(j),z(-1*j),z(oe),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,U(C),Q(L+$),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([U(F),"0","0",U($),"0","0","cm"].join(" "))):this.internal.write([U(F),"0","0",U($),U(C),Q(L+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=t.__addimage__.sHashCode=function(C){var L,F,$=0;if(typeof C=="string")for(F=C.length,L=0;L<F;L++)$=($<<5)-$+C.charCodeAt(L),$|=0;else if(P(C))for(F=C.byteLength/2,L=0;L<F;L++)$=($<<5)-$+C[L],$|=0;return $},N=t.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var L=!0;return C.length===0&&(L=!1),C.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(L=!1),L},E=t.__addimage__.extractImageFromDataUrl=function(C){if(C==null||!(C=C.trim()).startsWith("data:"))return null;var L=C.indexOf(",");return L<0?null:C.substring(0,L).trim().endsWith("base64")?C.substring(L+1):null};t.__addimage__.isArrayBuffer=function(C){return C instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(C){return C instanceof Int8Array||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array},I=t.__addimage__.binaryStringToUint8Array=function(C){for(var L=C.length,F=new Uint8Array(L),$=0;$<L;$++)F[$]=C.charCodeAt($);return F},O=t.__addimage__.arrayBufferToBinaryString=function(C){for(var L="",F=P(C)?C:new Uint8Array(C),$=0;$<F.length;$+=8192)L+=String.fromCharCode.apply(null,F.subarray($,$+8192));return L};t.addImage=function(){var C,L,F,$,V,Y,W,U,Q;if(typeof arguments[1]=="number"?(L=n,F=arguments[1],$=arguments[2],V=arguments[3],Y=arguments[4],W=arguments[5],U=arguments[6],Q=arguments[7]):(L=arguments[1],F=arguments[2],$=arguments[3],V=arguments[4],Y=arguments[5],W=arguments[6],U=arguments[7],Q=arguments[8]),un(C=arguments[0])==="object"&&!p(C)&&"imageData"in C){var le=C;C=le.imageData,L=le.format||L||n,F=le.x||F||0,$=le.y||$||0,V=le.w||le.width||V,Y=le.h||le.height||Y,W=le.alias||W,U=le.compression||U,Q=le.rotation||le.angle||Q}var oe=this.internal.getFilters();if(U===void 0&&oe.indexOf("FlateEncode")!==-1&&(U="SLOW"),isNaN(F)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var j=R.call(this,C,L,W,U);return w.call(this,F,$,V,Y,j,Q),this};var R=function(C,L,F,$){var V,Y,W;if(typeof C=="string"&&i(C)===n){C=unescape(C);var U=D(C,!1);(U!==""||(U=t.loadFile(C,!0))!==void 0)&&(C=U)}if(p(C)&&(C=h(C,L)),L=i(C,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((W=F)==null||W.length===0)&&(F=function(Q){return typeof Q=="string"||P(Q)?A(Q):P(Q.data)?A(Q.data):null}(C)),(V=v.call(this,F))||(C instanceof Uint8Array||L==="RGBA"||(Y=C,C=I(C)),V=this["process"+L.toUpperCase()](C,c.call(this),F,function(Q){return Q&&typeof Q=="string"&&(Q=Q.toUpperCase()),Q in t.image_compression?Q:_.NONE}($),Y)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},D=t.__addimage__.convertBase64ToBinaryString=function(C,L){L=typeof L!="boolean"||L;var F,$="";if(typeof C=="string"){var V;F=(V=E(C))!==null&&V!==void 0?V:C;try{$=Fy(F)}catch(Y){if(L)throw N(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};t.getImageProperties=function(C){var L,F,$="";if(p(C)&&(C=h(C)),typeof C=="string"&&i(C)===n&&(($=D(C,!1))===""&&($=t.loadFile(C)||""),C=$),F=i(C),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(C instanceof Uint8Array||(C=I(C)),!(L=this["process"+F.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=F,L}})(ht.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};ht.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,c=!1,d=0;d<u.length&&!c;d++)switch((r=u[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var h=this.internal.pdfEscape,v=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(y.objId),_=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y)+"] ")+"/Contents ("+h(b(r.contents))+")",a+=" /Popup "+w.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(b(_))+") >>",y.content=a;var A=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+s(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+s(r.bounds.y)+"] ")+" /Parent "+A,r.open&&(a+=" /Open true"),a+=" >>",w.content=a,this.internal.write(y.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+s(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+s(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(v(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var E=this.annotations._nameMap[r.options.name];r.options.pageNumber=E.page,r.options.top=E.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var P=s(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,a,o){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+a)},options:o,type:"link"})},t.textWithLink=function(n,r,i,a){var o,s,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var c=this.splitTextToSize(n,s).length;o=Math.ceil(u*c)}else s=l,o=u;return this.text(n,r,i,a),i+=.2*u,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,i-u,s,o,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ht.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},s=t.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&i.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&a(y)&&e[y.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(y){var w=0,b=n,_="",A=0;for(w=0;w<y.length;w+=1)b[y.charCodeAt(w)]!==void 0?(A++,typeof(b=b[y.charCodeAt(w)])=="number"&&(_+=String.fromCharCode(b),b=n,A=0),w===y.length-1&&(b=n,_+=y.charAt(w-(A-1)),w-=A-1,A=0)):(b=n,_+=y.charAt(w-A),w-=A,A=0);return _};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(y,w,b){return o(y)?a(y)===!1?-1:!u(y)||!o(w)&&!o(b)||!o(b)&&s(w)||s(y)&&!o(w)||s(y)&&l(w)||s(y)&&s(w)?0:c(y)&&o(w)&&!s(w)&&o(b)&&u(b)?3:s(y)||!o(b)?1:2:-1},h=function(y){var w=0,b=0,_=0,A="",N="",E="",P=(y=y||"").split("\\s+"),I=[];for(w=0;w<P.length;w+=1){for(I.push(""),b=0;b<P[w].length;b+=1)A=P[w][b],N=P[w][b-1],E=P[w][b+1],o(A)?(_=p(A,N,E),I[w]+=_!==-1?String.fromCharCode(e[A.charCodeAt(0)][_]):A):I[w]+=A;I[w]=d(I[w])}return I.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var y,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(w)){var _=0;for(b=[],_=0;_<w.length;_+=1)Array.isArray(w[_])?b.push([h(w[_][0]),w[_][1],w[_][2]]):b.push([h(w[_])]);y=b}else y=h(w);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",v])}(ht.API),ht.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(s){n=s}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(s){r=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ht.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,v=0,y=0,w=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=u.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(A,N){return A.concat(w.splitTextToSize(N,b))},[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)h<(y=this.getStringUnitWidth(l[_],{font:d})*c)&&(h=y);return h!==0&&(v=l.length),{w:h/=p,h:Math.max((v*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,h&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,c,d,p){if(r.call(this),!c)throw new Error("No data for PDF table.");var h,v,y,w,b=[],_=[],A=[],N={},E={},P=[],I=[],O=(p=p||{}).autoSize||!1,R=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,C=p.margins||Object.assign({width:this.getPageWidth()},e),L=typeof p.padding=="number"?p.padding:3,F=p.headerBackgroundColor||"#c8c8c8",$=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=$,this.setFontSize(D),d==null)_=b=Object.keys(c[0]),A=b.map(function(){return"left"});else if(Array.isArray(d)&&un(d[0])==="object")for(b=d.map(function(le){return le.name}),_=d.map(function(le){return le.prompt||le.name||""}),A=d.map(function(le){return le.align||"left"}),h=0;h<d.length;h+=1)E[d[h].name]=.7499990551181103*d[h].width;else Array.isArray(d)&&typeof d[0]=="string"&&(_=b=d,A=b.map(function(){return"left"}));if(O||Array.isArray(d)&&typeof d[0]=="string")for(h=0;h<b.length;h+=1){for(N[w=b[h]]=c.map(function(le){return le[w]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(_[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=N[w],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)P.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[w]=Math.max.apply(null,P)+L+L,P=[]}if(R){var V={};for(h=0;h<b.length;h+=1)V[b[h]]={},V[b[h]].text=_[h],V[b[h]].align=A[h];var Y=s.call(this,V,E);I=b.map(function(le){return new a(l,u,E[le],Y,V[le].text,void 0,V[le].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var W=d.reduce(function(le,oe){return le[oe.name]=oe.align,le},{});for(h=0;h<c.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:c[h]},this);var U=s.call(this,c[h],E);for(y=0;y<b.length;y+=1){var Q=c[h][b[y]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:y,data:Q},this),o.call(this,new a(l,u,E[b[y]],U,Q,h+2,W[b[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var s=function(l,u){var c=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(h){var v=l[h];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[h]-c-c)},this).map(function(h){return this.getLineHeightFactor()*h.length*d/p+c+c},this).reduce(function(h,v){return Math.max(h,v)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){c=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,p.push(c)),c.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(v)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(ht.API);var A7={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},E7=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],S5=S7(E7),N7=[100,200,300,400,500,600,700,800,900],ZAe=S7(N7);function fw(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return A7[a=a||"normal"]?a:"normal"}(t.style),r=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(t.weight),i=function(a){return typeof S5[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function wO(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var QAe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_O={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function SO(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function AO(t){return t.trimLeft()}function eEe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function tEe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var wy,EO,NO,zc,_y,TO,PO,CO,hw=["times"];function kO(t,e,n,r,i){var a=4,o=OO;switch(i){case ht.API.image_compression.FAST:a=1,o=IO;break;case ht.API.image_compression.MEDIUM:a=6,o=jO;break;case ht.API.image_compression.SLOW:a=9,o=RO}t=function(l,u,c,d){for(var p,h=l.length/u,v=new Uint8Array(l.length+h),y=[nEe,IO,OO,jO,RO],w=0;w<h;w+=1){var b=w*u,_=l.subarray(b,b+u);if(d)v.set(d(_,c,p),b+w);else{for(var A=y.length,N=[],E=0;E<A;E+=1)N[E]=y[E](_,c,p);var P=iEe(N.concat());v.set(N[P],b+w)}p=_}return v}(t,e,Math.ceil(n*r/8),o);var s=g5(t,{level:a});return ht.API.__addimage__.arrayBufferToBinaryString(s)}function nEe(t){var e=Array.apply([],t);return e.unshift(0),e}function IO(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var a=t[i-e]||0;r[i+1]=t[i]-a+256&255}return r}function OO(t,e,n){var r=t.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var o=n&&n[a]||0;i[a+1]=t[a]-o+256&255}return i}function jO(t,e,n){var r=t.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var o=t[a-e]||0,s=n&&n[a]||0;i[a+1]=t[a]+256-(o+s>>>1)&255}return i}function RO(t,e,n){var r=t.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var o=rEe(t[a-e]||0,n&&n[a]||0,n&&n[a-e]||0);i[a+1]=t[a]-o+256&255}return i}function rEe(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),a=Math.abs(t+e-n-n);return r<=i&&r<=a?t:i<=a?e:n}function iEe(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function pw(t,e,n){var r=e*n,i=Math.floor(r/8),a=16-(r-8*i+n),o=(1<<n)-1;return T7(t,i)>>a&o}function LO(t,e,n,r){var i=n*r,a=Math.floor(i/8),o=16-(i-8*a+r),s=(1<<r)-1,l=(e&s)<<o;(function(u,c,d){if(c+1<u.byteLength)u.setUint16(c,d,!1);else{var p=d>>8&255;u.setUint8(c,p)}})(t,a,T7(t,a)&~(s<<o)&65535|l)}function T7(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function aEe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,o=1<<1+(7&i);t[e++],t[e++];var s=null,l=null;a&&(s=e,l=o,e+=3*o);var u=!0,c=[],d=0,p=null,h=0,v=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];d=t[e++]|t[e++]<<8,p=t[e++],1&y||(p=null),h=y>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var w=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,N=t[e++],E=N>>6&1,P=1<<1+(7&N),I=s,O=l,R=!1;N>>7&&(R=!0,I=e,O=P,e+=3*P);var D=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}c.push({x:w,y:b,width:_,height:A,has_local_palette:R,palette_offset:I,palette_size:O,data_offset:D,data_length:e-D,transparent_index:p,interlaced:!!E,delay:d,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return v},this.frameInfo=function(L){if(L<0||L>=c.length)throw new Error("Frame index out of range.");return c[L]},this.decodeAndBlitFrameBGRA=function(L,F){var $=this.frameInfo(L),V=$.width*$.height,Y=new Uint8Array(V);MO(t,$.data_offset,Y,V);var W=$.palette_offset,U=$.transparent_index;U===null&&(U=256);var Q=$.width,le=n-Q,oe=Q,j=4*($.y*n+$.x),z=4*(($.y+$.height)*n+$.x),K=j,re=4*le;$.interlaced===!0&&(re+=4*n*7);for(var ae=8,fe=0,xe=Y.length;fe<xe;++fe){var ue=Y[fe];if(oe===0&&(oe=Q,(K+=re)>=z&&(re=4*le+4*n*(ae-1),K=j+(Q+le)*(ae<<1),ae>>=1)),ue===U)K+=4;else{var ye=t[W+3*ue],Se=t[W+3*ue+1],me=t[W+3*ue+2];F[K++]=me,F[K++]=Se,F[K++]=ye,F[K++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(L,F){var $=this.frameInfo(L),V=$.width*$.height,Y=new Uint8Array(V);MO(t,$.data_offset,Y,V);var W=$.palette_offset,U=$.transparent_index;U===null&&(U=256);var Q=$.width,le=n-Q,oe=Q,j=4*($.y*n+$.x),z=4*(($.y+$.height)*n+$.x),K=j,re=4*le;$.interlaced===!0&&(re+=4*n*7);for(var ae=8,fe=0,xe=Y.length;fe<xe;++fe){var ue=Y[fe];if(oe===0&&(oe=Q,(K+=re)>=z&&(re=4*le+4*n*(ae-1),K=j+(Q+le)*(ae<<1),ae>>=1)),ue===U)K+=4;else{var ye=t[W+3*ue],Se=t[W+3*ue+1],me=t[W+3*ue+2];F[K++]=ye,F[K++]=Se,F[K++]=me,F[K++]=255}--oe}}}function MO(t,e,n,r){for(var i=t[e++],a=1<<i,o=a+1,s=o+1,l=i+1,u=(1<<l)-1,c=0,d=0,p=0,h=t[e++],v=new Int32Array(4096),y=null;;){for(;c<16&&h!==0;)d|=t[e++]<<c,c+=8,h===1?h=t[e++]:--h;if(c<l)break;var w=d&u;if(d>>=l,c-=l,w!==a){if(w===o)break;for(var b=w<s?w:y,_=0,A=b;A>a;)A=v[A]>>8,++_;var N=A;if(p+_+(b!==w?1:0)>r)return void gn.log("Warning, gif stream longer than expected.");n[p++]=N;var E=p+=_;for(b!==w&&(n[p++]=N),A=b;_--;)A=v[A],n[--E]=255&A,A>>=8;y!==null&&s<4096&&(v[s++]=y<<8|N,s>=u+1&&l<12&&(++l,u=u<<1|1)),y=w}else s=o+1,u=(1<<(l=i+1))-1,y=null}return p!==r&&gn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function mw(t){var e,n,r,i,a,o=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),d=new Array(65535),p=new Array(65535),h=new Array(64),v=new Array(64),y=[],w=0,b=7,_=new Array(64),A=new Array(64),N=new Array(64),E=new Array(256),P=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(j,z){for(var K=0,re=0,ae=new Array,fe=1;fe<=16;fe++){for(var xe=1;xe<=j[fe];xe++)ae[z[re]]=[],ae[z[re]][0]=K,ae[z[re]][1]=fe,re++,K++;K*=2}return ae}function W(j){for(var z=j[0],K=j[1]-1;K>=0;)z&1<<K&&(w|=1<<b),K--,--b<0&&(w==255?(U(255),U(0)):U(w),b=7,w=0)}function U(j){y.push(j)}function Q(j){U(j>>8&255),U(255&j)}function le(j,z,K,re,ae){for(var fe,xe=ae[0],ue=ae[240],ye=function(_e,Re){var Ae,De,Me,st,Fe,We,vt,nt,Je,rt,dt=0;for(Je=0;Je<8;++Je){Ae=_e[dt],De=_e[dt+1],Me=_e[dt+2],st=_e[dt+3],Fe=_e[dt+4],We=_e[dt+5],vt=_e[dt+6];var Qt=Ae+(nt=_e[dt+7]),Bt=Ae-nt,it=De+vt,Ct=De-vt,an=Me+We,gt=Me-We,xt=st+Fe,mt=st-Fe,vn=Qt+xt,Mn=Qt-xt,on=it+an,_t=it-an;_e[dt]=vn+on,_e[dt+4]=vn-on;var zt=.707106781*(_t+Mn);_e[dt+2]=Mn+zt,_e[dt+6]=Mn-zt;var na=.382683433*((vn=mt+gt)-(_t=Ct+Bt)),Tr=.5411961*vn+na,ra=1.306562965*_t+na,ia=.707106781*(on=gt+Ct),bt=Bt+ia,$o=Bt-ia;_e[dt+5]=$o+Tr,_e[dt+3]=$o-Tr,_e[dt+1]=bt+ra,_e[dt+7]=bt-ra,dt+=8}for(dt=0,Je=0;Je<8;++Je){Ae=_e[dt],De=_e[dt+8],Me=_e[dt+16],st=_e[dt+24],Fe=_e[dt+32],We=_e[dt+40],vt=_e[dt+48];var Fo=Ae+(nt=_e[dt+56]),aa=Ae-nt,oa=De+vt,qn=De-vt,Pr=Me+We,Lr=Me-We,Gl=st+Fe,Rs=st-Fe,Oa=Fo+Gl,lo=Fo-Gl,ja=oa+Pr,Ra=oa-Pr;_e[dt]=Oa+ja,_e[dt+32]=Oa-ja;var sa=.707106781*(Ra+lo);_e[dt+16]=lo+sa,_e[dt+48]=lo-sa;var Wl=.382683433*((Oa=Rs+Lr)-(Ra=qn+aa)),uo=.5411961*Oa+Wl,Kl=1.306562965*Ra+Wl,xc=.707106781*(ja=Lr+qn),bc=aa+xc,wc=aa-xc;_e[dt+40]=wc+uo,_e[dt+24]=wc-uo,_e[dt+8]=bc+Kl,_e[dt+56]=bc-Kl,dt++}for(Je=0;Je<64;++Je)rt=_e[Je]*Re[Je],h[Je]=rt>0?rt+.5|0:rt-.5|0;return h}(j,z),Se=0;Se<64;++Se)v[I[Se]]=ye[Se];var me=v[0]-K;K=v[0],me==0?W(re[0]):(W(re[p[fe=32767+me]]),W(d[fe]));for(var je=63;je>0&&v[je]==0;)je--;if(je==0)return W(xe),K;for(var se,ee=1;ee<=je;){for(var Ve=ee;v[ee]==0&&ee<=je;)++ee;var qe=ee-Ve;if(qe>=16){se=qe>>4;for(var Ge=1;Ge<=se;++Ge)W(ue);qe&=15}fe=32767+v[ee],W(ae[(qe<<4)+p[fe]]),W(d[fe]),ee++}return je!=63&&W(xe),K}function oe(j){j=Math.min(Math.max(j,1),100),a!=j&&(function(z){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var ae=o((K[re]*z+50)/100);ae=Math.min(Math.max(ae,1),255),s[I[re]]=ae}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var ue=o((fe[xe]*z+50)/100);ue=Math.min(Math.max(ue,1),255),l[I[xe]]=ue}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,me=0;me<8;me++)for(var je=0;je<8;je++)u[Se]=1/(s[I[Se]]*ye[me]*ye[je]*8),c[Se]=1/(l[I[Se]]*ye[me]*ye[je]*8),Se++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),a=j)}this.encode=function(j,z){z&&oe(z),y=new Array,w=0,b=7,Q(65496),Q(65504),Q(16),U(74),U(70),U(73),U(70),U(0),U(1),U(1),U(0),Q(1),Q(1),U(0),U(0),function(){Q(65499),Q(132),U(0);for(var De=0;De<64;De++)U(s[De]);U(1);for(var Me=0;Me<64;Me++)U(l[Me])}(),function(De,Me){Q(65472),Q(17),U(8),Q(Me),Q(De),U(3),U(1),U(17),U(0),U(2),U(17),U(1),U(3),U(17),U(1)}(j.width,j.height),function(){Q(65476),Q(418),U(0);for(var De=0;De<16;De++)U(O[De+1]);for(var Me=0;Me<=11;Me++)U(R[Me]);U(16);for(var st=0;st<16;st++)U(D[st+1]);for(var Fe=0;Fe<=161;Fe++)U(C[Fe]);U(1);for(var We=0;We<16;We++)U(L[We+1]);for(var vt=0;vt<=11;vt++)U(F[vt]);U(17);for(var nt=0;nt<16;nt++)U($[nt+1]);for(var Je=0;Je<=161;Je++)U(V[Je])}(),Q(65498),Q(12),U(3),U(1),U(0),U(2),U(17),U(3),U(17),U(0),U(63),U(0);var K=0,re=0,ae=0;w=0,b=7,this.encode.displayName="_encode_";for(var fe,xe,ue,ye,Se,me,je,se,ee,Ve=j.data,qe=j.width,Ge=j.height,_e=4*qe,Re=0;Re<Ge;){for(fe=0;fe<_e;){for(Se=_e*Re+fe,je=-1,se=0,ee=0;ee<64;ee++)me=Se+(se=ee>>3)*_e+(je=4*(7&ee)),Re+se>=Ge&&(me-=_e*(Re+1+se-Ge)),fe+je>=_e&&(me-=fe+je-_e+4),xe=Ve[me++],ue=Ve[me++],ye=Ve[me++],_[ee]=(P[xe]+P[ue+256|0]+P[ye+512|0]>>16)-128,A[ee]=(P[xe+768|0]+P[ue+1024|0]+P[ye+1280|0]>>16)-128,N[ee]=(P[xe+1280|0]+P[ue+1536|0]+P[ye+1792|0]>>16)-128;K=le(_,u,K,e,r),re=le(A,c,re,n,i),ae=le(N,c,ae,n,i),fe+=32}Re+=8}if(b>=0){var Ae=[];Ae[1]=b+1,Ae[0]=(1<<b+1)-1,W(Ae)}return Q(65497),new Uint8Array(y)},t=t||50,function(){for(var j=String.fromCharCode,z=0;z<256;z++)E[z]=j(z)}(),e=Y(O,R),n=Y(L,F),r=Y(D,C),i=Y($,V),function(){for(var j=1,z=2,K=1;K<=15;K++){for(var re=j;re<z;re++)p[32767+re]=K,d[32767+re]=[],d[32767+re][1]=K,d[32767+re][0]=re;for(var ae=-(z-1);ae<=-j;ae++)p[32767+ae]=K,d[32767+ae]=[],d[32767+ae][1]=K,d[32767+ae][0]=z-1+ae;j<<=1,z<<=1}}(),function(){for(var j=0;j<256;j++)P[j]=19595*j,P[j+256|0]=38470*j,P[j+512|0]=7471*j+32768,P[j+768|0]=-11059*j,P[j+1024|0]=-21709*j,P[j+1280|0]=32768*j+8421375,P[j+1536|0]=-27439*j,P[j+1792|0]=-5329*j}(),oe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ba(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function DO(t){function e(R){if(!R)throw Error("assert :P")}function n(R,D,C){for(var L=0;4>L;L++)if(R[D+L]!=C.charCodeAt(L))return!0;return!1}function r(R,D,C,L,F){for(var $=0;$<F;$++)R[D+$]=C[L+$]}function i(R,D,C,L){for(var F=0;F<L;F++)R[D+F]=C}function a(R){return new Int32Array(R)}function o(R,D){for(var C=[],L=0;L<R;L++)C.push(new D);return C}function s(R,D){var C=[];return function L(F,$,V){for(var Y=V[$],W=0;W<Y&&(F.push(V.length>$+1?[]:new D),!(V.length<$+1));W++)L(F[W],$+1,V)}(C,0,R),C}var l=function(){var R=this;function D(g,S){for(var k=1<<S-1>>>0;g&k;)k>>>=1;return k?(g&k-1)+k:g}function C(g,S,k,M,q){e(!(M%k));do g[S+(M-=k)]=q;while(0<M)}function L(g,S,k,M,q){if(e(2328>=q),512>=q)var H=a(512);else if((H=a(q))==null)return 0;return function(G,J,Z,te,he,we){var ne,pe,ve=J,Ee=1<<Z,be=a(16),Te=a(16);for(e(he!=0),e(te!=null),e(G!=null),e(0<Z),pe=0;pe<he;++pe){if(15<te[pe])return 0;++be[te[pe]]}if(be[0]==he)return 0;for(Te[1]=0,ne=1;15>ne;++ne){if(be[ne]>1<<ne)return 0;Te[ne+1]=Te[ne]+be[ne]}for(pe=0;pe<he;++pe)ne=te[pe],0<te[pe]&&(we[Te[ne]++]=pe);if(Te[15]==1)return(te=new F).g=0,te.value=we[0],C(G,ve,1,Ee,te),Ee;var Ce,Le=-1,Ie=Ee-1,ft=0,Ze=1,Mt=1,at=1<<Z;for(pe=0,ne=1,he=2;ne<=Z;++ne,he<<=1){if(Ze+=Mt<<=1,0>(Mt-=be[ne]))return 0;for(;0<be[ne];--be[ne])(te=new F).g=ne,te.value=we[pe++],C(G,ve+ft,he,at,te),ft=D(ft,ne)}for(ne=Z+1,he=2;15>=ne;++ne,he<<=1){if(Ze+=Mt<<=1,0>(Mt-=be[ne]))return 0;for(;0<be[ne];--be[ne]){if(te=new F,(ft&Ie)!=Le){for(ve+=at,Ce=1<<(Le=ne)-Z;15>Le&&!(0>=(Ce-=be[Le]));)++Le,Ce<<=1;Ee+=at=1<<(Ce=Le-Z),G[J+(Le=ft&Ie)].g=Ce+Z,G[J+Le].value=ve-J-Le}te.g=ne-Z,te.value=we[pe++],C(G,ve+(ft>>Z),he,at,te),ft=D(ft,ne)}}return Ze!=2*Te[15]-1?0:Ee}(g,S,k,M,q,H)}function F(){this.value=this.g=0}function $(){this.value=this.g=0}function V(){this.G=o(5,F),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(du,$)}function Y(g,S,k,M){e(g!=null),e(S!=null),e(2147483648>M),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=S,g.pa=k,g.Jd=S,g.Yc=k+M,g.Zc=4<=M?k+M-4+1:k,xe(g)}function W(g,S){for(var k=0;0<S--;)k|=ye(g,128)<<S;return k}function U(g,S){var k=W(g,S);return ue(g)?-k:k}function Q(g,S,k,M){var q,H=0;for(e(g!=null),e(S!=null),e(4294967288>M),g.Sb=M,g.Ra=0,g.u=0,g.h=0,4<M&&(M=4),q=0;q<M;++q)H+=S[k+q]<<8*q;g.Ra=H,g.bb=M,g.oa=S,g.pa=k}function le(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Fs-8>>>0,++g.bb,g.u-=8;re(g)&&(g.h=1,g.u=0)}function oe(g,S){if(e(0<=S),!g.h&&S<=Ii){var k=K(g)&ki[S];return g.u+=S,le(g),k}return g.h=1,g.u=0}function j(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(g){return g.Ra>>>(g.u&Fs-1)>>>0}function re(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Fs}function ae(g,S){g.u=S,g.h=re(g)}function fe(g){g.u>=Go&&(e(g.u>=Go),le(g))}function xe(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function ue(g){return W(g,1)}function ye(g,S){var k=g.Ca;0>g.b&&xe(g);var M=g.b,q=k*S>>>8,H=(g.I>>>M>q)+0;for(H?(k-=q,g.I-=q+1<<M>>>0):k=q+1,M=k,q=0;256<=M;)q+=8,M>>=8;return M=7^q+Us[M],g.b-=M,g.Ca=(k<<M)-1,H}function Se(g,S,k){g[S+0]=k>>24&255,g[S+1]=k>>16&255,g[S+2]=k>>8&255,g[S+3]=255&k}function me(g,S){return g[S+0]|g[S+1]<<8}function je(g,S){return me(g,S)|g[S+2]<<16}function se(g,S){return me(g,S)|me(g,S+2)<<16}function ee(g,S){var k=1<<S;return e(g!=null),e(0<S),g.X=a(k),g.X==null?0:(g.Mb=32-S,g.Xa=S,1)}function Ve(g,S){e(g!=null),e(S!=null),e(g.Xa==S.Xa),r(S.X,0,g.X,0,1<<S.Xa)}function qe(){this.X=[],this.Xa=this.Mb=0}function Ge(g,S,k,M){e(k!=null),e(M!=null);var q=k[0],H=M[0];return q==0&&(q=(g*H+S/2)/S),H==0&&(H=(S*q+g/2)/g),0>=q||0>=H?0:(k[0]=q,M[0]=H,1)}function _e(g,S){return g+(1<<S)-1>>>S}function Re(g,S){return((4278255360&g)+(4278255360&S)>>>0&4278255360)+((16711935&g)+(16711935&S)>>>0&16711935)>>>0}function Ae(g,S){R[S]=function(k,M,q,H,G,J,Z){var te;for(te=0;te<G;++te){var he=R[g](J[Z+te-1],q,H+te);J[Z+te]=Re(k[M+te],he)}}}function De(){this.ud=this.hd=this.jd=0}function Me(g,S){return((4278124286&(g^S))>>>1)+(g&S)>>>0}function st(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Fe(g,S){return st(g+(g-S+.5>>1))}function We(g,S,k){return Math.abs(S-k)-Math.abs(g-k)}function vt(g,S,k,M,q,H,G){for(M=H[G-1],k=0;k<q;++k)H[G+k]=M=Re(g[S+k],M)}function nt(g,S,k,M,q){var H;for(H=0;H<k;++H){var G=g[S+H],J=G>>8&255,Z=16711935&(Z=(Z=16711935&G)+((J<<16)+J));M[q+H]=(4278255360&G)+Z>>>0}}function Je(g,S){S.jd=255&g,S.hd=g>>8&255,S.ud=g>>16&255}function rt(g,S,k,M,q,H){var G;for(G=0;G<M;++G){var J=S[k+G],Z=J>>>8,te=J,he=255&(he=(he=J>>>16)+((g.jd<<24>>24)*(Z<<24>>24)>>>5));te=255&(te=(te+=(g.hd<<24>>24)*(Z<<24>>24)>>>5)+((g.ud<<24>>24)*(he<<24>>24)>>>5)),q[H+G]=(4278255360&J)+(he<<16)+te}}function dt(g,S,k,M,q){R[S]=function(H,G,J,Z,te,he,we,ne,pe){for(Z=we;Z<ne;++Z)for(we=0;we<pe;++we)te[he++]=q(J[M(H[G++])])},R[g]=function(H,G,J,Z,te,he,we){var ne=8>>H.b,pe=H.Ea,ve=H.K[0],Ee=H.w;if(8>ne)for(H=(1<<H.b)-1,Ee=(1<<ne)-1;G<J;++G){var be,Te=0;for(be=0;be<pe;++be)be&H||(Te=M(Z[te++])),he[we++]=q(ve[Te&Ee]),Te>>=ne}else R["VP8LMapColor"+k](Z,te,ve,Ee,he,we,G,J,pe)}}function Qt(g,S,k,M,q){for(k=S+k;S<k;){var H=g[S++];M[q++]=H>>16&255,M[q++]=H>>8&255,M[q++]=255&H}}function Bt(g,S,k,M,q){for(k=S+k;S<k;){var H=g[S++];M[q++]=H>>16&255,M[q++]=H>>8&255,M[q++]=255&H,M[q++]=H>>24&255}}function it(g,S,k,M,q){for(k=S+k;S<k;){var H=(G=g[S++])>>16&240|G>>12&15,G=240&G|G>>28&15;M[q++]=H,M[q++]=G}}function Ct(g,S,k,M,q){for(k=S+k;S<k;){var H=(G=g[S++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;M[q++]=H,M[q++]=G}}function an(g,S,k,M,q){for(k=S+k;S<k;){var H=g[S++];M[q++]=255&H,M[q++]=H>>8&255,M[q++]=H>>16&255}}function gt(g,S,k,M,q,H){if(H==0)for(k=S+k;S<k;)Se(M,((H=g[S++])[0]>>24|H[1]>>8&65280|H[2]<<8&16711680|H[3]<<24)>>>0),q+=32;else r(M,q,g,S,k)}function xt(g,S){R[S][0]=R[g+"0"],R[S][1]=R[g+"1"],R[S][2]=R[g+"2"],R[S][3]=R[g+"3"],R[S][4]=R[g+"4"],R[S][5]=R[g+"5"],R[S][6]=R[g+"6"],R[S][7]=R[g+"7"],R[S][8]=R[g+"8"],R[S][9]=R[g+"9"],R[S][10]=R[g+"10"],R[S][11]=R[g+"11"],R[S][12]=R[g+"12"],R[S][13]=R[g+"13"],R[S][14]=R[g+"0"],R[S][15]=R[g+"0"]}function mt(g){return g==_x||g==Sx||g==gg||g==Ax}function vn(){this.eb=[],this.size=this.A=this.fb=0}function Mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function on(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vn,this.f.kb=new Mn,this.sd=null}function _t(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function zt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function na(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Tr(g,S){var k=g.T,M=S.ba.f.RGBA,q=M.eb,H=M.fb+g.ka*M.A,G=ha[S.ba.S],J=g.y,Z=g.O,te=g.f,he=g.N,we=g.ea,ne=g.W,pe=S.cc,ve=S.dc,Ee=S.Mc,be=S.Nc,Te=g.ka,Ce=g.ka+g.T,Le=g.U,Ie=Le+1>>1;for(Te==0?G(J,Z,null,null,te,he,we,ne,te,he,we,ne,q,H,null,null,Le):(G(S.ec,S.fc,J,Z,pe,ve,Ee,be,te,he,we,ne,q,H-M.A,q,H,Le),++k);Te+2<Ce;Te+=2)pe=te,ve=he,Ee=we,be=ne,he+=g.Rc,ne+=g.Rc,H+=2*M.A,G(J,(Z+=2*g.fa)-g.fa,J,Z,pe,ve,Ee,be,te,he,we,ne,q,H-M.A,q,H,Le);return Z+=g.fa,g.j+Ce<g.o?(r(S.ec,S.fc,J,Z,Le),r(S.cc,S.dc,te,he,Ie),r(S.Mc,S.Nc,we,ne,Ie),k--):1&Ce||G(J,Z,null,null,te,he,we,ne,te,he,we,ne,q,H+M.A,null,null,Le),k}function ra(g,S,k){var M=g.F,q=[g.J];if(M!=null){var H=g.U,G=S.ba.S,J=G==mg||G==gg;S=S.ba.f.RGBA;var Z=[0],te=g.ka;Z[0]=g.T,g.Kb&&(te==0?--Z[0]:(--te,q[0]-=g.width),g.j+g.ka+g.T==g.o&&(Z[0]=g.o-g.j-te));var he=S.eb;te=S.fb+te*S.A,g=uE(M,q[0],g.width,H,Z,he,te+(J?0:3),S.A),e(k==Z),g&&mt(G)&&mh(he,te,J,H,Z,S.A)}return 0}function ia(g){var S=g.ma,k=S.ba.S,M=11>k,q=k==hg||k==pg||k==mg||k==wx||k==12||mt(k);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!sh(S.Oa,g,q?11:12))return 0;if(q&&mt(k)&&sg(),g.da)alert("todo:use_scaling");else{if(M){if(S.Ib=na,g.Kb){if(k=g.U+1>>1,S.memory=a(g.U+2*k),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+g.U,S.Mc=S.cc,S.Nc=S.dc+k,S.Ib=Tr,sg()}}else alert("todo:EmitYUV");q&&(S.Jb=ra,M&&ua())}if(M&&!EE){for(g=0;256>g;++g)Y7[g]=89858*(g-128)+vg>>yg,Q7[g]=-22014*(g-128)+vg,Z7[g]=-45773*(g-128),X7[g]=113618*(g-128)+vg>>yg;for(g=yh;g<Tx;++g)S=76283*(g-16)+vg>>yg,eF[g-yh]=Vn(S,255),tF[g-yh]=Vn(S+8>>4,15);EE=1}return 1}function bt(g){var S=g.ma,k=g.U,M=g.T;return e(!(1&g.ka)),0>=k||0>=M?0:(k=S.Ib(g,S),S.Jb!=null&&S.Jb(g,S,k),S.Dc+=k,1)}function $o(g){g.ma.memory=null}function Fo(g,S,k,M){return oe(g,8)!=47?0:(S[0]=oe(g,14)+1,k[0]=oe(g,14)+1,M[0]=oe(g,1),oe(g,3)!=0?0:!g.h)}function aa(g,S){if(4>g)return g+1;var k=g-2>>1;return(2+(1&g)<<k)+oe(S,k)+1}function oa(g,S){return 120<S?S-120:1<=(k=((k=M7[S-1])>>4)*g+(8-(15&k)))?k:1;var k}function qn(g,S,k){var M=K(k),q=g[S+=255&M].g-8;return 0<q&&(ae(k,k.u+8),M=K(k),S+=g[S].value,S+=M&(1<<q)-1),ae(k,k.u+g[S].g),g[S].value}function Pr(g,S,k){return k.g+=g.g,k.value+=g.value<<S>>>0,e(8>=k.g),g.g}function Lr(g,S,k){var M=g.xc;return e((S=M==0?0:g.vc[g.md*(k>>M)+(S>>M)])<g.Wb),g.Ya[S]}function Gl(g,S,k,M){var q=g.ab,H=g.c*S,G=g.C;S=G+S;var J=k,Z=M;for(M=g.Ta,k=g.Ua;0<q--;){var te=g.gc[q],he=G,we=S,ne=J,pe=Z,ve=(Z=M,J=k,te.Ea);switch(e(he<we),e(we<=te.nc),te.hc){case 2:Yn(ne,pe,(we-he)*ve,Z,J);break;case 0:var Ee=he,be=we,Te=Z,Ce=J,Le=(at=te).Ea;Ee==0&&(uh(ne,pe,null,null,1,Te,Ce),vt(ne,pe+1,0,0,Le-1,Te,Ce+1),pe+=Le,Ce+=Le,++Ee);for(var Ie=1<<at.b,ft=Ie-1,Ze=_e(Le,at.b),Mt=at.K,at=at.w+(Ee>>at.b)*Ze;Ee<be;){var qt=Mt,gr=at,Dt=1;for(Cc(ne,pe,Te,Ce-Le,1,Te,Ce);Dt<Le;){var ot=(Dt&~ft)+Ie;ot>Le&&(ot=Le),(0,dh[qt[gr++]>>8&15])(ne,pe+ +Dt,Te,Ce+Dt-Le,ot-Dt,Te,Ce+Dt),Dt=ot}pe+=Le,Ce+=Le,++Ee&ft||(at+=Ze)}we!=te.nc&&r(Z,J-ve,Z,J+(we-he-1)*ve,ve);break;case 1:for(ve=ne,be=pe,Le=(ne=te.Ea)-(Ce=ne&~(Te=(pe=1<<te.b)-1)),Ee=_e(ne,te.b),Ie=te.K,te=te.w+(he>>te.b)*Ee;he<we;){for(ft=Ie,Ze=te,Mt=new De,at=be+Ce,qt=be+ne;be<at;)Je(ft[Ze++],Mt),fh(Mt,ve,be,pe,Z,J),be+=pe,J+=pe;be<qt&&(Je(ft[Ze++],Mt),fh(Mt,ve,be,Le,Z,J),be+=Le,J+=Le),++he&Te||(te+=Ee)}break;case 3:if(ne==Z&&pe==J&&0<te.b){for(be=Z,ne=ve=J+(we-he)*ve-(Ce=(we-he)*_e(te.Ea,te.b)),pe=Z,Te=J,Ee=[],Ce=(Le=Ce)-1;0<=Ce;--Ce)Ee[Ce]=pe[Te+Ce];for(Ce=Le-1;0<=Ce;--Ce)be[ne+Ce]=Ee[Ce];ug(te,he,we,Z,ve,Z,J)}else ug(te,he,we,ne,pe,Z,J)}J=M,Z=k}Z!=k&&r(M,k,J,Z,H)}function Rs(g,S){var k=g.V,M=g.Ba+g.c*g.C,q=S-g.C;if(e(S<=g.l.o),e(16>=q),0<q){var H=g.l,G=g.Ta,J=g.Ua,Z=H.width;if(Gl(g,q,k,M),q=J=[J],e((k=g.C)<(M=S)),e(H.v<H.va),M>H.o&&(M=H.o),k<H.j){var te=H.j-k;k=H.j,q[0]+=te*Z}if(k>=M?k=0:(q[0]+=4*H.v,H.ka=k-H.j,H.U=H.va-H.v,H.T=M-k,k=1),k){if(J=J[0],11>(k=g.ca).S){var he=k.f.RGBA,we=(M=k.S,q=H.U,H=H.T,te=he.eb,he.A),ne=H;for(he=he.fb+g.Ma*he.A;0<ne--;){var pe=G,ve=J,Ee=q,be=te,Te=he;switch(M){case fg:hh(pe,ve,Ee,be,Te);break;case hg:Bs(pe,ve,Ee,be,Te);break;case _x:Bs(pe,ve,Ee,be,Te),mh(be,Te,0,Ee,1,0);break;case gE:fu(pe,ve,Ee,be,Te);break;case pg:gt(pe,ve,Ee,be,Te,1);break;case Sx:gt(pe,ve,Ee,be,Te,1),mh(be,Te,0,Ee,1,0);break;case mg:gt(pe,ve,Ee,be,Te,0);break;case gg:gt(pe,ve,Ee,be,Te,0),mh(be,Te,1,Ee,1,0);break;case wx:qs(pe,ve,Ee,be,Te);break;case Ax:qs(pe,ve,Ee,be,Te),lE(be,Te,Ee,1,0);break;case yE:Vs(pe,ve,Ee,be,Te);break;default:e(0)}J+=Z,he+=we}g.Ma+=H}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=k.height)}}g.C=S,e(g.C<=g.i)}function Oa(g){var S;if(0<g.ua)return 0;for(S=0;S<g.Wb;++S){var k=g.Ya[S].G,M=g.Ya[S].H;if(0<k[1][M[1]+0].g||0<k[2][M[2]+0].g||0<k[3][M[3]+0].g)return 0}return 1}function lo(g,S,k,M,q,H){if(g.Z!=0){var G=g.qd,J=g.rd;for(e(Gs[g.Z]!=null);S<k;++S)Gs[g.Z](G,J,M,q,M,q,H),G=M,J=q,q+=H;g.qd=G,g.rd=J}}function ja(g,S){var k=g.l.ma,M=k.Z==0||k.Z==1?g.l.j:g.C;if(M=g.C<M?M:g.C,e(S<=g.l.o),S>M){var q=g.l.width,H=k.ca,G=k.tb+q*M,J=g.V,Z=g.Ba+g.c*M,te=g.gc;e(g.ab==1),e(te[0].hc==3),ho(te[0],M,S,J,Z,H,G),lo(k,M,S,H,G,q)}g.C=g.Ma=S}function Ra(g,S,k,M,q,H,G){var J=g.$/M,Z=g.$%M,te=g.m,he=g.s,we=k+g.$,ne=we;q=k+M*q;var pe=k+M*H,ve=280+he.ua,Ee=g.Pb?J:16777216,be=0<he.ua?he.Wa:null,Te=he.wc,Ce=we<pe?Lr(he,Z,J):null;e(g.C<H),e(pe<=q);var Le=!1;e:for(;;){for(;Le||we<pe;){var Ie=0;if(J>=Ee){var ft=we-k;e((Ee=g).Pb),Ee.wd=Ee.m,Ee.xd=ft,0<Ee.s.ua&&Ve(Ee.s.Wa,Ee.s.vb),Ee=J+$7}if(Z&Te||(Ce=Lr(he,Z,J)),e(Ce!=null),Ce.Qb&&(S[we]=Ce.qb,Le=!0),!Le)if(fe(te),Ce.jc){Ie=te,ft=S;var Ze=we,Mt=Ce.pd[K(Ie)&du-1];e(Ce.jc),256>Mt.g?(ae(Ie,Ie.u+Mt.g),ft[Ze]=Mt.value,Ie=0):(ae(Ie,Ie.u+Mt.g-256),e(256<=Mt.value),Ie=Mt.value),Ie==0&&(Le=!0)}else Ie=qn(Ce.G[0],Ce.H[0],te);if(te.h)break;if(Le||256>Ie){if(!Le)if(Ce.nd)S[we]=(Ce.qb|Ie<<8)>>>0;else{if(fe(te),Le=qn(Ce.G[1],Ce.H[1],te),fe(te),ft=qn(Ce.G[2],Ce.H[2],te),Ze=qn(Ce.G[3],Ce.H[3],te),te.h)break;S[we]=(Ze<<24|Le<<16|Ie<<8|ft)>>>0}if(Le=!1,++we,++Z>=M&&(Z=0,++J,G!=null&&J<=H&&!(J%16)&&G(g,J),be!=null))for(;ne<we;)Ie=S[ne++],be.X[(506832829*Ie&4294967295)>>>be.Mb]=Ie}else if(280>Ie){if(Ie=aa(Ie-256,te),ft=qn(Ce.G[4],Ce.H[4],te),fe(te),ft=oa(M,ft=aa(ft,te)),te.h)break;if(we-k<ft||q-we<Ie)break e;for(Ze=0;Ze<Ie;++Ze)S[we+Ze]=S[we+Ze-ft];for(we+=Ie,Z+=Ie;Z>=M;)Z-=M,++J,G!=null&&J<=H&&!(J%16)&&G(g,J);if(e(we<=q),Z&Te&&(Ce=Lr(he,Z,J)),be!=null)for(;ne<we;)Ie=S[ne++],be.X[(506832829*Ie&4294967295)>>>be.Mb]=Ie}else{if(!(Ie<ve))break e;for(Le=Ie-280,e(be!=null);ne<we;)Ie=S[ne++],be.X[(506832829*Ie&4294967295)>>>be.Mb]=Ie;Ie=we,e(!(Le>>>(ft=be).Xa)),S[Ie]=ft.X[Le],Le=!0}Le||e(te.h==re(te))}if(g.Pb&&te.h&&we<q)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Ve(g.s.vb,g.s.Wa);else{if(te.h)break e;G!=null&&G(g,J>H?H:J),g.a=0,g.$=we-k}return 1}return g.a=3,0}function sa(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var S=g.Wa;S!=null&&(S.X=null),g.vb=null,e(g!=null)}function Wl(){var g=new ct;return g==null?null:(g.a=0,g.xb=bE,xt("Predictor","VP8LPredictors"),xt("Predictor","VP8LPredictors_C"),xt("PredictorAdd","VP8LPredictorsAdd"),xt("PredictorAdd","VP8LPredictorsAdd_C"),Yn=nt,fh=rt,hh=Qt,Bs=Bt,qs=it,Vs=Ct,fu=an,R.VP8LMapColor32b=fo,R.VP8LMapColor8b=ch,g)}function uo(g,S,k,M,q){var H=1,G=[g],J=[S],Z=M.m,te=M.s,he=null,we=0;e:for(;;){if(k)for(;H&&oe(Z,1);){var ne=G,pe=J,ve=M,Ee=1,be=ve.m,Te=ve.gc[ve.ab],Ce=oe(be,2);if(ve.Oc&1<<Ce)H=0;else{switch(ve.Oc|=1<<Ce,Te.hc=Ce,Te.Ea=ne[0],Te.nc=pe[0],Te.K=[null],++ve.ab,e(4>=ve.ab),Ce){case 0:case 1:Te.b=oe(be,3)+2,Ee=uo(_e(Te.Ea,Te.b),_e(Te.nc,Te.b),0,ve,Te.K),Te.K=Te.K[0];break;case 3:var Le,Ie=oe(be,8)+1,ft=16<Ie?0:4<Ie?1:2<Ie?2:3;if(ne[0]=_e(Te.Ea,ft),Te.b=ft,Le=Ee=uo(Ie,1,0,ve,Te.K)){var Ze,Mt=Ie,at=Te,qt=1<<(8>>at.b),gr=a(qt);if(gr==null)Le=0;else{var Dt=at.K[0],ot=at.w;for(gr[0]=at.K[0][0],Ze=1;Ze<1*Mt;++Ze)gr[Ze]=Re(Dt[ot+Ze],gr[Ze-1]);for(;Ze<4*qt;++Ze)gr[Ze]=0;at.K[0]=null,at.K[0]=gr,Le=1}}Ee=Le;break;case 2:break;default:e(0)}H=Ee}}if(G=G[0],J=J[0],H&&oe(Z,1)&&!(H=1<=(we=oe(Z,4))&&11>=we)){M.a=3;break e}var ze;if(ze=H)t:{var Zn,Lt,Ht,Nn=M,Dr=G,ai=J,zn=we,Gr=k,oi=Nn.m,yr=Nn.s,Gt=[null],sn=1,Hn=0,ln=D7[zn];n:for(;;){if(Gr&&oe(oi,1)){var $r=oe(oi,3)+2,Da=_e(Dr,$r),Qn=_e(ai,$r),vi=Da*Qn;if(!uo(Da,Qn,0,Nn,Gt))break n;for(Gt=Gt[0],yr.xc=$r,Zn=0;Zn<vi;++Zn){var mn=Gt[Zn]>>8&65535;Gt[Zn]=mn,mn>=sn&&(sn=mn+1)}}if(oi.h)break n;for(Lt=0;5>Lt;++Lt){var vr=vE[Lt];!Lt&&0<zn&&(vr+=1<<zn),Hn<vr&&(Hn=vr)}var ji=o(sn*ln,F),si=sn,Ri=o(si,V);if(Ri==null)var Li=null;else e(65536>=si),Li=Ri;var xi=a(Hn);if(Li==null||xi==null||ji==null){Nn.a=1;break n}var Mi=ji;for(Zn=Ht=0;Zn<sn;++Zn){var bn=Li[Zn],Di=bn.G,$a=bn.H,pu=0,Jo=1,Fr=0;for(Lt=0;5>Lt;++Lt){vr=vE[Lt],Di[Lt]=Mi,$a[Lt]=Ht,!Lt&&0<zn&&(vr+=1<<zn);i:{var bg,Px=vr,wg=Nn,vh=xi,iF=Mi,aF=Ht,Cx=0,Ws=wg.m,oF=oe(Ws,1);if(i(vh,0,0,Px),oF){var sF=oe(Ws,1)+1,lF=oe(Ws,1),PE=oe(Ws,lF==0?1:8);vh[PE]=1,sF==2&&(vh[PE=oe(Ws,8)]=1);var _g=1}else{var CE=a(19),kE=oe(Ws,4)+4;if(19<kE){wg.a=3;var Sg=0;break i}for(bg=0;bg<kE;++bg)CE[L7[bg]]=oe(Ws,3);var kx=void 0,xh=void 0,IE=wg,uF=CE,Ag=Px,OE=vh,Ix=0,Ks=IE.m,jE=8,RE=o(128,F);r:for(;L(RE,0,7,uF,19);){if(oe(Ks,1)){var cF=2+2*oe(Ks,3);if((kx=2+oe(Ks,cF))>Ag)break r}else kx=Ag;for(xh=0;xh<Ag&&kx--;){fe(Ks);var LE=RE[0+(127&K(Ks))];ae(Ks,Ks.u+LE.g);var Ic=LE.value;if(16>Ic)OE[xh++]=Ic,Ic!=0&&(jE=Ic);else{var dF=Ic==16,ME=Ic-16,fF=j7[ME],DE=oe(Ks,O7[ME])+fF;if(xh+DE>Ag)break r;for(var hF=dF?jE:0;0<DE--;)OE[xh++]=hF}}Ix=1;break r}Ix||(IE.a=3),_g=Ix}(_g=_g&&!Ws.h)&&(Cx=L(iF,aF,8,vh,Px)),_g&&Cx!=0?Sg=Cx:(wg.a=3,Sg=0)}if(Sg==0)break n;if(Jo&&R7[Lt]==1&&(Jo=Mi[Ht].g==0),pu+=Mi[Ht].g,Ht+=Sg,3>=Lt){var bh,Ox=xi[0];for(bh=1;bh<vr;++bh)xi[bh]>Ox&&(Ox=xi[bh]);Fr+=Ox}}if(bn.nd=Jo,bn.Qb=0,Jo&&(bn.qb=(Di[3][$a[3]+0].value<<24|Di[1][$a[1]+0].value<<16|Di[2][$a[2]+0].value)>>>0,pu==0&&256>Di[0][$a[0]+0].value&&(bn.Qb=1,bn.qb+=Di[0][$a[0]+0].value<<8)),bn.jc=!bn.Qb&&6>Fr,bn.jc){var Eg,Yo=bn;for(Eg=0;Eg<du;++Eg){var Js=Eg,Ys=Yo.pd[Js],Ng=Yo.G[0][Yo.H[0]+Js];256<=Ng.value?(Ys.g=Ng.g+256,Ys.value=Ng.value):(Ys.g=0,Ys.value=0,Js>>=Pr(Ng,8,Ys),Js>>=Pr(Yo.G[1][Yo.H[1]+Js],16,Ys),Js>>=Pr(Yo.G[2][Yo.H[2]+Js],0,Ys),Pr(Yo.G[3][Yo.H[3]+Js],24,Ys))}}}yr.vc=Gt,yr.Wb=sn,yr.Ya=Li,yr.yc=ji,ze=1;break t}ze=0}if(!(H=ze)){M.a=3;break e}if(0<we){if(te.ua=1<<we,!ee(te.Wa,we)){M.a=1,H=0;break e}}else te.ua=0;var jx=M,$E=G,pF=J,Rx=jx.s,Lx=Rx.xc;if(jx.c=$E,jx.i=pF,Rx.md=_e($E,Lx),Rx.wc=Lx==0?-1:(1<<Lx)-1,k){M.xb=H7;break e}if((he=a(G*J))==null){M.a=1,H=0;break e}H=(H=Ra(M,he,0,G,J,J,null))&&!Z.h;break e}return H?(q!=null?q[0]=he:(e(he==null),e(k)),M.$=0,k||sa(te)):sa(te),H}function Kl(g,S){var k=g.c*g.i,M=k+S+16*S;return e(g.c<=S),g.V=a(M),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+k+S,1)}function xc(g,S){var k=g.C,M=S-k,q=g.V,H=g.Ba+g.c*k;for(e(S<=g.l.o);0<M;){var G=16<M?16:M,J=g.l.ma,Z=g.l.width,te=Z*G,he=J.ca,we=J.tb+Z*k,ne=g.Ta,pe=g.Ua;Gl(g,G,q,H),cE(ne,pe,he,we,te),lo(J,k,k+G,he,we,Z),M-=G,q+=G*g.c,k+=G}e(k==S),g.C=g.Ma=S}function bc(){this.ub=this.yd=this.td=this.Rb=0}function wc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ix(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Wf(){this.Yb=function(){var g=[];return function S(k,M,q){for(var H=q[M],G=0;G<H&&(k.push(q.length>M+1?[]:0),!(q.length<M+1));G++)S(k[G],M+1,q)}(g,0,[3,11]),g}()}function Gm(){this.jb=a(3),this.Wc=s([4,8],Wf),this.Xc=s([4,17],Wf)}function Wm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function la(){this.ld=this.La=this.dd=this.tc=0}function Kf(){this.Na=this.la=0}function Km(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Jf(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Jm(){this.uc=this.M=this.Nb=0,this.wa=Array(new la),this.Y=0,this.ya=Array(new Jf),this.aa=0,this.l=new _c}function Ym(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Xm(){this.cb=this.a=0,this.sc="",this.m=new j,this.Od=new bc,this.Kc=new wc,this.ed=new Wm,this.Qa=new ix,this.Ic=this.$c=this.Aa=0,this.D=new Jm,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,j),this.ia=0,this.pb=o(4,Km),this.Pa=new Gm,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ym),this.Hd=0,this.rb=Array(new Kf),this.sb=0,this.wa=Array(new la),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Jf),this.L=this.aa=0,this.gd=s([4,2],la),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function _c(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ax(){var g=new Xm;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,gh||(gh=Uo)),g}function ar(g,S,k){return g.a==0&&(g.a=S,g.sc=k,g.cb=0),0}function Zm(g,S,k){return 3<=k&&g[S+0]==157&&g[S+1]==1&&g[S+2]==42}function Qm(g,S){if(g==null)return 0;if(g.a=0,g.sc="OK",S==null)return ar(g,2,"null VP8Io passed to VP8GetHeaders()");var k=S.data,M=S.w,q=S.ha;if(4>q)return ar(g,7,"Truncated header.");var H=k[M+0]|k[M+1]<<8|k[M+2]<<16,G=g.Od;if(G.Rb=!(1&H),G.td=H>>1&7,G.yd=H>>4&1,G.ub=H>>5,3<G.td)return ar(g,3,"Incorrect keyframe parameters.");if(!G.yd)return ar(g,4,"Frame not displayable.");M+=3,q-=3;var J=g.Kc;if(G.Rb){if(7>q)return ar(g,7,"cannot parse picture header");if(!Zm(k,M,q))return ar(g,3,"Bad code word");J.c=16383&(k[M+4]<<8|k[M+3]),J.Td=k[M+4]>>6,J.i=16383&(k[M+6]<<8|k[M+5]),J.Ud=k[M+6]>>6,M+=7,q-=7,g.za=J.c+15>>4,g.Ub=J.i+15>>4,S.width=J.c,S.height=J.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,i((H=g.Pa).jb,0,255,H.jb.length),e((H=g.Qa)!=null),H.Cb=0,H.Bb=0,H.Fb=1,i(H.Zb,0,0,H.Zb.length),i(H.Lb,0,0,H.Lb)}if(G.ub>q)return ar(g,7,"bad partition length");Y(H=g.m,k,M,G.ub),M+=G.ub,q-=G.ub,G.Rb&&(J.Ld=ue(H),J.Kd=ue(H)),J=g.Qa;var Z,te=g.Pa;if(e(H!=null),e(J!=null),J.Cb=ue(H),J.Cb){if(J.Bb=ue(H),ue(H)){for(J.Fb=ue(H),Z=0;4>Z;++Z)J.Zb[Z]=ue(H)?U(H,7):0;for(Z=0;4>Z;++Z)J.Lb[Z]=ue(H)?U(H,6):0}if(J.Bb)for(Z=0;3>Z;++Z)te.jb[Z]=ue(H)?W(H,8):255}else J.Bb=0;if(H.Ka)return ar(g,3,"cannot parse segment header");if((J=g.ed).zd=ue(H),J.Tb=W(H,6),J.wb=W(H,3),J.Pc=ue(H),J.Pc&&ue(H)){for(te=0;4>te;++te)ue(H)&&(J.vd[te]=U(H,6));for(te=0;4>te;++te)ue(H)&&(J.od[te]=U(H,6))}if(g.L=J.Tb==0?0:J.zd?1:2,H.Ka)return ar(g,3,"cannot parse filter header");var he=q;if(q=Z=M,M=Z+he,J=he,g.Xb=(1<<W(g.m,2))-1,he<3*(te=g.Xb))k=7;else{for(Z+=3*te,J-=3*te,he=0;he<te;++he){var we=k[q+0]|k[q+1]<<8|k[q+2]<<16;we>J&&(we=J),Y(g.Jc[+he],k,Z,we),Z+=we,J-=we,q+=3}Y(g.Jc[+te],k,Z,J),k=Z<M?0:5}if(k!=0)return ar(g,k,"cannot parse partitions");for(k=W(Z=g.m,7),q=ue(Z)?U(Z,4):0,M=ue(Z)?U(Z,4):0,J=ue(Z)?U(Z,4):0,te=ue(Z)?U(Z,4):0,Z=ue(Z)?U(Z,4):0,he=g.Qa,we=0;4>we;++we){if(he.Cb){var ne=he.Zb[we];he.Fb||(ne+=k)}else{if(0<we){g.pb[we]=g.pb[0];continue}ne=k}var pe=g.pb[we];pe.Sc[0]=Ex[Vn(ne+q,127)],pe.Sc[1]=Nx[Vn(ne+0,127)],pe.Eb[0]=2*Ex[Vn(ne+M,127)],pe.Eb[1]=101581*Nx[Vn(ne+J,127)]>>16,8>pe.Eb[1]&&(pe.Eb[1]=8),pe.Qc[0]=Ex[Vn(ne+te,117)],pe.Qc[1]=Nx[Vn(ne+Z,127)],pe.lc=ne+Z}if(!G.Rb)return ar(g,4,"Not a key frame.");for(ue(H),G=g.Pa,k=0;4>k;++k){for(q=0;8>q;++q)for(M=0;3>M;++M)for(J=0;11>J;++J)te=ye(H,V7[k][q][M][J])?W(H,8):B7[k][q][M][J],G.Wc[k][q].Yb[M][J]=te;for(q=0;17>q;++q)G.Xc[k][q]=G.Wc[k][z7[q]]}return g.kc=ue(H),g.kc&&(g.Bd=W(H,8)),g.cb=1}function Uo(g,S,k,M,q,H,G){var J=S[q].Yb[k];for(k=0;16>q;++q){if(!ye(g,J[k+0]))return q;for(;!ye(g,J[k+1]);)if(J=S[++q].Yb[0],k=0,q==16)return 16;var Z=S[q+1].Yb;if(ye(g,J[k+2])){var te=g,he=0;if(ye(te,(ne=J)[(we=k)+3]))if(ye(te,ne[we+6])){for(J=0,we=2*(he=ye(te,ne[we+8]))+(ne=ye(te,ne[we+9+he])),he=0,ne=F7[we];ne[J];++J)he+=he+ye(te,ne[J]);he+=3+(8<<we)}else ye(te,ne[we+7])?(he=7+2*ye(te,165),he+=ye(te,145)):he=5+ye(te,159);else he=ye(te,ne[we+4])?3+ye(te,ne[we+5]):2;J=Z[2]}else he=1,J=Z[1];Z=G+U7[q],0>(te=g).b&&xe(te);var we,ne=te.b,pe=(we=te.Ca>>1)-(te.I>>ne)>>31;--te.b,te.Ca+=pe,te.Ca|=1,te.I-=(we+1&pe)<<ne,H[Z]=((he^pe)-pe)*M[(0<q)+0]}return 16}function Jl(g){var S=g.rb[g.sb-1];S.la=0,S.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function La(g,S,k,M,q){q=g[S+k+32*M]+(q>>3),g[S+k+32*M]=-256&q?0>q?0:255:q}function Yl(g,S,k,M,q,H){La(g,S,0,k,M+q),La(g,S,1,k,M+H),La(g,S,2,k,M-H),La(g,S,3,k,M-q)}function Jn(g){return(20091*g>>16)+g}function Yf(g,S,k,M){var q,H=0,G=a(16);for(q=0;4>q;++q){var J=g[S+0]+g[S+8],Z=g[S+0]-g[S+8],te=(35468*g[S+4]>>16)-Jn(g[S+12]),he=Jn(g[S+4])+(35468*g[S+12]>>16);G[H+0]=J+he,G[H+1]=Z+te,G[H+2]=Z-te,G[H+3]=J-he,H+=4,S++}for(q=H=0;4>q;++q)J=(g=G[H+0]+4)+G[H+8],Z=g-G[H+8],te=(35468*G[H+4]>>16)-Jn(G[H+12]),La(k,M,0,0,J+(he=Jn(G[H+4])+(35468*G[H+12]>>16))),La(k,M,1,0,Z+te),La(k,M,2,0,Z-te),La(k,M,3,0,J-he),H++,M+=32}function ox(g,S,k,M){var q=g[S+0]+4,H=35468*g[S+4]>>16,G=Jn(g[S+4]),J=35468*g[S+1]>>16;Yl(k,M,0,q+G,g=Jn(g[S+1]),J),Yl(k,M,1,q+H,g,J),Yl(k,M,2,q-H,g,J),Yl(k,M,3,q-G,g,J)}function sx(g,S,k,M,q){Yf(g,S,k,M),q&&Yf(g,S+16,k,M+4)}function lx(g,S,k,M){hu(g,S+0,k,M,1),hu(g,S+32,k,M+128,1)}function co(g,S,k,M){var q;for(g=g[S+0]+4,q=0;4>q;++q)for(S=0;4>S;++S)La(k,M,S,q,g)}function eg(g,S,k,M){g[S+0]&&nn(g,S+0,k,M),g[S+16]&&nn(g,S+16,k,M+4),g[S+32]&&nn(g,S+32,k,M+128),g[S+48]&&nn(g,S+48,k,M+128+4)}function tg(g,S,k,M){var q,H=a(16);for(q=0;4>q;++q){var G=g[S+0+q]+g[S+12+q],J=g[S+4+q]+g[S+8+q],Z=g[S+4+q]-g[S+8+q],te=g[S+0+q]-g[S+12+q];H[0+q]=G+J,H[8+q]=G-J,H[4+q]=te+Z,H[12+q]=te-Z}for(q=0;4>q;++q)G=(g=H[0+4*q]+3)+H[3+4*q],J=H[1+4*q]+H[2+4*q],Z=H[1+4*q]-H[2+4*q],te=g-H[3+4*q],k[M+0]=G+J>>3,k[M+16]=te+Z>>3,k[M+32]=G-J>>3,k[M+48]=te-Z>>3,M+=64}function Ls(g,S,k){var M,q=S-32,H=Oi,G=255-g[q-1];for(M=0;M<k;++M){var J,Z=H,te=G+g[S-1];for(J=0;J<k;++J)g[S+J]=Z[te+g[q+J]];S+=32}}function Xf(g,S){Ls(g,S,4)}function ux(g,S){Ls(g,S,8)}function cx(g,S){Ls(g,S,16)}function dx(g,S){var k;for(k=0;16>k;++k)r(g,S+32*k,g,S-32,16)}function Zf(g,S){var k;for(k=16;0<k;--k)i(g,S,g[S-1],16),S+=32}function Xl(g,S,k){var M;for(M=0;16>M;++M)i(S,k+32*M,g,16)}function Ms(g,S){var k,M=16;for(k=0;16>k;++k)M+=g[S-1+32*k]+g[S+k-32];Xl(M>>5,g,S)}function fx(g,S){var k,M=8;for(k=0;16>k;++k)M+=g[S-1+32*k];Xl(M>>4,g,S)}function Zl(g,S){var k,M=8;for(k=0;16>k;++k)M+=g[S+k-32];Xl(M>>4,g,S)}function Qf(g,S){Xl(128,g,S)}function kt(g,S,k){return g+2*S+k+2>>2}function hx(g,S){var k,M=S-32;for(M=new Uint8Array([kt(g[M-1],g[M+0],g[M+1]),kt(g[M+0],g[M+1],g[M+2]),kt(g[M+1],g[M+2],g[M+3]),kt(g[M+2],g[M+3],g[M+4])]),k=0;4>k;++k)r(g,S+32*k,M,0,M.length)}function px(g,S){var k=g[S-1],M=g[S-1+32],q=g[S-1+64],H=g[S-1+96];Se(g,S+0,16843009*kt(g[S-1-32],k,M)),Se(g,S+32,16843009*kt(k,M,q)),Se(g,S+64,16843009*kt(M,q,H)),Se(g,S+96,16843009*kt(q,H,H))}function mx(g,S){var k,M=4;for(k=0;4>k;++k)M+=g[S+k-32]+g[S-1+32*k];for(M>>=3,k=0;4>k;++k)i(g,S+32*k,M,4)}function gx(g,S){var k=g[S-1+0],M=g[S-1+32],q=g[S-1+64],H=g[S-1-32],G=g[S+0-32],J=g[S+1-32],Z=g[S+2-32],te=g[S+3-32];g[S+0+96]=kt(M,q,g[S-1+96]),g[S+1+96]=g[S+0+64]=kt(k,M,q),g[S+2+96]=g[S+1+64]=g[S+0+32]=kt(H,k,M),g[S+3+96]=g[S+2+64]=g[S+1+32]=g[S+0+0]=kt(G,H,k),g[S+3+64]=g[S+2+32]=g[S+1+0]=kt(J,G,H),g[S+3+32]=g[S+2+0]=kt(Z,J,G),g[S+3+0]=kt(te,Z,J)}function Bo(g,S){var k=g[S+1-32],M=g[S+2-32],q=g[S+3-32],H=g[S+4-32],G=g[S+5-32],J=g[S+6-32],Z=g[S+7-32];g[S+0+0]=kt(g[S+0-32],k,M),g[S+1+0]=g[S+0+32]=kt(k,M,q),g[S+2+0]=g[S+1+32]=g[S+0+64]=kt(M,q,H),g[S+3+0]=g[S+2+32]=g[S+1+64]=g[S+0+96]=kt(q,H,G),g[S+3+32]=g[S+2+64]=g[S+1+96]=kt(H,G,J),g[S+3+64]=g[S+2+96]=kt(G,J,Z),g[S+3+96]=kt(J,Z,Z)}function qo(g,S){var k=g[S-1+0],M=g[S-1+32],q=g[S-1+64],H=g[S-1-32],G=g[S+0-32],J=g[S+1-32],Z=g[S+2-32],te=g[S+3-32];g[S+0+0]=g[S+1+64]=H+G+1>>1,g[S+1+0]=g[S+2+64]=G+J+1>>1,g[S+2+0]=g[S+3+64]=J+Z+1>>1,g[S+3+0]=Z+te+1>>1,g[S+0+96]=kt(q,M,k),g[S+0+64]=kt(M,k,H),g[S+0+32]=g[S+1+96]=kt(k,H,G),g[S+1+32]=g[S+2+96]=kt(H,G,J),g[S+2+32]=g[S+3+96]=kt(G,J,Z),g[S+3+32]=kt(J,Z,te)}function yx(g,S){var k=g[S+0-32],M=g[S+1-32],q=g[S+2-32],H=g[S+3-32],G=g[S+4-32],J=g[S+5-32],Z=g[S+6-32],te=g[S+7-32];g[S+0+0]=k+M+1>>1,g[S+1+0]=g[S+0+64]=M+q+1>>1,g[S+2+0]=g[S+1+64]=q+H+1>>1,g[S+3+0]=g[S+2+64]=H+G+1>>1,g[S+0+32]=kt(k,M,q),g[S+1+32]=g[S+0+96]=kt(M,q,H),g[S+2+32]=g[S+1+96]=kt(q,H,G),g[S+3+32]=g[S+2+96]=kt(H,G,J),g[S+3+64]=kt(G,J,Z),g[S+3+96]=kt(J,Z,te)}function vx(g,S){var k=g[S-1+0],M=g[S-1+32],q=g[S-1+64],H=g[S-1+96];g[S+0+0]=k+M+1>>1,g[S+2+0]=g[S+0+32]=M+q+1>>1,g[S+2+32]=g[S+0+64]=q+H+1>>1,g[S+1+0]=kt(k,M,q),g[S+3+0]=g[S+1+32]=kt(M,q,H),g[S+3+32]=g[S+1+64]=kt(q,H,H),g[S+3+64]=g[S+2+64]=g[S+0+96]=g[S+1+96]=g[S+2+96]=g[S+3+96]=H}function Sc(g,S){var k=g[S-1+0],M=g[S-1+32],q=g[S-1+64],H=g[S-1+96],G=g[S-1-32],J=g[S+0-32],Z=g[S+1-32],te=g[S+2-32];g[S+0+0]=g[S+2+32]=k+G+1>>1,g[S+0+32]=g[S+2+64]=M+k+1>>1,g[S+0+64]=g[S+2+96]=q+M+1>>1,g[S+0+96]=H+q+1>>1,g[S+3+0]=kt(J,Z,te),g[S+2+0]=kt(G,J,Z),g[S+1+0]=g[S+3+32]=kt(k,G,J),g[S+1+32]=g[S+3+64]=kt(M,k,G),g[S+1+64]=g[S+3+96]=kt(q,M,k),g[S+1+96]=kt(H,q,M)}function eh(g,S){var k;for(k=0;8>k;++k)r(g,S+32*k,g,S-32,8)}function Ql(g,S){var k;for(k=0;8>k;++k)i(g,S,g[S-1],8),S+=32}function Ac(g,S,k){var M;for(M=0;8>M;++M)i(S,k+32*M,g,8)}function Ec(g,S){var k,M=8;for(k=0;8>k;++k)M+=g[S+k-32]+g[S-1+32*k];Ac(M>>4,g,S)}function xx(g,S){var k,M=4;for(k=0;8>k;++k)M+=g[S+k-32];Ac(M>>3,g,S)}function th(g,S){var k,M=4;for(k=0;8>k;++k)M+=g[S-1+32*k];Ac(M>>3,g,S)}function nh(g,S){Ac(128,g,S)}function eu(g,S,k){var M=g[S-k],q=g[S+0],H=3*(q-M)+bx[1020+g[S-2*k]-g[S+k]],G=dg[112+(H+4>>3)];g[S-k]=Oi[255+M+dg[112+(H+3>>3)]],g[S+0]=Oi[255+q-G]}function tu(g,S,k,M){var q=g[S+0],H=g[S+k];return fa[255+g[S-2*k]-g[S-k]]>M||fa[255+H-q]>M}function rh(g,S,k,M){return 4*fa[255+g[S-k]-g[S+0]]+fa[255+g[S-2*k]-g[S+k]]<=M}function Nc(g,S,k,M,q){var H=g[S-3*k],G=g[S-2*k],J=g[S-k],Z=g[S+0],te=g[S+k],he=g[S+2*k],we=g[S+3*k];return 4*fa[255+J-Z]+fa[255+G-te]>M?0:fa[255+g[S-4*k]-H]<=q&&fa[255+H-G]<=q&&fa[255+G-J]<=q&&fa[255+we-he]<=q&&fa[255+he-te]<=q&&fa[255+te-Z]<=q}function ih(g,S,k,M){var q=2*M+1;for(M=0;16>M;++M)rh(g,S+M,k,q)&&eu(g,S+M,k)}function nu(g,S,k,M){var q=2*M+1;for(M=0;16>M;++M)rh(g,S+M*k,1,q)&&eu(g,S+M*k,1)}function ng(g,S,k,M){var q;for(q=3;0<q;--q)ih(g,S+=4*k,k,M)}function rg(g,S,k,M){var q;for(q=3;0<q;--q)nu(g,S+=4,k,M)}function Vo(g,S,k,M,q,H,G,J){for(H=2*H+1;0<q--;){if(Nc(g,S,k,H,G))if(tu(g,S,k,J))eu(g,S,k);else{var Z=g,te=S,he=k,we=Z[te-2*he],ne=Z[te-he],pe=Z[te+0],ve=Z[te+he],Ee=Z[te+2*he],be=27*(Ce=bx[1020+3*(pe-ne)+bx[1020+we-ve]])+63>>7,Te=18*Ce+63>>7,Ce=9*Ce+63>>7;Z[te-3*he]=Oi[255+Z[te-3*he]+Ce],Z[te-2*he]=Oi[255+we+Te],Z[te-he]=Oi[255+ne+be],Z[te+0]=Oi[255+pe-be],Z[te+he]=Oi[255+ve-Te],Z[te+2*he]=Oi[255+Ee-Ce]}S+=M}}function zo(g,S,k,M,q,H,G,J){for(H=2*H+1;0<q--;){if(Nc(g,S,k,H,G))if(tu(g,S,k,J))eu(g,S,k);else{var Z=g,te=S,he=k,we=Z[te-he],ne=Z[te+0],pe=Z[te+he],ve=dg[112+(4+(Ee=3*(ne-we))>>3)],Ee=dg[112+(Ee+3>>3)],be=ve+1>>1;Z[te-2*he]=Oi[255+Z[te-2*he]+be],Z[te-he]=Oi[255+we+Ee],Z[te+0]=Oi[255+ne-ve],Z[te+he]=Oi[255+pe-be]}S+=M}}function ig(g,S,k,M,q,H){Vo(g,S,k,1,16,M,q,H)}function ag(g,S,k,M,q,H){Vo(g,S,1,k,16,M,q,H)}function ru(g,S,k,M,q,H){var G;for(G=3;0<G;--G)zo(g,S+=4*k,k,1,16,M,q,H)}function og(g,S,k,M,q,H){var G;for(G=3;0<G;--G)zo(g,S+=4,1,k,16,M,q,H)}function T(g,S,k,M,q,H,G,J){Vo(g,S,q,1,8,H,G,J),Vo(k,M,q,1,8,H,G,J)}function B(g,S,k,M,q,H,G,J){Vo(g,S,1,q,8,H,G,J),Vo(k,M,1,q,8,H,G,J)}function ie(g,S,k,M,q,H,G,J){zo(g,S+4*q,q,1,8,H,G,J),zo(k,M+4*q,q,1,8,H,G,J)}function de(g,S,k,M,q,H,G,J){zo(g,S+4,1,q,8,H,G,J),zo(k,M+4,1,q,8,H,G,J)}function ge(){this.ba=new on,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new zt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Pe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Oe(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tt(){this.ua=0,this.Wa=new qe,this.vb=new qe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new F}function ct(){this.xb=this.a=0,this.l=new _c,this.ca=new on,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tt,this.ab=0,this.gc=o(4,Oe),this.Oc=0}function Tt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new _c,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ot(g,S,k,M,q,H,G){for(g=g==null?0:g[S+0],S=0;S<G;++S)q[H+S]=g+k[M+S]&255,g=q[H+S]}function en(g,S,k,M,q,H,G){var J;if(g==null)Ot(null,null,k,M,q,H,G);else for(J=0;J<G;++J)q[H+J]=g[S+J]+k[M+J]&255}function Dn(g,S,k,M,q,H,G){if(g==null)Ot(null,null,k,M,q,H,G);else{var J,Z=g[S+0],te=Z,he=Z;for(J=0;J<G;++J)te=he+(Z=g[S+J])-te,he=k[M+J]+(-256&te?0>te?0:255:te)&255,te=Z,q[H+J]=he}}function or(g,S,k,M){var q=S.width,H=S.o;if(e(g!=null&&S!=null),0>k||0>=M||k+M>H)return null;if(!g.Cc){if(g.ga==null){var G;if(g.ga=new Tt,(G=g.ga==null)||(G=S.width*S.o,e(g.Gb.length==0),g.Gb=a(G),g.Uc=0,g.Gb==null?G=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,G=1),G=!G),!G){G=g.ga;var J=g.Fa,Z=g.P,te=g.qc,he=g.mb,we=g.nb,ne=Z+1,pe=te-1,ve=G.l;if(e(J!=null&&he!=null&&S!=null),Gs[0]=null,Gs[1]=Ot,Gs[2]=en,Gs[3]=Dn,G.ca=he,G.tb=we,G.c=S.width,G.i=S.height,e(0<G.c&&0<G.i),1>=te)S=0;else if(G.$a=3&J[Z+0],G.Z=J[Z+0]>>2&3,G.Lc=J[Z+0]>>4&3,Z=J[Z+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||Z)S=0;else if(ve.put=bt,ve.ac=ia,ve.bc=$o,ve.ma=G,ve.width=S.width,ve.height=S.height,ve.Da=S.Da,ve.v=S.v,ve.va=S.va,ve.j=S.j,ve.o=S.o,G.$a)e:{e(G.$a==1),S=Wl();t:for(;;){if(S==null){S=0;break e}if(e(G!=null),G.mc=S,S.c=G.c,S.i=G.i,S.l=G.l,S.l.ma=G,S.l.width=G.c,S.l.height=G.i,S.a=0,Q(S.m,J,ne,pe),!uo(G.c,G.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&Oa(S.s)?(G.ic=1,J=S.c*S.i,S.Ta=null,S.Ua=0,S.V=a(J),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(G.ic=0,S=Kl(S,G.c)),!S))break t;S=1;break e}G.mc=null,S=0}else S=pe>=G.c*G.i;G=!S}if(G)return null;g.ga.Lc!=1?g.Ga=0:M=H-k}e(g.ga!=null),e(k+M<=H);e:{if(S=(J=g.ga).c,H=J.l.o,J.$a==0){if(ne=g.rc,pe=g.Vc,ve=g.Fa,Z=g.P+1+k*S,te=g.mb,he=g.nb+k*S,e(Z<=g.P+g.qc),J.Z!=0)for(e(Gs[J.Z]!=null),G=0;G<M;++G)Gs[J.Z](ne,pe,ve,Z,te,he,S),ne=te,pe=he,he+=S,Z+=S;else for(G=0;G<M;++G)r(te,he,ve,Z,S),ne=te,pe=he,he+=S,Z+=S;g.rc=ne,g.Vc=pe}else{if(e(J.mc!=null),S=k+M,e((G=J.mc)!=null),e(S<=G.i),G.C>=S)S=1;else if(J.ic||ua(),J.ic){J=G.V,ne=G.Ba,pe=G.c;var Ee=G.i,be=(ve=1,Z=G.$/pe,te=G.$%pe,he=G.m,we=G.s,G.$),Te=pe*Ee,Ce=pe*S,Le=we.wc,Ie=be<Ce?Lr(we,te,Z):null;e(be<=Te),e(S<=Ee),e(Oa(we));t:for(;;){for(;!he.h&&be<Ce;){if(te&Le||(Ie=Lr(we,te,Z)),e(Ie!=null),fe(he),256>(Ee=qn(Ie.G[0],Ie.H[0],he)))J[ne+be]=Ee,++be,++te>=pe&&(te=0,++Z<=S&&!(Z%16)&&ja(G,Z));else{if(!(280>Ee)){ve=0;break t}Ee=aa(Ee-256,he);var ft,Ze=qn(Ie.G[4],Ie.H[4],he);if(fe(he),!(be>=(Ze=oa(pe,Ze=aa(Ze,he)))&&Te-be>=Ee)){ve=0;break t}for(ft=0;ft<Ee;++ft)J[ne+be+ft]=J[ne+be+ft-Ze];for(be+=Ee,te+=Ee;te>=pe;)te-=pe,++Z<=S&&!(Z%16)&&ja(G,Z);be<Ce&&te&Le&&(Ie=Lr(we,te,Z))}e(he.h==re(he))}ja(G,Z>S?S:Z);break t}!ve||he.h&&be<Te?(ve=0,G.a=he.h?5:3):G.$=be,S=ve}else S=Ra(G,G.V,G.Ba,G.c,G.i,S,xc);if(!S){M=0;break e}}k+M>=H&&(g.Cc=1),M=1}if(!M)return null;if(g.Cc&&((M=g.ga)!=null&&(M.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+k*q}function xn(g,S,k,M,q,H){for(;0<q--;){var G,J=g,Z=S+(k?1:0),te=g,he=S+(k?0:3);for(G=0;G<M;++G){var we=te[he+4*G];we!=255&&(we*=32897,J[Z+4*G+0]=J[Z+4*G+0]*we>>23,J[Z+4*G+1]=J[Z+4*G+1]*we>>23,J[Z+4*G+2]=J[Z+4*G+2]*we>>23)}S+=H}}function pr(g,S,k,M,q){for(;0<M--;){var H;for(H=0;H<k;++H){var G=g[S+2*H+0],J=15&(te=g[S+2*H+1]),Z=4369*J,te=(240&te|te>>4)*Z>>16;g[S+2*H+0]=(240&G|G>>4)*Z>>16&240|(15&G|G<<4)*Z>>16>>4&15,g[S+2*H+1]=240&te|J}S+=q}}function sr(g,S,k,M,q,H,G,J){var Z,te,he=255;for(te=0;te<q;++te){for(Z=0;Z<M;++Z){var we=g[S+Z];H[G+4*Z]=we,he&=we}S+=k,G+=J}return he!=255}function Mr(g,S,k,M,q){var H;for(H=0;H<q;++H)k[M+H]=g[S+H]>>8}function ua(){mh=xn,lE=pr,uE=sr,cE=Mr}function yi(g,S,k){R[g]=function(M,q,H,G,J,Z,te,he,we,ne,pe,ve,Ee,be,Te,Ce,Le){var Ie,ft=Le-1>>1,Ze=J[Z+0]|te[he+0]<<16,Mt=we[ne+0]|pe[ve+0]<<16;e(M!=null);var at=3*Ze+Mt+131074>>2;for(S(M[q+0],255&at,at>>16,Ee,be),H!=null&&(at=3*Mt+Ze+131074>>2,S(H[G+0],255&at,at>>16,Te,Ce)),Ie=1;Ie<=ft;++Ie){var qt=J[Z+Ie]|te[he+Ie]<<16,gr=we[ne+Ie]|pe[ve+Ie]<<16,Dt=Ze+qt+Mt+gr+524296,ot=Dt+2*(qt+Mt)>>3;at=ot+Ze>>1,Ze=(Dt=Dt+2*(Ze+gr)>>3)+qt>>1,S(M[q+2*Ie-1],255&at,at>>16,Ee,be+(2*Ie-1)*k),S(M[q+2*Ie-0],255&Ze,Ze>>16,Ee,be+(2*Ie-0)*k),H!=null&&(at=Dt+Mt>>1,Ze=ot+gr>>1,S(H[G+2*Ie-1],255&at,at>>16,Te,Ce+(2*Ie-1)*k),S(H[G+2*Ie+0],255&Ze,Ze>>16,Te,Ce+(2*Ie+0)*k)),Ze=qt,Mt=gr}1&Le||(at=3*Ze+Mt+131074>>2,S(M[q+Le-1],255&at,at>>16,Ee,be+(Le-1)*k),H!=null&&(at=3*Mt+Ze+131074>>2,S(H[G+Le-1],255&at,at>>16,Te,Ce+(Le-1)*k)))}}function sg(){ha[fg]=G7,ha[hg]=wE,ha[gE]=W7,ha[pg]=_E,ha[mg]=SE,ha[wx]=AE,ha[yE]=K7,ha[_x]=wE,ha[Sx]=_E,ha[gg]=SE,ha[Ax]=AE}function Tc(g){return g&-16384?0>g?0:255:g>>J7}function iu(g,S){return Tc((19077*g>>8)+(26149*S>>8)-14234)}function Ds(g,S,k){return Tc((19077*g>>8)-(6419*S>>8)-(13320*k>>8)+8708)}function au(g,S){return Tc((19077*g>>8)+(33050*S>>8)-17685)}function ou(g,S,k,M,q){M[q+0]=iu(g,k),M[q+1]=Ds(g,S,k),M[q+2]=au(g,S)}function su(g,S,k,M,q){M[q+0]=au(g,S),M[q+1]=Ds(g,S,k),M[q+2]=iu(g,k)}function Hr(g,S,k,M,q){var H=Ds(g,S,k);S=H<<3&224|au(g,S)>>3,M[q+0]=248&iu(g,k)|H>>5,M[q+1]=S}function lu(g,S,k,M,q){var H=240&au(g,S)|15;M[q+0]=240&iu(g,k)|Ds(g,S,k)>>4,M[q+1]=H}function uu(g,S,k,M,q){M[q+0]=255,ou(g,S,k,M,q+1)}function ah(g,S,k,M,q){su(g,S,k,M,q),M[q+3]=255}function oh(g,S,k,M,q){ou(g,S,k,M,q),M[q+3]=255}function Vn(g,S){return 0>g?0:g>S?S:g}function Ho(g,S,k){R[g]=function(M,q,H,G,J,Z,te,he,we){for(var ne=he+(-2&we)*k;he!=ne;)S(M[q+0],H[G+0],J[Z+0],te,he),S(M[q+1],H[G+0],J[Z+0],te,he+k),q+=2,++G,++Z,he+=2*k;1&we&&S(M[q+0],H[G+0],J[Z+0],te,he)}}function Pc(g,S,k){return k==0?g==0?S==0?6:5:S==0?4:0:k}function lg(g,S,k,M,q){switch(g>>>30){case 3:hu(S,k,M,q,0);break;case 2:da(S,k,M,q);break;case 1:nn(S,k,M,q)}}function ca(g,S){var k,M,q=S.M,H=S.Nb,G=g.oc,J=g.pc+40,Z=g.oc,te=g.pc+584,he=g.oc,we=g.pc+600;for(k=0;16>k;++k)G[J+32*k-1]=129;for(k=0;8>k;++k)Z[te+32*k-1]=129,he[we+32*k-1]=129;for(0<q?G[J-1-32]=Z[te-1-32]=he[we-1-32]=129:(i(G,J-32-1,127,21),i(Z,te-32-1,127,9),i(he,we-32-1,127,9)),M=0;M<g.za;++M){var ne=S.ya[S.aa+M];if(0<M){for(k=-1;16>k;++k)r(G,J+32*k-4,G,J+32*k+12,4);for(k=-1;8>k;++k)r(Z,te+32*k-4,Z,te+32*k+4,4),r(he,we+32*k-4,he,we+32*k+4,4)}var pe=g.Gd,ve=g.Hd+M,Ee=ne.ad,be=ne.Hc;if(0<q&&(r(G,J-32,pe[ve].y,0,16),r(Z,te-32,pe[ve].f,0,8),r(he,we-32,pe[ve].ea,0,8)),ne.Za){var Te=G,Ce=J-32+16;for(0<q&&(M>=g.za-1?i(Te,Ce,pe[ve].y[15],4):r(Te,Ce,pe[ve+1].y,0,4)),k=0;4>k;k++)Te[Ce+128+k]=Te[Ce+256+k]=Te[Ce+384+k]=Te[Ce+0+k];for(k=0;16>k;++k,be<<=2)Te=G,Ce=J+NE[k],Ma[ne.Ob[k]](Te,Ce),lg(be,Ee,16*+k,Te,Ce)}else if(Te=Pc(M,q,ne.Ob[0]),Hs[Te](G,J),be!=0)for(k=0;16>k;++k,be<<=2)lg(be,Ee,16*+k,G,J+NE[k]);for(k=ne.Gc,Te=Pc(M,q,ne.Dd),Ko[Te](Z,te),Ko[Te](he,we),be=Ee,Te=Z,Ce=te,255&(ne=0|k)&&(170&ne?po(be,256,Te,Ce):pn(be,256,Te,Ce)),ne=he,be=we,255&(k>>=8)&&(170&k?po(Ee,320,ne,be):pn(Ee,320,ne,be)),q<g.Ub-1&&(r(pe[ve].y,0,G,J+480,16),r(pe[ve].f,0,Z,te+224,8),r(pe[ve].ea,0,he,we+224,8)),k=8*H*g.B,pe=g.sa,ve=g.ta+16*M+16*H*g.R,Ee=g.qa,ne=g.ra+8*M+k,be=g.Ha,Te=g.Ia+8*M+k,k=0;16>k;++k)r(pe,ve+k*g.R,G,J+32*k,16);for(k=0;8>k;++k)r(Ee,ne+k*g.B,Z,te+32*k,8),r(be,Te+k*g.B,he,we+32*k,8)}}function cu(g,S,k,M,q,H,G,J,Z){var te=[0],he=[0],we=0,ne=Z!=null?Z.kd:0,pe=Z??new Pe;if(g==null||12>k)return 7;pe.data=g,pe.w=S,pe.ha=k,S=[S],k=[k],pe.gb=[pe.gb];e:{var ve=S,Ee=k,be=pe.gb;if(e(g!=null),e(Ee!=null),e(be!=null),be[0]=0,12<=Ee[0]&&!n(g,ve[0],"RIFF")){if(n(g,ve[0]+8,"WEBP")){be=3;break e}var Te=se(g,ve[0]+4);if(12>Te||4294967286<Te){be=3;break e}if(ne&&Te>Ee[0]-8){be=7;break e}be[0]=Te,ve[0]+=12,Ee[0]-=12}be=0}if(be!=0)return be;for(Te=0<pe.gb[0],k=k[0];;){e:{var Ce=g;Ee=S,be=k;var Le=te,Ie=he,ft=ve=[0];if((at=we=[we])[0]=0,8>be[0])be=7;else{if(!n(Ce,Ee[0],"VP8X")){if(se(Ce,Ee[0]+4)!=10){be=3;break e}if(18>be[0]){be=7;break e}var Ze=se(Ce,Ee[0]+8),Mt=1+je(Ce,Ee[0]+12);if(2147483648<=Mt*(Ce=1+je(Ce,Ee[0]+15))){be=3;break e}ft!=null&&(ft[0]=Ze),Le!=null&&(Le[0]=Mt),Ie!=null&&(Ie[0]=Ce),Ee[0]+=18,be[0]-=18,at[0]=1}be=0}}if(we=we[0],ve=ve[0],be!=0)return be;if(Ee=!!(2&ve),!Te&&we)return 3;if(H!=null&&(H[0]=!!(16&ve)),G!=null&&(G[0]=Ee),J!=null&&(J[0]=0),G=te[0],ve=he[0],we&&Ee&&Z==null){be=0;break}if(4>k){be=7;break}if(Te&&we||!Te&&!we&&!n(g,S[0],"ALPH")){k=[k],pe.na=[pe.na],pe.P=[pe.P],pe.Sa=[pe.Sa];e:{Ze=g,be=S,Te=k;var at=pe.gb;Le=pe.na,Ie=pe.P,ft=pe.Sa,Mt=22,e(Ze!=null),e(Te!=null),Ce=be[0];var qt=Te[0];for(e(Le!=null),e(ft!=null),Le[0]=null,Ie[0]=null,ft[0]=0;;){if(be[0]=Ce,Te[0]=qt,8>qt){be=7;break e}var gr=se(Ze,Ce+4);if(4294967286<gr){be=3;break e}var Dt=8+gr+1&-2;if(Mt+=Dt,0<at&&Mt>at){be=3;break e}if(!n(Ze,Ce,"VP8 ")||!n(Ze,Ce,"VP8L")){be=0;break e}if(qt[0]<Dt){be=7;break e}n(Ze,Ce,"ALPH")||(Le[0]=Ze,Ie[0]=Ce+8,ft[0]=gr),Ce+=Dt,qt-=Dt}}if(k=k[0],pe.na=pe.na[0],pe.P=pe.P[0],pe.Sa=pe.Sa[0],be!=0)break}k=[k],pe.Ja=[pe.Ja],pe.xa=[pe.xa];e:if(at=g,be=S,Te=k,Le=pe.gb[0],Ie=pe.Ja,ft=pe.xa,Ze=be[0],Ce=!n(at,Ze,"VP8 "),Mt=!n(at,Ze,"VP8L"),e(at!=null),e(Te!=null),e(Ie!=null),e(ft!=null),8>Te[0])be=7;else{if(Ce||Mt){if(at=se(at,Ze+4),12<=Le&&at>Le-12){be=3;break e}if(ne&&at>Te[0]-8){be=7;break e}Ie[0]=at,be[0]+=8,Te[0]-=8,ft[0]=Mt}else ft[0]=5<=Te[0]&&at[Ze+0]==47&&!(at[Ze+4]>>5),Ie[0]=Te[0];be=0}if(k=k[0],pe.Ja=pe.Ja[0],pe.xa=pe.xa[0],S=S[0],be!=0)break;if(4294967286<pe.Ja)return 3;if(J==null||Ee||(J[0]=pe.xa?2:1),G=[G],ve=[ve],pe.xa){if(5>k){be=7;break}J=G,ne=ve,Ee=H,g==null||5>k?g=0:5<=k&&g[S+0]==47&&!(g[S+4]>>5)?(Te=[0],at=[0],Le=[0],Q(Ie=new z,g,S,k),Fo(Ie,Te,at,Le)?(J!=null&&(J[0]=Te[0]),ne!=null&&(ne[0]=at[0]),Ee!=null&&(Ee[0]=Le[0]),g=1):g=0):g=0}else{if(10>k){be=7;break}J=ve,g==null||10>k||!Zm(g,S+3,k-3)?g=0:(ne=g[S+0]|g[S+1]<<8|g[S+2]<<16,Ee=16383&(g[S+7]<<8|g[S+6]),g=16383&(g[S+9]<<8|g[S+8]),1&ne||3<(ne>>1&7)||!(ne>>4&1)||ne>>5>=pe.Ja||!Ee||!g?g=0:(G&&(G[0]=Ee),J&&(J[0]=g),g=1))}if(!g||(G=G[0],ve=ve[0],we&&(te[0]!=G||he[0]!=ve)))return 3;Z!=null&&(Z[0]=pe,Z.offset=S-Z.w,e(4294967286>S-Z.w),e(Z.offset==Z.ha-k));break}return be==0||be==7&&we&&Z==null?(H!=null&&(H[0]|=pe.na!=null&&0<pe.na.length),M!=null&&(M[0]=G),q!=null&&(q[0]=ve),0):be}function sh(g,S,k){var M=S.width,q=S.height,H=0,G=0,J=M,Z=q;if(S.Da=g!=null&&0<g.Da,S.Da&&(J=g.cd,Z=g.bd,H=g.v,G=g.j,11>k||(H&=-2,G&=-2),0>H||0>G||0>=J||0>=Z||H+J>M||G+Z>q))return 0;if(S.v=H,S.j=G,S.va=H+J,S.o=G+Z,S.U=J,S.T=Z,S.da=g!=null&&0<g.da,S.da){if(!Ge(J,Z,k=[g.ib],H=[g.hb]))return 0;S.ib=k[0],S.hb=H[0]}return S.ob=g!=null&&g.ob,S.Kb=g==null||!g.Sd,S.da&&(S.ob=S.ib<3*M/4&&S.hb<3*q/4,S.Kb=0),1}function lh(g){if(g==null)return 2;if(11>g.S){var S=g.f.RGBA;S.fb+=(g.height-1)*S.A,S.A=-S.A}else S=g.f.kb,g=g.height,S.O+=(g-1)*S.fa,S.fa=-S.fa,S.N+=(g-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(g-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(g-1)*S.lb,S.lb=-S.lb);return 0}function $s(g,S,k,M){if(M==null||0>=g||0>=S)return 2;if(k!=null){if(k.Da){var q=k.cd,H=k.bd,G=-2&k.v,J=-2&k.j;if(0>G||0>J||0>=q||0>=H||G+q>g||J+H>S)return 2;g=q,S=H}if(k.da){if(!Ge(g,S,q=[k.ib],H=[k.hb]))return 2;g=q[0],S=H[0]}}M.width=g,M.height=S;e:{var Z=M.width,te=M.height;if(g=M.S,0>=Z||0>=te||!(g>=fg&&13>g))g=2;else{if(0>=M.Rd&&M.sd==null){G=H=q=S=0;var he=(J=Z*TE[g])*te;if(11>g||(H=(te+1)/2*(S=(Z+1)/2),g==12&&(G=(q=Z)*te)),(te=a(he+2*H+G))==null){g=1;break e}M.sd=te,11>g?((Z=M.f.RGBA).eb=te,Z.fb=0,Z.A=J,Z.size=he):((Z=M.f.kb).y=te,Z.O=0,Z.fa=J,Z.Fd=he,Z.f=te,Z.N=0+he,Z.Ab=S,Z.Cd=H,Z.ea=te,Z.W=0+he+H,Z.Db=S,Z.Ed=H,g==12&&(Z.F=te,Z.J=0+he+2*H),Z.Tc=G,Z.lb=q)}if(S=1,q=M.S,H=M.width,G=M.height,q>=fg&&13>q)if(11>q)g=M.f.RGBA,S&=(J=Math.abs(g.A))*(G-1)+H<=g.size,S&=J>=H*TE[q],S&=g.eb!=null;else{g=M.f.kb,J=(H+1)/2,he=(G+1)/2,Z=Math.abs(g.fa),te=Math.abs(g.Ab);var we=Math.abs(g.Db),ne=Math.abs(g.lb),pe=ne*(G-1)+H;S&=Z*(G-1)+H<=g.Fd,S&=te*(he-1)+J<=g.Cd,S=(S&=we*(he-1)+J<=g.Ed)&Z>=H&te>=J&we>=J,S&=g.y!=null,S&=g.f!=null,S&=g.ea!=null,q==12&&(S&=ne>=H,S&=pe<=g.Tc,S&=g.F!=null)}else S=0;g=S?0:2}}return g!=0||k!=null&&k.fd&&(g=lh(M)),g}var du=64,ki=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ii=24,Fs=32,Go=8,Us=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ae("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(g){return g},R.Predictor2=function(g,S,k){return S[k+0]},R.Predictor3=function(g,S,k){return S[k+1]},R.Predictor4=function(g,S,k){return S[k-1]},R.Predictor5=function(g,S,k){return Me(Me(g,S[k+1]),S[k+0])},R.Predictor6=function(g,S,k){return Me(g,S[k-1])},R.Predictor7=function(g,S,k){return Me(g,S[k+0])},R.Predictor8=function(g,S,k){return Me(S[k-1],S[k+0])},R.Predictor9=function(g,S,k){return Me(S[k+0],S[k+1])},R.Predictor10=function(g,S,k){return Me(Me(g,S[k-1]),Me(S[k+0],S[k+1]))},R.Predictor11=function(g,S,k){var M=S[k+0];return 0>=We(M>>24&255,g>>24&255,(S=S[k-1])>>24&255)+We(M>>16&255,g>>16&255,S>>16&255)+We(M>>8&255,g>>8&255,S>>8&255)+We(255&M,255&g,255&S)?M:g},R.Predictor12=function(g,S,k){var M=S[k+0];return(st((g>>24&255)+(M>>24&255)-((S=S[k-1])>>24&255))<<24|st((g>>16&255)+(M>>16&255)-(S>>16&255))<<16|st((g>>8&255)+(M>>8&255)-(S>>8&255))<<8|st((255&g)+(255&M)-(255&S)))>>>0},R.Predictor13=function(g,S,k){var M=S[k-1];return(Fe((g=Me(g,S[k+0]))>>24&255,M>>24&255)<<24|Fe(g>>16&255,M>>16&255)<<16|Fe(g>>8&255,M>>8&255)<<8|Fe(255&g,255&M))>>>0};var uh=R.PredictorAdd0;R.PredictorAdd1=vt,Ae("Predictor2","PredictorAdd2"),Ae("Predictor3","PredictorAdd3"),Ae("Predictor4","PredictorAdd4"),Ae("Predictor5","PredictorAdd5"),Ae("Predictor6","PredictorAdd6"),Ae("Predictor7","PredictorAdd7"),Ae("Predictor8","PredictorAdd8"),Ae("Predictor9","PredictorAdd9"),Ae("Predictor10","PredictorAdd10"),Ae("Predictor11","PredictorAdd11"),Ae("Predictor12","PredictorAdd12"),Ae("Predictor13","PredictorAdd13");var Cc=R.PredictorAdd2;dt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Yn,ug=R.ColorIndexInverseTransform,fo=R.MapARGB,ho=R.VP8LColorIndexInverseTransformAlpha,ch=R.MapAlpha,dh=R.VP8LPredictorsAdd=[];dh.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var fh,hh,Bs,qs,Vs,fu,zs,hu,da,po,nn,pn,Xn,mr,Wo,ph,kc,cg,nE,rE,iE,aE,oE,sE,mh,lE,uE,cE,dE=a(511),fE=a(2041),hE=a(225),pE=a(767),mE=0,bx=fE,dg=hE,Oi=pE,fa=dE,fg=0,hg=1,gE=2,pg=3,mg=4,wx=5,yE=6,_x=7,Sx=8,gg=9,Ax=10,O7=[2,3,7],j7=[3,3,11],vE=[280,256,256,256,40],R7=[0,1,1,1,0],L7=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],M7=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],D7=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$7=8,Ex=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Nx=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gh=null,F7=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],U7=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xE=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],B7=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],q7=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],V7=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],z7=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hs=[],Ma=[],Ko=[],H7=1,bE=2,Gs=[],ha=[];yi("UpsampleRgbLinePair",ou,3),yi("UpsampleBgrLinePair",su,3),yi("UpsampleRgbaLinePair",oh,4),yi("UpsampleBgraLinePair",ah,4),yi("UpsampleArgbLinePair",uu,4),yi("UpsampleRgba4444LinePair",lu,2),yi("UpsampleRgb565LinePair",Hr,2);var G7=R.UpsampleRgbLinePair,W7=R.UpsampleBgrLinePair,wE=R.UpsampleRgbaLinePair,_E=R.UpsampleBgraLinePair,SE=R.UpsampleArgbLinePair,AE=R.UpsampleRgba4444LinePair,K7=R.UpsampleRgb565LinePair,yg=16,vg=1<<yg-1,yh=-227,Tx=482,J7=6,EE=0,Y7=a(256),X7=a(256),Z7=a(256),Q7=a(256),eF=a(Tx-yh),tF=a(Tx-yh);Ho("YuvToRgbRow",ou,3),Ho("YuvToBgrRow",su,3),Ho("YuvToRgbaRow",oh,4),Ho("YuvToBgraRow",ah,4),Ho("YuvToArgbRow",uu,4),Ho("YuvToRgba4444Row",lu,2),Ho("YuvToRgb565Row",Hr,2);var NE=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],xg=[0,2,8],nF=[8,7,6,4,4,2,2,2,1,1,1,1],rF=1;this.WebPDecodeRGBA=function(g,S,k,M,q){var H=hg,G=new ge,J=new on;G.ba=J,J.S=H,J.width=[J.width],J.height=[J.height];var Z=J.width,te=J.height,he=new _t;if(he==null||g==null)var we=2;else e(he!=null),we=cu(g,S,k,he.width,he.height,he.Pd,he.Qd,he.format,null);if(we!=0?Z=0:(Z!=null&&(Z[0]=he.width[0]),te!=null&&(te[0]=he.height[0]),Z=1),Z){J.width=J.width[0],J.height=J.height[0],M!=null&&(M[0]=J.width),q!=null&&(q[0]=J.height);e:{if(M=new _c,(q=new Pe).data=g,q.w=S,q.ha=k,q.kd=1,S=[0],e(q!=null),((g=cu(q.data,q.w,q.ha,null,null,null,S,null,q))==0||g==7)&&S[0]&&(g=4),(S=g)==0){if(e(G!=null),M.data=q.data,M.w=q.w+q.offset,M.ha=q.ha-q.offset,M.put=bt,M.ac=ia,M.bc=$o,M.ma=G,q.xa){if((g=Wl())==null){G=1;break e}if(function(ne,pe){var ve=[0],Ee=[0],be=[0];t:for(;;){if(ne==null)return 0;if(pe==null)return ne.a=2,0;if(ne.l=pe,ne.a=0,Q(ne.m,pe.data,pe.w,pe.ha),!Fo(ne.m,ve,Ee,be)){ne.a=3;break t}if(ne.xb=bE,pe.width=ve[0],pe.height=Ee[0],!uo(ve[0],Ee[0],1,ne,null))break t;return 1}return e(ne.a!=0),0}(g,M)){if(M=(S=$s(M.width,M.height,G.Oa,G.ba))==0){t:{M=g;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((k=M.l)!=null),e((q=k.ma)!=null),M.xb!=0){if(M.ca=q.ba,M.tb=q.tb,e(M.ca!=null),!sh(q.Oa,k,pg)){M.a=2;break n}if(!Kl(M,k.width)||k.da)break n;if((k.da||mt(M.ca.S))&&ua(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&ua()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!ee(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!Ra(M,M.V,M.Ba,M.c,M.i,k.o,Rs))break n;q.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(S=g.a)}else S=g.a}else{if((g=new ax)==null){G=1;break e}if(g.Fa=q.na,g.P=q.P,g.qc=q.Sa,Qm(g,M)){if((S=$s(M.width,M.height,G.Oa,G.ba))==0){if(g.Aa=0,k=G.Oa,e((q=g)!=null),k!=null){if(0<(Z=0>(Z=k.Md)?0:100<Z?255:255*Z/100)){for(te=he=0;4>te;++te)12>(we=q.pb[te]).lc&&(we.ia=Z*nF[0>we.lc?0:we.lc]>>3),he|=we.ia;he&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=k.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}(function(ne,pe){if(ne==null)return 0;if(pe==null)return ar(ne,2,"NULL VP8Io parameter in VP8Decode().");if(!ne.cb&&!Qm(ne,pe))return 0;if(e(ne.cb),pe.ac==null||pe.ac(pe)){pe.ob&&(ne.L=0);var ve=xg[ne.L];if(ne.L==2?(ne.yb=0,ne.zb=0):(ne.yb=pe.v-ve>>4,ne.zb=pe.j-ve>>4,0>ne.yb&&(ne.yb=0),0>ne.zb&&(ne.zb=0)),ne.Va=pe.o+15+ve>>4,ne.Hb=pe.va+15+ve>>4,ne.Hb>ne.za&&(ne.Hb=ne.za),ne.Va>ne.Ub&&(ne.Va=ne.Ub),0<ne.L){var Ee=ne.ed;for(ve=0;4>ve;++ve){var be;if(ne.Qa.Cb){var Te=ne.Qa.Lb[ve];ne.Qa.Fb||(Te+=Ee.Tb)}else Te=Ee.Tb;for(be=0;1>=be;++be){var Ce=ne.gd[ve][be],Le=Te;if(Ee.Pc&&(Le+=Ee.vd[0],be&&(Le+=Ee.od[0])),0<(Le=0>Le?0:63<Le?63:Le)){var Ie=Le;0<Ee.wb&&(Ie=4<Ee.wb?Ie>>2:Ie>>1)>9-Ee.wb&&(Ie=9-Ee.wb),1>Ie&&(Ie=1),Ce.dd=Ie,Ce.tc=2*Le+Ie,Ce.ld=40<=Le?2:15<=Le?1:0}else Ce.tc=0;Ce.La=be}}}ve=0}else ar(ne,6,"Frame setup failed"),ve=ne.a;if(ve=ve==0){if(ve){ne.$c=0,0<ne.Aa||(ne.Ic=rF);t:{ve=ne.Ic,Ee=4*(Ie=ne.za);var ft=32*Ie,Ze=Ie+1,Mt=0<ne.L?Ie*(0<ne.Aa?2:1):0,at=(ne.Aa==2?2:1)*Ie;if((Ce=Ee+832+(be=3*(16*ve+xg[ne.L])/2*ft)+(Te=ne.Fa!=null&&0<ne.Fa.length?ne.Kc.c*ne.Kc.i:0))!=Ce)ve=0;else{if(Ce>ne.Vb){if(ne.Vb=0,ne.Ec=a(Ce),ne.Fc=0,ne.Ec==null){ve=ar(ne,1,"no memory during frame initialization.");break t}ne.Vb=Ce}Ce=ne.Ec,Le=ne.Fc,ne.Ac=Ce,ne.Bc=Le,Le+=Ee,ne.Gd=o(ft,Ym),ne.Hd=0,ne.rb=o(Ze+1,Kf),ne.sb=1,ne.wa=Mt?o(Mt,la):null,ne.Y=0,ne.D.Nb=0,ne.D.wa=ne.wa,ne.D.Y=ne.Y,0<ne.Aa&&(ne.D.Y+=Ie),e(!0),ne.oc=Ce,ne.pc=Le,Le+=832,ne.ya=o(at,Jf),ne.aa=0,ne.D.ya=ne.ya,ne.D.aa=ne.aa,ne.Aa==2&&(ne.D.aa+=Ie),ne.R=16*Ie,ne.B=8*Ie,Ie=(ft=xg[ne.L])*ne.R,ft=ft/2*ne.B,ne.sa=Ce,ne.ta=Le+Ie,ne.qa=ne.sa,ne.ra=ne.ta+16*ve*ne.R+ft,ne.Ha=ne.qa,ne.Ia=ne.ra+8*ve*ne.B+ft,ne.$c=0,Le+=be,ne.mb=Te?Ce:null,ne.nb=Te?Le:null,e(Le+Te<=ne.Fc+ne.Vb),Jl(ne),i(ne.Ac,ne.Bc,0,Ee),ve=1}}if(ve){if(pe.ka=0,pe.y=ne.sa,pe.O=ne.ta,pe.f=ne.qa,pe.N=ne.ra,pe.ea=ne.Ha,pe.Vd=ne.Ia,pe.fa=ne.R,pe.Rc=ne.B,pe.F=null,pe.J=0,!mE){for(ve=-255;255>=ve;++ve)dE[255+ve]=0>ve?-ve:ve;for(ve=-1020;1020>=ve;++ve)fE[1020+ve]=-128>ve?-128:127<ve?127:ve;for(ve=-112;112>=ve;++ve)hE[112+ve]=-16>ve?-16:15<ve?15:ve;for(ve=-255;510>=ve;++ve)pE[255+ve]=0>ve?0:255<ve?255:ve;mE=1}zs=tg,hu=sx,po=lx,nn=co,pn=eg,da=ox,Xn=ig,mr=ag,Wo=T,ph=B,kc=ru,cg=og,nE=ie,rE=de,iE=ih,aE=nu,oE=ng,sE=rg,Ma[0]=mx,Ma[1]=Xf,Ma[2]=hx,Ma[3]=px,Ma[4]=gx,Ma[5]=qo,Ma[6]=Bo,Ma[7]=yx,Ma[8]=Sc,Ma[9]=vx,Hs[0]=Ms,Hs[1]=cx,Hs[2]=dx,Hs[3]=Zf,Hs[4]=fx,Hs[5]=Zl,Hs[6]=Qf,Ko[0]=Ec,Ko[1]=ux,Ko[2]=eh,Ko[3]=Ql,Ko[4]=th,Ko[5]=xx,Ko[6]=nh,ve=1}else ve=0}ve&&(ve=function(qt,gr){for(qt.M=0;qt.M<qt.Va;++qt.M){var Dt,ot=qt.Jc[qt.M&qt.Xb],ze=qt.m,Zn=qt;for(Dt=0;Dt<Zn.za;++Dt){var Lt=ze,Ht=Zn,Nn=Ht.Ac,Dr=Ht.Bc+4*Dt,ai=Ht.zc,zn=Ht.ya[Ht.aa+Dt];if(Ht.Qa.Bb?zn.$b=ye(Lt,Ht.Pa.jb[0])?2+ye(Lt,Ht.Pa.jb[2]):ye(Lt,Ht.Pa.jb[1]):zn.$b=0,Ht.kc&&(zn.Ad=ye(Lt,Ht.Bd)),zn.Za=!ye(Lt,145)+0,zn.Za){var Gr=zn.Ob,oi=0;for(Ht=0;4>Ht;++Ht){var yr,Gt=ai[0+Ht];for(yr=0;4>yr;++yr){Gt=q7[Nn[Dr+yr]][Gt];for(var sn=xE[ye(Lt,Gt[0])];0<sn;)sn=xE[2*sn+ye(Lt,Gt[sn])];Gt=-sn,Nn[Dr+yr]=Gt}r(Gr,oi,Nn,Dr,4),oi+=4,ai[0+Ht]=Gt}}else Gt=ye(Lt,156)?ye(Lt,128)?1:3:ye(Lt,163)?2:0,zn.Ob[0]=Gt,i(Nn,Dr,Gt,4),i(ai,0,Gt,4);zn.Dd=ye(Lt,142)?ye(Lt,114)?ye(Lt,183)?1:3:2:0}if(Zn.m.Ka)return ar(qt,7,"Premature end-of-partition0 encountered.");for(;qt.ja<qt.za;++qt.ja){if(Zn=ot,Lt=(ze=qt).rb[ze.sb-1],Nn=ze.rb[ze.sb+ze.ja],Dt=ze.ya[ze.aa+ze.ja],Dr=ze.kc?Dt.Ad:0)Lt.la=Nn.la=0,Dt.Za||(Lt.Na=Nn.Na=0),Dt.Hc=0,Dt.Gc=0,Dt.ia=0;else{var Hn,ln;if(Lt=Nn,Nn=Zn,Dr=ze.Pa.Xc,ai=ze.ya[ze.aa+ze.ja],zn=ze.pb[ai.$b],Ht=ai.ad,Gr=0,oi=ze.rb[ze.sb-1],Gt=yr=0,i(Ht,Gr,0,384),ai.Za)var $r=0,Da=Dr[3];else{sn=a(16);var Qn=Lt.Na+oi.Na;if(Qn=gh(Nn,Dr[1],Qn,zn.Eb,0,sn,0),Lt.Na=oi.Na=(0<Qn)+0,1<Qn)zs(sn,0,Ht,Gr);else{var vi=sn[0]+3>>3;for(sn=0;256>sn;sn+=16)Ht[Gr+sn]=vi}$r=1,Da=Dr[0]}var mn=15&Lt.la,vr=15&oi.la;for(sn=0;4>sn;++sn){var ji=1&vr;for(vi=ln=0;4>vi;++vi)mn=mn>>1|(ji=(Qn=gh(Nn,Da,Qn=ji+(1&mn),zn.Sc,$r,Ht,Gr))>$r)<<7,ln=ln<<2|(3<Qn?3:1<Qn?2:Ht[Gr+0]!=0),Gr+=16;mn>>=4,vr=vr>>1|ji<<7,yr=(yr<<8|ln)>>>0}for(Da=mn,$r=vr>>4,Hn=0;4>Hn;Hn+=2){for(ln=0,mn=Lt.la>>4+Hn,vr=oi.la>>4+Hn,sn=0;2>sn;++sn){for(ji=1&vr,vi=0;2>vi;++vi)Qn=ji+(1&mn),mn=mn>>1|(ji=0<(Qn=gh(Nn,Dr[2],Qn,zn.Qc,0,Ht,Gr)))<<3,ln=ln<<2|(3<Qn?3:1<Qn?2:Ht[Gr+0]!=0),Gr+=16;mn>>=2,vr=vr>>1|ji<<5}Gt|=ln<<4*Hn,Da|=mn<<4<<Hn,$r|=(240&vr)<<Hn}Lt.la=Da,oi.la=$r,ai.Hc=yr,ai.Gc=Gt,ai.ia=43690&Gt?0:zn.ia,Dr=!(yr|Gt)}if(0<ze.L&&(ze.wa[ze.Y+ze.ja]=ze.gd[Dt.$b][Dt.Za],ze.wa[ze.Y+ze.ja].La|=!Dr),Zn.Ka)return ar(qt,7,"Premature end-of-file encountered.")}if(Jl(qt),ze=gr,Zn=1,Dt=(ot=qt).D,Lt=0<ot.L&&ot.M>=ot.zb&&ot.M<=ot.Va,ot.Aa==0)t:{if(Dt.M=ot.M,Dt.uc=Lt,ca(ot,Dt),Zn=1,Dt=(ln=ot.D).Nb,Lt=(Gt=xg[ot.L])*ot.R,Nn=Gt/2*ot.B,sn=16*Dt*ot.R,vi=8*Dt*ot.B,Dr=ot.sa,ai=ot.ta-Lt+sn,zn=ot.qa,Ht=ot.ra-Nn+vi,Gr=ot.Ha,oi=ot.Ia-Nn+vi,vr=(mn=ln.M)==0,yr=mn>=ot.Va-1,ot.Aa==2&&ca(ot,ln),ln.uc)for(ji=(Qn=ot).D.M,e(Qn.D.uc),ln=Qn.yb;ln<Qn.Hb;++ln){$r=ln,Da=ji;var si=(Ri=(Fr=Qn).D).Nb;Hn=Fr.R;var Ri=Ri.wa[Ri.Y+$r],Li=Fr.sa,xi=Fr.ta+16*si*Hn+16*$r,Mi=Ri.dd,bn=Ri.tc;if(bn!=0)if(e(3<=bn),Fr.L==1)0<$r&&aE(Li,xi,Hn,bn+4),Ri.La&&sE(Li,xi,Hn,bn),0<Da&&iE(Li,xi,Hn,bn+4),Ri.La&&oE(Li,xi,Hn,bn);else{var Di=Fr.B,$a=Fr.qa,pu=Fr.ra+8*si*Di+8*$r,Jo=Fr.Ha,Fr=Fr.Ia+8*si*Di+8*$r;si=Ri.ld,0<$r&&(mr(Li,xi,Hn,bn+4,Mi,si),ph($a,pu,Jo,Fr,Di,bn+4,Mi,si)),Ri.La&&(cg(Li,xi,Hn,bn,Mi,si),rE($a,pu,Jo,Fr,Di,bn,Mi,si)),0<Da&&(Xn(Li,xi,Hn,bn+4,Mi,si),Wo($a,pu,Jo,Fr,Di,bn+4,Mi,si)),Ri.La&&(kc(Li,xi,Hn,bn,Mi,si),nE($a,pu,Jo,Fr,Di,bn,Mi,si))}}if(ot.ia&&alert("todo:DitherRow"),ze.put!=null){if(ln=16*mn,mn=16*(mn+1),vr?(ze.y=ot.sa,ze.O=ot.ta+sn,ze.f=ot.qa,ze.N=ot.ra+vi,ze.ea=ot.Ha,ze.W=ot.Ia+vi):(ln-=Gt,ze.y=Dr,ze.O=ai,ze.f=zn,ze.N=Ht,ze.ea=Gr,ze.W=oi),yr||(mn-=Gt),mn>ze.o&&(mn=ze.o),ze.F=null,ze.J=null,ot.Fa!=null&&0<ot.Fa.length&&ln<mn&&(ze.J=or(ot,ze,ln,mn-ln),ze.F=ot.mb,ze.F==null&&ze.F.length==0)){Zn=ar(ot,3,"Could not decode alpha data.");break t}ln<ze.j&&(Gt=ze.j-ln,ln=ze.j,e(!(1&Gt)),ze.O+=ot.R*Gt,ze.N+=ot.B*(Gt>>1),ze.W+=ot.B*(Gt>>1),ze.F!=null&&(ze.J+=ze.width*Gt)),ln<mn&&(ze.O+=ze.v,ze.N+=ze.v>>1,ze.W+=ze.v>>1,ze.F!=null&&(ze.J+=ze.v),ze.ka=ln-ze.j,ze.U=ze.va-ze.v,ze.T=mn-ln,Zn=ze.put(ze))}Dt+1!=ot.Ic||yr||(r(ot.sa,ot.ta-Lt,Dr,ai+16*ot.R,Lt),r(ot.qa,ot.ra-Nn,zn,Ht+8*ot.B,Nn),r(ot.Ha,ot.Ia-Nn,Gr,oi+8*ot.B,Nn))}if(!Zn)return ar(qt,6,"Output aborted.")}return 1}(ne,pe)),pe.bc!=null&&pe.bc(pe),ve&=1}return ve?(ne.cb=0,ve):0})(g,M)||(S=g.a)}}else S=g.a}S==0&&G.Oa!=null&&G.Oa.fd&&(S=lh(G.ba))}G=S}H=G!=0?null:11>H?J.f.RGBA.eb:J.f.kb.y}else H=null;return H};var TE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(R,D){for(var C="",L=0;L<4;L++)C+=String.fromCharCode(R[D++]);return C}function c(R,D){return R[D+0]|R[D+1]<<8}function d(R,D){return(R[D+0]|R[D+1]<<8|R[D+2]<<16)>>>0}function p(R,D){return(R[D+0]|R[D+1]<<8|R[D+2]<<16|R[D+3]<<24)>>>0}new l;var h=[0],v=[0],y=[],w=new l,b=t,_=function(R,D){var C={},L=0,F=!1,$=0,V=0;if(C.frames=[],!function(j,z){for(var K=0;K<4;K++)if(j[z+K]!="RIFF".charCodeAt(K))return!0;return!1}(R,D)){for(p(R,D+=4),D+=8;D<R.length;){var Y=u(R,D),W=p(R,D+=4);D+=4;var U=W+(1&W);switch(Y){case"VP8 ":case"VP8L":C.frames[L]===void 0&&(C.frames[L]={}),(oe=C.frames[L]).src_off=F?V:D-8,oe.src_size=$+W+8,L++,F&&(F=!1,$=0,V=0);break;case"VP8X":(oe=C.header={}).feature_flags=R[D];var Q=D+4;oe.canvas_width=1+d(R,Q),Q+=3,oe.canvas_height=1+d(R,Q),Q+=3;break;case"ALPH":F=!0,$=U+8,V=D-8;break;case"ANIM":(oe=C.header).bgcolor=p(R,D),Q=D+4,oe.loop_count=c(R,Q),Q+=2;break;case"ANMF":var le,oe;(oe=C.frames[L]={}).offset_x=2*d(R,D),D+=3,oe.offset_y=2*d(R,D),D+=3,oe.width=1+d(R,D),D+=3,oe.height=1+d(R,D),D+=3,oe.duration=d(R,D),D+=3,le=R[D++],oe.dispose=1&le,oe.blend=le>>1&1}Y!="ANMF"&&(D+=U)}return C}}(b,0);_.response=b,_.rgbaoutput=!0,_.dataurl=!1;var A=_.header?_.header:null,N=_.frames?_.frames:null;if(A){A.loop_counter=A.loop_count,h=[A.canvas_height],v=[A.canvas_width];for(var E=0;E<N.length&&N[E].blend!=0;E++);}var P=N[0],I=w.WebPDecodeRGBA(b,P.src_off,P.src_size,v,h);P.rgba=I,P.imgwidth=v[0],P.imgheight=h[0];for(var O=0;O<v[0]*h[0]*4;O++)y[O]=I[O];return this.width=v,this.height=h,this.data=y,this}(function(t){var e,n,r,i,a,o,s,l,u,c=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new o,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new o,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var d=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=j;Object.defineProperty(this,"pdf",{get:function(){return z}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(se){K=!!se}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(se){re=!!se}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(se){isNaN(se)||(ae=se)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(se){isNaN(se)||(fe=se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(se){var ee;typeof se=="number"?ee=[se,se,se,se]:((ee=new Array(4))[0]=se[0],ee[1]=se.length>=2?se[1]:ee[0],ee[2]=se.length>=3?se[2]:ee[0],ee[3]=se.length>=4?se[3]:ee[1]),u.margin=ee}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(se){xe=se}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(se){ue=se}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function(se){ye=se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(se){se instanceof c&&(u=se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(se){u.path=se}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(se){Se=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var ee;ee=p(se),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var ee=p(se);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var me=null,je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(se){me=null,je=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var ee;if(this.ctx.font=se,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(se))!==null){var Ve=ee[1];ee[2];var qe=ee[3],Ge=ee[4];ee[5];var _e=ee[6],Re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ge)[2];Ge=Math.floor(Re==="px"?parseFloat(Ge)*this.pdf.internal.scaleFactor:Re==="em"?parseFloat(Ge)*this.pdf.getFontSize():parseFloat(Ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ge);var Ae=function(rt){var dt,Qt,Bt=[],it=rt.trim();if(it==="")return hw;if(it in _O)return[_O[it]];for(;it!=="";){switch(Qt=null,dt=(it=AO(it)).charAt(0)){case'"':case"'":Qt=eEe(it.substring(1),dt);break;default:Qt=tEe(it)}if(Qt===null||(Bt.push(Qt[0]),(it=AO(Qt[1]))!==""&&it.charAt(0)!==","))return hw;it=it.replace(/^,/,"")}return Bt}(_e);if(this.fontFaces){var De=function(rt,dt){if(me===null){var Qt=function(Bt){var it=[];return Object.keys(Bt).forEach(function(Ct){Bt[Ct].forEach(function(an){var gt=null;switch(an){case"bold":gt={family:Ct,weight:"bold"};break;case"italic":gt={family:Ct,style:"italic"};break;case"bolditalic":gt={family:Ct,weight:"bold",style:"italic"};break;case"":case"normal":gt={family:Ct}}gt!==null&&(gt.ref={name:Ct,style:an},it.push(gt))})}),it}(rt.getFontList());me=function(Bt){for(var it={},Ct=0;Ct<Bt.length;++Ct){var an=fw(Bt[Ct]),gt=an.family,xt=an.stretch,mt=an.style,vn=an.weight;it[gt]=it[gt]||{},it[gt][xt]=it[gt][xt]||{},it[gt][xt][mt]=it[gt][xt][mt]||{},it[gt][xt][mt][vn]=an}return it}(Qt.concat(dt))}return me}(this.pdf,this.fontFaces),Me=Ae.map(function(rt){return{family:rt,stretch:"normal",weight:qe,style:Ve}}),st=function(rt,dt,Qt){for(var Bt=(Qt=Qt||{}).defaultFontFamily||"times",it=Object.assign({},QAe,Qt.genericFontFamilies||{}),Ct=null,an=null,gt=0;gt<dt.length;++gt)if(it[(Ct=fw(dt[gt])).family]&&(Ct.family=it[Ct.family]),rt.hasOwnProperty(Ct.family)){an=rt[Ct.family];break}if(!(an=an||rt[Bt]))throw new Error("Could not find a font-family for the rule '"+SO(Ct)+"' and default family '"+Bt+"'.");if(an=function(xt,mt){if(mt[xt])return mt[xt];var vn=S5[xt],Mn=vn<=S5.normal?-1:1,on=wO(mt,E7,vn,Mn);if(!on)throw new Error("Could not find a matching font-stretch value for "+xt);return on}(Ct.stretch,an),an=function(xt,mt){if(mt[xt])return mt[xt];for(var vn=A7[xt],Mn=0;Mn<vn.length;++Mn)if(mt[vn[Mn]])return mt[vn[Mn]];throw new Error("Could not find a matching font-style for "+xt)}(Ct.style,an),!(an=function(xt,mt){if(mt[xt])return mt[xt];if(xt===400&&mt[500])return mt[500];if(xt===500&&mt[400])return mt[400];var vn=ZAe[xt],Mn=wO(mt,N7,vn,xt<400?-1:1);if(!Mn)throw new Error("Could not find a matching font-weight for value "+xt);return Mn}(Ct.weight,an)))throw new Error("Failed to resolve a font for the rule '"+SO(Ct)+"'.");return an}(De,Me);this.pdf.setFont(st.ref.name,st.ref.style)}else{var Fe="";(qe==="bold"||parseInt(qe,10)>=700||Ve==="bold")&&(Fe="bold"),Ve==="italic"&&(Fe+="italic"),Fe.length===0&&(Fe="normal");for(var We="",vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},nt=0;nt<Ae.length;nt++){if(this.pdf.internal.getFont(Ae[nt],Fe,{noFallback:!0,disableWarning:!0})!==void 0){We=Ae[nt];break}if(Fe==="bolditalic"&&this.pdf.internal.getFont(Ae[nt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)We=Ae[nt],Fe="bold";else if(this.pdf.internal.getFont(Ae[nt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){We=Ae[nt],Fe="normal";break}}if(We===""){for(var Je=0;Je<Ae.length;Je++)if(vt[Ae[Je]]){We=vt[Ae[Je]];break}}We=We===""?"Times":We,this.pdf.setFont(We,Fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};d.prototype.setLineDash=function(j){this.lineDash=j},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){N.call(this,"fill",!1)},d.prototype.stroke=function(){N.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(j,z){if(isNaN(j)||isNaN(z))throw gn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(j,z));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(j,z)},d.prototype.closePath=function(){var j=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&un(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){j=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(j.x,j.y)},d.prototype.lineTo=function(j,z){if(isNaN(j)||isNaN(z))throw gn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(j,z));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},d.prototype.quadraticCurveTo=function(j,z,K,re){if(isNaN(K)||isNaN(re)||isNaN(j)||isNaN(z))throw gn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new o(K,re)),fe=this.ctx.transform.applyToPoint(new o(j,z));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},d.prototype.bezierCurveTo=function(j,z,K,re,ae,fe){if(isNaN(ae)||isNaN(fe)||isNaN(j)||isNaN(z)||isNaN(K)||isNaN(re))throw gn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new o(ae,fe)),ue=this.ctx.transform.applyToPoint(new o(j,z)),ye=this.ctx.transform.applyToPoint(new o(K,re));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:ye.x,y2:ye.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},d.prototype.arc=function(j,z,K,re,ae,fe){if(isNaN(j)||isNaN(z)||isNaN(K)||isNaN(re)||isNaN(ae))throw gn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new o(j,z));j=xe.x,z=xe.y;var ue=this.ctx.transform.applyToPoint(new o(0,K)),ye=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(ue.x-ye.x,2)+Math.pow(ue.y-ye.y,2))}Math.abs(ae-re)>=2*Math.PI&&(re=0,ae=2*Math.PI),this.path.push({type:"arc",x:j,y:z,radius:K,startAngle:re,endAngle:ae,counterclockwise:fe})},d.prototype.arcTo=function(j,z,K,re,ae){throw new Error("arcTo not implemented.")},d.prototype.rect=function(j,z,K,re){if(isNaN(j)||isNaN(z)||isNaN(K)||isNaN(re))throw gn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,z),this.lineTo(j+K,z),this.lineTo(j+K,z+re),this.lineTo(j,z+re),this.lineTo(j,z),this.lineTo(j+K,z),this.lineTo(j,z)},d.prototype.fillRect=function(j,z,K,re){if(isNaN(j)||isNaN(z)||isNaN(K)||isNaN(re))throw gn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,z,K,re),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},d.prototype.strokeRect=function(j,z,K,re){if(isNaN(j)||isNaN(z)||isNaN(K)||isNaN(re))throw gn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(j,z,K,re),this.stroke())},d.prototype.clearRect=function(j,z,K,re){if(isNaN(j)||isNaN(z)||isNaN(K)||isNaN(re))throw gn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,z,K,re))},d.prototype.save=function(j){j=typeof j!="boolean"||j;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},d.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(z),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(j){var z,K,re,ae;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))z=0,K=0,re=0,ae=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(fe!==null)z=parseInt(fe[1]),K=parseInt(fe[2]),re=parseInt(fe[3]),ae=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)z=parseInt(fe[1]),K=parseInt(fe[2]),re=parseInt(fe[3]),ae=parseFloat(fe[4]);else{if(ae=1,typeof j=="string"&&j.charAt(0)!=="#"){var xe=new y7(j);j=xe.ok?xe.toHex():"#000000"}j.length===4?(z=j.substring(1,2),z+=z,K=j.substring(2,3),K+=K,re=j.substring(3,4),re+=re):(z=j.substring(1,3),K=j.substring(3,5),re=j.substring(5,7)),z=parseInt(z,16),K=parseInt(K,16),re=parseInt(re,16)}}return{r:z,g:K,b:re,a:ae,style:j}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(j,z,K,re){if(isNaN(z)||isNaN(K)||typeof j!="string")throw gn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!h.call(this)){var ae=U(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;L.call(this,{text:j,x:z,y:K,scale:fe,angle:ae,align:this.textAlign,maxWidth:re})}},d.prototype.strokeText=function(j,z,K,re){if(isNaN(z)||isNaN(K)||typeof j!="string")throw gn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){re=isNaN(re)?void 0:re;var ae=U(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;L.call(this,{text:j,x:z,y:K,scale:fe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:re})}},d.prototype.measureText=function(j){if(typeof j!="string")throw gn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,K=this.pdf.internal.scaleFactor,re=z.internal.getFontSize(),ae=z.getStringUnitWidth(j)*re/z.internal.scaleFactor;return new function(fe){var xe=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this}({width:ae*=Math.round(96*K/72*1e4)/1e4})},d.prototype.scale=function(j,z){if(isNaN(j)||isNaN(z))throw gn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(j,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.rotate=function(j){if(isNaN(j))throw gn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.translate=function(j,z){if(isNaN(j)||isNaN(z))throw gn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,j,z);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.transform=function(j,z,K,re,ae,fe){if(isNaN(j)||isNaN(z)||isNaN(K)||isNaN(re)||isNaN(ae)||isNaN(fe))throw gn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new l(j,z,K,re,ae,fe);this.ctx.transform=this.ctx.transform.multiply(xe)},d.prototype.setTransform=function(j,z,K,re,ae,fe){j=isNaN(j)?1:j,z=isNaN(z)?0:z,K=isNaN(K)?0:K,re=isNaN(re)?1:re,ae=isNaN(ae)?0:ae,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(j,z,K,re,ae,fe)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(j,z,K,re,ae,fe,xe,ue,ye){var Se=this.pdf.getImageProperties(j),me=1,je=1,se=1,ee=1;re!==void 0&&ue!==void 0&&(se=ue/re,ee=ye/ae,me=Se.width/re*ue/re,je=Se.height/ae*ye/ae),fe===void 0&&(fe=z,xe=K,z=0,K=0),re!==void 0&&ue===void 0&&(ue=re,ye=ae),re===void 0&&ue===void 0&&(ue=Se.width,ye=Se.height);for(var Ve,qe=this.ctx.transform.decompose(),Ge=U(qe.rotate.shx),_e=new l,Re=(_e=(_e=(_e=_e.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale)).applyToRectangle(new s(fe-z*se,xe-K*ee,re*me,ae*je)),Ae=w.call(this,Re),De=[],Me=0;Me<Ae.length;Me+=1)De.indexOf(Ae[Me])===-1&&De.push(Ae[Me]);if(A(De),this.autoPaging)for(var st=De[0],Fe=De[De.length-1],We=st;We<Fe+1;We++){this.pdf.setPage(We);var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=We===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=We===1?0:Je+(We-2)*rt;if(this.ctx.clip_path.length!==0){var Qt=this.path;Ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Ve,this.posX+this.margin[3],-dt+nt+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=Qt}var Bt=JSON.parse(JSON.stringify(Re));Bt=_([Bt],this.posX+this.margin[3],-dt+nt+this.ctx.prevPageLastElemOffset)[0];var it=(We>st||We<Fe)&&y.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,rt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Bt.x,Bt.y,Bt.w,Bt.h,null,null,Ge),it&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,Ge)};var w=function(j,z,K){var re=[];z=z||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":re.push(Math.floor((j.y+ae)/K)+1);break;case"arc":re.push(Math.floor((j.y+ae-j.radius)/K)+1),re.push(Math.floor((j.y+ae+j.radius)/K)+1);break;case"qct":var fe=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);re.push(Math.floor((fe.y+ae)/K)+1),re.push(Math.floor((fe.y+fe.h+ae)/K)+1);break;case"bct":var xe=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);re.push(Math.floor((xe.y+ae)/K)+1),re.push(Math.floor((xe.y+xe.h+ae)/K)+1);break;case"rect":re.push(Math.floor((j.y+ae)/K)+1),re.push(Math.floor((j.y+j.h+ae)/K)+1)}for(var ue=0;ue<re.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<re[ue];)b.call(this);return re},b=function(){var j=this.fillStyle,z=this.strokeStyle,K=this.font,re=this.lineCap,ae=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=z,this.font=K,this.lineCap=re,this.lineWidth=ae,this.lineJoin=fe},_=function(j,z,K){for(var re=0;re<j.length;re++)switch(j[re].type){case"bct":j[re].x2+=z,j[re].y2+=K;case"qct":j[re].x1+=z,j[re].y1+=K;default:j[re].x+=z,j[re].y+=K}return j},A=function(j){return j.sort(function(z,K){return z-K})},N=function(j,z){for(var K,re,ae=this.fillStyle,fe=this.strokeStyle,xe=this.lineCap,ue=this.lineWidth,ye=Math.abs(ue*this.ctx.transform.scaleX),Se=this.lineJoin,me=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),se=[],ee=0;ee<je.length;ee++)if(je[ee].x!==void 0)for(var Ve=w.call(this,je[ee]),qe=0;qe<Ve.length;qe+=1)se.indexOf(Ve[qe])===-1&&se.push(Ve[qe]);for(var Ge=0;Ge<se.length;Ge++)for(;this.pdf.internal.getNumberOfPages()<se[Ge];)b.call(this);if(A(se),this.autoPaging)for(var _e=se[0],Re=se[se.length-1],Ae=_e;Ae<Re+1;Ae++){this.pdf.setPage(Ae),this.fillStyle=ae,this.strokeStyle=fe,this.lineCap=xe,this.lineWidth=ye,this.lineJoin=Se;var De=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=Ae===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=Ae===1?0:st+(Ae-2)*Fe;if(this.ctx.clip_path.length!==0){var vt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(K,this.posX+this.margin[3],-We+Me+this.ctx.prevPageLastElemOffset),E.call(this,j,!0),this.path=vt}if(re=JSON.parse(JSON.stringify(me)),this.path=_(re,this.posX+this.margin[3],-We+Me+this.ctx.prevPageLastElemOffset),z===!1||Ae===0){var nt=(Ae>_e||Ae<Re)&&y.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,Fe,null).clip().discardPath()),E.call(this,j,z),nt&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=ye,E.call(this,j,z),this.lineWidth=ue;this.path=me},E=function(j,z){if((j!=="stroke"||z||!v.call(this))&&(j==="stroke"||z||!h.call(this))){for(var K,re,ae=[],fe=this.path,xe=0;xe<fe.length;xe++){var ue=fe[xe];switch(ue.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ue,deltas:[],abs:[]});break;case"lt":var ye=ae.length;if(fe[xe-1]&&!isNaN(fe[xe-1].x)&&(K=[ue.x-fe[xe-1].x,ue.y-fe[xe-1].y],ye>0)){for(;ye>=0;ye--)if(ae[ye-1].close!==!0&&ae[ye-1].begin!==!0){ae[ye-1].deltas.push(K),ae[ye-1].abs.push(ue);break}}break;case"bct":K=[ue.x1-fe[xe-1].x,ue.y1-fe[xe-1].y,ue.x2-fe[xe-1].x,ue.y2-fe[xe-1].y,ue.x-fe[xe-1].x,ue.y-fe[xe-1].y],ae[ae.length-1].deltas.push(K);break;case"qct":var Se=fe[xe-1].x+2/3*(ue.x1-fe[xe-1].x),me=fe[xe-1].y+2/3*(ue.y1-fe[xe-1].y),je=ue.x+2/3*(ue.x1-ue.x),se=ue.y+2/3*(ue.y1-ue.y),ee=ue.x,Ve=ue.y;K=[Se-fe[xe-1].x,me-fe[xe-1].y,je-fe[xe-1].x,se-fe[xe-1].y,ee-fe[xe-1].x,Ve-fe[xe-1].y],ae[ae.length-1].deltas.push(K);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ue)}}re=z?null:j==="stroke"?"stroke":"fill";for(var qe=!1,Ge=0;Ge<ae.length;Ge++)if(ae[Ge].arc)for(var _e=ae[Ge].abs,Re=0;Re<_e.length;Re++){var Ae=_e[Re];Ae.type==="arc"?O.call(this,Ae.x,Ae.y,Ae.radius,Ae.startAngle,Ae.endAngle,Ae.counterclockwise,void 0,z,!qe):F.call(this,Ae.x,Ae.y),qe=!0}else if(ae[Ge].close===!0)this.pdf.internal.out("h"),qe=!1;else if(ae[Ge].begin!==!0){var De=ae[Ge].start.x,Me=ae[Ge].start.y;$.call(this,ae[Ge].deltas,De,Me),qe=!0}re&&R.call(this,re),z&&D.call(this)}},P=function(j){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-K;case"top":return j+z-K;case"hanging":return j+z-2*K;case"middle":return j+z/2-K;default:return j}},I=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(z,K){this.colorStops.push([z,K])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(j,z,K,re,ae,fe,xe,ue,ye){for(var Se=Y.call(this,K,re,ae,fe),me=0;me<Se.length;me++){var je=Se[me];me===0&&(ye?C.call(this,je.x1+j,je.y1+z):F.call(this,je.x1+j,je.y1+z)),V.call(this,j,z,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}ue?D.call(this):R.call(this,xe)},R=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(j,z){this.pdf.internal.out(n(j)+" "+r(z)+" m")},L=function(j){var z;switch(j.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var K=this.pdf.getTextDimensions(j.text),re=P.call(this,j.y),ae=I.call(this,re)-K.h,fe=this.ctx.transform.applyToPoint(new o(j.x,re)),xe=this.ctx.transform.decompose(),ue=new l;ue=(ue=(ue=ue.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var ye,Se,me,je=this.ctx.transform.applyToRectangle(new s(j.x,re,K.w,K.h)),se=ue.applyToRectangle(new s(j.x,ae,K.w,K.h)),ee=w.call(this,se),Ve=[],qe=0;qe<ee.length;qe+=1)Ve.indexOf(ee[qe])===-1&&Ve.push(ee[qe]);if(A(Ve),this.autoPaging)for(var Ge=Ve[0],_e=Ve[Ve.length-1],Re=Ge;Re<_e+1;Re++){this.pdf.setPage(Re);var Ae=Re===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[2],st=Me-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],We=Fe-this.margin[3],vt=Re===1?0:De+(Re-2)*st;if(this.ctx.clip_path.length!==0){var nt=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ye,this.posX+this.margin[3],-1*vt+Ae),E.call(this,"fill",!0),this.path=nt}var Je=_([JSON.parse(JSON.stringify(se))],this.posX+this.margin[3],-vt+Ae+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*j.scale),me=this.lineWidth,this.lineWidth=me*j.scale);var rt=this.autoPaging!=="text";if(rt||Je.y+Je.h<=Me){if(rt||Je.y>=Ae&&Je.x<=Fe){var dt=rt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Fe-Je.x)[0],Qt=_([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-vt+Ae+this.ctx.prevPageLastElemOffset)[0],Bt=rt&&(Re>Ge||Re<_e)&&y.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,st,null).clip().discardPath()),this.pdf.text(dt,Qt.x,Qt.y,{angle:j.angle,align:z,renderingMode:j.renderingMode}),Bt&&this.pdf.restoreGraphicsState()}}else Je.y<Me&&(this.ctx.prevPageLastElemOffset+=Me-Je.y);j.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=me)}else j.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*j.scale),me=this.lineWidth,this.lineWidth=me*j.scale),this.pdf.text(j.text,fe.x+this.posX,fe.y+this.posY,{angle:j.angle,align:z,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=me)},F=function(j,z,K,re){K=K||0,re=re||0,this.pdf.internal.out(n(j+K)+" "+r(z+re)+" l")},$=function(j,z,K){return this.pdf.lines(j,z,K,null,null)},V=function(j,z,K,re,ae,fe,xe,ue){this.pdf.internal.out([e(i(K+j)),e(a(re+z)),e(i(ae+j)),e(a(fe+z)),e(i(xe+j)),e(a(ue+z)),"c"].join(" "))},Y=function(j,z,K,re){for(var ae=2*Math.PI,fe=Math.PI/2;z>K;)z-=ae;var xe=Math.abs(K-z);xe<ae&&re&&(xe=ae-xe);for(var ue=[],ye=re?-1:1,Se=z;xe>1e-5;){var me=Se+ye*Math.min(xe,fe);ue.push(W.call(this,j,Se,me)),xe-=Math.abs(me-Se),Se=me}return ue},W=function(j,z,K){var re=(K-z)/2,ae=j*Math.cos(re),fe=j*Math.sin(re),xe=ae,ue=-fe,ye=xe*xe+ue*ue,Se=ye+xe*ae+ue*fe,me=4/3*(Math.sqrt(2*ye*Se)-Se)/(xe*fe-ue*ae),je=xe-me*ue,se=ue+me*xe,ee=je,Ve=-se,qe=re+z,Ge=Math.cos(qe),_e=Math.sin(qe);return{x1:j*Math.cos(z),y1:j*Math.sin(z),x2:je*Ge-se*_e,y2:je*_e+se*Ge,x3:ee*Ge-Ve*_e,y3:ee*_e+Ve*Ge,x4:j*Math.cos(K),y4:j*Math.sin(K)}},U=function(j){return 180*j/Math.PI},Q=function(j,z,K,re,ae,fe){var xe=j+.5*(K-j),ue=z+.5*(re-z),ye=ae+.5*(K-ae),Se=fe+.5*(re-fe),me=Math.min(j,ae,xe,ye),je=Math.max(j,ae,xe,ye),se=Math.min(z,fe,ue,Se),ee=Math.max(z,fe,ue,Se);return new s(me,se,je-me,ee-se)},le=function(j,z,K,re,ae,fe,xe,ue){var ye,Se,me,je,se,ee,Ve,qe,Ge,_e,Re,Ae,De,Me,st=K-j,Fe=re-z,We=ae-K,vt=fe-re,nt=xe-ae,Je=ue-fe;for(Se=0;Se<41;Se++)Ge=(Ve=(me=j+(ye=Se/40)*st)+ye*((se=K+ye*We)-me))+ye*(se+ye*(ae+ye*nt-se)-Ve),_e=(qe=(je=z+ye*Fe)+ye*((ee=re+ye*vt)-je))+ye*(ee+ye*(fe+ye*Je-ee)-qe),Se==0?(Re=Ge,Ae=_e,De=Ge,Me=_e):(Re=Math.min(Re,Ge),Ae=Math.min(Ae,_e),De=Math.max(De,Ge),Me=Math.max(Me,_e));return new s(Math.round(Re),Math.round(Ae),Math.round(De-Re),Math.round(Me-Ae))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,z,K=(j=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:z}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(ht.API),function(t){var e=function(o){var s,l,u,c,d,p,h,v,y,w;for(l=[],u=0,c=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;c>u;u+=4)(d=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(p=(d=((d=((d=((d=(d-(w=d%85))/85)-(y=d%85))/85)-(v=d%85))/85)-(h=d%85))/85)%85,l.push(p+33,h+33,v+33,y+33,w+33)):l.push(122);return function(b,_){for(var A=_;A>0;A--)b.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var s,l,u,c,d,p=String,h="length",v=255,y="charCodeAt",w="slice",b="replace";for(o[w](-2),o=o[w](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),u=[],c=0,d=(o+=s="uuuuu"[w](o[h]%5||5))[h];d>c;c+=5)l=52200625*(o[y](c)-33)+614125*(o[y](c+1)-33)+7225*(o[y](c+2)-33)+85*(o[y](c+3)-33)+(o[y](c+4)-33),u.push(v&l>>24,v&l>>16,v&l>>8,v&l);return function(_,A){for(var N=A;N>0;N--)_.pop()}(u,s[h]),p.fromCharCode.apply(p,u)},r=function(o){return o.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var l="",u=0;u<o.length;u+=2)l+=String.fromCharCode("0x"+(o[u]+o[u+1]));return l},a=function(o){for(var s=new Uint8Array(o.length),l=o.length;l--;)s[l]=o.charCodeAt(l);return(s=g5(s)).reduce(function(u,c){return u+String.fromCharCode(c)},"")};t.processDataByFilters=function(o,s){var l=0,u=o||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:u,reverseChain:c.reverse().join(" ")}}}(ht.API),function(t){t.loadFile=function(e,n,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(l,u,c){var d=new XMLHttpRequest,p=0,h=function(v){var y=v.length,w=[],b=String.fromCharCode;for(p=0;p<y;p+=1)w.push(b(255&v.charCodeAt(p)));return w.join("")};if(d.open("GET",l,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?c(h(this.responseText)):c(void 0)}),d.send(null),u&&d.status===200)return h(d.responseText)}(i,a,o)}catch{}return s}(e,n,r)},t.loadImageFile=t.loadFile}(ht.API),function(t){function e(){return(At.html2canvas?Promise.resolve(At.html2canvas):Kb(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function n(){return(At.DOMPurify?Promise.resolve(At.DOMPurify):Kb(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var l=un(s);return l==="undefined"?"undefined":l==="string"||s instanceof String?"string":l==="number"||s instanceof Number?"number":l==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(s,l){var u=document.createElement(s);for(var c in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[c]=l.style[c];return u},a=function s(l,u){for(var c=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)u!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||c.appendChild(s(d,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(c.width=l.width,c.height=l.height,c.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(c.value=l.value),c.addEventListener("load",function(){c.scrollTop=l.scrollTop,c.scrollLeft=l.scrollLeft},!0)),c},o=function s(l){var u=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),u);return(c=c.setProgress(1,s,1,[s])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,l){return s.__proto__=l||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),l){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:s,dompurify:u})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(l){var u=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var v=c[h],y=v.src.find(function(w){return w.format==="truetype"});y&&u.addFont(y.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(s,l):this.outputPdf(s,l)},o.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(r(s)!=="object")return this;var l=Object.keys(s||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=s[u]};switch(u){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[u]=s[u]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(s,l){return this.then(function(){var u=s in o.template.prop?this.prop[s]:this.opt[s];return l?l(u):u})},o.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function l(u,c){return Math.floor(u*c/72*96)}return this.then(function(){(s=s||ht.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,l,u,c){return s!=null&&(this.progress.val=s),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,l,u,c){return this.setProgress(s?this.progress.val+s:null,l||null,u?this.progress.n+u:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(s,l){var u=this;return this.thenCore(s,l,function(c,d){return u.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,c),p}).then(c,d).then(function(p){return u.updateProgress(1),p})})},o.prototype.thenCore=function(s,l,u){u=u||Promise.prototype.then;var c=this;s&&(s=s.bind(c)),l&&(l=l.bind(c));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?c:o.convert(Object.assign({},c),Promise.prototype),p=u.call(d,s,l);return o.convert(p,c.__proto__)},o.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},o.prototype.thenList=function(s){var l=this;return s.forEach(function(u){l=l.thenCore(u)}),l},o.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return o.convert(l,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ht.getPageSize=function(s,l,u){if(un(s)==="object"){var c=s;s=c.orientation,l=c.unit||l,u=c.format||u}l=l||"mm",u=u||"a4",s=(""+(s||"P")).toLowerCase();var d,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var v,y=0,w=0;if(h.hasOwnProperty(p))y=h[p][1]/d,w=h[p][0]/d;else try{y=u[1],w=u[0]}catch{throw new Error("Invalid format: "+u)}if(s==="p"||s==="portrait")s="p",w>y&&(v=w,w=y,y=v);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",y>w&&(v=w,w=y,y=v)}return{width:w,height:y,unit:l,k:d,orientation:s}},t.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(fw):null;var u=new o(l);return l.worker?u:u.from(s).doCallback()}}(ht.API),ht.API.addJS=function(t){return NO=t,this.internal.events.subscribe("postPutResources",function(){wy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(wy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),EO=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+NO+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){wy!==void 0&&EO!==void 0&&this.internal.out("/Names <</JavaScript "+wy+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=r.exec(o);if(s!=null){var l=s[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(a=0;a<u;a++){var d=n.internal.newObject();c.push(d);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<c.length;a++)n.internal.write("(page_"+(a+1)+")"+c[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(ht.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,a,o,s){var l,u=this.decode.DCT_DECODE,c=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(d){for(var p,h=256*d.charCodeAt(4)+d.charCodeAt(5),v=d.length,y={width:0,height:0,numcomponents:1},w=4;w<v;w+=2){if(w+=h,e.indexOf(d.charCodeAt(w+1))!==-1){p=256*d.charCodeAt(w+5)+d.charCodeAt(w+6),y={width:256*d.charCodeAt(w+7)+d.charCodeAt(w+8),height:p,numcomponents:d.charCodeAt(w+9)};break}h=256*d.charCodeAt(w+2)+d.charCodeAt(w+3)}return y}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:n,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(ht.API),ht.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,a=$Ae(t,{checkCrc:!0}),o=a.width,s=a.height,l=a.channels,u=a.palette,c=a.depth;i=u&&l===1?function(O){for(var R=O.width,D=O.height,C=O.data,L=O.palette,F=O.depth,$=!1,V=[],Y=[],W=void 0,U=!1,Q=0,le=0;le<L.length;le++){var oe=kI(L[le],4),j=oe[0],z=oe[1],K=oe[2],re=oe[3];V.push(j,z,K),re!=null&&(re===0?(Q++,Y.length<1&&Y.push(le)):re<255&&(U=!0))}if(U||Q>1){$=!0,Y=void 0;var ae=R*D;W=new Uint8Array(ae);for(var fe=new DataView(C.buffer),xe=0;xe<ae;xe++){var ue=pw(fe,xe,F),ye=kI(L[ue],4)[3];W[xe]=ye}}else Q===0&&(Y=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:$?8:void 0,colorBytes:C,alphaBytes:W,needSMask:$,palette:V,mask:Y}}(a):l===2||l===4?function(O){for(var R=O.data,D=O.width,C=O.height,L=O.channels,F=O.depth,$=L===2?"DeviceGray":"DeviceRGB",V=L-1,Y=D*C,W=V,U=Y*W,Q=1*Y,le=Math.ceil(U*F/8),oe=Math.ceil(Q*F/8),j=new Uint8Array(le),z=new Uint8Array(oe),K=new DataView(R.buffer),re=new DataView(j.buffer),ae=new DataView(z.buffer),fe=!1,xe=0;xe<Y;xe++){for(var ue=xe*L,ye=0;ye<W;ye++)LO(re,pw(K,ue+ye,F),xe*W+ye,F);var Se=pw(K,ue+W,F);Se<(1<<F)-1&&(fe=!0),LO(ae,Se,1*xe,F)}return{colorSpace:$,colorsPerPixel:V,sMaskBitsPerComponent:fe?F:void 0,colorBytes:j,alphaBytes:z,needSMask:fe}}(a):function(O){var R=O.data,D=O.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:D,colorsPerPixel:D==="DeviceGray"?1:3,colorBytes:R instanceof Uint16Array?function(C){for(var L=C.length,F=new Uint8Array(2*L),$=new DataView(F.buffer,F.byteOffset,F.byteLength),V=0;V<L;V++)$.setUint16(2*V,C[V],!1);return F}(R):R,needSMask:!1}}(a);var d,p,h,v=i,y=v.colorSpace,w=v.colorsPerPixel,b=v.sMaskBitsPerComponent,_=v.colorBytes,A=v.alphaBytes,N=v.needSMask,E=v.palette,P=v.mask,I=null;return r!==ht.API.image_compression.NONE&&typeof g5=="function"?(I=function(O){var R;switch(O){case ht.API.image_compression.FAST:R=11;break;case ht.API.image_compression.MEDIUM:R=13;break;case ht.API.image_compression.SLOW:R=14;break;default:R=12}return R}(r),d=this.decode.FLATE_DECODE,p="/Predictor ".concat(I," /Colors ").concat(w," /BitsPerComponent ").concat(c," /Columns ").concat(o),t=kO(_,Math.ceil(o*w*c/8),w,c,r),N&&(h=kO(A,Math.ceil(o*b/8),1,b,r))):(d=void 0,p=void 0,t=_,N&&(h=A)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:t,index:e,filter:d,decodeParameters:p,transparency:P,palette:E,sMask:h,predictor:I,width:o,height:s,bitsPerComponent:c,sMaskBitsPerComponent:b,colorSpace:y}}},function(t){t.processGIF89A=function(e,n,r,i){var a=new aEe(e),o=a.width,s=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:s},c=new mw(100).encode(u,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(ht.API),Ba.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ba.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){gn.log("bit decode error:"+n)}},Ba.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[a>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}n!==0&&(this.pos+=4-n)}},Ba.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,s=a>>4,l=15&a,u=this.palette[s];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ba.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Ba.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,s=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=s,this.data[c+2]=o,this.data[c+3]=u}this.pos+=t}},Ba.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,c=i*this.width*4+4*a;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=s,this.data[c+3]=255}this.pos+=t}},Ba.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ba.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=o}},Ba.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var a=new Ba(e,!1),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},u=new mw(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(ht.API),DO.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var a=new DO(e),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},u=new mw(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(ht.API),ht.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,u=0;u<i;u+=4){var c=r[u],d=r[u+1],p=r[u+2],h=r[u+3];a[s++]=c,a[s++]=d,a[s++]=p,o[l++]=h}var v=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ht.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zc=ht.API,_y=zc.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,d=e.doKerning!==!1,p=0,h=t.length,v=0,y=s[0]||l,w=[];for(n=0;n<h;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(p=d&&un(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/c:0,w.push((s[r]||y)/l+p)),v=r;return w},TO=zc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return zc.processArabic&&(t=zc.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:_y.apply(this,arguments).reduce(function(a,o){return a+o},0)},PO=function(t,e,n,r){for(var i=[],a=0,o=t.length,s=0;a!==o&&s+e[a]<n;)s+=e[a],a++;i.push(t.slice(0,a));var l=a;for(s=0;a!==o;)s+e[a]>r&&(i.push(t.slice(l,a)),s=0,l=a),s+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},CO=function(t,e,n){n||(n={});var r,i,a,o,s,l,u,c=[],d=[c],p=n.textIndent||0,h=0,v=0,y=t.split(" "),w=_y.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var b=Array(l).join(" "),_=[];y.map(function(N){(N=N.split(/\s*\n/)).length>1?_=_.concat(N.map(function(E,P){return(P&&E.length?`
`:"")+E})):_.push(N[0])}),y=_,l=TO.apply(this,[b,n])}for(a=0,o=y.length;a<o;a++){var A=0;if(r=y[a],l&&r[0]==`
`&&(r=r.substr(1),A=1),p+h+(v=(i=_y.apply(this,[r,n])).reduce(function(N,E){return N+E},0))>e||A){if(v>e){for(s=PO.apply(this,[r,i,e-(p+h),e]),c.push(s.shift()),c=[s.pop()];s.length;)d.push([s.shift()]);v=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(N,E){return N+E},0)}else c=[r];d.push(c),p=v+l,h=w}else c.push(r),p+=h+v,h=w}return u=l?function(N,E){return(E?b:"")+N.join(" ")}:function(N){return N.join(" ")},d.map(u)},zc.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var d=this.internal.getFont(c.fontName,c.fontStyle),p="Unicode";return d.metadata[p]?{widths:d.metadata[p].widths||{0:1},kerning:d.metadata[p].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var s,l,u=[];for(s=0,l=r.length;s<l;s++)u=u.concat(CO.apply(this,[r[s],o,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[n[a]]=e[a],i[e[a]]=n[a];var o=function(p){return"0x"+parseInt(p,10).toString(16)},s=t.__fontmetrics__.compress=function(p){var h,v,y,w,b=["{"];for(var _ in p){if(h=p[_],isNaN(parseInt(_,10))?v="'"+_+"'":(_=parseInt(_,10),v=(v=o(_).slice(2)).slice(0,-1)+i[v.slice(-1)]),typeof h=="number")h<0?(y=o(h).slice(3),w="-"):(y=o(h).slice(2),w=""),y=w+y.slice(0,-1)+i[y.slice(-1)];else{if(un(h)!=="object")throw new Error("Don't know what to do with value type "+un(h)+".");y=s(h)}b.push(v+y)}return b.push("}"),b.join("")},l=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,v,y,w,b={},_=1,A=b,N=[],E="",P="",I=p.length-1,O=1;O<I;O+=1)(w=p[O])=="'"?h?(y=h.join(""),h=void 0):h=[]:h?h.push(w):w=="{"?(N.push([A,y]),A={},y=void 0):w=="}"?((v=N.pop())[0][v[1]]=A,y=void 0,A=v[0]):w=="-"?_=-1:y===void 0?r.hasOwnProperty(w)?(E+=r[w],y=parseInt(E,16)*_,_=1,E=""):E+=w:r.hasOwnProperty(w)?(P+=r[w],A[y]=parseInt(P,16)*_,_=1,y=void 0,P=""):P+=w;return b},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var h=p.font,v=d.Unicode[h.postScriptName];v&&(h.metadata.Unicode={},h.metadata.Unicode.widths=v.widths,h.metadata.Unicode.kerning=v.kerning);var y=c.Unicode[h.postScriptName];y&&(h.metadata.Unicode.encoding=y,h.encoding=y.codePages[0])}])}(ht.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?e(s):e(Fy(s)),o.metadata=t.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(ht),ht.API.addSvgAsImage=function(t,e,n,r,i,a,o,s){if(isNaN(e)||isNaN(n))throw gn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw gn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var c={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(At.canvg?Promise.resolve(At.canvg):Kb(()=>import("./index.es-ByVl1CI6.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,c)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(c)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,o,s)})},ht.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},ht.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],u=0,c=0,d=0;function p(v,y){var w,b=!1;for(w=0;w<v.length;w+=1)v[w]===y&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=s.length;for(d=0;d<h;d+=1)n[s[d]].value=n[s[d]].defaultValue,n[s[d]].explicitSet=!1}if(un(t)==="object"){for(i in t)if(a=t[i],p(s,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&p(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(u=0;u<a.length;u+=1)if(r=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(c=0;c<a[u].length;c+=1)typeof a[u][c]!="number"&&(r=!1);r===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in n)n[v].explicitSet===!0&&(n[v].type==="name"?y.push("/"+v+" /"+n[v].value):y.push("/"+v+" "+n[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+o.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(ht.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,o){for(var s,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],d=0,p=a.length;d<p;++d){if(s=o.metadata.characterToGlyph(a.charCodeAt(d)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return c.join("");s=s.toString(16),c.push(u[4-s.length],s)}return c.join("")},r=function(a){var o,s,l,u,c,d,p;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,p=(s=Object.keys(a).sort(function(h,v){return h-v})).length;d<p;d++)o=s[d],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(u=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,u=o.newObject,c=o.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,p=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),h="",v=0;v<p.length;v++)h+=String.fromCharCode(p[v]);var y=u();c({data:h,addLength1:!0,objectId:y}),l("endobj");var w=u();c({data:r(s.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var b=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Jc(s.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var _=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Jc(s.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+w+" 0 R"),l("/BaseFont /"+Jc(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,u=o.newObject,c=o.putStream;if(s.metadata instanceof t.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,p="",h=0;h<d.length;h++)p+=String.fromCharCode(d[h]);var v=u();c({data:p,addLength1:!0,objectId:v}),l("endobj");var y=u();c({data:r(s.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var w=u();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+Jc(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=u();for(var b=0;b<s.metadata.hmtx.widths.length;b++)s.metadata.hmtx.widths[b]=parseInt(s.metadata.hmtx.widths[b]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Jc(s.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",l=a.x,u=a.y,c=a.options||{},d=a.mutex||{},p=d.pdfEscape,h=d.activeFontKey,v=d.fonts,y=h,w="",b=0,_="",A=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:s,x:l,y:u,options:c,mutex:d};for(_=s,y=h,Array.isArray(s)&&(_=s[0]),b=0;b<_.length;b+=1)v[y].metadata.hasOwnProperty("cmap")&&(o=v[y].metadata.cmap.unicode.codeMap[_[b].charCodeAt(0)]),o||_[b].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?w+=_[b]:w+="";var N="";return parseInt(y.slice(1))<14||A==="WinAnsiEncoding"?N=p(w,y).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):A==="Identity-H"&&(N=n(w,v[y])),d.isHex=!0,{text:N,x:l,y:u,options:c,mutex:d}};e.events.push(["postProcessText",function(a){var o=a.text||"",s=[],l={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?s.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):s.push(i(Object.assign({},l,{text:o[u]})).text);a.text=s}else a.text=i(Object.assign({},l,{text:o})).text}])}(ht),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ht.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,a,o,s,l,u,c,d=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,A=0;this.__bidiEngine__={};var N=function(C){var L=C.charCodeAt(),F=L>>8,$=y[F];return $!==void 0?d[256*$+(255&L)]:F===252||F===253?"AL":b.test(F)?"L":F===8?"R":"N"},E=function(C){for(var L,F=0;F<C.length;F++){if((L=N(C.charAt(F)))==="L")return!1;if(L==="R")return!0}return!1},P=function(C,L,F,$){var V,Y,W,U,Q=L[$];switch(Q){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"N":case"AN":break;case"EN":_&&(Q="AN");break;case"AL":_=!0,Q="R";break;case"WS":case"BN":Q="N";break;case"CS":$<1||$+1>=L.length||(V=F[$-1])!=="EN"&&V!=="AN"||(Y=L[$+1])!=="EN"&&Y!=="AN"?Q="N":_&&(Y="AN"),Q=Y===V?Y:"N";break;case"ES":Q=(V=$>0?F[$-1]:"B")==="EN"&&$+1<L.length&&L[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&F[$-1]==="EN"){Q="EN";break}if(_){Q="N";break}for(W=$+1,U=L.length;W<U&&L[W]==="ET";)W++;Q=W<U&&L[W]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(U=L.length,W=$+1;W<U&&L[W]==="NSM";)W++;if(W<U){var le=C[$],oe=le>=1425&&le<=2303||le===64286;if(V=L[W],oe&&(V==="R"||V==="AL")){Q="R";break}}}Q=$<1||(V=L[$-1])==="B"?"N":F[$-1];break;case"B":_=!1,i=!0,Q=A;break;case"S":a=!0,Q="N"}return Q},I=function(C,L,F){var $=C.split("");return F&&O($,F,{hiLevel:A}),$.reverse(),L&&L.reverse(),$.join("")},O=function(C,L,F){var $,V,Y,W,U,Q=-1,le=C.length,oe=0,j=[],z=A?h:p,K=[];for(_=!1,i=!1,a=!1,V=0;V<le;V++)K[V]=N(C[V]);for(Y=0;Y<le;Y++){if(U=oe,j[Y]=P(C,K,j,Y),$=240&(oe=z[U][v[j[Y]]]),oe&=15,L[Y]=W=z[oe][5],$>0)if($===16){for(V=Q;V<Y;V++)L[V]=1;Q=-1}else Q=-1;if(z[oe][6])Q===-1&&(Q=Y);else if(Q>-1){for(V=Q;V<Y;V++)L[V]=W;Q=-1}K[Y]==="B"&&(L[Y]=0),F.hiLevel|=W}a&&function(re,ae,fe){for(var xe=0;xe<fe;xe++)if(re[xe]==="S"){ae[xe]=A;for(var ue=xe-1;ue>=0&&re[ue]==="WS";ue--)ae[ue]=A}}(K,L,le)},R=function(C,L,F,$,V){if(!(V.hiLevel<C)){if(C===1&&A===1&&!i)return L.reverse(),void(F&&F.reverse());for(var Y,W,U,Q,le=L.length,oe=0;oe<le;){if($[oe]>=C){for(U=oe+1;U<le&&$[U]>=C;)U++;for(Q=oe,W=U-1;Q<W;Q++,W--)Y=L[Q],L[Q]=L[W],L[W]=Y,F&&(Y=F[Q],F[Q]=F[W],F[W]=Y);oe=U}oe++}}},D=function(C,L,F){var $=C.split(""),V={hiLevel:A};return F||(F=[]),O($,F,V),function(Y,W,U){if(U.hiLevel!==0&&c)for(var Q,le=0;le<Y.length;le++)W[le]===1&&(Q=w.indexOf(Y[le]))>=0&&(Y[le]=w[Q+1])}($,F,V),R(2,$,L,F,V),R(1,$,L,F,V),$.join("")};return this.__bidiEngine__.doBidiReorder=function(C,L,F){if(function(V,Y){if(Y)for(var W=0;W<V.length;W++)Y[W]=W;s===void 0&&(s=E(V)),u===void 0&&(u=E(V))}(C,L),o||!l||u)if(o&&l&&s^u)A=s?1:0,C=I(C,L,F);else if(!o&&l&&u)A=s?1:0,C=D(C,L,F),C=I(C,L);else if(!o||s||l||u){if(o&&!l&&s^u)C=I(C,L),s?(A=0,C=D(C,L,F)):(A=1,C=D(C,L,F),C=I(C,L));else if(o&&s&&!l&&u)A=1,C=D(C,L,F),C=I(C,L);else if(!o&&!l&&s^u){var $=c;s?(A=1,C=D(C,L,F),A=0,c=!1,C=D(C,L,F),c=$):(A=0,C=D(C,L,F),C=I(C,L),A=1,c=!1,C=D(C,L,F),c=$,C=I(C,L))}}else A=0,C=D(C,L,F);else A=s?1:0,C=D(C,L,F);return C},this.__bidiEngine__.setOptions=function(C){C&&(o=C.isInputVisual,l=C.isOutputVisual,s=C.isInputRtl,u=C.isOutputRtl,c=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([n.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([n.doBidiReorder(i[s])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ht),ht.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new jl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new bEe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new oEe(this.contents),this.head=new lEe(this),this.name=new hEe(this),this.cmap=new P7(this),this.toUnicode={},this.hhea=new uEe(this),this.maxp=new pEe(this),this.hmtx=new mEe(this),this.post=new dEe(this),this.os2=new cEe(this),this.loca=new xEe(this),this.glyf=new gEe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,l,u;for(u=[],o=0,s=(l=this.bbox).length;o<s;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,a,o,s;for(o=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var so,jl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,a,o,s,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*a+65536*o+256*s+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),oEe=function(){var t;function e(n){var r,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,a,o,s,l,u,c,d,p,h,v,y;for(y in h=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(h)/l),o=Math.floor(d/l),c=16*h-d,(i=new jl).writeInt(this.scalarType),i.writeShort(h),i.writeShort(d),i.writeShort(o),i.writeShort(c),a=16*h,u=i.pos+a,s=null,v=[],n)for(p=n[y],i.writeString(y),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),v=v.concat(p),y==="head"&&(s=u),u+=p.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-t(i.data),i.pos=s+8,i.writeUInt32(r),i.data},t=function(n){var r,i,a,o;for(n=C7.call(n);n.length%4;)n.push(0);for(a=new jl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),sEe={}.hasOwnProperty,Do=function(t,e){for(var n in e)sEe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};so=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var lEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new jl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),$O=function(){function t(e,n){var r,i,a,o,s,l,u,c,d,p,h,v,y,w,b,_,A;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),p=h/2,e.pos+=6,a=function(){var N,E;for(E=[],l=N=0;0<=p?N<p:N>p;l=0<=p?++N:--N)E.push(e.readUInt16());return E}(),e.pos+=2,y=function(){var N,E;for(E=[],l=N=0;0<=p?N<p:N>p;l=0<=p?++N:--N)E.push(e.readUInt16());return E}(),u=function(){var N,E;for(E=[],l=N=0;0<=p?N<p:N>p;l=0<=p?++N:--N)E.push(e.readUInt16());return E}(),c=function(){var N,E;for(E=[],l=N=0;0<=p?N<p:N>p;l=0<=p?++N:--N)E.push(e.readUInt16());return E}(),i=(this.length-e.pos+this.offset)/2,s=function(){var N,E;for(E=[],l=N=0;0<=i?N<i:N>i;l=0<=i?++N:--N)E.push(e.readUInt16());return E}(),l=b=0,A=a.length;b<A;l=++b)for(w=a[l],r=_=v=y[l];v<=w?_<=w:_>=w;r=v<=w?++_:--_)c[l]===0?o=r+u[l]:(o=s[c[l]/2+(r-v)-(p-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,i,a,o,s,l,u,c,d,p,h,v,y,w,b,_,A,N,E,P,I,O,R,D,C,L,F,$,V,Y,W,U,Q,le,oe,j,z,K,re,ae,fe,xe,ue,ye,Se,me;switch($=new jl,o=Object.keys(e).sort(function(je,se){return je-se}),n){case"macroman":for(y=0,w=function(){var je=[];for(v=0;v<256;++v)je.push(0);return je}(),_={0:0},a={},V=0,Q=o.length;V<Q;V++)_[ue=e[i=o[V]]]==null&&(_[ue]=++y),a[i]={old:e[i],new:_[e[i]]},w[i]=_[e[i]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(w),{charMap:a,subtable:$.data,maxGlyphID:y+1};case"unicode":for(L=[],d=[],A=0,_={},r={},b=u=null,Y=0,le=o.length;Y<le;Y++)_[E=e[i=o[Y]]]==null&&(_[E]=++A),r[i]={old:E,new:_[E]},s=_[E]-i,b!=null&&s===u||(b&&d.push(b),L.push(i),u=s),b=i;for(b&&d.push(b),d.push(65535),L.push(65535),D=2*(R=L.length),O=2*Math.pow(Math.log(R)/Math.LN2,2),p=Math.log(O/2)/Math.LN2,I=2*R-O,l=[],P=[],h=[],v=W=0,oe=L.length;W<oe;v=++W){if(C=L[v],c=d[v],C===65535){l.push(0),P.push(0);break}if(C-(F=r[C].new)>=32768)for(l.push(0),P.push(2*(h.length+R-v)),i=U=C;C<=c?U<=c:U>=c;i=C<=c?++U:--U)h.push(r[i].new);else l.push(F-C),P.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*R+2*h.length),$.writeUInt16(0),$.writeUInt16(D),$.writeUInt16(O),$.writeUInt16(p),$.writeUInt16(I),fe=0,j=d.length;fe<j;fe++)i=d[fe],$.writeUInt16(i);for($.writeUInt16(0),xe=0,z=L.length;xe<z;xe++)i=L[xe],$.writeUInt16(i);for(ye=0,K=l.length;ye<K;ye++)s=l[ye],$.writeUInt16(s);for(Se=0,re=P.length;Se<re;Se++)N=P[Se],$.writeUInt16(N);for(me=0,ae=h.length;me<ae;me++)y=h[me],$.writeUInt16(y);return{charMap:r,subtable:$.data,maxGlyphID:A+1}}},t}(),P7=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new $O(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=$O.encode(e,n),(i=new jl).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),uEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),cEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),dEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,s,l;for(l=[],a=o=0,s=this.file.maxp.numGlyphs;0<=s?o<s:o>s;a=0<=s?++o:--o)l.push(e.readUInt32());return l}).call(this)}},t}(),fEe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},hEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,a,o,s,l,u,c,d,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),s=e.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(l={},a=c=0,d=r.length;c<d;a=++c)i=r[a],e.pos=i.offset,u=e.readString(i.length),o=new fEe(u,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),pEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),mEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,a,o,s,l;for(e.pos=this.offset,this.metrics=[],n=0,s=this.file.hhea.numberOfMetrics;0<=s?n<s:n>s;n=0<=s?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,c;for(c=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)c.push(e.readInt16());return c}(),this.widths=(function(){var u,c,d,p;for(p=[],u=0,c=(d=this.metrics).length;u<c;u++)a=d[u],p.push(a.advance);return p}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),C7=[].slice,gEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,a,o,s,l,u,c,d;return e in this.cache?this.cache[e]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(s=new jl(n.read(i))).readShort(),u=s.readShort(),d=s.readShort(),l=s.readShort(),c=s.readShort(),this.cache[e]=o===-1?new vEe(s,u,d,l,c):new yEe(s,o,u,d,l,c),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,a,o,s,l;for(o=[],a=[],s=0,l=n.length;s<l;s++)i=e[n[s]],a.push(o.length),i&&(o=o.concat(i.encode(r)));return a.push(o.length),{table:o,offsets:a}},t}(),yEe=function(){function t(e,n,r,i,a,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),vEe=function(){function t(e,n,r,i,a){var o,s;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new jl(C7.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),xEe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Do(t,so),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<r.length;++o)if(r[o]=i,a<n.length&&n[a]==o){++a,r[o]=i;var s=this.offsets[o],l=this.offsets[o+1]-s;l>0&&(i+=l)}for(var u=new Array(4*r.length),c=0;c<r.length;++c)u[4*c+3]=255&r[c],u[4*c+2]=(65280&r[c])>>8,u[4*c+1]=(16711680&r[c])>>16,u[4*c]=(4278190080&r[c])>>24;return u},t}(),bEe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,a;for(n in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,a,o,s,l;for(i={},o=0,s=e.length;o<s;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(r=i[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],i[a]=r;return i},t.prototype.encode=function(e,n){var r,i,a,o,s,l,u,c,d,p,h,v,y,w,b;for(i in r=P7.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},b=r.charMap)h[(l=b[i]).old]=l.new;for(v in p=r.maxGlyphID,o)v in h||(h[v]=p++);return c=function(_){var A,N;for(A in N={},_)N[_[A]]=A;return N}(h),d=Object.keys(c).sort(function(_,A){return _-A}),y=function(){var _,A,N;for(N=[],_=0,A=d.length;_<A;_++)s=d[_],N.push(c[s]);return N}(),a=this.font.glyf.encode(o,y,h),u=this.font.loca.encode(a.offsets,y),w={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t}();ht.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,a,o;if(Array.isArray(n))return"["+function(){var s,l,u;for(u=[],s=0,l=n.length;s<l;s++)r=n[s],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)o=n[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+n},e}();function wEe(t){const e=new ht;let n=20;const r=e.internal.pageSize.getWidth(),i=20,a=r-2*i,o=(l,u,c=!1,d="#000000")=>{e.setFontSize(u),e.setTextColor(d),c?e.setFont("helvetica","bold"):e.setFont("helvetica","normal"),e.splitTextToSize(l,a).forEach(h=>{n>e.internal.pageSize.getHeight()-30&&(e.addPage(),n=20),e.text(h,i,n),n+=u*.5}),n+=5};o("Simulation Debrief Report",18,!0),n+=5,o(`Case: ${t.caseTitle}`,12,!0),o(`Patient: ${t.patientName}`,10),n+=5,o("Performance Summary",14,!0,"#3b82f6"),n+=3,o(`Overall Score: ${t.score.overall}%`,12,!0),o(`Diagnosis Accuracy: ${t.score.accuracy}%`,10),o(`MCQ Score: ${t.score.mcqScore}%`,10),o(`Time Taken: ${t.timeTaken} minutes`,10),o(`Current Streak: ${t.currentStreak} days`,10),n+=5,t.score.sloResults&&t.score.sloResults.length>0&&(o("Learning Outcomes",14,!0,"#3b82f6"),n+=3,t.score.sloResults.forEach(l=>{const u=l.status==="Achieved"?"":"";o(`${u} ${l.sloId}: ${l.percent}%`,10),l.sloText&&o(`   ${l.sloText}`,9)}),n+=5),o("Diagnosis Review",14,!0,"#3b82f6"),n+=3,o(`Your Diagnosis: ${t.diagnosis.student}`,10),o(`Correct Diagnosis: ${t.diagnosis.correct}`,10,!0),t.diagnosis.potential&&t.diagnosis.potential.length>0&&(o("Other Potential Diagnoses:",10,!0),t.diagnosis.potential.forEach(l=>{o(`   ${l.dx}`,9)})),n+=5,t.stepwiseReasoning&&(o("Stepwise Reasoning",14,!0,"#3b82f6"),n+=3,o(t.stepwiseReasoning,9),n+=5),t.mcqResults&&t.mcqResults.length>0&&(o("MCQ Results",14,!0,"#3b82f6"),n+=3,t.mcqResults.forEach((l,u)=>{o(`${u+1}. ${l.question}`,10,!0),l.options.forEach((c,d)=>{let p="  ";d===l.correctIndex&&(p=" "),d===l.selectedIndex&&!l.correct&&(p=" "),o(`${p}${c}`,9)}),l.explanation&&o(`Explanation: ${l.explanation}`,9),n+=3}),n+=5),t.rubricResults&&t.rubricResults.length>0&&(o("Rubric Assessment",14,!0,"#3b82f6"),n+=3,t.rubricResults.forEach((l,u)=>{o(`${u+1}. ${l.criterion}`,10,!0),o(`   Points: ${l.pointsEarned} / ${l.maxPoints}`,9),l.percentage!==void 0&&o(`   Score: ${l.percentage}%`,9),l.feedback&&o(`   Feedback: ${l.feedback}`,9),n+=3}),n+=5),t.learningPearls&&t.learningPearls.length>0&&(o("Learning Pearls",14,!0,"#3b82f6"),n+=3,t.learningPearls.forEach(l=>{o(` ${l}`,9)}),n+=5),t.furtherReading&&t.furtherReading.length>0&&(o("Further Reading",14,!0,"#3b82f6"),n+=3,t.furtherReading.forEach(l=>{o(` ${l.title}`,9),l.url&&o(`  ${l.url}`,8)}));const s=e.getNumberOfPages();for(let l=1;l<=s;l++)e.setPage(l),e.setFontSize(8),e.setTextColor("#666666"),e.text(`Page ${l} of ${s} | Generated on ${new Date().toLocaleDateString()}`,i,e.internal.pageSize.getHeight()-10);return e}function _Ee({user:t}){var ae,fe,xe,ue,ye,Se,me,je;const{runId:e}=Q0(),n=ro(),r=Ts(),[i,a]=X.useState(null),[o,s]=X.useState(!0),[l,u]=X.useState(null),[c,d]=X.useState("feedback"),[p,h]=X.useState(0),[v,y]=X.useState({}),[w,b]=X.useState(!1);X.useEffect(()=>{e&&(A(),_())},[e]),X.useEffect(()=>{if(i&&i.transcript){const ee=i.transcript.postCaseMCQAnswers||{};y(ee),b(Object.keys(ee).length>0)}},[i]);const _=async()=>{try{const{data:se}=await ke.from("simulation_runs").select("submitted_at, created_at").eq("student_id",t.id).not("submitted_at","is",null).order("submitted_at",{ascending:!1});if(!se||se.length===0){h(0);return}let ee=0;const Ve=new Date;Ve.setHours(0,0,0,0);let qe=new Date(Ve);for(const Ge of se){const _e=new Date(Ge.submitted_at||Ge.created_at);if(_e.setHours(0,0,0,0),_e.getTime()===qe.getTime())ee++,qe.setDate(qe.getDate()-1);else if(_e.getTime()<qe.getTime())break}h(ee)}catch(se){console.error("Error calculating streak:",se),h(0)}},A=async()=>{try{const{data:se,error:ee}=await ke.from("simulation_runs").select("*").eq("id",e).single();if(ee)throw ee;if(a(se),se){const Ve=se.transcript,qe=(Ve==null?void 0:Ve.postCaseMCQAnswers)||{};y(qe),b(Object.keys(qe).length>0)}if(se.assignment_id){const{data:Ve}=await ke.from("assignments").select("snapshot_id").eq("id",se.assignment_id).single();if(Ve){const{data:qe}=await ke.from("case_snapshots").select("*").eq("id",Ve.snapshot_id).single();u(qe)}}}catch(se){console.error("Error loading debrief:",se)}finally{s(!1)}};if(o)return f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});if(!i||!i.score)return f.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:f.jsx("p",{children:"Debrief data not available yet."})});const N=i.score,E=N.overall||0,P=N.sloResults||[],I=N.rubricResults||[],O=i.transcript,D=(((ae=l==null?void 0:l.clinical_case)==null?void 0:ae.mcqs)||[]).slice(-3).slice(0,3),C=(O==null?void 0:O.postCaseMCQAnswers)||{},L=D.length>0&&D.some(se=>C[`post-case-${se.id}`]!==void 0),F=N.postCaseMCQs||[],$=N.correctDiagnosis||((ue=(xe=(fe=l==null?void 0:l.clinical_case)==null?void 0:fe.potentialDiagnoses)==null?void 0:xe[0])==null?void 0:ue.dx)||"",V=N.studentDiagnosis||(O==null?void 0:O.diagnosis)||"",Y=N.diagnosisCorrect||!1,W=N.diagnosisScore||0,Q=(()=>{if(!i.started_at||!i.submitted_at)return"N/A";const se=new Date(i.started_at),ee=new Date(i.submitted_at),Ve=Math.floor((ee.getTime()-se.getTime())/6e4),qe=Math.floor((ee.getTime()-se.getTime())%6e4/1e3);return`${Ve}m ${qe}s`})(),le=N.stepwiseReasoning||N.aiComments||"Stepwise reasoning not available.",oe=((ye=l==null?void 0:l.clinical_case)==null?void 0:ye.learningPearls)||[],j=((Se=l==null?void 0:l.clinical_case)==null?void 0:Se.furtherReading)||[],z=se=>se>=80?"text-green-600":se>=60?"text-yellow-600":"text-red-600",K=se=>se>=80?"bg-green-100 text-green-800 border-green-200":se>=60?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",re=()=>{var Re,Ae,De,Me,st;if(!i||!l)return;const se=((Re=l.clinical_case)==null?void 0:Re.title)||"Untitled Case",ee=((De=(Ae=l.clinical_case)==null?void 0:Ae.patientProfile)==null?void 0:De.name)||"Patient";let Ve=0;if(i.started_at&&i.submitted_at){const Fe=new Date(i.started_at),We=new Date(i.submitted_at);Ve=Math.floor((We.getTime()-Fe.getTime())/6e4)}const qe=(F||[]).map((Fe,We)=>{const vt=D.find(rt=>rt.question===Fe.question),nt=(vt==null?void 0:vt.answerIndex)??-1,Je=v[`post-case-${vt==null?void 0:vt.id}`]??-1;return{question:Fe.question||`Question ${We+1}`,options:Fe.options||(vt==null?void 0:vt.options)||[],selectedIndex:Je,correctIndex:nt,correct:Je===nt,explanation:Fe.explanation}}),Ge={caseTitle:se,patientName:ee,score:{overall:E,accuracy:W,mcqScore:qe.length>0?Math.round(qe.filter(Fe=>Fe.correct).length/qe.length*100):0,sloResults:P.map(Fe=>({sloId:Fe.sloId||"Unknown",sloText:Fe.sloText,status:Fe.status||"Not Achieved",percent:Fe.percent||0}))},timeTaken:Ve,currentStreak:p,stepwiseReasoning:le,diagnosis:{student:V,correct:$,potential:((Me=l.clinical_case)==null?void 0:Me.potentialDiagnoses)||[]},mcqResults:qe,rubricResults:((st=i.score)==null?void 0:st.rubricResults)||[],learningPearls:oe,furtherReading:j};wEe(Ge).save(`debrief-${se.replace(/[^a-z0-9]/gi,"-").toLowerCase()}-${new Date().toISOString().split("T")[0]}.pdf`)};return f.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[f.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Simulation Debrief"}),((me=l==null?void 0:l.clinical_case)==null?void 0:me.title)&&f.jsx("p",{className:"text-gray-600",children:l.clinical_case.title})]}),f.jsxs("button",{onClick:()=>n("/results"),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900",children:[f.jsx(Up,{className:"w-4 h-4"}),"Back to Results"]})]}),f.jsx("div",{className:`mb-6 p-4 rounded-lg border-2 ${Y?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[Y?f.jsx(No,{className:"w-6 h-6 text-green-600"}):f.jsx(qu,{className:"w-6 h-6 text-red-600"}),f.jsxs("div",{children:[f.jsxs("div",{className:`font-semibold ${Y?"text-green-800":"text-red-800"}`,children:["Diagnosis ",Y?"Correct":"Incorrect"]}),!Y&&f.jsxs("div",{className:"text-sm text-red-700 mt-1",children:["The correct diagnosis was: ",$]})]})]})}),f.jsx(N5e,{accuracy:W,timeTaken:Q,currentStreak:p}),f.jsx(E5e,{activeTab:c,onTabChange:d}),f.jsxs("div",{className:"mt-6",children:[c==="feedback"&&f.jsxs("div",{children:[f.jsx(T5e,{reasoning:le}),f.jsx(C5e,{pearls:oe}),f.jsx(k5e,{references:j}),N.aiComments&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Qa,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold",children:"AI-Generated Feedback"})]}),f.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:f.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:N.aiComments})})]}),E<80&&f.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(n1,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Areas for Improvement"}),f.jsxs("ul",{className:"list-disc list-inside text-yellow-800 space-y-1",children:[P.filter(se=>se.status!=="Achieved").slice(0,3).map((se,ee)=>f.jsxs("li",{children:["Focus on improving ",se.sloId||`SLO ${ee+1}`," (currently"," ",se.percent.toFixed(0),"%)"]},ee)),f.jsx("li",{children:"Review the case materials and practice similar scenarios"}),f.jsx("li",{children:"Consider retaking this simulation to improve your score"})]})]})]})})]}),c==="review"&&f.jsxs("div",{children:[f.jsxs("div",{className:`bg-white rounded-lg shadow p-6 mb-6 border-2 ${K(E)}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Overall Performance"}),f.jsx(Tf,{className:`w-6 h-6 ${z(E)}`})]}),f.jsx("div",{className:"flex items-center justify-center mb-4",children:f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:`text-6xl font-bold ${z(E)}`,children:[E.toFixed(0),"%"]}),f.jsx("div",{className:"text-gray-600 mt-2",children:"Overall Score"})]})}),f.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-gray-900",children:P.length}),f.jsx("div",{className:"text-sm text-gray-600",children:"SLOs Assessed"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-gray-900",children:P.filter(se=>se.status==="Achieved").length}),f.jsx("div",{className:"text-sm text-gray-600",children:"SLOs Achieved"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Q}),f.jsx("div",{className:"text-sm text-gray-600",children:"Time Taken"})]})]})]}),((je=l==null?void 0:l.clinical_case)==null?void 0:je.potentialDiagnoses)&&f.jsx(P5e,{potentialDiagnoses:l.clinical_case.potentialDiagnoses,studentDiagnosis:V,correctDiagnosis:$}),P.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Eo,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold",children:"SLO (Specific Learning Outcomes) Breakdown"})]}),f.jsx("div",{className:"space-y-4",children:P.map((se,ee)=>f.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("span",{className:"font-medium text-gray-900",children:se.sloId||`SLO ${ee+1}`}),se.sloText&&f.jsx("p",{className:"text-sm text-gray-600 mt-1",children:se.sloText})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[se.status==="Achieved"?f.jsx(No,{className:"w-5 h-5 text-green-600"}):f.jsx(qu,{className:"w-5 h-5 text-red-600"}),f.jsxs("span",{className:`font-semibold ${z(se.percent)}`,children:[se.percent.toFixed(0),"%"]})]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:f.jsx("div",{className:`h-3 rounded-full transition-all ${se.percent>=70?"bg-green-600":se.percent>=50?"bg-yellow-600":"bg-red-600"}`,style:{width:`${Math.min(se.percent,100)}%`}})}),se.feedback&&f.jsxs("p",{className:"text-sm text-gray-600 mt-2 italic",children:['"',se.feedback,'"']})]},ee))})]}),I.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Qi,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold",children:"Rubric Assessment"})]}),f.jsx("div",{className:"space-y-3",children:I.map((se,ee)=>f.jsxs("div",{className:"border rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"font-medium text-gray-900",children:se.criterion}),f.jsxs("span",{className:"text-sm text-gray-600",children:[se.pointsEarned," / ",se.maxPoints," points"]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${se.pointsEarned/se.maxPoints*100}%`}})}),se.feedback&&f.jsx("p",{className:"text-sm text-gray-600 mt-2",children:se.feedback})]},ee))})]})]}),c==="questions"&&f.jsx("div",{children:D.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Qi,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold",children:"POST-CASE QUESTIONS"})]}),f.jsx("p",{className:"text-sm text-gray-600 mb-4",children:w?"Review your answers and results below.":"Answer these questions based on the case you just completed."}),f.jsx("div",{className:"space-y-4",children:D.map((se,ee)=>{var De;const Ve=`post-case-${se.id}`,qe=v[Ve],Ge=se.answerIndex,_e=se.options[Ge],Re=w||L,Ae=F.find(Me=>Me.question===se.question);return f.jsxs("div",{className:"border rounded-lg p-4",children:[f.jsx("div",{className:"flex items-start justify-between mb-3",children:f.jsxs("div",{className:"flex-1",children:[f.jsxs("p",{className:"font-medium text-gray-900 mb-2",children:[ee+1,". ",se.question]}),f.jsx("div",{className:"space-y-2 mt-3",children:(De=se.options)==null?void 0:De.map((Me,st)=>{const Fe=qe===st,We=st===Ge;return f.jsx("button",{onClick:()=>{Re||y({...v,[Ve]:st})},disabled:Re,className:`w-full text-left p-3 rounded-lg border-2 transition-all ${Re?We?"bg-green-50 border-green-200":Fe&&!We?"bg-red-50 border-red-200":"bg-white border-gray-200":Fe?"bg-primary-50 border-primary-300":"bg-white border-gray-200 hover:border-primary-300 hover:bg-gray-50"} ${Re?"cursor-default":"cursor-pointer"}`,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{children:Me}),Re&&We&&f.jsx(No,{className:"w-5 h-5 text-green-600"}),Re&&Fe&&!We&&f.jsx(qu,{className:"w-5 h-5 text-red-600"}),!Re&&Fe&&f.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-primary-600 bg-primary-100"})]})},st)})})]})}),Re&&((Ae==null?void 0:Ae.explanation)||se.explanation)&&f.jsxs("div",{className:"mt-3 pt-3 border-t",children:[f.jsx("div",{className:"font-medium text-gray-700 mb-1",children:"EXPLANATION"}),f.jsx("p",{className:"text-sm text-gray-600",children:(Ae==null?void 0:Ae.explanation)||`The correct answer is ${_e}. ${se.explanation||""}`})]})]},ee)})}),!w&&!L&&f.jsx("div",{className:"mt-6 pt-4 border-t",children:f.jsx("button",{onClick:async()=>{if(!D.every(ee=>v[`post-case-${ee.id}`]!==void 0)){r.warning("Please answer all questions before submitting.");return}if(e){const ee={...O,postCaseMCQAnswers:v},{error:Ve}=await ke.from("simulation_runs").update({transcript:ee}).eq("id",e);if(Ve){r.error("Error saving answers: "+Ve.message);return}try{const{error:qe}=await ke.functions.invoke("score_simulation",{body:{runId:e}});qe?console.error("Error re-scoring:",qe):(await A(),b(!0))}catch(qe){console.error("Error calling score function:",qe)}}},disabled:D.some(se=>v[`post-case-${se.id}`]===void 0),className:"w-full px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed font-semibold transition-all",children:"Submit Answers"})}),(w||L)&&f.jsx("div",{className:"mt-4 pt-4 border-t",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-gray-600",children:["Score: ",D.filter(se=>v[`post-case-${se.id}`]===se.answerIndex).length," / ",D.length]}),f.jsxs("span",{className:"font-semibold text-primary-600",children:[D.length>0?(D.filter(se=>v[`post-case-${se.id}`]===se.answerIndex).length/D.length*100).toFixed(0):0,"%"]})]})})]})})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:[f.jsxs("button",{onClick:()=>n("/results"),className:"flex items-center justify-center gap-2 px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[f.jsx(Up,{className:"w-4 h-4"}),"Back to Results"]}),f.jsxs("button",{onClick:re,className:"flex items-center justify-center gap-2 px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:[f.jsx(_d,{className:"w-4 h-4"}),"Download PDF Report"]})]})]}),f.jsx(Vr,{role:"student"}),f.jsx(kl,{toasts:r.toasts,onClose:r.removeToast})]})}function SEe({user:t}){const e=ro(),[n,r]=X.useState([]),[i,a]=X.useState(!0);X.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:u,error:c}=await ke.from("simulation_runs").select("*").eq("student_id",t.id).not("submitted_at","is",null).order("submitted_at",{ascending:!1});if(c)throw c;const d=await Promise.all((u||[]).map(async p=>{const{data:h}=await ke.from("assignments").select("*").eq("id",p.assignment_id).single();let v=null;if(h){const{data:y}=await ke.from("case_snapshots").select("*").eq("id",h.snapshot_id).single();v=y}return{...p,assignment:h,snapshot:v}}));r(d)}catch(u){console.error("Error loading results:",u)}finally{a(!1)}},s=u=>u>=80?"bg-green-100 text-green-800":u>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",l=(u,c)=>{const d=new Date(u),p=new Date(c);return`${Math.floor((p.getTime()-d.getTime())/6e4)} minutes`};return i?f.jsx("div",{className:"min-h-screen bg-gray-50 pb-20 flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[f.jsxs("div",{className:"p-4 md:p-6 max-w-6xl mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Results & History"}),f.jsx("p",{className:"text-gray-600",children:"View your past simulation attempts and performance"})]}),n.length>0&&f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.length}),f.jsx("div",{className:"text-sm text-gray-600",children:"Total Attempts"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[n.length>0?Math.round(n.reduce((u,c)=>{var p;const d=((p=c.score)==null?void 0:p.overall)||0;return u+d},0)/n.length):0,"%"]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Average Score"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:[n.length>0?Math.max(...n.map(u=>{var d;return((d=u.score)==null?void 0:d.overall)||0})):0,"%"]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Best Score"})]})]}),n.length===0?f.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[f.jsx(Tf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600 text-lg",children:"No completed simulations yet"}),f.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Complete a simulation to see your results here"})]}):f.jsx("div",{className:"space-y-4",children:n.map(u=>{var v,y,w,b,_,A,N;const c=((v=u.score)==null?void 0:v.overall)||0,d=((y=u.score)==null?void 0:y.sloResults)||[],p=((b=(w=u.snapshot)==null?void 0:w.clinical_case)==null?void 0:b.title)||"Untitled Station",h=((N=(A=(_=u.snapshot)==null?void 0:_.clinical_case)==null?void 0:A.patientProfile)==null?void 0:N.name)||"Patient";return f.jsx("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:p}),f.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Patient: ",h]})]}),f.jsxs("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${s(c)}`,children:[c.toFixed(0),"%"]})]}),f.jsxs("div",{className:"flex flex-wrap gap-4 mt-3 text-sm text-gray-600",children:[u.started_at&&u.submitted_at&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(uc,{className:"w-4 h-4"}),f.jsx("span",{children:l(u.started_at,u.submitted_at)})]}),u.submitted_at&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Pf,{className:"w-4 h-4"}),f.jsx("span",{children:new Date(u.submitted_at).toLocaleDateString()})]}),d.length>0&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Qa,{className:"w-4 h-4"}),f.jsxs("span",{children:[d.filter(E=>E.status==="Achieved").length," /"," ",d.length," SLOs Achieved"]})]})]}),d.length>0&&f.jsxs("div",{className:"mt-4 space-y-2",children:[d.slice(0,3).map((E,P)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:`h-2 rounded-full ${E.percent>=70?"bg-green-600":"bg-yellow-600"}`,style:{width:`${E.percent}%`}})}),f.jsxs("span",{className:"text-xs text-gray-600 w-12 text-right",children:[E.percent,"%"]})]},P)),d.length>3&&f.jsxs("p",{className:"text-xs text-gray-500",children:["+",d.length-3," more SLOs"]})]})]}),f.jsx("div",{className:"flex gap-2",children:f.jsxs("button",{onClick:()=>e(`/debrief/${u.id}`),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:[f.jsx(a1,{className:"w-4 h-4"}),"View Details"]})})]})},u.id)})})]}),f.jsx(Vr,{role:"student"})]})}function AEe({user:t}){const e=Ts(),[n,r]=X.useState({totalAttempts:0,averageScore:0,bestScore:0,completedAssignments:0}),[i,a]=X.useState([]),[o,s]=X.useState([]),[l,u]=X.useState(!0),[c,d]=X.useState(!1),[p,h]=X.useState(!1),[v,y]=X.useState({totalTimeSpent:0,averageTimePerAttempt:0,improvementRate:0,slosAchieved:0,totalSlos:0,streak:0,lastActivity:null});X.useEffect(()=>{w(),b()},[]);const w=async()=>{try{const{data:E}=await ke.from("simulation_runs").select("score, submitted_at, started_at, created_at").eq("student_id",t.id).not("submitted_at","is",null),P=E||[],I=P.map(ae=>{var fe;return((fe=ae.score)==null?void 0:fe.overall)||0}).filter(ae=>ae>0),O=P.length,R=I.length>0?I.reduce((ae,fe)=>ae+fe,0)/I.length:0,D=I.length>0?Math.max(...I):0,{data:C}=await ke.from("cohort_members").select("cohort_id").eq("student_id",t.id);let L=0;if(C&&C.length>0){const ae=C.map(xe=>xe.cohort_id),{data:fe}=await ke.from("assignments").select("id").in("cohort_id",ae);if(fe){const xe=fe.map(ye=>ye.id),{data:ue}=await ke.from("simulation_runs").select("assignment_id").eq("student_id",t.id).not("submitted_at","is",null).in("assignment_id",xe);L=new Set(ue==null?void 0:ue.map(ye=>ye.assignment_id)).size}}const{data:F}=await ke.from("simulation_runs").select("started_at, submitted_at, score, created_at").eq("student_id",t.id).not("submitted_at","is",null),$=(F||[]).reduce((ae,fe)=>{if(fe.started_at&&fe.submitted_at){const xe=new Date(fe.started_at),ue=new Date(fe.submitted_at);return ae+Math.floor((ue.getTime()-xe.getTime())/6e4)}return ae},0),V=P.length>0?Math.round($/P.length):0;let Y=0,W=0;P.forEach(ae=>{var xe;(((xe=ae.score)==null?void 0:xe.sloResults)||[]).forEach(ue=>{W++,ue.status==="Achieved"&&Y++})});const U=I.slice(0,5),Q=I.slice(5,10),le=U.length>0?U.reduce((ae,fe)=>ae+fe,0)/U.length:0,oe=Q.length>0?Q.reduce((ae,fe)=>ae+fe,0)/Q.length:0,j=oe>0?(le-oe)/oe*100:0,z=P[0],K=(z==null?void 0:z.submitted_at)||null;let re=0;if(P.length>0){const ae=new Date;ae.setHours(0,0,0,0);let fe=new Date(ae);for(let xe=0;xe<P.length;xe++){const ue=P[xe],ye=new Date(ue.submitted_at||ue.created_at||ue.started_at);if(ye.setHours(0,0,0,0),ye.getTime()===fe.getTime())re++,fe.setDate(fe.getDate()-1);else if(ye.getTime()<fe.getTime())break}}r({totalAttempts:O,averageScore:Math.round(R),bestScore:Math.round(D),completedAssignments:L}),y({totalTimeSpent:$,averageTimePerAttempt:V,improvementRate:Math.round(j*10)/10,slosAchieved:Y,totalSlos:W,streak:re,lastActivity:K})}catch(E){console.error("Error loading stats:",E)}finally{u(!1)}},b=async()=>{try{const{data:E}=await ke.from("cohort_members").select("cohort_id, cohorts(id, name, description)").eq("student_id",t.id),P=(E||[]).map(D=>D.cohort_id),I=(E||[]).map(D=>D.cohorts).filter(Boolean);a(I);const{data:O}=await ke.from("cohorts").select("id, name, description").order("name"),R=(O||[]).filter(D=>!P.includes(D.id));s(R)}catch(E){console.error("Error loading cohorts:",E)}},_=async E=>{d(!0);try{const{error:P}=await ke.from("cohort_members").insert({cohort_id:E,student_id:t.id});if(P)throw P;await b()}catch(P){e.error("Error joining cohort: "+P.message)}finally{d(!1)}},A=async E=>{if(confirm("Are you sure you want to leave this cohort? You will lose access to its assignments.")){d(!0);try{const{error:P}=await ke.from("cohort_members").delete().eq("cohort_id",E).eq("student_id",t.id);if(P)throw P;await b()}catch(P){e.error("Error leaving cohort: "+P.message)}finally{d(!1)}}},N=async()=>{await IS()};return f.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[f.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Profile"}),f.jsx("p",{className:"text-gray-600",children:"View your account information and performance statistics"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center",children:f.jsx(To,{className:"w-10 h-10 text-primary-600"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),f.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mt-1",children:[f.jsx(vL,{className:"w-4 h-4"}),f.jsx("span",{children:t.email})]}),f.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mt-1",children:[f.jsx(Pf,{className:"w-4 h-4"}),f.jsxs("span",{children:["Member since ",new Date(t.created_at).toLocaleDateString()]})]})]})]}),f.jsx("div",{className:"border-t pt-4",children:f.jsx("div",{className:"flex items-center gap-2 text-sm",children:f.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-800 rounded-full font-medium",children:"Student"})})})]}),!l&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(r1,{className:"w-5 h-5 text-primary-600"}),f.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.totalAttempts})]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Total Attempts"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Qa,{className:"w-5 h-5 text-green-600"}),f.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[n.averageScore,"%"]})]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Average Score"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Tf,{className:"w-5 h-5 text-yellow-600"}),f.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[n.bestScore,"%"]})]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Best Score"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(sp,{className:"w-5 h-5 text-primary-600"}),f.jsx("div",{className:"text-2xl font-bold text-primary-600",children:n.completedAssignments})]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[f.jsx(Eo,{className:"w-5 h-5 text-primary-600"}),"Performance Metrics"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Total Time Spent"}),f.jsxs("span",{className:"font-semibold text-gray-900",children:[v.totalTimeSpent," min"]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Avg Time per Attempt"}),f.jsxs("span",{className:"font-semibold text-gray-900",children:[v.averageTimePerAttempt," min"]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Improvement Rate"}),f.jsxs("span",{className:`font-semibold ${v.improvementRate>0?"text-green-600":v.improvementRate<0?"text-red-600":"text-gray-900"}`,children:[v.improvementRate>0?"+":"",v.improvementRate,"%"]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Current Streak"}),f.jsxs("span",{className:"font-semibold text-primary-600",children:[v.streak," days"]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[f.jsx(sp,{className:"w-5 h-5 text-primary-600"}),"Learning Outcomes"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"SLOs Achieved"}),f.jsxs("span",{className:"font-semibold text-gray-900",children:[v.slosAchieved," / ",v.totalSlos]})]}),v.totalSlos>0&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:f.jsx("div",{className:"bg-primary-600 h-3 rounded-full transition-all",style:{width:`${v.slosAchieved/v.totalSlos*100}%`}})}),f.jsxs("div",{className:"text-sm text-gray-500",children:[(v.slosAchieved/v.totalSlos*100).toFixed(1),"% achievement rate"]})]}),v.lastActivity&&f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-4 pt-4 border-t",children:[f.jsx(uc,{className:"w-4 h-4"}),f.jsxs("span",{children:["Last activity: ",new Date(v.lastActivity).toLocaleDateString()]})]})]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Cl,{className:"w-5 h-5 text-primary-600"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Cohorts"})]}),f.jsxs("button",{onClick:()=>h(!p),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:[f.jsx(xL,{className:"w-4 h-4"}),"Manage"]})]}),i.length===0?f.jsx("p",{className:"text-gray-500 text-sm",children:"You are not in any cohorts yet."}):f.jsx("div",{className:"space-y-2",children:i.map(E=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-gray-900",children:E.name}),E.description&&f.jsx("div",{className:"text-sm text-gray-500",children:E.description})]}),p&&f.jsx("button",{onClick:()=>A(E.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Leave cohort",children:f.jsx(Cf,{className:"w-4 h-4"})})]},E.id))}),p&&o.length>0&&f.jsxs("div",{className:"mt-4 pt-4 border-t",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Available Cohorts"}),f.jsx("div",{className:"space-y-2",children:o.map(E=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-md",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-gray-900",children:E.name}),E.description&&f.jsx("div",{className:"text-sm text-gray-500",children:E.description})]}),f.jsxs("button",{onClick:()=>_(E.id),disabled:c,className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 transition-colors",children:[f.jsx(Om,{className:"w-4 h-4"}),"Join"]})]},E.id))})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Actions"}),f.jsx("div",{className:"space-y-2",children:f.jsxs("button",{onClick:N,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors font-medium",children:[f.jsx(yL,{className:"w-5 h-5"}),"Sign Out"]})})]})]}),f.jsx(Vr,{role:"student"})]})}function EEe({data:t}){return f.jsx(Mm,{width:"100%",height:300,children:f.jsxs(qA,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[f.jsx(zm,{strokeDasharray:"3 3"}),f.jsx(Vl,{dataKey:"date"}),f.jsx(zl,{domain:[0,100]}),f.jsx(bi,{}),f.jsx(Co,{}),f.jsx(Ol,{type:"monotone",dataKey:"score",stroke:"#3b82f6",strokeWidth:2,name:"Score (%)",dot:{fill:"#3b82f6",r:4}})]})})}function NEe({user:t}){const[e,n]=X.useState(null),[r,i]=X.useState(!0),[a,o]=X.useState([]);X.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:u}=await ke.from("cohort_members").select("cohort_id").eq("student_id",t.id),c=(u==null?void 0:u.map(j=>j.cohort_id))||[];let d=[];if(c.length>0){const{data:j}=await ke.from("assignments").select("*").in("cohort_id",c);d=j||[]}const{data:p}=await ke.from("simulation_runs").select("*, assignments!inner(snapshot_id, case_snapshots!inner(clinical_case))").eq("student_id",t.id).order("submitted_at",{ascending:!1}),h=(p||[]).filter(j=>j.submitted_at),v=(p||[]).filter(j=>!j.submitted_at),y=h.map(j=>{var z;return((z=j.score)==null?void 0:z.overall)||0}).filter(j=>j>0),w=y.length>0?y.reduce((j,z)=>j+z,0)/y.length:0,b=y.length>0?Math.max(...y):0,_=y.slice(0,3),A=y.slice(3,6),N=_.length>0?_.reduce((j,z)=>j+z,0)/_.length:0,E=A.length>0?A.reduce((j,z)=>j+z,0)/A.length:0,P=E>0?(N-E)/E*100:0,I=h.slice(0,10).map(j=>{var re;const z=((re=j.score)==null?void 0:re.overall)||0,K=j.submitted_at||j.created_at;return{date:new Date(K).toLocaleDateString("en-US",{month:"short",day:"numeric"}),score:Math.round(z)}}).reverse();o(I);const O=new Map;h.forEach(j=>{var K;(((K=j.score)==null?void 0:K.sloResults)||[]).forEach(re=>{const ae=re.sloId||"unknown";O.has(ae)||O.set(ae,{achieved:0,total:0,text:re.sloText});const fe=O.get(ae);fe.total++,re.status==="Achieved"&&fe.achieved++})});const R=Array.from(O.entries()).map(([j,z])=>({sloId:j,sloText:z.text,achieved:z.achieved,total:z.total,percentage:z.total>0?z.achieved/z.total*100:0})).sort((j,z)=>z.percentage-j.percentage),D=h.reduce((j,z)=>{if(z.started_at&&z.submitted_at){const K=new Date(z.started_at),re=new Date(z.submitted_at);return j+Math.floor((re.getTime()-K.getTime())/6e4)}return j},0),C=h.slice(0,5).map(j=>{var z;return{date:j.submitted_at||j.created_at,action:"Completed simulation",score:((z=j.score)==null?void 0:z.overall)||0}}),L=new Set(h.map(j=>j.assignment_id)),F=new Set(v.map(j=>j.assignment_id)),$=d.filter(j=>L.has(j.id)).length,V=d.filter(j=>F.has(j.id)&&!L.has(j.id)).length,Y=d.length-$-V,{data:W}=await ke.from("competencies").select("id, domain, level, description"),{data:U}=await ke.from("slo").select("id, competency_id, text"),Q=new Map;U==null||U.forEach(j=>{j.competency_id&&Q.set(j.id,j.competency_id)});const le=new Map;W==null||W.forEach(j=>{le.set(j.id,{competency:j.id,domain:j.domain,level:j.level||null,description:j.description,totalAttempts:0,achievedAttempts:0,assignments:[]})}),h.forEach(j=>{var ye,Se;if(!d.find(me=>me.id===j.assignment_id))return;const K=(ye=j.assignments)==null?void 0:ye.case_snapshots;if(!(K!=null&&K.clinical_case))return;const re=K.clinical_case,ae=re.sloMappings||[],fe=re.title||"Untitled Assignment",xe=((Se=j.score)==null?void 0:Se.sloResults)||[],ue=new Set(xe.filter(me=>me.status==="Achieved").map(me=>me.sloId));ae.forEach(me=>{const je=Q.get(me);if(!je)return;const se=le.get(je);se&&(se.totalAttempts++,ue.has(me)&&se.achievedAttempts++,se.assignments.includes(fe)||se.assignments.push(fe))})});const oe=Array.from(le.values()).filter(j=>j.totalAttempts>0).map(j=>({competency:j.competency,domain:j.domain,level:j.level,description:j.description,progress:j.totalAttempts>0?Math.round(j.achievedAttempts/j.totalAttempts*100):0,totalAttempts:j.totalAttempts,achievedAttempts:j.achievedAttempts,assignments:j.assignments})).sort((j,z)=>z.progress-j.progress);n({totalAssignments:d.length,completedAssignments:$,pendingAssignments:Y,inProgressAssignments:V,totalAttempts:(p==null?void 0:p.length)||0,averageScore:Math.round(w),bestScore:Math.round(b),improvementTrend:Math.round(P*10)/10,sloProgress:R,recentActivity:C,timeSpent:D,competencyProgress:oe})}catch(u){console.error("Error loading analytics:",u)}finally{i(!1)}};if(r)return f.jsx("div",{className:"min-h-screen bg-gray-50 pb-20 flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});if(!e)return f.jsx("div",{className:"min-h-screen bg-gray-50 pb-20 p-4",children:f.jsx("p",{children:"Unable to load analytics data."})});const l=e.totalAssignments>0?e.completedAssignments/e.totalAssignments*100:0;return f.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[f.jsxs("div",{className:"p-4 md:p-6 max-w-6xl mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Analytics"}),f.jsx("p",{className:"text-gray-600",children:"Track your progress and performance"})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(sp,{className:"w-5 h-5 text-primary-600"}),f.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[l.toFixed(0),"%"]})]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Completion Rate"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Qa,{className:"w-5 h-5 text-green-600"}),f.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[e.averageScore,"%"]})]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Average Score"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Tf,{className:"w-5 h-5 text-yellow-600"}),f.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[e.bestScore,"%"]})]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Best Score"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(uc,{className:"w-5 h-5 text-blue-600"}),f.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.timeSpent})]}),f.jsx("div",{className:"text-sm text-gray-600",children:"Minutes Practiced"})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Eo,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Progress Overview"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Completed"}),f.jsxs("span",{className:"text-sm font-semibold",children:[e.completedAssignments,"/",e.totalAssignments]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:f.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all",style:{width:`${l}%`}})})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"In Progress"}),f.jsx("span",{className:"text-sm font-semibold",children:e.inProgressAssignments})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:f.jsx("div",{className:"bg-yellow-600 h-3 rounded-full transition-all",style:{width:`${e.totalAssignments>0?e.inProgressAssignments/e.totalAssignments*100:0}%`}})})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Pending"}),f.jsx("span",{className:"text-sm font-semibold",children:e.pendingAssignments})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:f.jsx("div",{className:"bg-gray-400 h-3 rounded-full transition-all",style:{width:`${e.totalAssignments>0?e.pendingAssignments/e.totalAssignments*100:0}%`}})})]})]})]}),a.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Qa,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Score Trend (Last 10 Attempts)"})]}),f.jsx(EEe,{data:a})]}),e.improvementTrend!==0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Qa,{className:`w-5 h-5 ${e.improvementTrend>0?"text-green-600":"text-red-600"}`}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Performance Trend"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:`text-3xl font-bold ${e.improvementTrend>0?"text-green-600":"text-red-600"}`,children:[e.improvementTrend>0?"+":"",e.improvementTrend.toFixed(1),"%"]}),f.jsxs("div",{className:"text-gray-600",children:[e.improvementTrend>0?"Improving":"Declining"," compared to previous attempts"]})]})]}),e.sloProgress.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(sp,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"SLO Achievement"})]}),f.jsx("div",{className:"space-y-4",children:e.sloProgress.slice(0,5).map((u,c)=>f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:u.sloId}),u.sloText&&f.jsx("div",{className:"text-sm text-gray-600",children:u.sloText})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[u.percentage>=70?f.jsx(No,{className:"w-5 h-5 text-green-600"}):f.jsx(qu,{className:"w-5 h-5 text-yellow-600"}),f.jsxs("span",{className:"font-semibold",children:[u.percentage.toFixed(0),"%"]})]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:`h-2 rounded-full transition-all ${u.percentage>=70?"bg-green-600":"bg-yellow-600"}`,style:{width:`${u.percentage}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Achieved ",u.achieved," out of ",u.total," attempts"]})]},c))})]}),e.recentActivity.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(vz,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activity"})]}),f.jsx("div",{className:"space-y-3",children:e.recentActivity.map((u,c)=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Pf,{className:"w-4 h-4 text-gray-400"}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-gray-900",children:u.action}),f.jsx("div",{className:"text-sm text-gray-500",children:new Date(u.date).toLocaleDateString()})]})]}),u.score!==void 0&&f.jsxs("div",{className:"font-semibold text-primary-600",children:[u.score.toFixed(0),"%"]})]},c))})]}),e.competencyProgress.length>0&&f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(sp,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Competency Progress"})]}),f.jsx("div",{className:"space-y-4",children:e.competencyProgress.slice(0,8).map((u,c)=>f.jsxs("div",{className:"border rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:u.competency}),f.jsx("div",{className:"text-sm text-gray-600 mt-1",children:u.description}),f.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[f.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:u.domain}),u.level&&f.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 rounded",children:u.level})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[u.progress>=70?f.jsx(No,{className:"w-5 h-5 text-green-600"}):u.progress>=50?f.jsx(qu,{className:"w-5 h-5 text-yellow-600"}):f.jsx(qu,{className:"w-5 h-5 text-red-600"}),f.jsxs("span",{className:"font-semibold text-gray-900",children:[u.progress,"%"]})]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:f.jsx("div",{className:`h-2 rounded-full transition-all ${u.progress>=70?"bg-green-600":u.progress>=50?"bg-yellow-600":"bg-red-600"}`,style:{width:`${u.progress}%`}})}),f.jsxs("div",{className:"text-xs text-gray-500",children:["Achieved ",u.achievedAttempts," out of ",u.totalAttempts," attempts",u.assignments.length>0&&f.jsxs("span",{className:"ml-2",children:[" ",u.assignments.length," assignment",u.assignments.length!==1?"s":""]})]})]},c))})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Status"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Total Assignments"}),f.jsx("span",{className:"font-semibold",children:e.totalAssignments})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Completed"}),f.jsx("span",{className:"font-semibold text-green-600",children:e.completedAssignments})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"In Progress"}),f.jsx("span",{className:"font-semibold text-yellow-600",children:e.inProgressAssignments})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Pending"}),f.jsx("span",{className:"font-semibold text-gray-600",children:e.pendingAssignments})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Stats"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Total Attempts"}),f.jsx("span",{className:"font-semibold",children:e.totalAttempts})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Average Score"}),f.jsxs("span",{className:"font-semibold text-primary-600",children:[e.averageScore,"%"]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Best Score"}),f.jsxs("span",{className:"font-semibold text-yellow-600",children:[e.bestScore,"%"]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Time Practiced"}),f.jsxs("span",{className:"font-semibold text-blue-600",children:[e.timeSpent," min"]})]})]})]})]})]}),f.jsx(Vr,{role:"student"})]})}function k7({data:t}){return!t||t.length===0?f.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:f.jsx("p",{children:"No performance data available"})}):f.jsx(Mm,{width:"100%",height:300,children:f.jsxs(qA,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[f.jsx(zm,{strokeDasharray:"3 3"}),f.jsx(Vl,{dataKey:"date",angle:-45,textAnchor:"end",height:80}),f.jsx(zl,{domain:[0,100]}),f.jsx(bi,{formatter:e=>[`${e.toFixed(1)}%`,"Average Score"],labelFormatter:e=>`Date: ${e}`}),f.jsx(Co,{}),f.jsx(Ol,{type:"monotone",dataKey:"averageScore",stroke:"#3b82f6",strokeWidth:2,name:"Average Score",dot:{fill:"#3b82f6",r:4},activeDot:{r:6}})]})})}function I7({entries:t,maxDisplay:e=20}){if(!t||t.length===0)return f.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:f.jsx("p",{children:"No student performance data available"})});const n=t.slice(0,e),r=a=>a===1?f.jsx(jz,{className:"w-6 h-6 text-yellow-500"}):a===2?f.jsx(Ez,{className:"w-6 h-6 text-gray-400"}):a===3?f.jsx(Tf,{className:"w-6 h-6 text-amber-600"}):f.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-gray-500 font-bold",children:a}),i=a=>a===1?"bg-yellow-50 border-yellow-200":a===2?"bg-gray-50 border-gray-200":a===3?"bg-amber-50 border-amber-200":"bg-white border-gray-200";return f.jsxs("div",{className:"space-y-2",children:[n.map((a,o)=>{const s=o+1;return f.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border-2 ${i(s)} transition-all hover:shadow-md`,children:[f.jsx("div",{className:"flex-shrink-0",children:r(s)}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"font-semibold text-gray-900 truncate",children:a.name}),f.jsx("div",{className:"text-sm text-gray-600 truncate",children:a.email})]}),f.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Avg Score"}),f.jsxs("div",{className:"text-lg font-bold text-primary-600",children:[a.averageScore.toFixed(1),"%"]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Attempts"}),f.jsx("div",{className:"text-lg font-semibold text-gray-700",children:a.totalAttempts})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-xs text-gray-500",children:"Best"}),f.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[a.bestScore.toFixed(1),"%"]})]})]})]},a.id)}),t.length>e&&f.jsxs("div",{className:"text-center text-sm text-gray-500 pt-2",children:["Showing top ",e," of ",t.length," students"]})]})}function TEe({user:t}){const e=Ts(),[n,r]=X.useState({totalFaculty:0,totalStudents:0,activeStations:0,coverage:0}),[i,a]=X.useState(!0),[o,s]=X.useState([]),[l,u]=X.useState([]),[c,d]=X.useState(!0);X.useEffect(()=>{h(),v()},[]);const p=async()=>{try{const{data:y}=await ke.from("users").select("id, name, email, role, created_at"),{data:w}=await ke.from("stations").select("id, title, created_at"),{data:b}=await ke.from("case_snapshots").select("id, approved_at"),{data:_}=await ke.from("assignments").select("id, created_at"),{data:A}=await ke.from("simulation_runs").select("id, score, submitted_at").not("submitted_at","is",null),{data:N}=await ke.from("competencies").select("id, domain, level"),E=(y==null?void 0:y.filter($=>$.role==="faculty").length)||0,P=(y==null?void 0:y.filter($=>$.role==="student").length)||0,I=(A==null?void 0:A.filter($=>$.submitted_at))||[],O=I.map($=>{var V;return((V=$.score)==null?void 0:V.overall)||0}).filter($=>$>0),R=O.length>0?O.reduce(($,V)=>$+V,0)/O.length:0,D={generatedAt:new Date().toISOString(),summary:{totalUsers:(y==null?void 0:y.length)||0,totalFaculty:E,totalStudents:P,totalStations:(w==null?void 0:w.length)||0,totalSnapshots:(b==null?void 0:b.length)||0,totalAssignments:(_==null?void 0:_.length)||0,totalCompletions:I.length,averageScore:Math.round(R),totalCompetencies:(N==null?void 0:N.length)||0},userBreakdown:{faculty:y==null?void 0:y.filter($=>$.role==="faculty").map($=>({name:$.name,email:$.email,joined:$.created_at})),students:y==null?void 0:y.filter($=>$.role==="student").map($=>({name:$.name,email:$.email,joined:$.created_at}))},performance:{totalAttempts:I.length,averageScore:Math.round(R),completionRate:_&&_.length>0?Math.round(I.length/_.length*100):0}},C=new Blob([JSON.stringify(D,null,2)],{type:"application/json"}),L=URL.createObjectURL(C),F=document.createElement("a");F.href=L,F.download=`system-report-${new Date().toISOString().split("T")[0]}.json`,F.click(),e.success("Report exported successfully!")}catch(y){e.error("Error exporting report: "+(y.message||"Unknown error")),console.error("Error exporting report:",y)}},h=async()=>{try{const{data:y}=await ke.from("users").select("role"),w=(y==null?void 0:y.filter(C=>C.role==="faculty").length)||0,b=(y==null?void 0:y.filter(C=>C.role==="student").length)||0,{data:_}=await ke.from("stations").select("id"),{data:A}=await ke.from("competencies").select("id"),{data:N}=await ke.from("slo").select("id, competency_id"),E=new Map;N==null||N.forEach(C=>{C.competency_id&&E.set(C.id,C.competency_id)});const{data:P}=await ke.from("case_snapshots").select("clinical_case"),I=new Set;P==null||P.forEach(C=>{var F;(((F=C.clinical_case)==null?void 0:F.sloMappings)||[]).forEach($=>{const V=E.get($);V&&I.add(V)})});const O=(A==null?void 0:A.length)||0,R=I.size,D=O>0?Math.round(R/O*100):0;r({totalFaculty:w,totalStudents:b,activeStations:(_==null?void 0:_.length)||0,coverage:D})}catch(y){console.error("Error loading stats:",y)}finally{a(!1)}},v=async()=>{try{d(!0);const{data:y,error:w}=await ke.from("simulation_runs").select("id, score, submitted_at, student_id").not("submitted_at","is",null).order("submitted_at",{ascending:!1}).limit(1e3);if(w)throw w;const b=new Map;y==null||y.forEach(P=>{var D,C;const I=(D=P.submitted_at)==null?void 0:D.split("T")[0];if(!I)return;const O=(C=P.score)==null?void 0:C.overall;if(!O||O<=0)return;b.has(I)||b.set(I,{scores:[],students:new Set});const R=b.get(I);R.scores.push(O),R.students.add(P.student_id)});const _=Array.from(b.entries()).map(([P,I])=>({dateKey:P,date:new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric"}),averageScore:I.scores.reduce((O,R)=>O+R,0)/I.scores.length,totalStudents:I.students.size})).sort((P,I)=>P.dateKey.localeCompare(I.dateKey)).slice(-30).map(({dateKey:P,...I})=>I);s(_);const A=new Map;y==null||y.forEach(P=>{var O;const I=(O=P.score)==null?void 0:O.overall;!I||I<=0||(A.has(P.student_id)||A.set(P.student_id,{scores:[],name:"",email:""}),A.get(P.student_id).scores.push(I))});const N=Array.from(A.keys());if(N.length>0){const{data:P}=await ke.from("users").select("id, name, email").eq("role","student").in("id",N);P==null||P.forEach(I=>{const O=A.get(I.id);O&&(O.name=I.name,O.email=I.email)})}const E=Array.from(A.entries()).map(([P,I])=>{const O=I.scores.reduce((D,C)=>D+C,0)/I.scores.length,R=Math.max(...I.scores);return{id:P,name:I.name||"Unknown",email:I.email||"",averageScore:O,totalAttempts:I.scores.length,bestScore:R}}).filter(P=>P.name!=="Unknown").sort((P,I)=>I.averageScore!==P.averageScore?I.averageScore-P.averageScore:I.totalAttempts-P.totalAttempts).slice(0,50);u(E)}catch(y){console.error("Error loading performance data:",y)}finally{d(!1)}};return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"admin"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto",children:f.jsxs("div",{className:"p-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Admin Dashboard"}),i?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Total Faculty"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.totalFaculty})]}),f.jsx(Cl,{className:"w-8 h-8 text-blue-600"})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.totalStudents})]}),f.jsx(Cl,{className:"w-8 h-8 text-green-600"})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Active Stations"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:n.activeStations})]}),f.jsx(Qi,{className:"w-8 h-8 text-purple-600"})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:"CBDC Coverage"}),f.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[n.coverage,"%"]})]}),f.jsx(Eo,{className:"w-8 h-8 text-orange-600"})]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Student Performance Trend"}),c?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsx(k7,{data:o})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Student Leaderboard"}),c?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsx(I7,{entries:l,maxDisplay:20})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),f.jsx("div",{className:"flex gap-4",children:f.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:[f.jsx(_d,{className:"w-4 h-4"}),"Export System Report"]})})]})]})]})})]})}function PEe({isOpen:t,onClose:e,onSave:n}){const[r,i]=X.useState({id:"",domain:"",level:"",description:""}),[a,o]=X.useState(!1),[s,l]=X.useState(null);if(!t)return null;const u=async c=>{if(c.preventDefault(),l(null),!r.id.trim()||!r.domain.trim()||!r.description.trim()){l("ID, Domain, and Description are required");return}o(!0);try{await n({id:r.id.trim(),domain:r.domain.trim(),level:r.level.trim()||null,description:r.description.trim()}),i({id:"",domain:"",level:"",description:""}),e()}catch(d){l(d.message||"Failed to save competency")}finally{o(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Competency"}),f.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx(Cf,{className:"w-5 h-5"})})]}),f.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[s&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ID ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",value:r.id,onChange:c=>i({...r,id:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Domain ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",value:r.domain,onChange:c=>i({...r,domain:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),f.jsx("input",{type:"text",value:r.level,onChange:c=>i({...r,level:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Optional"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("textarea",{value:r.description,onChange:c=>i({...r,description:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,required:!0})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?"Saving...":"Save"})]})]})]})})}function CEe({isOpen:t,onClose:e,competency:n,onSave:r}){const[i,a]=X.useState({id:"",domain:"",level:"",description:""}),[o,s]=X.useState(!1),[l,u]=X.useState(null);if(X.useEffect(()=>{n&&a({id:n.id,domain:n.domain,level:n.level||"",description:n.description})},[n]),!t||!n)return null;const c=async d=>{if(d.preventDefault(),u(null),!i.domain.trim()||!i.description.trim()){u("Domain and Description are required");return}s(!0);try{await r({id:i.id,domain:i.domain.trim(),level:i.level.trim()||null,description:i.description.trim()}),e()}catch(p){u(p.message||"Failed to update competency")}finally{s(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Competency"}),f.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx(Cf,{className:"w-5 h-5"})})]}),f.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[l&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID"}),f.jsx("input",{type:"text",value:i.id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ID cannot be changed"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Domain ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",value:i.domain,onChange:d=>a({...i,domain:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),f.jsx("input",{type:"text",value:i.level,onChange:d=>a({...i,level:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Optional"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("textarea",{value:i.description,onChange:d=>a({...i,description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,required:!0})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Saving...":"Update"})]})]})]})})}function kEe({user:t}){const e=Ts(),[n,r]=X.useState([]),[i,a]=X.useState(!0),[o,s]=X.useState(!1),[l,u]=X.useState(null);X.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:y,error:w}=await ke.from("competencies").select("*").order("id");if(w)throw w;r(y||[])}catch(y){console.error("Error loading competencies:",y)}finally{a(!1)}},d=()=>{const y=[["ID","Domain","Level","Description"],...n.map(A=>[A.id,A.domain,A.level||"",A.description])].map(A=>A.map(N=>`"${N}"`).join(",")).join(`
`),w=new Blob([y],{type:"text/csv"}),b=URL.createObjectURL(w),_=document.createElement("a");_.href=b,_.download="cbdc-competencies.csv",_.click()},p=async y=>{const{error:w}=await ke.from("competencies").insert([y]);if(w)throw w;await c()},h=async y=>{const{error:w}=await ke.from("competencies").update({domain:y.domain,level:y.level,description:y.description}).eq("id",y.id);if(w)throw w;await c()},v=async y=>{if(!confirm(`Are you sure you want to delete competency "${y}"? This action cannot be undone.`))return;const{error:w}=await ke.from("competencies").delete().eq("id",y);if(w){e.error("Error deleting competency: "+w.message);return}await c()};return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"admin"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"CBDC Manager"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[f.jsx(_d,{className:"w-4 h-4"}),"Export CSV"]}),f.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:[f.jsx(Om,{className:"w-4 h-4"}),"Add Competency"]})]})]}),i?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Domain"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(y=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:y.id}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.domain}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.level||"-"}),f.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:y.description}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>u(y),className:"text-primary-600 hover:text-primary-900 mr-4",title:"Edit competency",children:f.jsx(OS,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>v(y.id),className:"text-red-600 hover:text-red-900",title:"Delete competency",children:f.jsx(Oz,{className:"w-4 h-4"})})]})]},y.id))})]})})]})}),f.jsx(PEe,{isOpen:o,onClose:()=>s(!1),onSave:p}),f.jsx(CEe,{isOpen:l!==null,onClose:()=>u(null),competency:l,onSave:h})]})}function IEe({isOpen:t,onClose:e,user:n,onSave:r}){const[i,a]=X.useState({name:"",email:"",role:"student"}),[o,s]=X.useState(!1),[l,u]=X.useState(null);if(X.useEffect(()=>{n&&a({name:n.name,email:n.email,role:n.role})},[n]),!t||!n)return null;const c=async d=>{if(d.preventDefault(),u(null),!i.name.trim()||!i.email.trim()){u("Name and Email are required");return}s(!0);try{await r({id:n.id,name:i.name.trim(),email:i.email.trim(),role:i.role}),e()}catch(p){u(p.message||"Failed to update user")}finally{s(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit User"}),f.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx(Cf,{className:"w-5 h-5"})})]}),f.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[l&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",value:i.name,onChange:d=>a({...i,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"email",value:i.email,onChange:d=>a({...i,email:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsxs("select",{value:i.role,onChange:d=>a({...i,role:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[f.jsx("option",{value:"student",children:"Student"}),f.jsx("option",{value:"faculty",children:"Faculty"}),f.jsx("option",{value:"admin",children:"Admin"})]})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Saving...":"Update"})]})]})]})})}function OEe({user:t}){const[e,n]=X.useState([]),[r,i]=X.useState(!0),[a,o]=X.useState(""),[s,l]=X.useState(null);X.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:h,error:v}=await ke.from("users").select("*").order("created_at",{ascending:!1});if(v)throw v;n(h||[])}catch(h){console.error("Error loading users:",h)}finally{i(!1)}},c=e.filter(h=>h.name.toLowerCase().includes(a.toLowerCase())||h.email.toLowerCase().includes(a.toLowerCase())),d=h=>{switch(h){case"admin":return"bg-red-100 text-red-800";case"faculty":return"bg-blue-100 text-blue-800";case"student":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},p=async h=>{const{error:v}=await ke.from("users").update({name:h.name,email:h.email,role:h.role}).eq("id",h.id);if(v)throw v;await u()};return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"admin"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto",children:f.jsxs("div",{className:"p-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"User Management"}),f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"relative",children:[f.jsx(jS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),f.jsx("input",{type:"text",placeholder:"Search users...",value:a,onChange:h=>o(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),r?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(h=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx(To,{className:"w-5 h-5 text-gray-400 mr-2"}),f.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.name})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h.email}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${d(h.role)}`,children:h.role})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(h.created_at).toLocaleDateString()}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:f.jsx("button",{onClick:()=>l(h),className:"text-primary-600 hover:text-primary-900",title:"Edit user",children:f.jsx(OS,{className:"w-4 h-4"})})})]},h.id))})]})})]})}),f.jsx(IEe,{isOpen:s!==null,onClose:()=>l(null),user:s,onSave:p})]})}function jEe({user:t}){const e=Ts(),[n,r]=X.useState([]),[i,a]=X.useState(null),[o,s]=X.useState([]),[l,u]=X.useState([]),[c,d]=X.useState(!0);X.useEffect(()=>{p(),y()},[]);const p=async()=>{try{const{data:w,error:b}=await ke.from("reports").select("*").order("created_at",{ascending:!1}).limit(10);if(b)throw b;r(w||[])}catch(w){console.error("Error loading reports:",w)}},h=async w=>{a(w);try{const b=new Date;let _,A=new Date(b);if(w==="quarterly"){const j=Math.floor(b.getMonth()/3);_=new Date(b.getFullYear(),j*3,1)}else _=new Date(b.getFullYear(),0,1);const{data:N}=await ke.from("competencies").select("*"),{data:E}=await ke.from("stations").select("id, title, blueprint"),{data:P}=await ke.from("case_snapshots").select("id, clinical_case, approved_at").gte("approved_at",_.toISOString()).lte("approved_at",A.toISOString()),{data:I}=await ke.from("assignments").select("id, snapshot_id, created_at").gte("created_at",_.toISOString()).lte("created_at",A.toISOString()),O=(I==null?void 0:I.map(j=>j.id))||[],{data:R}=await ke.from("simulation_runs").select("id, score, submitted_at").in("assignment_id",O).not("submitted_at","is",null),D=new Set;P==null||P.forEach(j=>{var K;(((K=j.clinical_case)==null?void 0:K.sloMappings)||[]).forEach(re=>{D.add(re)})});const C=(N==null?void 0:N.length)||0,L=D.size,F=C>0?Math.round(L/C*100):0,$=(R==null?void 0:R.filter(j=>j.submitted_at))||[],V=$.map(j=>{var z;return((z=j.score)==null?void 0:z.overall)||0}).filter(j=>j>0),Y=V.length>0?V.reduce((j,z)=>j+z,0)/V.length:0,W={summary:{period:w==="quarterly"?"Quarterly":"Annual",periodStart:_.toISOString().split("T")[0],periodEnd:A.toISOString().split("T")[0],generatedAt:new Date().toISOString()},metrics:{totalCompetencies:C,coveredCompetencies:L,coverage:F,totalStations:(E==null?void 0:E.length)||0,totalSnapshots:(P==null?void 0:P.length)||0,totalAssignments:(I==null?void 0:I.length)||0,totalCompletions:$.length,averageScore:Math.round(Y)},stationDistribution:{total:(E==null?void 0:E.length)||0,bySubject:{}},studentPerformance:{totalAttempts:$.length,averageScore:Math.round(Y),completionRate:I&&I.length>0?Math.round($.length/I.length*100):0},sloAchievement:{total:0,achieved:0,percentage:0}},{error:U}=await ke.from("reports").insert([{type:w,period_start:_.toISOString().split("T")[0],period_end:A.toISOString().split("T")[0],report_data:W,generated_by:t.id}]);if(U)throw U;const Q=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),le=URL.createObjectURL(Q),oe=document.createElement("a");oe.href=le,oe.download=`${w}-report-${_.toISOString().split("T")[0]}.json`,oe.click(),await p(),e.success("Report generated successfully!")}catch(b){e.error("Error generating report: "+(b.message||"Unknown error")),console.error("Error generating report:",b)}finally{a(null)}},v=w=>{try{const b=w.report_data;let _=`Compliance Report
`;_+=`Type,${w.type}
`,_+=`Period,${w.period_start} to ${w.period_end}
`,_+=`Generated,${new Date(w.created_at).toLocaleString()}

`,_+=`Metrics
`,_+=`Metric,Value
`,b.metrics&&(_+=`CBDC Coverage,${b.metrics.coverage}%
`,_+=`Total Stations,${b.metrics.totalStations}
`,_+=`Total Snapshots,${b.metrics.totalSnapshots}
`,_+=`Total Assignments,${b.metrics.totalAssignments}
`,_+=`Total Completions,${b.metrics.totalCompletions}
`,_+=`Average Score,${b.metrics.averageScore}%
`),_+=`
Student Performance
`,_+=`Metric,Value
`,b.studentPerformance&&(_+=`Total Attempts,${b.studentPerformance.totalAttempts}
`,_+=`Average Score,${b.studentPerformance.averageScore}%
`,_+=`Completion Rate,${b.studentPerformance.completionRate}%
`);const A=new Blob([_],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(A),E=document.createElement("a");E.href=N,E.download=`${w.type}-report-${w.period_start}.csv`,E.click(),URL.revokeObjectURL(N),e.success("CSV exported successfully!")}catch(b){e.error("Error exporting CSV: "+(b.message||"Unknown error"))}},y=async()=>{try{d(!0);const{data:w,error:b}=await ke.from("simulation_runs").select("id, score, submitted_at, student_id").not("submitted_at","is",null).order("submitted_at",{ascending:!1}).limit(1e3);if(b)throw b;const _=new Map;w==null||w.forEach(I=>{var C,L;const O=(C=I.submitted_at)==null?void 0:C.split("T")[0];if(!O)return;const R=(L=I.score)==null?void 0:L.overall;if(!R||R<=0)return;_.has(O)||_.set(O,{scores:[],students:new Set});const D=_.get(O);D.scores.push(R),D.students.add(I.student_id)});const A=Array.from(_.entries()).map(([I,O])=>({dateKey:I,date:new Date(I).toLocaleDateString("en-US",{month:"short",day:"numeric"}),averageScore:O.scores.reduce((R,D)=>R+D,0)/O.scores.length,totalStudents:O.students.size})).sort((I,O)=>I.dateKey.localeCompare(O.dateKey)).slice(-30).map(({dateKey:I,...O})=>O);s(A);const N=new Map;w==null||w.forEach(I=>{var R;const O=(R=I.score)==null?void 0:R.overall;!O||O<=0||(N.has(I.student_id)||N.set(I.student_id,{scores:[],name:"",email:""}),N.get(I.student_id).scores.push(O))});const E=Array.from(N.keys());if(E.length>0){const{data:I}=await ke.from("users").select("id, name, email").eq("role","student").in("id",E);I==null||I.forEach(O=>{const R=N.get(O.id);R&&(R.name=O.name,R.email=O.email)})}const P=Array.from(N.entries()).map(([I,O])=>{const R=O.scores.reduce((C,L)=>C+L,0)/O.scores.length,D=Math.max(...O.scores);return{id:I,name:O.name||"Unknown",email:O.email||"",averageScore:R,totalAttempts:O.scores.length,bestScore:D}}).filter(I=>I.name!=="Unknown").sort((I,O)=>O.averageScore!==I.averageScore?O.averageScore-I.averageScore:O.totalAttempts-I.totalAttempts).slice(0,50);u(P)}catch(w){console.error("Error loading performance data:",w)}finally{d(!1)}};return f.jsxs("div",{className:"flex h-screen bg-gray-50",children:[f.jsx(Ti,{role:"admin"}),f.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto",children:f.jsxs("div",{className:"p-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Compliance Reports"}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Student Performance Trend"}),c?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsx(k7,{data:o})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Student Leaderboard"}),c?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):f.jsx(I7,{entries:l,maxDisplay:20})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Quarterly Report"}),f.jsx(Qi,{className:"w-8 h-8 text-blue-600"})]}),f.jsx("p",{className:"text-gray-600 mb-4",children:"Generate a comprehensive quarterly compliance report covering all competencies and stations."}),f.jsx("button",{onClick:()=>h("quarterly"),disabled:i!==null,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i==="quarterly"?f.jsxs(f.Fragment,{children:[f.jsx(Bd,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):f.jsxs(f.Fragment,{children:[f.jsx(_d,{className:"w-4 h-4"}),"Generate Quarterly Report"]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Annual Report"}),f.jsx(Qa,{className:"w-8 h-8 text-green-600"})]}),f.jsx("p",{className:"text-gray-600 mb-4",children:"Generate an annual compliance report with year-over-year trends and analytics."}),f.jsx("button",{onClick:()=>h("annual"),disabled:i!==null,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i==="annual"?f.jsxs(f.Fragment,{children:[f.jsx(Bd,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):f.jsxs(f.Fragment,{children:[f.jsx(_d,{className:"w-4 h-4"}),"Generate Annual Report"]})})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Report History"}),n.length===0?f.jsx("p",{className:"text-gray-600",children:"No reports generated yet."}):f.jsx("div",{className:"space-y-3",children:n.map(w=>{var b;return f.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`p-2 rounded ${w.type==="quarterly"?"bg-blue-100":"bg-green-100"}`,children:w.type==="quarterly"?f.jsx(Qi,{className:"w-5 h-5 text-blue-600"}):f.jsx(Qa,{className:"w-5 h-5 text-green-600"})}),f.jsxs("div",{children:[f.jsxs("div",{className:"font-medium text-gray-900 capitalize",children:[w.type," Report"]}),f.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2 mt-1",children:[f.jsx(Pf,{className:"w-4 h-4"}),new Date(w.period_start).toLocaleDateString()," - ",new Date(w.period_end).toLocaleDateString()]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"text-sm text-gray-500",children:new Date(w.created_at).toLocaleDateString()}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>{const _=new Blob([JSON.stringify(w.report_data,null,2)],{type:"application/json"}),A=URL.createObjectURL(_),N=document.createElement("a");N.href=A,N.download=`${w.type}-report-${w.period_start}.json`,N.click()},className:"p-2 text-primary-600 hover:bg-primary-50 rounded transition-colors",title:"Download JSON",children:f.jsx(_d,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>v(w),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Export to CSV",children:f.jsx(bz,{className:"w-4 h-4"})})]})]})]}),((b=w.report_data)==null?void 0:b.metrics)&&f.jsxs("div",{className:"mt-3 pt-3 border-t grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-gray-500",children:"Coverage"}),f.jsxs("div",{className:"font-semibold text-gray-900",children:[w.report_data.metrics.coverage,"%"]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-gray-500",children:"Stations"}),f.jsx("div",{className:"font-semibold text-gray-900",children:w.report_data.metrics.totalStations})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-gray-500",children:"Completions"}),f.jsx("div",{className:"font-semibold text-gray-900",children:w.report_data.metrics.totalCompletions})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-gray-500",children:"Avg Score"}),f.jsxs("div",{className:"font-semibold text-gray-900",children:[w.report_data.metrics.averageScore,"%"]})]})]})]},w.id)})})]})]})}),f.jsx(kl,{toasts:e.toasts,onClose:e.removeToast})]})}function REe(){return f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})})}class LEe extends X.Component{constructor(){super(...arguments);tn(this,"state",{hasError:!1,error:null});tn(this,"handleReset",()=>{this.setState({hasError:!1,error:null}),window.location.href="/"})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){var n;return this.state.hasError?f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[f.jsx(n1,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),f.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),f.jsx("p",{className:"text-gray-600 mb-4",children:((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred"}),f.jsxs("button",{onClick:this.handleReset,className:"flex items-center justify-center gap-2 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors mx-auto",children:[f.jsx(Tz,{className:"w-4 h-4"}),"Return to Home"]})]})}):this.props.children}}function MEe({authUserId:t,authUserEmail:e,authUserName:n,onComplete:r}){const[i,a]=X.useState(n||""),[o,s]=X.useState("student"),[l,u]=X.useState([]),[c,d]=X.useState([]),[p,h]=X.useState(!1),[v,y]=X.useState(!1),[w,b]=X.useState(null);X.useEffect(()=>{o==="student"&&_()},[o]);const _=async()=>{h(!0);try{const{data:N,error:E}=await ke.from("cohorts").select("id, name, description").order("name");if(E)throw E;d(N||[])}catch(N){console.error("Error loading cohorts:",N)}finally{h(!1)}},A=async N=>{N.preventDefault(),y(!0),b(null);try{const{error:E}=await ke.from("users").insert({id:t,name:i.trim()||(e==null?void 0:e.split("@")[0])||"User",email:e||"",role:o}).select().single();if(E)throw E;if(o==="student"&&l.length>0){const P=l.map(O=>({cohort_id:O,student_id:t})),{error:I}=await ke.from("cohort_members").insert(P);I&&console.error("Error adding student to cohorts:",I)}r()}catch(E){b(E.message||"An error occurred while completing your profile"),y(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-primary-50 to-gray-100 px-4 py-8",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 md:p-10 w-full max-w-md border-2 border-gray-200",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("img",{src:"https://raw.githubusercontent.com/akashmanjunath2505/public/main/KAYA.png",alt:"Kaya Logo",className:"h-16 md:h-20 w-auto object-contain"})}),f.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),f.jsx("p",{className:"text-gray-600 mt-2 text-sm md:text-base",children:"Please provide the following information to complete your account setup"})]}),f.jsxs("form",{onSubmit:A,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",value:i,onChange:N=>a(N.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 placeholder-gray-400",placeholder:"Enter your full name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),f.jsx("input",{type:"email",value:e||"",disabled:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email is set from your OAuth account"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsxs("select",{value:o,onChange:N=>{s(N.target.value),u([])},required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-gray-900 bg-white",children:[f.jsx("option",{value:"student",children:"Student"}),f.jsx("option",{value:"faculty",children:"Faculty"}),f.jsx("option",{value:"admin",children:"Admin"})]})]}),o==="student"&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Cohorts (Optional)"}),p?f.jsx("div",{className:"text-sm text-gray-500",children:"Loading cohorts..."}):c.length===0?f.jsx("div",{className:"text-sm text-gray-500 p-3 bg-gray-50 rounded-md",children:"No cohorts available. You can join cohorts later from your profile settings."}):f.jsx("div",{className:"border border-gray-300 rounded-md max-h-40 overflow-y-auto p-2",children:c.map(N=>f.jsxs("label",{className:"flex items-start gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:l.includes(N.id),onChange:E=>{E.target.checked?u([...l,N.id]):u(l.filter(P=>P!==N.id))},className:"mt-1"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name}),N.description&&f.jsx("div",{className:"text-xs text-gray-500",children:N.description})]})]},N.id))}),l.length>0&&f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.length," cohort",l.length!==1?"s":""," selected"]})]}),w&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:w}),f.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 text-white py-3 px-6 rounded-xl hover:from-primary-700 hover:to-primary-800 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 font-bold text-base md:text-lg shadow-lg transition-all transform hover:scale-[1.02]",children:v?"Completing Profile...":"Complete Profile"})]})]})})}const FO={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GEMINI_API_KEY:"AIzaSyCkJEDZIXsL6sLcAnAi2EE-WbzOIX6gKWY",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtpdmN1c2ZzcHBqeWFsYmdxdHh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4NjI2NjYsImV4cCI6MjA3ODQzODY2Nn0.DMugE2X3gBvcRBXt-NqWceWQB2Vmi9kbavEE6MEjAmI",VITE_SUPABASE_URL:"https://kivcusfsppjyalbgqtxy.supabase.co"};function DEe(){const[t,e]=X.useState(null),[n,r]=X.useState(!0),[i,a]=X.useState(!1),[o,s]=X.useState(null);X.useEffect(()=>{ke.auth.getSession().then(({data:{session:h}})=>{h?l():r(!1)});const{data:{subscription:p}}=ke.auth.onAuthStateChange((h,v)=>{v?l():(e(null),r(!1))});return()=>p.unsubscribe()},[]);const l=async()=>{var p,h,v,y,w,b;try{const{data:{user:_}}=await ke.auth.getUser();if(!_){r(!1);return}const{data:A,error:N}=await ke.from("users").select("*").eq("id",_.id).single();if(N&&N.code==="PGRST116")if(((p=_.identities)==null?void 0:p.some(P=>P.provider!=="email"))||!1){s({id:_.id,email:_.email,name:((h=_.user_metadata)==null?void 0:h.name)||((v=_.user_metadata)==null?void 0:v.full_name)}),a(!0),r(!1);return}else{const{data:P}=await ke.from("users").insert({id:_.id,name:((y=_.user_metadata)==null?void 0:y.name)||((w=_.email)==null?void 0:w.split("@")[0])||"User",email:_.email,role:((b=_.user_metadata)==null?void 0:b.role)||"student"}).select().single();P&&e(P)}else A&&(e(A),a(!1))}catch(_){console.error("Error loading user:",_)}finally{r(!1)}},u=()=>{a(!1),s(null),l()};if(n)return f.jsx(REe,{});if(i&&o)return f.jsx(MEe,{authUserId:o.id,authUserEmail:o.email,authUserName:o.name,onComplete:u});if(!t)return f.jsx(mz,{onAuthSuccess:l});const d=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"].filter(p=>!FO[p]||FO[p].trim()==="");return d.length>0?f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Configuration Error"}),f.jsx("p",{className:"text-gray-700 mb-4",children:"The following required environment variables are missing:"}),f.jsx("ul",{className:"list-disc list-inside text-gray-600 mb-4 space-y-1",children:d.map(p=>f.jsx("li",{children:p},p))}),f.jsx("p",{className:"text-sm text-gray-500",children:"Please set these variables in your .env file and restart the application."})]})}):f.jsx(LEe,{children:f.jsxs(V9,{children:[f.jsxs(M9,{children:[t.role==="faculty"&&f.jsxs(f.Fragment,{children:[f.jsx(lr,{path:"/dashboard",element:f.jsx(Rz,{user:t})}),f.jsx(lr,{path:"/create",element:f.jsx(Mz,{user:t})}),f.jsx(lr,{path:"/review/:stationId",element:f.jsx(cH,{user:t})}),f.jsx(lr,{path:"/assign/:snapshotId",element:f.jsx(dH,{user:t})}),f.jsx(lr,{path:"/library",element:f.jsx(fH,{user:t})}),f.jsx(lr,{path:"/analytics",element:f.jsx(J0e,{user:t})}),f.jsx(lr,{path:"/profile",element:f.jsx(Y0e,{user:t})})]}),t.role==="student"&&f.jsxs(f.Fragment,{children:[f.jsx(lr,{path:"/home",element:f.jsx(X3,{user:t})}),f.jsx(lr,{path:"/assigned",element:f.jsx(X3,{user:t})}),f.jsx(lr,{path:"/analytics",element:f.jsx(NEe,{user:t})}),f.jsx(lr,{path:"/simulation/:assignmentId",element:f.jsx(A5e,{user:t})}),f.jsx(lr,{path:"/debrief/:runId",element:f.jsx(_Ee,{user:t})}),f.jsx(lr,{path:"/results",element:f.jsx(SEe,{user:t})}),f.jsx(lr,{path:"/profile",element:f.jsx(AEe,{user:t})})]}),t.role==="admin"&&f.jsxs(f.Fragment,{children:[f.jsx(lr,{path:"/admin/dashboard",element:f.jsx(TEe,{user:t})}),f.jsx(lr,{path:"/admin/reports",element:f.jsx(jEe,{user:t})}),f.jsx(lr,{path:"/admin/cbdc",element:f.jsx(kEe,{user:t})}),f.jsx(lr,{path:"/admin/users",element:f.jsx(OEe,{user:t})})]}),f.jsx(lr,{path:"/",element:f.jsx(R9,{to:t.role==="faculty"?"/dashboard":t.role==="admin"?"/admin/dashboard":"/home",replace:!0})})]}),t&&f.jsx(Vr,{role:t.role})]})})}gw.createRoot(document.getElementById("root")).render(f.jsx(ce.StrictMode,{children:f.jsx(DEe,{})}));export{un as _,Tg as c,dn as g};
